!function(){function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,u,i=[],l=!0,c=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=a.call(t)).done)&&(i.push(r.value),i.length!==n);l=!0);}catch(s){c=!0,o=s}finally{try{if(!l&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(c)throw o}}return i}}(e,n)||t(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,n){if(e){if("string"==typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}System.register(["./chakra-legacy-c35d0d84.js","./index-legacy-3f6c9ae7.js","./react-legacy-2ad49228.js","./use-palette-legacy-cf6a69a8.js","./rmg-fields-legacy-c1de50b3.js"],(function(t,r){"use strict";var o,a,u,i,l,c,s,d,f,m,p,v,g,h,y,C,b,j;return{setters:[function(e){o=e.j,a=e.$,u=e.a6,i=e._,l=e.f},function(e){c=e.e,s=e.U,d=e.M,f=e.b,m=e.z,p=e.r,v=e.E,g=e.f},function(e){h=e.u,y=e.r,C=e.o},function(e){b=e.u},function(e){j=e.R}],execute:function(){t("default",(function(){var n=e(C(),1)[0],t=n.get("parentId"),r=n.get("parentComponent"),a=e(y.useState(),2),u=a[0],i=a[1],l=e(y.useState(),2),c=l[0],s=l[1],d=y.useRef();y.useEffect((function(){var e=new BroadcastChannel(w+t);d.current=e,p.event(v.APP_CLIP_VIEW_OPENED,{parentComponent:r}),e.onmessage=function(n){var t=n.data,r=t.event,o=t.data;console.log("[".concat(e.name,"] Received event from parent component:"),r),"OPEN"===r&&(i(crypto.randomUUID()),s(o))},console.log("[".concat(e.name,"] App clip connection established, parentComponent=").concat(r));var n=document.createElement("style");return n.textContent=".rmg-window__header{margin-left: unset;}",document.head.appendChild(n),e.postMessage({event:"LOADED"}),function(){e.close(),document.head.removeChild(n)}}),[]);return o.jsx(g,{children:o.jsx(I,{defaultTheme:c,sessionId:u,onSubmit:function(e){var n,t;console.log("[".concat(null===(n=d.current)||void 0===n?void 0:n.name,"] Emitting SELECT event, theme:"),e),null===(t=d.current)||void 0===t||t.postMessage({event:"SELECT",data:e}),p.event(v.APP_CLIP_VIEW_SELECT,{parentComponent:r,theme:e})},onClose:function(){var e,n;console.log("[".concat(null===(e=d.current)||void 0===e?void 0:e.name,"] Emitting CLOSE event")),null===(n=d.current)||void 0===n||n.postMessage({event:"CLOSE"}),p.event(v.APP_CLIP_VIEW_CLOSED,{parentComponent:r})}})})}));var r=function(e){var t=function(e){var t=e.toUpperCase().split("");return 2===t.length?t.map((function(e){return((e.codePointAt(0)||0)+127397).toString(16).toUpperCase()})):5===t.length?["1F3F4"].concat(n(t.map((function(e){return((e.codePointAt(0)||0)+917536).toString(16).toUpperCase()}))),["E007F"]):[]}(e);return String.fromCodePoint.apply(String,n(t.map((function(e){return parseInt(e,16)}))))};function x(e){var n=e.defaultValueId,t=e.onChange,a=h().i18n,u=n?c.find((function(e){return e.id===n})):void 0,i=function(e){var n,t;return null!==(n=null!==(t=a.languages.map((function(n){return e.name[n]})).find((function(e){return void 0!==e})))&&void 0!==t?t:e.name.en)&&void 0!==n?n:""},l=c.slice().sort((function(e,n){return"other"===e.id?1:"other"===n.id?-1:i(e).localeCompare(i(n),a.languages[0])}));return o.jsx(s,{data:l,displayValue:i,displayHandler:function(e){var n="TW"===e.country&&["zh-Hans","zh-CN"].includes(a.languages[0]),t=a.languages.map((function(n){return e.name[n]})).find((function(e){return void 0!==e}));return o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"flag-emoji",children:n?"🏴":r(e.country)}),o.jsx("span",{children:t})]})},predicate:function(e,n){return Object.values(e.name).some((function(e){return e.toLowerCase().includes(n.toLowerCase())}))},defaultValue:u,onChange:function(e){return null==t?void 0:t(e.id)}})}function S(e){var n=e.city,t=e.defaultValueId,r=e.onChange,a=h().i18n,u=b(n),i=t?u.find((function(e){return e.id===t})):void 0,l=function(e){var n;return null!==(n=a.languages.map((function(n){return e.name[n]})).find((function(e){return void 0!==e})))&&void 0!==n?n:""};return o.jsx(s,{data:u,displayValue:l,displayHandler:function(e){var n=l(e);return o.jsx(f,{name:n,fg:e.fg||d.white,bg:e.colour})},predicate:function(e,n){return Object.values(e.name).some((function(e){return e.includes(n)}))},defaultValue:i,onChange:function(e){return null==r?void 0:r(e.id,e.colour,e.fg||d.white)}})}var A=function(e){return!!e.match(/^#[0-9a-fA-F]{6}$/)},E={flex:1,mx:2,"& .chakra-badge":{fontSize:"1em"},"& > .chakra-stack":{w:"100%",p:2,"& > div":{w:"100%"}}};function I(n){var t=n.defaultTheme,r=n.sessionId,c=n.onSubmit,s=n.onClose,p=h().t,v=e(y.useState(null==t?void 0:t[0]),2),g=v[0],C=v[1],b=e(y.useState(null==t?void 0:t[1]),2),I=b[0],w=b[1],P=e(y.useState((null==t?void 0:t[2])||"#AAAAAA"),2),L=P[0],V=P[1],O=e(y.useState((null==t?void 0:t[3])||d.white),2),_=O[0],k=O[1],F=e(y.useState("color"),2),T=F[0],D=F[1];y.useEffect((function(){r&&t&&(C(t[0]),w(t[1]),V(t[2]),k(t[3]))}),[r,null==t?void 0:t.toString()]);var U=[{label:p("Select"),value:"color"},{label:p("Key in"),value:"text"}],z=[{label:p("Black"),value:d.black},{label:p("White"),value:d.white}],M=[{type:"custom",label:p("City"),component:o.jsx(x,{defaultValueId:g,onChange:function(e){C(e),w(void 0),V("#AAAAAA"),k(d.white)}})},{type:"custom",label:p("Line"),component:o.jsx(S,{city:g,defaultValueId:I,onChange:function(e,n,t){w(e),V(n),k(t)}})}],W=[{type:"custom",label:p("Input mode"),component:o.jsx(m,{selections:U,defaultValue:T,onChange:function(e){return D(e)}})},{type:"input",label:p("Background colour"),variant:T,value:L,placeholder:"#F3D03E",validator:A,onChange:function(e){C("other"),w("other"),V(e)}},{type:"custom",label:p("Foreground colour"),component:o.jsx(m,{selections:z,defaultValue:_,onChange:function(e){C("other"),w("other"),k(e)}})}],N=g&&I&&L&&_&&A(L);return o.jsxs(o.Fragment,{children:[o.jsxs(a,{sx:E,children:[o.jsx(f,{name:p("Example"),fg:_,bg:L}),o.jsxs(a,{children:[o.jsx(j,{fields:M}),o.jsx(j,{fields:W})]})]}),o.jsx(u,{}),o.jsxs(i,{p:2,justifyContent:"flex-end",children:[o.jsx(l,{size:"sm",onClick:s,children:p("Cancel")}),o.jsx(l,{size:"sm",colorScheme:"primary",onClick:function(){N&&(null==c||c([g,I,L,_]))},isDisabled:!N,children:p("Confirm")})]})]})}var w="rmg-palette-bridge--"}}}))}();
