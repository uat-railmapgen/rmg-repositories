!function(){function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,i,l=[],u=!0,c=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=a.call(t)).done)&&(l.push(r.value),l.length!==n);u=!0);}catch(s){c=!0,o=s}finally{try{if(!u&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,n)||t(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,n){if(e){if("string"==typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}System.register(["./chakra-legacy-1ad193d5.js","./index-legacy-a4855245.js","./react-legacy-2ad49228.js","./use-palette-legacy-60e63852.js","./index.esm-legacy-a32ac54c.js"],(function(t,r){"use strict";var o,a,i,l,u,c,s,f,d,m,p,v,h,g,y,j,x,C,b,S,A,E,I,w,L,P,V,O;return{setters:[function(e){o=e.j,a=e.F,i=e._,l=e.f,u=e.a6,c=e.a7,s=e.H,f=e.a8,d=e.$},function(e){m=e.a,p=e.U,v=e.M,h=e.b,g=e.z,y=e.k,j=e.c,x=e.r,C=e.E,b=e.d,S=e.e,A=e.V,E=e.W},function(e){I=e.u,w=e.r,L=e.o},function(e){P=e.u},function(e){V=e.R,O=e.i}],execute:function(){t("default",(function(){var n=e(L(),1)[0],t=n.get("parentId"),r=n.get("parentComponent"),a=j(),i=m((function(e){return e.app})).isDataLoading,l=e(w.useState(),2),u=l[0],c=l[1],s=e(w.useState(),2),f=s[0],d=s[1],p=w.useRef();w.useEffect((function(){var e=new BroadcastChannel(T+t);return p.current=e,x.event(C.APP_CLIP_VIEW_OPENED,{parentComponent:r}),e.onmessage=function(n){var t=n.data,r=t.event,o=t.data;console.log("[".concat(e.name,"] Received event from parent component:"),r),"OPEN"===r&&(c(crypto.randomUUID()),d(o))},console.log("[".concat(e.name,"] App clip connection established, parentComponent=").concat(r)),e.postMessage({event:"LOADED"}),function(){e.close()}}),[]);return o.jsxs(b,{children:[i&&o.jsx(S,{isIndeterminate:!0}),o.jsx(F,{defaultTheme:f,sessionId:u,onSubmit:function(e,n){var t,o;console.log("[".concat(null===(t=p.current)||void 0===t?void 0:t.name,"] Emitting SELECT event, theme:"),e),null===(o=p.current)||void 0===o||o.postMessage({event:"SELECT",data:e}),a(A({theme:e,displayName:n})),x.event(C.APP_CLIP_VIEW_SELECT,{parentComponent:r,theme:e})},onClose:function(){var e,n;console.log("[".concat(null===(e=p.current)||void 0===e?void 0:e.name,"] Emitting CLOSE event")),null===(n=p.current)||void 0===n||n.postMessage({event:"CLOSE"}),x.event(C.APP_CLIP_VIEW_CLOSED,{parentComponent:r})},onClearHistory:function(){a(E()),x.event(C.CLEAR_HISTORY,{})}})]})}));var r=function(e){var t=function(e){var t=e.toUpperCase().split("");return 2===t.length?t.map((function(e){return((e.codePointAt(0)||0)+127397).toString(16).toUpperCase()})):5===t.length?["1F3F4"].concat(n(t.map((function(e){return((e.codePointAt(0)||0)+917536).toString(16).toUpperCase()}))),["E007F"]):[]}(e);return String.fromCodePoint.apply(String,n(t.map((function(e){return parseInt(e,16)}))))};function _(e){var n=e.defaultValueId,t=e.onChange,a=I().i18n,i=m((function(e){return e.app})).cityList,l=n?i.find((function(e){return e.id===n})):void 0,u=function(e){var n,t;return null!==(n=null!==(t=a.languages.map((function(n){return e.name[n]})).find((function(e){return void 0!==e})))&&void 0!==t?t:e.name.en)&&void 0!==n?n:""},c=i.slice().sort((function(e,n){return"other"===e.id?1:"other"===n.id?-1:u(e).localeCompare(u(n),a.languages[0])}));return o.jsx(p,{data:c,displayValue:u,displayHandler:function(e){var n="TW"===e.country&&["zh-Hans","zh-CN"].includes(a.languages[0]),t=a.languages.map((function(n){return e.name[n]})).find((function(e){return void 0!==e}));return o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"flag-emoji",children:n?"🏴":r(e.country)}),o.jsx("span",{children:t})]})},predicate:function(e,n){return Object.values(e.name).some((function(e){return e.toLowerCase().includes(n.toLowerCase())}))},defaultValue:l,onChange:function(e){return null==t?void 0:t(e.id)}})}function k(e){var n=e.city,t=e.defaultValueId,r=e.onChange,a=I().i18n,i=P(n),l=t?i.find((function(e){return e.id===t})):void 0,u=function(e){var n;return null!==(n=a.languages.map((function(n){return e.name[n]})).find((function(e){return void 0!==e})))&&void 0!==n?n:""};return o.jsx(p,{data:i,displayValue:u,displayHandler:function(e){var n=u(e);return o.jsx(h,{name:n,fg:e.fg||v.white,bg:e.colour})},predicate:function(e,n){return Object.values(e.name).some((function(e){return e.includes(n)}))},defaultValue:l,onChange:function(e){return null==r?void 0:r(e.id,e.colour,e.fg||v.white)}})}var z=function(e){return!!e.match(/^#[0-9a-fA-F]{6}$/)},D={flexDirection:"column",flex:1,mx:2,overflowX:"hidden",overflowY:"scroll","& .chakra-badge":{fontSize:"1em",width:"fit-content",alignSelf:"center",m:1},"& > section:first-of-type":{p:1},"& > section:last-of-type":{w:"100%","& > div:last-of-type":{px:2},"& .rmg-section__header button":{ml:"auto"}}};function F(n){var t=n.defaultTheme,r=n.sessionId,p=n.onSubmit,j=n.onClose,x=n.onClearHistory,C=I().t,b=m((function(e){return e.app})).recentlyUsed,S=e(w.useState(null==t?void 0:t[0]),2),A=S[0],E=S[1],L=e(w.useState(null==t?void 0:t[1]),2),P=L[0],F=L[1],T=e(w.useState((null==t?void 0:t[2])||"#AAAAAA"),2),U=T[0],H=T[1],N=e(w.useState((null==t?void 0:t[3])||v.white),2),R=N[0],W=N[1],M=e(w.useState("color"),2),B=M[0],$=M[1];w.useEffect((function(){r&&t&&(E(t[0]),F(t[1]),H(t[2]),W(t[3]))}),[r,null==t?void 0:t.toString()]);var Y=[{label:C("Select"),value:"color"},{label:C("Key in"),value:"text"}],K=[{label:C("Black"),value:v.black},{label:C("White"),value:v.white}],X=[{type:"custom",label:C("City"),component:o.jsx(_,{defaultValueId:A,onChange:function(e){E(e),F(void 0),H("#AAAAAA"),W(v.white)}})},{type:"custom",label:C("Line"),component:o.jsx(k,{city:A,defaultValueId:P,onChange:function(e,n,t){F(e),H(n),W(t)}})}],q=[{type:"custom",label:C("Input mode"),component:o.jsx(g,{selections:Y,defaultValue:B,onChange:function(e){return $(e)}})},{type:"input",label:C("Background colour"),variant:B,value:U,placeholder:"#F3D03E",validator:z,onChange:function(e){E("other"),F("other"),H(e)}},{type:"custom",label:C("Foreground colour"),component:o.jsx(g,{selections:K,defaultValue:R,onChange:function(e){E("other"),F("other"),W(e)}})}],G=A&&P&&U&&R&&z(U);return o.jsxs(o.Fragment,{children:[o.jsxs(a,{sx:D,children:[o.jsx(h,{name:C("Example"),fg:R,bg:U}),o.jsxs("section",{children:[o.jsx(V,{fields:X}),o.jsx(V,{fields:q})]}),o.jsxs("section",{children:[o.jsxs(y,{children:[o.jsx(i,{as:"h5",size:"xs",children:C("Recently used")}),o.jsx(l,{variant:"ghost",size:"xs",onClick:x,children:C("Clear")})]}),o.jsx(u,{children:b.map((function(e){var n=e.theme,t=e.displayName;return o.jsx(c,{children:o.jsx(s,{size:"xs","aria-label":C("Apply"),title:t,mt:"0.45px",color:n[3],bg:n[2],icon:o.jsx(O,{}),onClick:function(){return function(e){E(e[0]),F(e[1]),H(e[2]),W(e[3])}(n)}})},n.join("-"))}))})]})]}),o.jsx(f,{}),o.jsxs(d,{p:2,justifyContent:"flex-end",children:[o.jsx(l,{size:"sm",onClick:j,children:C("Cancel")}),o.jsx(l,{size:"sm",colorScheme:"primary",onClick:function(){if(G){var e="".concat(A," - ").concat(P);null==p||p([A,P,U,R],e)}},isDisabled:!G,children:C("Confirm")})]})]})}var T="rmg-palette-bridge--"}}}))}();
