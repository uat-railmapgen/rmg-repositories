!function(){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},n(e)}function e(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,o,i,u,a=[],l=!0,c=!1;try{if(i=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=i.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(s){c=!0,o=s}finally{try{if(!l&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(c)throw o}}return a}}(n,e)||function(n,e){if(!n)return;if("string"==typeof n)return r(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return r(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}System.register(["./chakra-legacy-07fc9539.js","./index-legacy-7a31a5fa.js","./react-legacy-53a5d56b.js"],(function(n,r){"use strict";var o,i,u,a,l,c,s,f,d,m,v,g,h,p,y,j,b,C,x,S,E,A,O,w;return{setters:[function(n){o=n.j,i=n.a6,u=n.a7,a=n.a8,l=n.a9,c=n.aa,s=n.ab,f=n.ac,d=n.ad,m=n.$,v=n.i},function(n){g=n.g,h=n.Y,p=n.Z,y=n.c,j=n.M,b=n.d,C=n.b,x=n.r,S=n.E,E=n.j},function(n){A=n.u,O=n.r,w=n.n}],execute:function(){function r(n){var e=n.countryCode,t=n.svgFilename;return t?o.jsx(i,{src:"/rmg-palette/resources/flags/".concat(t.slice(0,-4),".svg"),alt:"Flag of ".concat(e),h:17,mr:1}):o.jsx(o.Fragment,{})}function I(n){var e=n.defaultValueId,t=n.onChange,i=A().i18n,u=e?g.find((function(n){return n.id===e})):void 0,a=function(n){var e,t;return null!==(e=null!==(t=i.languages.map((function(e){return n.name[e]})).find((function(n){return void 0!==n})))&&void 0!==t?t:n.name.en)&&void 0!==e?e:""},l=g.slice().sort((function(n,e){return n.id===h.Other?1:e.id===h.Other?-1:a(n).localeCompare(a(e),i.languages[0])}));return o.jsx(p,{data:l,displayValue:a,displayHandler:function(n){var e,t,u="TW"===n.country&&["zh-Hans","zh-CN"].includes(i.languages[0]),a=["Win32","Win64"].includes(navigator.platform),l=i.languages.map((function(e){return n.name[e]})).find((function(n){return void 0!==n})),c=null===(e=y.find((function(e){return e.id===n.country})))||void 0===e?void 0:e.flagSvg,s=null===(t=y.find((function(e){return e.id===n.country})))||void 0===t?void 0:t.flagEmoji;return o.jsxs(o.Fragment,{children:[u?o.jsx("span",{children:"🏴 "}):a?o.jsx(r,{countryCode:n.country,svgFilename:c}):o.jsxs("span",{children:[s," "]}),l]})},predicate:function(n,e){return Object.values(n.name).some((function(n){return n.includes(e)}))},defaultValue:u,onChange:function(n){return null==t?void 0:t(n.id)}})}n("default",(function(){A();var n=t(w(),1)[0],e=n.get("parentId"),r=n.get("parentComponent"),i=t(O.useState(),2),u=i[0],a=i[1],l=O.useRef();O.useEffect((function(){var n=new BroadcastChannel(_+e);l.current=n,x.event(S.APP_CLIP_VIEW_OPENED,{parentComponent:r}),n.onmessage=function(e){var t=e.data,r=t.event,o=t.data;console.log("[".concat(n.name,"] Received event from parent component:"),r),"OPEN"===r&&a(o)},console.log("[".concat(n.name,"] App clip connection established, parentComponent=").concat(r));var t=document.createElement("style");return t.textContent=".rmg-window__header{margin-left: unset;}",document.head.appendChild(t),n.postMessage({event:"LOADED"}),function(){n.close(),document.head.removeChild(t)}}),[]);return o.jsx(E,{children:o.jsx(V,{defaultTheme:u,onSubmit:function(n){var e,t;console.log("[".concat(null===(e=l.current)||void 0===e?void 0:e.name,"] Emitting SELECT event, theme:"),n),null===(t=l.current)||void 0===t||t.postMessage({event:"SELECT",data:n}),x.event(S.APP_CLIP_VIEW_SELECT,{parentComponent:r,theme:n})},onClose:function(){var n,e;console.log("[".concat(null===(n=l.current)||void 0===n?void 0:n.name,"] Emitting CLOSE event")),null===(e=l.current)||void 0===e||e.postMessage({event:"CLOSE"}),x.event(S.APP_CLIP_VIEW_CLOSED,{parentComponent:r})}})})}));var P=function(n){var e=t(O.useState([]),2),r=e[0],o=e[1];return O.useEffect((function(){var e=new AbortController;return fetch("/rmg-palette/resources/palettes/".concat(n,".json"),{signal:e.signal}).then((function(n){return n.json()})).then((function(n){return o(n)})).catch((function(){return o([])})),function(){e.abort()}}),[n]),r};function L(n){var e=n.city,t=n.defaultValueId,r=n.onChange,i=A().i18n,u=P(e),a=t?u.find((function(n){return n.id===t})):void 0,l=function(n){var e;return null!==(e=i.languages.map((function(e){return n.name[e]})).find((function(n){return void 0!==n})))&&void 0!==e?e:""};return o.jsx(p,{data:u,displayValue:l,displayHandler:function(n){var e=l(n);return o.jsx(b,{name:e,fg:n.fg||j.white,bg:n.colour})},predicate:function(n,e){return Object.values(n.name).some((function(n){return n.includes(e)}))},defaultValue:a,onChange:function(n){return null==r?void 0:r(n.id,n.colour,n.fg||j.white)}})}function V(n){var r,i=n.defaultTheme,g=n.onSubmit,p=n.onClose,y=A().t,x=t(O.useState(null==i?void 0:i[0]),2),S=x[0],E=x[1],w=t(O.useState(null==i?void 0:i[1]),2),P=w[0],V=w[1],_=t(O.useState((null==i?void 0:i[2])||"#AAAAAA"),2),F=_[0],T=_[1],W=t(O.useState((null==i?void 0:i[3])||j.white),2),k=W[0],D=W[1];O.useEffect((function(){i&&(E(i[0]),V(i[1]),T(i[2]),D(i[3]))}),[null==i?void 0:i.toString()]);var M=[{type:"custom",label:y("City theme"),component:o.jsx(I,{defaultValueId:S,onChange:function(n){E(n),V(void 0),T("#AAAAAA"),D(j.white)}})},{type:"custom",label:y("Line theme"),component:o.jsx(L,{city:S,defaultValueId:P,onChange:function(n,e,t){V(n),T(e),D(t)}})}],z=[{type:"input",label:y("Background colour"),variant:"color",value:F,placeholder:"#F3D03E",onChange:function(n){E(h.Other),V("other"),T(n)}},{type:"select",label:y("Foreground colour"),value:k,options:(r={},e(r,j.white,y("White")),e(r,j.black,y("Black")),r),onChange:function(n){E(h.Other),V("other"),D(n)}}],N=S&&P&&F&&k;return o.jsxs(o.Fragment,{children:[o.jsxs(u,{flex:1,mx:2,children:[o.jsx(b,{name:y("Example"),fg:k,bg:F}),o.jsxs(a,{isFitted:!0,colorScheme:"primary",w:"100%",defaultIndex:S===h.Other?1:0,children:[o.jsxs(l,{children:[o.jsx(c,{children:y("From palette")}),o.jsx(c,{children:y("Customise")})]}),o.jsxs(s,{children:[o.jsx(f,{children:o.jsx(C,{fields:M})}),o.jsx(f,{children:o.jsx(C,{fields:z})})]})]})]}),o.jsx(d,{}),o.jsxs(m,{p:2,justifyContent:"flex-end",children:[o.jsx(v,{size:"sm",onClick:p,children:y("Cancel")}),o.jsx(v,{size:"sm",colorScheme:"primary",onClick:function(){N&&(null==g||g([S,P,F,k]))},isDisabled:!N,children:y("Confirm")})]})]})}var _="rmg-palette-bridge--"}}}))}();
