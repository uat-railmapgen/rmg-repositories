import{R as P,i as f,a as _,r as u,L as m,u as O,j as y,b as x,c as i,H as D,d as U,e as $,M as F,f as G,I as W,g as K,h as J,k as g,l as H,B as V,m as q,n as Y,o as T,p as B,q as E,s as b,t as Z,v as Q,w as X,x as ee,y as ne,P as te,C as ae,z as se,A as oe}from"./vendor-9c78b6cc.js";function en(){import.meta.url,import("_").catch(()=>1);async function*e(){}}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();const ie="modulepreload",le=function(e){return"/rmg-templates/"+e},L={},M=function(t,n,s){if(!n||n.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=le(o),o in L)return;L[o]=!0;const l=o.endsWith(".css"),r=l?'[rel="stylesheet"]':"";if(!!s)for(let h=a.length-1;h>=0;h--){const d=a[h];if(d.href===o&&(!l||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${r}`))return;const c=document.createElement("link");if(c.rel=l?"stylesheet":ie,l||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),l)return new Promise((h,d)=>{c.addEventListener("load",h),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())},me={},re="关闭",ce="公司",he="英文",pe="线路",de="名称",ue="打开",ye="风格",fe="模板",ze="上传者",ge={"Add a company...":"添加公司...","Add a line...":"添加线路...","Add item":"添加项目","Add or update templates":"添加或更新模本","Briefly describe your changes and provide justification":"简洁地描述您的改动并提供理由","Click copy button and paste into issue body":"点击复制按钮然后粘贴到 Issue 正文",Close:re,Company:ce,English:he,"Follow the instructions below to open an Issue":"按下方的指引打开 Issue","Justification for major update of":"重大更新的理由：",Line:pe,"Line code":"线路代码","Major update":"重大更新",Name:de,Open:ue,"Please provide suitable source and justification.":"请您提供适当的来源和理由。","Railway company":"铁路公司","Simplified Chinese":"简体中文",Style:ye,"Submit templates":"提交模板",Templates:fe,"Toggling on 'Major update' will update the uploader field of the template and you are required enter extra justification for it.":"打开“重大更新”选项会更新模板的上传者栏位。您需要为此提供额外的理由。","Traditional Chinese":"繁体中文","Upload templates":"上传模板",Uploader:ze,"Your inputs contain the following errors. Please fix it before submitting.":"您的输入存在以下问题，请在提交前修正他們。"},He="關閉",we="公司",Te="英文",Be="路線",Ee="名稱",Le="開啟",Ce="風格",Ne="範本",Ae="上載者",ke={"Add a company...":"新增公司...","Add a line...":"新增路線...","Add item":"新增項目","Add or update templates":"新增或更新範本","Briefly describe your changes and provide justification":"簡短地描述你的變更並提供理由","Click copy button and paste into issue body":"點擊複製按鈕並於 Issue 正文內貼上",Close:He,Company:we,English:Te,"Follow the instructions below to open an Issue":"按下方的指引開啟 Issue","Justification for major update of":"重大更新的理由：",Line:Be,"Line code":"路線代碼","Major update":"重大更新",Name:Ee,Open:Le,"Please provide suitable source and justification.":"請你提供適當的來源及理由。","Railway company":"鐵路公司","Simplified Chinese":"简體中文",Style:Ce,"Submit templates":"提交範本",Templates:Ne,"Toggling on 'Major update' will update the uploader field of the template and you are required enter extra justification for it.":"開啟「重大更新」選項會更新範本的上載者欄位。你需要為此提供額外的理由。","Traditional Chinese":"繁體中文","Upload templates":"上載範本",Uploader:Ae,"Your inputs contain the following errors. Please fix it before submitting.":"你的輸入存在以下問題，請於提交前修正他們。"},Se=new P.Builder().withResource("en",me).withResource("zh-Hans",ge).withResource("zh-Hant",ke).build();f.use(_).init({lng:u.getLanguage(),fallbackLng:{[m.ChineseCN]:[m.ChineseSimp,m.English],[m.ChineseHK]:[m.ChineseTrad,m.English],[m.ChineseTW]:[m.ChineseTrad,m.English],[m.ChineseTrad]:[m.ChineseHK,m.ChineseTW,m.English],default:[m.English]},resources:Se}).then(e=>{document.title=e("RMG Templates"),document.documentElement.lang=f.language});const v=e=>{f.changeLanguage(e).then(),document.title=f.t("RMG Templates"),document.documentElement.lang=e};u.onLanguageChange(v);function be(){const{t:e}=O(),t=u.getEnv(),n=u.getAppVersion(),s=a=>{u.setLanguage(a),v(a)};return y(x,{children:[i(D,{as:"h4",size:"md",children:e("RMG Templates")}),i(U,{environment:t,version:n}),i($,{ml:"auto",children:y(F,{children:[i(G,{as:W,icon:i(K,{}),variant:"ghost",size:"sm"}),y(J,{children:[i(g,{onClick:()=>s(m.English),children:"English"}),i(g,{onClick:()=>s(m.ChineseSimp),children:"简体中文"}),i(g,{onClick:()=>s(m.ChineseTrad),children:"繁體中文"})]})]})})]})}const Me=H.lazy(()=>M(()=>import("./templates-view-79b181a2.js"),["assets/templates-view-79b181a2.js","assets/vendor-9c78b6cc.js","assets/constant-47064d77.js"])),ve=H.lazy(()=>M(()=>import("./ticket-view-9f3a4af4.js"),["assets/ticket-view-9f3a4af4.js","assets/vendor-9c78b6cc.js","assets/constant-47064d77.js"]));function Ie(){return i(V,{basename:"/rmg-templates/",children:y(q,{children:[i(be,{}),y(Y,{children:[i(T,{path:"/new",element:i(B,{suspenseFallback:i(E,{isIndeterminate:!0}),children:i(ve,{})})}),i(T,{path:"/",element:i(B,{suspenseFallback:i(E,{isIndeterminate:!0}),children:i(Me,{})})})]})]})})}const Re=[{id:"basic",name:{en:"Basic",zh:"基本"}},{id:"mtr",name:{en:"MTR","zh-Hans":"港铁","zh-Hant":"港鐵"}},{id:"gzmtr",name:{en:"Guangzhou Metro","zh-Hans":"广州地铁","zh-Hant":"廣州地鐵"}},{id:"shmetro",name:{en:"Shanghai Metro","zh-Hans":"上海地铁","zh-Hant":"上海地鐵"}}],je=[{filename:"default",name:{en:"Default","zh-Hans":"默认","zh-Hant":"預設"},style:"mtr"},{filename:"coline",name:{en:"Track Share","zh-Hans":"共线","zh-Hant":"共綫"},style:"shmetro"},{filename:"loop",name:{en:"Loop Line","zh-Hans":"环线","zh-Hant":"環綫"},style:"shmetro"}],Pe=[{filename:"twl",name:{en:"Tsuen Wan Line","zh-Hans":"荃湾线","zh-Hant":"荃灣綫"},uploadBy:"wongchito",style:"mtr"},{filename:"ktl",name:{en:"Kwun Tong Line","zh-Hans":"观塘线","zh-Hant":"觀塘綫"},uploadBy:"wongchito",style:"mtr"},{filename:"isl",name:{en:"Island Line","zh-Hans":"港岛线","zh-Hant":"港島綫"},uploadBy:"wongchito",style:"mtr"},{filename:"tkl",name:{en:"Tseung Kwan O Line","zh-Hans":"将军澳线","zh-Hant":"將軍澳綫"},uploadBy:"wongchito",style:"mtr"},{filename:"tcl",name:{en:"Tung Chung Line","zh-Hans":"东涌线","zh-Hant":"東涌綫"},uploadBy:"wongchito",style:"mtr"},{filename:"sile",name:{en:"South Island Line","zh-Hans":"南港岛线","zh-Hant":"南港島綫"},uploadBy:"wongchito",style:"mtr"},{filename:"drl",name:{en:"Disneyland Resort Line","zh-Hans":"迪士尼线","zh-Hant":"迪士尼綫"},uploadBy:"wongchito",style:"mtr"},{filename:"ael",name:{en:"Airport Express","zh-Hans":"机场快线","zh-Hant":"機場快綫"},uploadBy:"wongchito",style:"mtr"},{filename:"eal",name:{en:"East Rail Line","zh-Hans":"东铁线","zh-Hant":"東鐵綫"},uploadBy:"wongchito",style:"mtr"},{filename:"tml",name:{en:"Tuen Ma Line","zh-Hans":"屯马线","zh-Hant":"屯馬綫"},uploadBy:"wongchito",style:"mtr"}],_e=[{filename:"gz1",name:{en:"Line 1","zh-Hans":"1号线","zh-Hant":"1號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz2",name:{en:"Line 2","zh-Hans":"2号线","zh-Hant":"2號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz3",name:{en:"Line 3","zh-Hans":"3号线","zh-Hant":"3號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz4",name:{en:"Line 4","zh-Hans":"4号线","zh-Hant":"4號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz5",name:{en:"Line 5","zh-Hans":"5号线","zh-Hant":"5號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz6",name:{en:"Line 6","zh-Hans":"6号线","zh-Hant":"6號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz7",name:{en:"Line 7","zh-Hans":"7号线","zh-Hant":"7號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz8",name:{en:"Line 8","zh-Hans":"8号线","zh-Hant":"8號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz9",name:{en:"Line 9","zh-Hans":"9号线","zh-Hant":"9號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz13",name:{en:"Line 13","zh-Hans":"13号线","zh-Hant":"13號線"},uploadBy:"Dingdong2334",style:"gzmtr"},{filename:"gz14",name:{en:"Line 14","zh-Hans":"14号线","zh-Hant":"14號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz18",name:{en:"Line 18","zh-Hans":"18号线","zh-Hant":"18號線"},uploadBy:"Dingdong2334",style:"gzmtr"},{filename:"gz21",name:{en:"Line 21","zh-Hans":"21号线","zh-Hant":"21號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz22",name:{en:"Line 22","zh-Hans":"22号线","zh-Hant":"22號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gf",name:{en:"Guangfo Line","zh-Hans":"广佛线","zh-Hant":"廣佛線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"apm",name:{en:"APM Line","zh-Hans":"APM线","zh-Hant":"APM線"},uploadBy:"Dingdong2334",style:"gzmtr"},{filename:"thz1",name:{en:"Haizhu Tram Line 1","zh-Hans":"海珠有轨1号线","zh-Hant":"海珠有軌1號線"},uploadBy:"clearng-kly",style:"gzmtr"},{filename:"thp1",name:{en:"Huangpu Tram Line 1","zh-Hans":"黄埔有轨1号线","zh-Hant":"黃埔有軌1號線"},uploadBy:"clearng-kly",style:"gzmtr"}],Oe=[{filename:"sh1",name:{en:"Line 1","zh-Hans":"1号线","zh-Hant":"1號線"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh2",name:{en:"Line 2","zh-Hans":"2号线","zh-Hant":"2號線"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh3",name:{en:"Line 3 (External)","zh-Hans":"3号线 （共线）","zh-Hant":"3號線 （共線）"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh4",name:{en:"Line 4 (Loop)","zh-Hans":"4号线 （环线）","zh-Hant":"4號線 （環線）"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh3&4",name:{en:"Line 3 and 4 (External with Loop)","zh-Hans":"3与4号线 （共线与环线）","zh-Hant":"3與4號線 （共線與環線）"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh5",name:{en:"Line 5","zh-Hans":"5号线","zh-Hant":"5號線"},uploadBy:"Tianxiu11111",style:"shmetro"},{filename:"sh6",name:{en:"Line 6","zh-Hans":"6号线","zh-Hant":"6號線"},uploadBy:"Thomastzc",style:"shmetro"},{filename:"sh7",name:{en:"Line 7","zh-Hans":"7号线","zh-Hant":"7號線"},uploadBy:"Thomastzc",style:"shmetro"},{filename:"sh8",name:{en:"Line 8","zh-Hans":"8号线","zh-Hant":"8號線"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh9",name:{en:"Line 9","zh-Hans":"9号线","zh-Hant":"9號線"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh10",name:{en:"Line 10 (Branch)","zh-Hans":"10号线 （支线）","zh-Hant":"10號線 （支線）"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh11",name:{en:"Line 11","zh-Hans":"11号线","zh-Hant":"11號線"},uploadBy:"Tianxiu11111",style:"shmetro"},{filename:"sh12",name:{en:"Line 12","zh-Hans":"12号线","zh-Hant":"12號線"},uploadBy:"Andy1782010",style:"shmetro"},{filename:"sh13",name:{en:"Line 13","zh-Hans":"13号线","zh-Hant":"13號線"},uploadBy:"Andy1782010",style:"shmetro"},{filename:"sh14",name:{en:"Line 14","zh-Hans":"14号线","zh-Hant":"14號線"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh15",name:{en:"Line 15","zh-Hans":"15号线","zh-Hant":"15號線"},uploadBy:"Thomastzc",style:"shmetro"},{filename:"sh16",name:{en:"Line 16 (Express)","zh-Hans":"16号线 （快车）","zh-Hant":"16號線 （快車）"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh17",name:{en:"Line 17","zh-Hans":"17号线","zh-Hant":"17號線"},uploadBy:"Thomastzc",style:"shmetro"},{filename:"sh18",name:{en:"Line 18","zh-Hans":"18号线","zh-Hant":"18號線"},uploadBy:"Tianxiu11111",style:"shmetro"}],xe={basic:je,mtr:Pe,gzmtr:_e,shmetro:Oe};var C;(function(e){e.MTR="mtr",e.GZMTR="gzmtr",e.SHMetro="shmetro"})(C||(C={}));var N;(function(e){e.Azerbaijani="az",e.Arabic="ar",e.Catalan="ca",e.Chinese="zh",e.ChineseCN="zh-CN",e.ChineseSimp="zh-Hans",e.ChineseTrad="zh-Hant",e.ChineseHK="zh-HK",e.ChineseTW="zh-TW",e.Danish="da",e.English="en",e.French="fr",e.Gaelic="ga",e.German="de",e.Greek="el",e.Hindi="hi",e.Hungarian="hu",e.Indonesian="id",e.Italian="it",e.Japanese="ja",e.Korean="ko",e.Malay="ms",e.Norwegian="no",e.Persian="fa",e.Polish="pl",e.Portuguese="pt",e.Romanian="ro",e.Russian="ru",e.Spanish="es",e.Swedish="sv",e.Thai="th",e.Turkish="tr",e.Urdu="ur",e.Uzbek="uz",e.Vietnamese="vn"})(N||(N={}));const De=Re,Ue=xe,$e={companyConfig:De,templateList:Ue,selectedCompany:""},I=b({name:"app",initialState:$e,reducers:{appendCompanyAndTemplates:(e,t)=>{const{company:n,templates:s}=t.payload;e.companyConfig.push(n),e.templateList[n.id]=s},setSelectedCompany:(e,t)=>{e.selectedCompany=t.payload}}}),{appendCompanyAndTemplates:Fe,setSelectedCompany:tn}=I.actions,Ge=I.reducer,We=e=>{const t=document.createElement("details");t.setAttribute("repo","rmg-templates"),t.setAttribute("company",e.id),t.setAttribute("line","_config");const n=document.createElement("summary");n.textContent="New company: "+e.name.en,t.append(n);const s=document.createElement("details");return s.setAttribute("type","name"),s.textContent=JSON.stringify(e.name),t.append(s),t},Ke=(e,t,n,s,a)=>{const o=document.createElement("details");o.setAttribute("repo","rmg-templates"),o.setAttribute("company",e),o.setAttribute("line",t),o.setAttribute("major",n.toString());const l=document.createElement("summary");l.textContent=`${e}/${t}`+(n?"(M)":""),o.append(l);const r=document.createElement("details");r.setAttribute("type","name"),r.textContent=JSON.stringify(s),o.append(r);const p=document.createElement("details");return p.setAttribute("type","param"),p.textContent=JSON.stringify(a),o.append(p),o},an={en:"English","zh-Hans":"Simplified Chinese","zh-Hant":"Traditional Chinese"},A=()=>({id:crypto.randomUUID(),line:"",newLine:"",majorUpdate:!1,templateName:{en:"","zh-Hans":"","zh-Hant":""},param:void 0}),k={company:"",newCompany:"",companyName:{en:"","zh-Hans":"","zh-Hant":""},templates:[]},R=b({name:"ticket",initialState:k,reducers:{setCompany:(e,t)=>{e.company=t.payload},setNewCompany:(e,t)=>{e.newCompany=t.payload},setCompanyNameByLang:(e,t)=>{const{lang:n,name:s}=t.payload;e.companyName[n]=s},addTemplate:e=>{e.templates.push(A())},setTemplateLineById:(e,t)=>{var l,r,p,c,h,d;const{id:n,line:s,name:a}=t.payload,o={...(l=e.templates.find(z=>z.id===n))!=null?l:A(),line:s};a&&(o.templateName.en=(r=a.en)!=null?r:"",o.templateName["zh-Hans"]=(p=a["zh-Hans"])!=null?p:"",o.templateName["zh-Hant"]=(d=(h=(c=a["zh-Hant"])!=null?c:a["zh-HK"])!=null?h:a["zh-TW"])!=null?d:""),e.templates=e.templates.map(z=>z.id===n?o:z)},setTemplateNewLineById:(e,t)=>{e.templates=e.templates.map(n=>n.id===t.payload.id?{...n,newLine:t.payload.newLine}:n)},setTemplateMajorFlagById:(e,t)=>{e.templates=e.templates.map(n=>n.id===t.payload.id?{...n,majorUpdate:t.payload.majorUpdate}:n)},setTemplateLineNameById:(e,t)=>{e.templates=e.templates.map(n=>n.id===t.payload.id?{...n,templateName:{...n.templateName,[t.payload.lang]:t.payload.name}}:n)},setTemplateParamById:(e,t)=>{e.templates=e.templates.map(n=>n.id===t.payload.id?{...n,param:t.payload.param}:n)},removeTemplate:(e,t)=>{e.templates=e.templates.filter(n=>n.id!==t.payload)},resetTicket:()=>k}}),sn={getCompanyEnglishName:(e,t)=>{var n,s,a;return e.company==="new"?e.companyName.en:(a=(s=(n=t.find(o=>o.id===e.company))==null?void 0:n.name)==null?void 0:s.en)!=null?a:""},getCompanyBlock:e=>e.company!=="new"?null:We({id:e.newCompany,name:e.companyName}),getTemplateBlocks:e=>{const t=e.company==="new"?e.newCompany:e.company;return e.templates.map(n=>{const s=n.line==="new"?n.newLine:n.line,a=n.line!=="new"&&n.majorUpdate;return Ke(t,s,a,n.templateName,n.param)})},getCompanyErrors:e=>{const t=[],{company:n,newCompany:s,companyName:a}=e;return(!n||n==="new"&&!s)&&t.push("COMPANY_CODE_UNDEFINED"),n==="new"&&Object.values(a).some(o=>!o)&&t.push("COMPANY_NAME_INCOMPLETE"),t},getTemplateErrors:e=>{const t={Overall:[]},{templates:n}=e;return n.length===0&&t.Overall.push("TEMPLATE_SECTION_EMPTY"),n.some(s=>!s.line||s.line==="new"&&!s.newLine)&&t.Overall.push("TEMPLATE_CODE_UNDEFINED"),new Set(n.map(s=>s.line==="new"?s.newLine:s.line)).size!==n.length&&t.Overall.push("TEMPLATE_CODE_DUPLICATED"),n.forEach(s=>{const a=[];Object.values(s.templateName).some(o=>!o)&&a.push("TEMPLATE_NAME_INCOMPLETE"),s.param||a.push("TEMPLATE_PARAM_UNDEFINED"),t["Line "+s.line||s.newLine]=a}),t},getMajorUpdateNames:(e,t)=>{const{company:n,templates:s}=e;return n==="new"?[]:s.filter(a=>a.majorUpdate&&a.line!=="new").map(a=>{var l;const o=(l=t[n].find(r=>r.filename===a.line))==null?void 0:l.name;return o?Object.values(o).join("/"):a.line})}},{setCompany:on,setNewCompany:ln,setCompanyNameByLang:mn,addTemplate:rn,setTemplateLineById:cn,setTemplateNewLineById:hn,setTemplateMajorFlagById:pn,setTemplateLineNameById:dn,setTemplateParamById:un,removeTemplate:yn,resetTicket:fn}=R.actions,Je=R.reducer,Ve=Z(),w=Q({reducer:{app:Ge,ticket:Je},middleware:e=>e().prepend(Ve.middleware)}),zn=()=>X(),gn=ee;window.rmgStore=w;const j=document.querySelector.bind(document),qe=async()=>{var e;try{const n=await(await fetch("/rmg-templates/resources/other-company-config.json")).json(),s=document.createElement("p");return s.textContent="Fetched non-core company config",(e=j("#root"))==null||e.append(s),n}catch(t){return console.error("Failed to fetch non-core company config",t),[]}},Ye=async e=>{var t;try{const s=await(await fetch("/rmg-templates/resources/templates/"+e+"/_config.json")).json(),a=document.createElement("p");return a.textContent="Fetched templates of "+e,(t=j("#root"))==null||t.append(a),s}catch(n){return console.error("Failed to fetch template list for "+e,n),[]}},Ze=async e=>{const t=await qe();for(const n of t){const s=await Ye(n.id);e.dispatch(Fe({company:n,templates:s}))}};async function Qe(e){await Ze(e)}let S;const Xe=()=>{S=ne(document.getElementById("root")),S.render(i(H.StrictMode,{children:i(te,{store:w,children:i(ae,{theme:se,children:i(oe,{i18n:f,children:i(Ie,{})})})})}))};u.ready().then(()=>Qe(w)).then(()=>{Xe(),u.injectCss()});export{an as A,en as __vite_legacy_guard,zn as a,on as b,ln as c,mn as d,hn as e,pn as f,dn as g,un as h,rn as i,cn as j,fn as k,yn as r,tn as s,sn as t,gn as u};
