import{c as me,a as pe,b as ge,u as be,d as fe,e as v,f as D,R as S,j as r,M as x,g as e,h as I,i as T,k as E,l as j,m as _,V as P,I as B,H as k,T as p,n as ae,A as ne,o as R,p as w,q as ye,r as we,s as Se,t as Ce,v as ke,w as ve,x as Re,y as q,z as Ae,B as ze,F as A,C as Me,D as Pe,S as Le,E as Oe,G as L,J as U,K as re,L as y,N as De,O as G,P as se,Q as xe,U as O,W as Ie,X as Te,Y as oe,Z as Y,_ as Ee,$ as je,a0 as _e,a1 as z,a2 as M,a3 as Be,a4 as Ue,a5 as Ge,a6 as He,a7 as Ne,a8 as Fe,a9 as We,aa as $e,ab as Ve,ac as Je,ad as qe,ae as Ye,af as Ze,ag as Z,ah as K,ai as Q,aj as Ke,ak as Qe,al as Xe,am as et,an as tt}from"./vendor-5a3c1344.js";function Dt(){import.meta.url,import("_").catch(()=>1);async function*i(){}}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&t(u)}).observe(document,{childList:!0,subtree:!0});function d(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(s){if(s.ep)return;s.ep=!0;const n=d(s);fetch(s.href,n)}})();const at={counter:0,gallery:{shanghai:{contributors:["3353040"],name:{en:"Shanghai","zh-Hans":"上海","zh-Hant":"上海"}}}},ie=me({name:"app",initialState:at,reducers:{bumpCounter:i=>{i.counter++},setGallery:(i,o)=>{i.gallery=o.payload}}}),{bumpCounter:It,setGallery:nt}=ie.actions,rt=ie.reducer,st=pe(),le=ge({reducer:{app:rt},middleware:i=>i().prepend(st.middleware)}),ot=()=>be(),H=fe;window.rmgStore=le;var N=(i=>(i.APP_LOAD="APP_LOAD",i.UPLOAD_TEMPLATES="UPLOAD_TEMPLATES",i))(N||{});const it="Hi RMP team! I would like to contribute to the gallery with the data below.",lt="**Do not edit lines below, they are meant for bots only!!!**";function F(){const{i18n:i}=v();return o=>{var d,t;return(t=(d=i.languages.map(s=>o[s]).find(s=>s!==void 0))!=null?d:o.en)!=null?t:"(Translation Error)"}}const ct=i=>{const{city:o,isOpen:d,onClose:t}=i,s=D(),{t:n}=v(),u=F(),C=H(a=>a.app.gallery),[l,h]=S.useState({name:{en:""},desc:{en:""},reference:"",justification:""});S.useEffect(()=>{fetch(`resources/metadata/${o}.json`).then(a=>a.json()).then(a=>h({...a,justification:""}))},[o]);const b=()=>s("/new",{state:{metadata:l}});return r(x,{isOpen:d,onClose:t,size:"6xl",scrollBehavior:"inside",children:[e(I,{}),r(T,{children:[e(E,{children:n("Details")}),e(j,{}),r(_,{paddingBottom:10,children:[e(P,{children:e("a",{href:`resources/thumbnails/${o}.png`,target:"_blank",rel:"noopener noreferrer",children:e(B,{src:`resources/thumbnails/${o}.png`,alt:o,borderRadius:"lg"})})}),e(k,{as:"h5",size:"sm",mt:3,mb:2,children:u(l.name)}),e(p,{children:u(l.desc)})]}),r(ae,{children:[e(ne,{max:8,mr:"auto",children:C[o].contributors.map(a=>e(R,{src:`https://avatars.githubusercontent.com/u/${a}`},a))}),e(w,{"aria-label":"Like",variant:"ghost",icon:e(ye,{}),isDisabled:!0}),e(w,{"aria-label":"Favorite",variant:"ghost",icon:e(we,{}),isDisabled:!0}),e(w,{"aria-label":"Edit",variant:"ghost",icon:e(Se,{}),onClick:b}),e("a",{href:`resources/real_world/${o}.json`,target:"_blank",rel:"noopener noreferrer",children:e(w,{"aria-label":"Download",variant:"ghost",icon:e(Ce,{})})}),e(w,{"aria-label":"Import",variant:"ghost",icon:e(ke,{}),isDisabled:!0})]})]})]})};function dt(){const i=D(),o=ot(),d=F(),{t}=v(),s=H(a=>a.app.gallery),n=()=>{i("/new",{state:{metadata:{name:{en:""},desc:{en:""},reference:"",justification:""}}}),y.event(N.UPLOAD_TEMPLATES,{})},[u,C]=S.useState("shanghai"),[l,h]=S.useState(!1),b=a=>{h(!0),C(a)};return S.useEffect(()=>{fetch("resources/real_world.json").then(a=>a.json()).then(a=>o(nt(a)))},[]),r(ve,{isLazy:!0,isFitted:!0,children:[r(Re,{children:[e(q,{children:t("gallery.type.realWorld")}),e(q,{isDisabled:!0,children:t("gallery.type.fantasy")})]}),e(Ae,{children:r(ze,{children:[r(A,{flexWrap:"wrap",children:[Object.keys(s).map(a=>r(Me,{variant:"elevated",minWidth:"300",m:"2",children:[r(Pe,{children:[e(B,{src:`resources/thumbnails/${a}@300.png`,alt:a,borderRadius:"lg"}),e(Le,{mt:"6",spacing:"3",children:e(k,{size:"lg",children:d(s[a].name)})})]}),r(Oe,{children:[e(ne,{max:3,children:s[a].contributors.map(g=>e(R,{src:`https://avatars.githubusercontent.com/u/${g}`},g))}),e(L,{variant:"solid",colorScheme:"blue",ml:"auto",onClick:()=>b(a),children:t("Details")})]})]},a)),e(U,{onClick:n,position:"fixed",bottom:"20px",right:"20px",zIndex:3,children:e(w,{"aria-label":"new",size:"lg",icon:e(re,{}),colorScheme:"blue",variant:"solid"})})]}),e(ct,{city:u,isOpen:l,onClose:()=>h(!1)})]})})]})}const ht=i=>new Promise(o=>{const d=new FileReader;d.onloadend=()=>o(d.result),d.readAsText(i)}),X=(i,o,d)=>{if(o!==null){const t=document.createElement("details");return t.setAttribute("repo","rmp-gallery"),t.setAttribute("type",i),Object.entries(d).forEach(([s,n])=>{t.setAttribute(s,n)}),t.textContent=o,t.outerHTML}else return""},ut={"& > div:first-of-type":{flex:1}};function ee(i){const{translations:o,onUpdate:d,onLangSwitch:t,onRemove:s}=i,{t:n}=v(),u=F(),C=(h,b)=>[{type:"select",label:n("Language"),value:h,options:Object.entries(O).reduce((a,g)=>({...a,[g[0]]:u(g[1])}),{}),disabledOptions:o.filter(a=>a[0]!==h).map(a=>a[0]),onChange:a=>t(h,a)},{type:"input",label:n("Name"),value:b,onChange:a=>d(h,a),validator:a=>!!a}],l=()=>{const h=Object.keys(O).filter(b=>!o.find(a=>a[0]===b))[0];d(h,"")};return e(De,{direction:"column",children:o.map(([h,b],a,g)=>r(G,{sx:ut,children:[e(se,{fields:C(h,b),noLabel:a>0}),a===g.length-1?e(w,{size:"sm",variant:"ghost","aria-label":n("Add a name in another language"),title:n("Add a name in another language"),onClick:l,icon:e(re,{})}):e(U,{minW:8}),g.length>1&&e(w,{size:"sm",variant:"ghost","aria-label":n("Remove this name"),title:n("Remove this name"),onClick:()=>s(h),icon:e(xe,{})})]},a))})}const mt={px:2,pt:2,width:{base:"100%",md:520},"& > div:first-of-type":{flexDirection:"column",flex:1,overflowY:"auto"},"& > div:nth-of-type(2)":{my:2}};function pt(){var $,V;const{state:{metadata:i}}=Ie(),o=D(),d=H(c=>c.app.gallery),{t}=v(),s=()=>o("/"),n=S.useRef(null),[u,C]=S.useState(!1),[l,h]=S.useState(i),[b,a]=S.useState(""),g=(V=($=l.name.en)==null?void 0:$.replace(/[^A-Za-z0-9]/g,"").toLowerCase())!=null?V:"",W=[it,lt,X("metadata",JSON.stringify(l,null,4),{}),X("real_world",b,{compress:"zipson",city:g})].join(`

`),ce=new URLSearchParams({labels:"resources",title:`Resources: ${g in d?"Update":"New"} template of ${g}`}),de=async c=>{var f;const m=(f=c.target.files)==null?void 0:f[0];if(console.log("handleFileUpload():: received file",m),!!m){if(m.type!=="application/json"){alert("Invalid file type!"),c.target.value="";return}try{const J=await ht(m);a(_e.stringify(JSON.parse(J.trim())).trim())}catch(J){alert("Invalid file!"),c.target.value=""}}},he=async()=>{n!=null&&n.current&&(n.current.select(),await navigator.clipboard.writeText(W)),window.open("https://github.com/railmapgen/rmp-gallery/issues/new?"+ce.toString(),"_blank")},ue=[{type:"custom",label:t("Project file"),component:e(Te,{variant:"flushed",size:"xs",type:"file",accept:".json",onChange:de}),minW:250},{type:"input",label:t("Reference link"),placeholder:"Enter the link where you get the valid data",value:l.reference,onChange:c=>h({...l,reference:c}),minW:250},{type:"input",label:t("Justification"),placeholder:"The reason why you make these changes",value:l.justification,onChange:c=>h({...l,justification:c}),minW:250}];return r(oe,{sx:mt,children:[r(A,{children:[e(se,{fields:ue}),e(Y,{label:t("City Name"),children:e(ee,{translations:Object.entries(l.name),onUpdate:(c,m)=>h({...l,name:{...l.name,[c]:m}}),onLangSwitch:(c,m)=>{const f=structuredClone(l);f.name[m]=f.name[c],delete f.name[c],h(f)},onRemove:c=>{const m=structuredClone(l);delete m.name[c],h(m)}})}),e(Y,{label:t("Description (Optional)"),children:e(ee,{translations:Object.entries(l.desc),onUpdate:(c,m)=>h({...l,desc:{...l.desc,[c]:m}}),onLangSwitch:(c,m)=>{const f=structuredClone(l);f.desc[m]=f.desc[c],delete f.desc[c],h(f)},onRemove:c=>{const m=structuredClone(l);delete m.desc[c],h(m)}})})]}),r(A,{children:[e(L,{size:"sm",onClick:s,children:t("Back to list")}),e(G,{ml:"auto",children:e(L,{size:"sm",colorScheme:"primary",isDisabled:b===""||l.reference===""||g==="",onClick:()=>C(!0),children:t("Submit")})})]}),r(x,{isOpen:u,onClose:()=>C(!1),children:[e(I,{}),r(T,{children:[e(E,{children:t("Submit template")}),e(j,{}),r(_,{children:[e(p,{children:t("You may now copy the following text into your new issue's body.")}),e(Ee,{mt:"2",mb:"2"}),e(je,{ref:n,isReadOnly:!0,defaultValue:W,onClick:({target:c})=>c.select()})]}),e(ae,{children:e(L,{colorScheme:"primary",onClick:he,children:t("Copy issue body and open a new issue")})})]})]})]})}const gt="/rmp-gallery/assets/github-mark-7a0dd11e.svg",bt="/rmp-gallery/assets/slack-mark-19839006.svg",ft=i=>{const{isOpen:o,onClose:d}=i,{t}=v(),s=y.getAppVersion();return r(x,{isOpen:o,onClose:d,size:"xl",scrollBehavior:"inside",children:[e(I,{}),r(T,{children:[e(E,{children:t("header.about.title")}),e(j,{}),r(_,{paddingBottom:10,children:[r(A,{direction:"row",children:[e(B,{boxSize:"128px",src:"/logo192.png"}),r(A,{direction:"column",width:"100%",alignItems:"center",justifyContent:"center",children:[e(p,{fontSize:"xl",as:"b",children:t("header.about.rmpGallery")}),e(p,{children:s}),e(p,{}),e(p,{fontSize:"sm",children:t("header.about.railmapgen")})]})]}),e(U,{margin:5,children:e(p,{fontSize:"xl",children:t("header.about.desc")})}),e(k,{as:"h5",size:"sm",mt:3,mb:2,children:t("header.about.contributors")}),e(k,{as:"h6",size:"xs",my:2,children:t("header.about.coreContributors")}),e(P,{children:r(z,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/thekingofcity","_blank"),cursor:"pointer",children:[e(R,{src:"https://github.com/thekingofcity.png",size:"lg",my:2,ml:-1,mr:2}),r(M,{display:"block",width:"100%",children:[e(p,{fontSize:"lg",fontWeight:"bold",mb:1,children:"thekingofcity"}),e(p,{fontSize:"sm",children:t("header.about.content1")}),e(p,{fontSize:"sm",align:"right",mb:1,children:t("header.about.content2")})]})]})}),e(k,{as:"h6",size:"xs",my:2,children:t("header.about.templateAdministrators")}),e(P,{children:["52PD","linchen1965"].map(n=>r(z,{size:"lg",w:"85%",onClick:()=>window.open(`https://github.com/${n}`,"_blank"),cursor:"pointer",children:[e(R,{src:`https://github.com/${n}.png`,size:"lg",my:2,ml:-1,mr:2}),r(M,{display:"block",width:"100%",children:[e(p,{fontSize:"lg",fontWeight:"bold",mb:1,children:n}),e(p,{fontSize:"sm",mb:1,children:t(`header.about.${n}`)})]})]},n))}),e(k,{as:"h5",size:"sm",mt:3,mb:2,children:t("header.about.contactUs")}),r(P,{children:[r(z,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/railmapgen/rmp-gallery/issues","_blank"),cursor:"pointer",children:[e(R,{src:gt,size:"lg",my:2,ml:-1,mr:2}),r(M,{display:"block",width:"100%",children:[e(p,{fontSize:"lg",fontWeight:"bold",mb:1,children:t("header.about.github")}),e(p,{fontSize:"sm",children:t("header.about.githubContent")})]})]}),r(z,{size:"lg",w:"85%",onClick:()=>window.open("https://join.slack.com/t/railmapgenerator/shared_invite/zt-1odhhta3n-DdZF~fnVwo_q0S0RJmgV8A","_blank"),cursor:"pointer",children:[e(R,{src:bt,size:"lg",my:2,ml:-1,mr:2}),r(M,{display:"block",width:"100%",children:[e(p,{fontSize:"lg",fontWeight:"bold",mb:1,children:t("header.about.slack")}),e(p,{fontSize:"sm",children:t("header.about.slackContent")}),e(p,{fontSize:"sm",as:"i",children:"#rmg, #rmp, #gallery, #random"})]})]})]})]})]})]})};function yt(){const{t:i}=v(),o=y.getEnv(),d=y.getAppVersion(),[t,s]=S.useState(!1),n=u=>{y.setLanguage(u),y.getI18nInstance().changeLanguage(u)};return r(Be,{children:[e(k,{as:"h4",size:"md",children:i("header.about.rmpGallery")}),e(Ue,{environment:o,version:d}),r(G,{ml:"auto",children:[r(Ge,{children:[e(He,{as:w,icon:e(Ne,{}),variant:"ghost",size:"sm"}),e(Fe,{children:We.map(u=>e($e,{onClick:()=>n(u),children:O[u][u]},u))})]}),e(w,{size:"sm",variant:"ghost","aria-label":"Help",icon:e(Ve,{}),onClick:()=>s(!0)})]}),e(ft,{isOpen:t,onClose:()=>s(!1)})]})}function wt(){return e(Je,{basename:"/rmp-gallery/",children:e(qe,{children:r(Ye,{children:[e(yt,{}),e(oe,{children:r(Ze,{children:[e(Z,{path:"/",element:e(K,{suspenseFallback:e(Q,{isIndeterminate:!0}),children:e(dt,{})})}),e(Z,{path:"/new",element:e(K,{suspenseFallback:e(Q,{isIndeterminate:!0}),children:e(pt,{})})})]})})]})})})}const St={about:{rmpGallery:"RMP Gallery",title:"About",railmapgen:"A railmapgen project",desc:"Browse, set, and submit your RMP template here!",content1:"In memory of all the freedom and equality we once had.",content2:"06/01/2022 in Shanghai",contributors:"Contributors",coreContributors:"Core Contributors",templateAdministrators:"Administrators","52PD":"Special thanks for his continuous effort in maintaining templates.",linchen1965:"Special thanks for his continuous effort in maintaining templates.",contactUs:"Contact Us",github:"Project Repository",githubContent:"Face any problems? Search or raise an issue here!",slack:"Slack Group",slackContent:"Chat in these Slack channels!"}},Ct={type:{realWorld:"Real World",fantasy:"Fantasy"}},kt={header:St,gallery:Ct},vt={about:{rmpGallery:"RMP画廊",title:"About",railmapgen:"一个railmapgen项目",desc:"浏览、设置、提交你制作的RMP模板！",content1:"谨以此纪念我们曾拥有的自由与平等。",content2:"06/01/2022于上海",contributors:"贡献者",coreContributors:"核心贡献者",templateAdministrators:"管理员","52PD":"特别感谢他维护这些模板的持续付出。",linchen1965:"特别感谢他维护这些模板的持续付出。",contactUs:"联系我们",github:"项目仓库",githubContent:"遇到任何问题？在这里搜索或提出一个问题！",slack:"Slack群组",slackContent:"在这些Slack频道中讨论!"}},Rt={header:vt},At={about:{rmpGallery:"RMP畫廊",title:"關於",railmapgen:"一個railmapgen項目",desc:"瀏覽、設置、提交你製作的RMP模板！",content1:"謹以此紀念我們曾擁有的自由與平等。",content2:"06/01/2022於上海",contributors:"貢獻者",coreContributors:"核心貢獻者",templateAdministrators:"管理員","52PD":"特別感謝他維護這些模板的持續付出。",linchen1965:"特別感謝他維護這些模板的持續付出。",contactUs:"聯繫我們",github:"項目倉庫",githubContent:"遇到任何問題？在這裡搜索或提出一個問題！",slack:"Slack群組",slackContent:"在這些Slack頻道中討論!"}},zt={header:At},Mt={about:{rmpGallery:"RMP 갤러리",title:"대함",railmapgen:"railmapgen 프로젝트",desc:"Browse, set, and submit your RMP template here!",content1:"우리가 가졌던 자유와 평등을 기념한다.",content2:"2022년 6월 1일 상해",contributors:"기여자",coreContributors:"핵심 기여자",templateAdministrators:"Administrators","52PD":"Special thanks for his continuous effort in maintaining templates.",linchen1965:"Special thanks for his continuous effort in maintaining templates.",contactUs:"우리에게 연락하기",github:"프로젝트 저장소",githubContent:"무슨 문제라도 있나요? 여기서 문제를 검색하거나 제기하십시오!",slack:"슬랙 그룹",slackContent:"이 슬랙 채널에서 채팅해요!"}},Pt={header:Mt},Lt=new y.I18nBuilder().use(Ke).withAppName("RMP Gallery").withLng(y.getLanguage()).withResource("en",kt).withResource("zh-Hans",Rt).withResource("zh-Hant",zt).withResource("ko",Pt).build();let te;const Ot=()=>{te=Qe(document.getElementById("root")),te.render(e(Xe.StrictMode,{children:e(et,{store:le,children:e(tt,{i18n:Lt,children:e(wt,{})})})}))};y.ready().then(()=>{Ot(),y.injectCss(),y.event(N.APP_LOAD,{})});export{Dt as __vite_legacy_guard};
