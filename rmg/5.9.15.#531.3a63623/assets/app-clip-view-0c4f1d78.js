import{u as x,aJ as E,o,r as c,j as e,aR as v,ai as j,q as y,s as h,aZ as M,a_ as A,B as u}from"./vendor-8354dbc6.js";import{P as w}from"./param-selector-b9f18b41.js";import{E as i,am as P,an as C}from"./index-6ce9f305.js";const O="rmg-bridge--",L={flexDirection:"column",h:"100%",p:2,"& > div:first-of-type":{m:0,"& > div":{h:"100%"}},"& > div:last-of-type":{mt:2,"& button:nth-child(2)":{mr:"auto"}}};function b(){const{t:a}=x(),[m]=E(),I=m.get("parentId"),l=m.get("parentComponent"),[R,d]=o.useState([]),[n,p]=o.useState(),r=o.useRef();o.useEffect(()=>{r.current=new BroadcastChannel(O+I),c.event(i.APP_CLIP_VIEW_OPENED,{parentComponent:l});const t=document.createElement("style");return t.textContent=".rmg-window__header{display: none;}",document.head.appendChild(t),d(P()),()=>{var s;(s=r.current)==null||s.close(),document.head.removeChild(t)}},[]);const S=()=>{var g;const t=window.localStorage.getItem(C.PARAM_CONFIG_BY_ID+n),s=window.localStorage.getItem(C.PARAM_BY_ID+n);(g=r.current)==null||g.postMessage({event:"IMPORT",meta:t?JSON.parse(t):null,data:s?JSON.parse(s):null}),c.event(i.APP_CLIP_VIEW_IMPORT,{parentComponent:l})},_=()=>{var t;p(void 0),(t=r.current)==null||t.postMessage({event:"CLOSE"}),c.event(i.APP_CLIP_VIEW_CLOSED,{parentComponent:l})},f=()=>{c.openApp("rmg")};return e.jsx(v,{children:e.jsxs(j,{sx:L,children:[e.jsx(w,{paramRegistry:R,selectedParam:n,onParamSelect:p}),e.jsxs(y,{children:[e.jsx(h,{variant:"ghost","aria-label":a("Manage"),title:a("Manage"),icon:e.jsx(M,{}),onClick:f}),e.jsx(h,{variant:"ghost","aria-label":a("Refresh"),title:a("Refresh"),icon:e.jsx(A,{}),onClick:()=>d(P())}),e.jsx(u,{onClick:_,children:a("Close")}),e.jsx(u,{colorScheme:"primary",isDisabled:!n,onClick:S,children:a("Import")})]})]})})}export{b as default};
