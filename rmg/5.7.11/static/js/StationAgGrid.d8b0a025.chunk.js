"use strict";(self.webpackChunkrmg=self.webpackChunkrmg||[]).push([[1985],{34523:function(e,n,r){r.r(n),r.d(n,{default:function(){return h}});var t=r(1413),a=r(8176),i=r(72791),o=r(62953),l=r(37732),u=r(20713),d=r(22020),c=r(74190),s=r(85105),f=r(36705),p=r(80184);function m(e){var n=e.lineNumber,r=e.stationNumber,t={h:"24px",position:"relative",color:"black","&::before":{content:"''",w:"calc(100% + 2px)",h:"26px",position:"absolute",top:"-1px",left:"-1px",bg:"white",borderRadius:"13px"},span:{display:"flex",justifyContent:"center",alignItems:"center",padding:"3px",minWidth:"24px",border:"2px solid",borderColor:e.lineColour,zIndex:1,"&:first-of-type":{borderRadius:"12px 0 0 12px"},"&:last-of-type":{borderRadius:"0 12px 12px 0",marginLeft:"-2px"}}};return(0,p.jsxs)(c.kC,{sx:t,children:[(0,p.jsx)("span",{children:n}),(0,p.jsx)("span",{children:r})]})}function h(e){var n=e.branchIndex,r=(0,d.$)(),h=r.t,g=r.i18n,v=(0,l.u5)(),x=(0,l.Qy)((function(e){return e.app.sidePanelMode})),R=(0,l.Qy)((function(e){return e.param})),b=R.style,S=R.theme,N=R.stn_list,w=R.line_num,y=R.coline,C=(0,l.Qy)((function(e){return e.helper.branches}))[n].filter((function(e){return!["linestart","lineend"].includes(e)})),j=(0,i.useMemo)((function(){return[{headerName:h("StationAgGrid.num"),field:"num",cellRenderer:function(e){var n=e.value;return(0,p.jsx)(m,{lineNumber:w,stationNumber:n,lineColour:S[2]})},pinned:"left",minWidth:110,hide:![u.RM.GZMTR].includes(b)},{headerName:h("Chinese name"),field:"name",valueFormatter:function(e){var n=e.value,r=e.data;return n[0]+(b===u.RM.GZMTR&&null!==r&&void 0!==r&&r.secondaryName&&null!==r&&void 0!==r&&r.secondaryName[0]?" (".concat(r.secondaryName[0],")"):"")}},{headerName:h("English name"),field:"name",cellRenderer:function(e){var n=e.value,r=e.data;return(0,p.jsx)(a.iR,{text:n[1]+(b===u.RM.GZMTR&&r.secondaryName&&r.secondaryName[1]?" (".concat(r.secondaryName[1],")"):"")})},minWidth:300},{headerName:h("StationAgGrid.interchange"),field:"transfer",cellRenderer:function(e){var n=e.value;return(0,p.jsx)(c.Ug,{children:n.info.flat().map((function(e,n){return(0,p.jsx)(a.l2,{name:[e[4],e[5]],bg:e[2],fg:e[3],showShortName:!0},n)}))})}},{headerName:h("StationAgGrid.coline"),field:"rowSpan",rowSpan:function(e){var n,r=e.data;return null!==(n=null===r||void 0===r?void 0:r.rowSpan[0])&&void 0!==n?n:0},cellClassRules:{"rmg-ag-grid--spanned-cell":function(e){return e.value[0]>0}},cellRenderer:function(e){var n,r,t=e.value;return(0,p.jsx)(c.Ug,{children:null===(n=y[t[1]])||void 0===n||null===(r=n.colors)||void 0===r?void 0:r.map((function(e,n){return(0,p.jsx)(a.l2,{name:[e[4],e[5]],bg:e[2],fg:e[3],showShortName:!0},n)}))})},hide:![u.RM.SHMetro].includes(b)}]}),[b,S.toString(),g.language]),M=(0,i.useRef)(null),A=(0,i.useRef)(!1);(0,i.useEffect)((function(){A.current&&M.current&&(1===M.current.api.getSelectedRows().length&&x!==u.Sg.STATION&&M.current.api.deselectAll())}),[A.current,x]);var G=C.map((function(e){return(0,t.Z)((0,t.Z)({},N[e]),{},{id:e,rowSpan:v((0,f.z7)(e,n))})}));return(0,p.jsx)(a.A,{children:(0,p.jsx)(o.AgGridReact,{ref:M,rowData:G,defaultColDef:{resizable:!0},columnDefs:j,getRowId:function(e){return e.data.id},headerHeight:36,rowHeight:36,suppressCellFocus:!0,suppressMovableColumns:!0,suppressRowTransform:!0,rowSelection:"single",onSelectionChanged:function(e){var n,r=null===(n=e.api.getSelectedRows())||void 0===n?void 0:n.map((function(e){return e.id}));console.log("StationAgGrid.handleSelectionChanged():: Row selection changed",r),null!==r&&void 0!==r&&r.length&&(v((0,s.B4)(u.Sg.STATION)),v((0,s.NQ)(r[0])),v((0,s.EH)(void 0)))},onGridReady:function(){return A.current=!0},debug:!1})})}}}]);
//# sourceMappingURL=StationAgGrid.d8b0a025.chunk.js.map