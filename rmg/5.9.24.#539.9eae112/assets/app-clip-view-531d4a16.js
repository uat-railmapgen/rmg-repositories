import{u as _,aG as E,m as r,r as c,j as e,aO as v,af as j,o as y,s as u,aW as M,aX as A,B as P}from"./vendor-dfcbff68.js";import{P as O}from"./param-selector-45ed06b7.js";import{E as m,an as h,aj as C}from"./index-13ec54b0.js";const w="rmg-bridge--",L={flexDirection:"column",h:"100%",p:2,"& > div:first-of-type":{m:0,"& > div":{h:"100%"}},"& > div:last-of-type":{mt:2,"& button:nth-of-type(2)":{mr:"auto"}}};function b(){const{t:a}=_(),[d]=E(),I=d.get("parentId"),l=d.get("parentComponent"),[S,p]=r.useState([]),[s,i]=r.useState(),o=r.useRef();r.useEffect(()=>{o.current=new BroadcastChannel(w+I),c.event(m.APP_CLIP_VIEW_OPENED,{parentComponent:l});const t=document.createElement("style");return t.textContent=".rmg-window__header{display: none;}",document.head.appendChild(t),p(h()),()=>{var n;(n=o.current)==null||n.close(),document.head.removeChild(t)}},[]);const f=()=>{var g;const t=window.localStorage.getItem(C.PARAM_CONFIG_BY_ID+s),n=window.localStorage.getItem(C.PARAM_BY_ID+s);(g=o.current)==null||g.postMessage({event:"IMPORT",meta:t?JSON.parse(t):null,data:n?JSON.parse(n):null}),c.event(m.APP_CLIP_VIEW_IMPORT,{parentComponent:l}),i(void 0)},x=()=>{var t;(t=o.current)==null||t.postMessage({event:"CLOSE"}),c.event(m.APP_CLIP_VIEW_CLOSED,{parentComponent:l}),i(void 0)},R=()=>{c.openApp("rmg")};return e.jsx(v,{children:e.jsxs(j,{sx:L,children:[e.jsx(O,{paramRegistry:S,selectedParam:s,onParamSelect:i}),e.jsxs(y,{children:[e.jsx(u,{variant:"ghost","aria-label":a("Manage"),title:a("Manage"),icon:e.jsx(M,{}),onClick:R}),e.jsx(u,{variant:"ghost","aria-label":a("Reload"),title:a("Reload"),icon:e.jsx(A,{}),onClick:()=>p(h())}),e.jsx(P,{onClick:x,children:a("Close")}),e.jsx(P,{colorScheme:"primary",isDisabled:!s,onClick:f,children:a("Import")})]})]})})}export{b as default};
