"use strict";(self.webpackChunkrmg=self.webpackChunkrmg||[]).push([[1985],{4523:function(e,n,r){r.r(n),r.d(n,{default:function(){return g}});var t=r(1413),a=r(9439),i=r(707),o=r(2791),l=r(2953),u=r(7732),d=r(713),s=r(2020),c=r(8735),f=r(5105),p=r(6705),m=r(184);function h(e){var n=e.lineNumber,r=e.stationNumber,t={h:"24px",position:"relative",color:"black","&::before":{content:"''",w:"calc(100% + 2px)",h:"26px",position:"absolute",top:"-1px",left:"-1px",bg:"white",borderRadius:"13px"},span:{display:"flex",justifyContent:"center",alignItems:"center",padding:"3px",minWidth:"24px",border:"2px solid",borderColor:e.lineColour,zIndex:1,"&:first-of-type":{borderRadius:"12px 0 0 12px"},"&:last-of-type":{borderRadius:"0 12px 12px 0",marginLeft:"-2px"}}};return(0,m.jsxs)(c.kC,{sx:t,children:[(0,m.jsx)("span",{children:n}),(0,m.jsx)("span",{children:r})]})}function g(e){var n=e.branchIndex,r=(0,s.$)().t,g=(0,u.u5)(),x=(0,u.Qy)((function(e){return e.app.sidePanelMode})),v=(0,u.Qy)((function(e){return e.param})),R=v.style,b=v.theme,S=v.stn_list,N=v.line_num,w=v.coline,y=(0,u.Qy)((function(e){return e.helper.branches}))[n].filter((function(e){return!["linestart","lineend"].includes(e)})),C=(0,o.useState)([{headerName:r("StationAgGrid.num"),field:"num",cellRenderer:function(e){var n=e.value;return(0,m.jsx)(h,{lineNumber:N,stationNumber:n,lineColour:b[2]})},pinned:"left",minWidth:110,hide:![d.RM.GZMTR].includes(R)},{headerName:r("Chinese name"),field:"name",valueFormatter:function(e){var n=e.value,r=e.data;return n[0]+(R===d.RM.GZMTR&&r.secondaryName&&r.secondaryName[0]?" (".concat(r.secondaryName[0],")"):"")}},{headerName:r("English name"),field:"name",cellRenderer:function(e){var n=e.value,r=e.data;return(0,m.jsx)(i.iR,{text:n[1]+(R===d.RM.GZMTR&&r.secondaryName&&r.secondaryName[1]?" (".concat(r.secondaryName[1],")"):"")})},minWidth:300},{headerName:r("StationAgGrid.interchange"),field:"transfer",cellRenderer:function(e){var n=e.value;return(0,m.jsx)(c.Ug,{children:n.info.flat().map((function(e,n){return(0,m.jsx)(i.l2,{name:[e[4],e[5]],bg:e[2],fg:e[3],showShortName:!0},n)}))})}},{headerName:r("StationAgGrid.coline"),field:"rowSpan",rowSpan:function(e){return e.data.rowSpan[0]},cellClassRules:{"rmg-ag-grid--spanned-cell":function(e){return e.value[0]>0}},cellRenderer:function(e){var n,r,t=e.value;return(0,m.jsx)(c.Ug,{children:null===(n=w[t[1]])||void 0===n||null===(r=n.colors)||void 0===r?void 0:r.map((function(e,n){return(0,m.jsx)(i.l2,{name:[e[4],e[5]],bg:e[2],fg:e[3],showShortName:!0},n)}))})},hide:![d.RM.SHMetro].includes(R)}]),j=(0,a.Z)(C,1)[0],M=(0,o.useRef)(null),A=(0,o.useRef)(!1);(0,o.useEffect)((function(){A.current&&M.current&&(1===M.current.api.getSelectedRows().length&&x!==d.Sg.STATION&&M.current.api.deselectAll())}),[A.current,x]);var G=y.map((function(e){return(0,t.Z)((0,t.Z)({},S[e]),{},{id:e,rowSpan:g((0,p.z7)(e,n))})}));return(0,m.jsx)(i.A,{children:(0,m.jsx)(l.AgGridReact,{ref:M,rowData:G,defaultColDef:{resizable:!0},columnDefs:j,getRowId:function(e){return e.data.id},headerHeight:36,rowHeight:36,suppressCellFocus:!0,suppressMovableColumns:!0,suppressRowTransform:!0,rowSelection:"single",onSelectionChanged:function(e){var n,r=null===(n=e.api.getSelectedRows())||void 0===n?void 0:n.map((function(e){return e.id}));console.log("StationAgGrid.handleSelectionChanged():: Row selection changed",r),null!==r&&void 0!==r&&r.length&&(g((0,f.B4)(d.Sg.STATION)),g((0,f.NQ)(r[0])),g((0,f.EH)(void 0)))},onGridReady:function(){return A.current=!0},debug:!1})})}}}]);
//# sourceMappingURL=StationAgGrid.d54d6c86.chunk.js.map