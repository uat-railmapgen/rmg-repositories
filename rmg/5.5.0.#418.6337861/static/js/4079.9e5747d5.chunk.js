"use strict";(self.webpackChunkrmg=self.webpackChunkrmg||[]).push([[4079,9972,5900,1793,2901],{89972:function(t,e,n){n.r(e),n.d(e,{CurrentStationSecondaryName:function(){return c}});var r=n(29439),a=n(72791),s=n(80184);e.default=(0,a.memo)((function(t){var e=t.stnName,n=t.onUpdate,r=(0,a.useRef)(null);return(0,a.useEffect)((function(){null===n||void 0===n||n(r.current.getBBox())}),[e.toString()]),(0,s.jsxs)("g",{ref:r,children:[(0,s.jsx)("text",{className:"rmg-name__zh",fontSize:90,children:e[0]}),(0,s.jsx)("g",{fontSize:36,children:e[1].split("\\").map((function(t,e){return(0,s.jsx)("text",{className:"rmg-name__en",dy:70+36*e,children:t},e)}))})]})}),(function(t,e){return t.stnName.toString()===e.stnName.toString()}));var c=function(t){var e=t.secondaryName,n=t.transform,c=(0,a.useRef)(null),i=(0,a.useState)({x:0,width:0}),l=(0,r.Z)(i,2),o=l[0],u=l[1];return(0,a.useEffect)((function(){return u(c.current.getBBox())}),[e.toString()]),(0,s.jsxs)("g",{transform:n,children:[(0,s.jsxs)("g",{transform:"translate(0,4.5)",fontSize:36,children:[(0,s.jsx)("text",{textAnchor:"end",x:o.x-3,className:"rmg-name__zh",children:"("}),(0,s.jsx)("text",{textAnchor:"start",x:o.width+o.x+3,className:"rmg-name__zh",children:")"})]}),(0,s.jsxs)("g",{ref:c,textAnchor:"middle",children:[(0,s.jsx)("text",{className:"rmg-name__zh",fontSize:26,children:e[0]}),(0,s.jsx)("text",{dy:22,className:"rmg-name__en",fontSize:14,children:e[1]})]})]})}},55900:function(t,e,n){n.r(e);var r=n(72791),a=n(80184);e.default=(0,r.memo)((function(t){var e=t.passed,n=t.large?"M0,12.95 V-12.95 H-12.95 a12.95,12.95 0 0,0 0,25.9 h25.9 a12.95,12.95 0 0,0 0,-25.9 H0":"M0,9.25 V-9.25 H-9.25 a9.25,9.25 0 0,0 0,18.5 h18.5 a9.25,9.25 0 0,0 0,-18.5 H0";return(0,a.jsx)("path",{d:n,fill:"#fff",strokeWidth:2,stroke:e?"#aaa":"var(--rmg-theme-colour)"})}),(function(t,e){return t.passed===e.passed&&t.large===e.large}))},91793:function(t,e,n){n.r(e),n.d(e,{default:function(){return u}});var r=n(1413),a=n(29439),s=n(45987),c=n(72791),i=n(55900),l=n(80184),o=["lineNum","stnNum","passed","large"];function u(t){var e=t.lineNum,n=t.stnNum,u=t.passed,m=t.large,x=(0,s.Z)(t,o),d=(0,c.useRef)(null),f=(0,c.useRef)(null),h=(0,c.useState)({width:0}),g=(0,a.Z)(h,2),p=g[0],j=g[1],_=(0,c.useState)({width:0}),y=(0,a.Z)(_,2),N=y[0],w=y[1];(0,c.useEffect)((function(){j(d.current.getBBox()),w(f.current.getBBox())}),[e,n]);var z=15/Math.max(15,p.width),S=2===e.length&&2===n.length?z:15/Math.max(15,N.width);return(0,l.jsxs)("g",(0,r.Z)((0,r.Z)({},x),{},{children:[(0,l.jsx)(i.default,{passed:u,large:m}),(0,l.jsxs)("g",{textAnchor:"middle",fontSize:13.5,transform:m?"scale(1.4)":"",fill:u?"#aaa":"#000",children:[(0,l.jsx)("g",{transform:"translate(-9.25,0)scale(".concat(z,")"),children:(0,l.jsx)("text",{ref:d,className:"rmg-name__zh",children:e})}),(0,l.jsx)("g",{transform:"translate(9.25,0)scale(".concat(S,")"),children:(0,l.jsx)("text",{ref:f,className:"rmg-name__zh",children:n})})]})]}))}},44079:function(t,e,n){n.r(e);var r=n(93433),a=n(1413),s=n(45987),c=n(4942),i=n(29439),l=n(72791),o=n(91793),u=n(20713),m=n(37732),x=n(89972),d=n(80184),f=["secName"];e.default=function(){var t,e=(0,m.Qy)((function(t){return t.param.svg_height})),n=(0,m.Qy)((function(t){return t.param.svgWidth})),r=(0,m.Qy)((function(t){return t.param.direction})),a=(0,m.Qy)((function(t){return t.param.info_panel_type})),s=(0,m.Qy)((function(t){return t.param.line_num})),f=(0,m.Qy)((function(t){return t.param.current_stn_idx})),g=(0,m.Qy)((function(t){return t.param.stn_list[f]})),j=(0,l.useState)({width:0}),_=(0,i.Z)(j,2),y=_[0],N=_[1],w=g[r===u.wA.left?"parents":"children"],z={name:"translate(".concat((r===u.wA.left?1:-1)*n[u.Ht.RunIn]/4,",45)"),next:"translate(".concat((r===u.wA.left?1:-1)*n[u.Ht.RunIn]/10,",45)")},S={nameGroup:{x:n.runin/2,y:.5*e-50-18*(g.name[1].split("\\").length-1)-(g.secondaryName?29:0)},secondaryName:{x:0,y:70+36*g.name[1].split("\\").length}};return(0,d.jsxs)("g",{children:[(0,d.jsxs)("g",{transform:a===u.p.gz2otis?z.name:"",children:[(0,d.jsxs)("g",{textAnchor:"middle",transform:"translate(".concat(S.nameGroup.x,",").concat(S.nameGroup.y,")"),children:[(0,d.jsx)(x.default,{stnName:g.name,onUpdate:N}),g.secondaryName&&(0,d.jsx)(x.CurrentStationSecondaryName,{secondaryName:g.secondaryName,transform:"translate(".concat(S.secondaryName.x,",").concat(S.secondaryName.y,")")})]}),(0,d.jsx)(o.default,{lineNum:s,stnNum:g.num,style:(t={},(0,c.Z)(t,"--translate-x","".concat((n[u.Ht.RunIn]+y.width)/2+55,"px")),(0,c.Z)(t,"--translate-y","".concat(.5*e-30-18*(g.name[1].split("\\").length-1)-(g.secondaryName?29:0),"px")),(0,c.Z)(t,"transform","translate(var(--translate-x, 800px), var(--translate-y, 145px))"),t),large:!0})]}),(0,d.jsx)("g",{transform:a===u.p.gz2otis?z.next:"",children:!w||w.includes("linestart")||w.includes("lineend")?(0,d.jsx)(d.Fragment,{}):1===w.length?(0,d.jsx)(h,{nextId:w[0],nameBBox:y}):(0,d.jsx)(p,{nextIds:w,nameBBox:y})})]})};var h=function(t){var e,n=t.nextId,r=t.nameBBox,a=(0,m.Qy)((function(t){return t.param.svgWidth})),s=(0,m.Qy)((function(t){return t.param.direction})),o=(0,m.Qy)((function(t){return t.param.stn_list[n]})),x=o.name,f=o.secondaryName,h=(0,l.useState)({width:0}),p=(0,i.Z)(h,2),j=p[0],_=p[1],y=l.useRef(null);(0,l.useEffect)((function(){return _(y.current.getBBox())}),[x.toString()]);var N=x[0].length,w=(a[u.Ht.RunIn]-r.width)/2;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("g",{id:"big_next",children:[(0,d.jsxs)("g",{textAnchor:"middle",style:(0,c.Z)({},"--translate-x",s===u.wA.left?"80px":"".concat(N<=2?a[u.Ht.RunIn]-45-j.width-70:a[u.Ht.RunIn]-45-j.width-52.5,"px")),children:[(0,d.jsx)("text",{className:"rmg-name__zh",fontSize:35,children:"\u4e0b\u7ad9"}),(0,d.jsx)("text",{className:"rmg-name__en",fontSize:17,dy:30,children:"Next"})]}),(0,d.jsxs)("g",{textAnchor:"start",ref:y,style:(0,c.Z)({},"--translate-x",s===u.wA.left?"".concat(N<=2?150:132.5,"px"):"".concat(a[u.Ht.RunIn]-45-j.width,"px")),children:[(0,d.jsx)("text",{className:"rmg-name__zh",fontSize:35,children:x[0]}),(0,d.jsx)("g",{fontSize:17,children:x[1].split("\\").map((function(t,e){return(0,d.jsx)("text",{className:"rmg-name__en",dy:30+17*e,children:t},e)}))})]}),f&&(0,d.jsx)("g",{textAnchor:"middle",style:(0,c.Z)({},"--translate-x",s===u.wA.left?"".concat(N<=2?150:132.5,"px"):"".concat(a[u.Ht.RunIn]-45-j.width,"px")),children:(0,d.jsx)(g,{secName:f,transform:"translate(".concat(j.width/2,",").concat(30+17*x[1].split("\\").length+5,")")})})]}),(0,d.jsx)("path",{id:"arrow",d:"M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z",fill:"black",style:(e={},(0,c.Z)(e,"--translate-x",s===u.wA.left?"".concat((115+35*((N<=2?1:.5)+N)+w)/2-20,"px"):"".concat((a[u.Ht.RunIn]-45-j.width-(N<=2?105:87.5)+w+t.nameBBox.width+55+25.9)/2+20,"px")),(0,c.Z)(e,"--rotate",s===u.wA.left?"0deg":"180deg"),e)})]})},g=function(t){var e=t.secName,n=(0,s.Z)(t,f),r=(0,l.useRef)(null),c=(0,l.useState)({x:0,width:0}),o=(0,i.Z)(c,2),u=o[0],m=o[1];return(0,l.useEffect)((function(){return m(r.current.getBBox())}),[t.secName.toString()]),(0,d.jsxs)("g",(0,a.Z)((0,a.Z)({},n),{},{children:[(0,d.jsxs)("g",{transform:"translate(0,2.5)",fontSize:25,children:[(0,d.jsx)("text",{textAnchor:"end",x:u.x-3,className:"rmg-name__zh",children:"("}),(0,d.jsx)("text",{textAnchor:"start",x:u.width+u.x+3,className:"rmg-name__zh",children:")"})]}),(0,d.jsxs)("g",{ref:r,children:[(0,d.jsx)("text",{className:"rmg-name__zh",fontSize:18,children:e[0]}),(0,d.jsx)("text",{className:"rmg-name__en",fontSize:10,dy:15,children:e[1]})]})]}))},p=function(t){var e,n=t.nextIds,s=t.nameBBox,o=(0,m.Qy)((function(t){return t.helper})).routes,x=(0,m.Qy)((function(t){return t.param.svgWidth})),f=(0,m.Qy)((function(t){return t.param.direction})),h=(0,m.Qy)((function(t){return t.param.stn_list})),g=n.map((function(t){return h[t].name})),p=(0,l.useState)({width:0}),j=(0,i.Z)(p,2),_=j[0],y=j[1],N=(0,l.useRef)([]);(0,l.useEffect)((function(){y((function(t){return(0,a.Z)((0,a.Z)({},t),{},{width:0})})),N.current.forEach((function(t){var e=null===t||void 0===t?void 0:t.getBBox();y((function(t){return e?t.width>e.width?t:e:t}))}))}),[g.toString()]);var w=t.nextIds.map((function(t){return o.reduce((function(e,n){return n.includes(t)?e.concat(n.filter((function(t){return!["linestart","lineend"].includes(t)})).slice(f===u.wA.left?0:-1)[0]):e}),[])})),z=Math.max.apply(Math,(0,r.Z)(g.map((function(t){return t[0].length})))),S=(x[u.Ht.RunIn]-s.width)/2;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("g",{id:"big_next_2",children:g.map((function(t,e){return(0,d.jsxs)(l.Fragment,{children:[(0,d.jsxs)("g",{textAnchor:"middle",style:(0,c.Z)({},"--translate-x",f===u.wA.left?"72px":"".concat(x[u.Ht.RunIn]-45-_.width-41,"px")),children:[(0,d.jsx)("text",{className:"rmg-name__zh",children:"\u4e0b\u7ad9"}),(0,d.jsx)("text",{className:"rmg-name__en",y:22,children:"Next"})]}),(0,d.jsxs)("g",{ref:function(t){return N.current[e]=t},textAnchor:"start",style:(0,c.Z)({},"--translate-x",f===u.wA.left?"113px":"".concat(x[u.Ht.RunIn]-45-_.width,"px")),children:[(0,d.jsx)("text",{className:"rmg-name__zh",children:t[0]}),t[1].split("\\").map((function(t,e){return(0,d.jsx)("text",{className:"rmg-name__en",y:22+13*e,children:t},e)})),(0,d.jsx)("text",{className:"rmg-name__zh",y:-35,children:w[e].map((function(t){return h[t].name[0]})).join("/")+"\u65b9\u5411"}),(0,d.jsx)("text",{className:"rmg-name__en rmg-name__gzmtr--next2-dest",y:-20,children:"Towards "+w[e].map((function(t){return h[t].name[1]})).join("/").replace("\\"," ")})]})]},e)}))}),(0,d.jsx)("path",{id:"arrow",d:"M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z",fill:"black",style:(e={},(0,c.Z)(e,"--translate-x",f===u.wA.left?"".concat((99+27*(1+z)+S)/2-20,"px"):"".concat((x[u.Ht.RunIn]-45-_.width-41-27+S+t.nameBBox.width+55+25.9)/2+20,"px")),(0,c.Z)(e,"--rotate",f===u.wA.left?"0deg":"180deg"),e)})]})}}}]);
//# sourceMappingURL=4079.9e5747d5.chunk.js.map