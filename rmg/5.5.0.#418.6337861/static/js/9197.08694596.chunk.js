"use strict";(self.webpackChunkrmg=self.webpackChunkrmg||[]).push([[9197,5031,8052,5900,1793,8827,127,6373,830,2901],{35031:function(t,e,n){n.r(e),n.d(e,{default:function(){return s}});var r=n(1413),a=(n(72791),n(80184));function s(t){return(0,a.jsx)("rect",(0,r.Z)({x:-22.5,height:24,width:45,rx:4.5},t))}},21359:function(t,e,n){n.r(e);var r=n(29439),a=n(72791),s=n(7043),c=n(80184);e.default=(0,a.memo)((function(t){var e=t.lineName,n=t.commonPart,i=(0,a.useRef)(null),o=(0,a.useState)({x:0,height:0,width:0}),l=(0,r.Z)(o,2),u=l[0],f=l[1];(0,a.useEffect)((function(){i.current&&f(i.current.getBBox())}),[e.toString()]);var d=s.MAX_WIDTH/Math.max(s.MAX_WIDTH,u.width),m=(-u.x-u.width/2)*d,h=u.height*(1-d)*1.2/2;return(0,c.jsx)("g",{ref:i,transform:"translate(".concat(m,",").concat(h,")scale(").concat(d,")"),children:(0,c.jsxs)("text",{className:"rmg-name__zh",fontSize:14,y:12,textAnchor:"end",children:[n,(0,c.jsx)("tspan",{className:"rmg-name__zh",fontSize:8,x:0,dy:-2,textAnchor:"start",children:e[0].slice(n.length).trim()}),(0,c.jsx)("tspan",{className:"rmg-name__en",fontSize:4,x:0,dy:6,textAnchor:"start",children:e[1].slice(n.length).trim()})]})})}),(function(t,e){return t.lineName.toString()===e.lineName.toString()}))},7043:function(t,e,n){n.r(e),n.d(e,{MAX_WIDTH:function(){return l}});var r=n(29439),a=n(72791),s=n(20713),c=n(21359),i=n(35031),o=n(80184),l=42;e.default=(0,a.memo)((function(t){var e=t.lineName,n=t.foregroundColour,d=t.backgroundColour,m=t.passed,h=u(e),x=(0,r.Z)(h,2),g=x[0],p=x[1],j=(0,a.useRef)(null),S=(0,a.useRef)(null),N=(0,a.useState)({width:0}),_=(0,r.Z)(N,2),v=_[0],z=_[1],y=(0,a.useState)({width:0}),Z=(0,r.Z)(y,2),w=Z[0],R=Z[1];(0,a.useEffect)((function(){j.current&&z(j.current.getBBox()),S.current&&R(S.current.getBBox())}),[e.toString()]);var k=l/Math.max(l,v.width),A=l/Math.max(l,w.width);return(0,o.jsxs)("g",{textAnchor:"middle",fill:m?s.AJ.white:n,children:[(0,o.jsx)(i.default,{fill:m?"#aaa":d}),2===g?(0,o.jsx)(c.default,{lineName:e,commonPart:p}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("text",{ref:j,y:f(g,"zh",k),className:"rmg-name__zh",fontSize:12,transform:"scale(".concat(k,")"),children:1===g?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("tspan",{fontSize:16,dy:.7,className:"rmg-name__zh",children:p}),(0,o.jsx)("tspan",{dy:-.7,className:"rmg-name__zh",children:e[0].slice(p.length)})]}):e[0]}),(0,o.jsx)("text",{ref:S,y:f(g,"en",A),className:"rmg-name__en",fontSize:8,transform:"scale(".concat(A,")"),children:e[1]})]})]})}),(function(t,e){return t.lineName.toString()===e.lineName.toString()&&t.foregroundColour===e.foregroundColour&&t.backgroundColour===e.backgroundColour&&t.passed===e.passed}));var u=function(t){var e=t[0].match(/^(\d+)\D+$/);if(e)return[1,e[1]];var n=t.map((function(t){return t.match(/^([\w\d]+).+$/)}));return n[0]&&n[1]&&n[0][1]===n[1][1]?[2,n[0][1]]:[3,""]},f=function(t,e,n){switch(t){case 1:return("zh"===e?7.3:19.5)*(2-n);case 2:return 0;case 3:return"zh"===e?8*(2-n):19.5+47.53125*(1-n)-(1===n?0:5.5)}}},55900:function(t,e,n){n.r(e);var r=n(72791),a=n(80184);e.default=(0,r.memo)((function(t){var e=t.passed,n=t.large?"M0,12.95 V-12.95 H-12.95 a12.95,12.95 0 0,0 0,25.9 h25.9 a12.95,12.95 0 0,0 0,-25.9 H0":"M0,9.25 V-9.25 H-9.25 a9.25,9.25 0 0,0 0,18.5 h18.5 a9.25,9.25 0 0,0 0,-18.5 H0";return(0,a.jsx)("path",{d:n,fill:"#fff",strokeWidth:2,stroke:e?"#aaa":"var(--rmg-theme-colour)"})}),(function(t,e){return t.passed===e.passed&&t.large===e.large}))},91793:function(t,e,n){n.r(e),n.d(e,{default:function(){return u}});var r=n(1413),a=n(29439),s=n(45987),c=n(72791),i=n(55900),o=n(80184),l=["lineNum","stnNum","passed","large"];function u(t){var e=t.lineNum,n=t.stnNum,u=t.passed,f=t.large,d=(0,s.Z)(t,l),m=(0,c.useRef)(null),h=(0,c.useRef)(null),x=(0,c.useState)({width:0}),g=(0,a.Z)(x,2),p=g[0],j=g[1],S=(0,c.useState)({width:0}),N=(0,a.Z)(S,2),_=N[0],v=N[1];(0,c.useEffect)((function(){j(m.current.getBBox()),v(h.current.getBBox())}),[e,n]);var z=15/Math.max(15,p.width),y=2===e.length&&2===n.length?z:15/Math.max(15,_.width);return(0,o.jsxs)("g",(0,r.Z)((0,r.Z)({},d),{},{children:[(0,o.jsx)(i.default,{passed:u,large:f}),(0,o.jsxs)("g",{textAnchor:"middle",fontSize:13.5,transform:f?"scale(1.4)":"",fill:u?"#aaa":"#000",children:[(0,o.jsx)("g",{transform:"translate(-9.25,0)scale(".concat(z,")"),children:(0,o.jsx)("text",{ref:m,className:"rmg-name__zh",children:e})}),(0,o.jsx)("g",{transform:"translate(9.25,0)scale(".concat(y,")"),children:(0,o.jsx)("text",{ref:h,className:"rmg-name__zh",children:n})})]})]}))}},38827:function(t,e,n){n.r(e),n.d(e,{default:function(){return i}});var r=n(1413),a=n(45987),s=(n(72791),n(80184)),c=["passed"];function i(t){var e=t.passed,n=(0,a.Z)(t,c);return(0,s.jsxs)("g",(0,r.Z)((0,r.Z)({textAnchor:"middle",fill:e?"#aaa":"var(--rmg-theme-colour)"},n),{},{children:[(0,s.jsx)("text",{className:"rmg-name__zh",fontSize:13,children:"\u5feb\u8f66\u505c\u9760\u7ad9"}),(0,s.jsx)("text",{dy:10,className:"rmg-name__en",fontSize:6.5,children:"Express Station"})]}))}},16373:function(t,e,n){n.r(e),n.d(e,{default:function(){return u}});var r=n(29439),a=n(72791),s=n(20713),c=n(30127),i=n(40830),o=n(38827),l=n(80184);function u(t){var e=t.primaryName,n=t.secondaryName,u=t.stationState,f=t.flipped,d=t.express,m=(0,a.useState)({width:0}),h=(0,r.Z)(m,2),x=h[0],g=h[1],p=(0,a.useState)({x:0,width:-20}),j=(0,r.Z)(p,2),S=j[0],N=j[1],_=e[1].split("\\").length,v={g:{x:0,y:f?17.5:-20-14*_*Math.cos(-45)},StationSecondaryName:{x:(x.width+S.width/2+10)*(f?-1:1),y:2+5*(_-1)},ExpressTag:{x:(x.width+S.width+20+35)*(f?-1:1),y:2+5*(_-1)}};return(0,l.jsxs)("g",{textAnchor:f?"end":"start",fill:function(t){switch(t){case s.KR.PASSED:return"#aaa";case s.KR.CURRENT:return"#f00";case s.KR.FUTURE:return"#000"}}(u),transform:"translate(".concat(v.g.x,",").concat(v.g.y,")rotate(-45)"),children:[(0,l.jsx)(c.default,{stnName:e,onUpdate:g}),n&&(0,l.jsx)(i.default,{stnName:n,onUpdate:N,passed:u===s.KR.PASSED,transform:"translate(".concat(v.StationSecondaryName.x,",").concat(v.StationSecondaryName.y,")")}),d&&(0,l.jsx)(o.default,{passed:u===s.KR.PASSED,transform:"translate(".concat(v.ExpressTag.x,",").concat(v.ExpressTag.y,")")})]})}},30127:function(t,e,n){n.r(e);var r=n(72791),a=n(80184);e.default=(0,r.memo)((function(t){var e=t.stnName,n=t.onUpdate,s=(0,r.useRef)(null);return(0,r.useEffect)((function(){n&&n(s.current.getBBox())}),[e.toString()]),(0,a.jsxs)("g",{ref:s,children:[(0,a.jsx)("text",{className:"rmg-name__zh",fontSize:18,children:e[0]}),(0,a.jsx)("g",{fontSize:10.5,children:e[1].split("\\").map((function(t,e){return(0,a.jsx)("text",{className:"rmg-name__en",dy:16+11*e,children:t},e)}))})]})}),(function(t,e){return t.stnName.toString()===e.stnName.toString()}))},40830:function(t,e,n){n.r(e),n.d(e,{default:function(){return l}});var r=n(1413),a=n(29439),s=n(45987),c=n(72791),i=n(80184),o=["stnName","onUpdate","passed"];function l(t){var e=t.stnName,n=t.onUpdate,l=t.passed,u=(0,s.Z)(t,o),f=(0,c.useRef)(null),d=(0,c.useState)({x:0,width:0}),m=(0,a.Z)(d,2),h=m[0],x=m[1];return(0,c.useEffect)((function(){var t=f.current.getBBox();x(t),n&&n(t)}),[e.toString()]),(0,i.jsxs)("g",(0,r.Z)((0,r.Z)({fill:l?"#aaa":"#000"},u),{},{children:[(0,i.jsxs)("g",{transform:"translate(0,3)",fontSize:18,children:[(0,i.jsx)("text",{textAnchor:"end",x:h.x-3,className:"rmg-name__zh",children:"("}),(0,i.jsx)("text",{textAnchor:"start",x:h.width+h.x+3,className:"rmg-name__zh",children:")"})]}),(0,i.jsxs)("g",{ref:f,textAnchor:"middle",children:[(0,i.jsx)("text",{className:"rmg-name__zh",fontSize:13,children:e[0]}),(0,i.jsx)("text",{dy:10,className:"rmg-name__en",fontSize:6.5,children:e[1]})]})]}))}},79197:function(t,e,n){n.r(e);var r=n(45987),a=n(1413),s=n(93433),c=(n(72791),n(91793)),i=n(20713),o=n(37732),l=n(7043),u=n(16373),f=n(80184),d=["intInfos","stnState","tickRotation"],m=["intInfos","tickRotation","stnState"];e.default=function(t){var e=t.stnId,n=t.stnState,r=t.stnY,a=(0,o.Qy)((function(t){return t.param.theme})),l=(0,o.Qy)((function(t){return t.param.line_name})),d=(0,o.Qy)((function(t){return t.param.line_num})),m=(0,o.Qy)((function(t){return t.param.stn_list[e]})),x=2===m.parents.length||2===m.children.length,g=r>0||1===m.parents.indexOf(m.branch.left[1]||"")||1===m.children.indexOf(m.branch.right[1]||"")?180:0,p=m.name[1].split("\\").length,j=x?180===g?16+12*(p-1)*Math.cos(-45):-9:180===g?-6:(25+15*(p-1))*Math.cos(-45);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(h,{intInfos:x?[[a[0],a[1],"var(--rmg-theme-colour)","var(--rmg-theme-fg)"].concat((0,s.Z)(l))].concat(m.transfer.info[0]):m.transfer.info[0],stnState:n,tickRotation:g}),(0,f.jsx)(c.default,{lineNum:d,stnNum:m.num,passed:-1===n}),(0,f.jsx)("g",{transform:"translate(".concat(-j,",0)"),children:(0,f.jsx)(u.default,{primaryName:m.name,secondaryName:m.secondaryName||void 0,stationState:n,flipped:180===g,express:m.services.includes(i.K9.express)})})]})};var h=function(t){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(x,(0,a.Z)({strokeWidth:4},t)),(0,f.jsx)(g,(0,a.Z)({transform:"translate(0,".concat(180===t.tickRotation?-47:23,")")},t))]})},x=function(t){var e=t.intInfos,n=t.stnState,s=t.tickRotation,c=(0,r.Z)(t,d);return(0,f.jsx)("g",(0,a.Z)((0,a.Z)({},c),{},{children:e.map((function(t,r){return(0,f.jsx)("use",{xlinkHref:"#inttick",stroke:-1===n?"#aaa":t[2],transform:"translate(".concat(-2*(e.length-1)+4*r,",0)rotate(").concat(180===s?180:0,")")},r)}))}))},g=function(t){var e=t.intInfos,n=t.tickRotation,s=t.stnState,c=(0,r.Z)(t,m);return(0,f.jsx)("g",(0,a.Z)((0,a.Z)({},c),{},{children:e.map((function(t,e){return(0,f.jsx)("g",{transform:"translate(0,".concat(28*e*(180===n?-1:1),")"),children:(0,f.jsx)(l.default,{lineName:[t[4],t[5]],foregroundColour:t[3],backgroundColour:t[2],passed:-1===s})},e)}))}))}}}]);
//# sourceMappingURL=9197.08694596.chunk.js.map