"use strict";(self.webpackChunkrmg=self.webpackChunkrmg||[]).push([[9952,5362,888,2554],{15362:function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var r=n(1413),s=n(45987),i=(n(72791),n(20713)),a=n(80184),c=["num","inStrip"];function l(e){var t=e.num,n=e.inStrip,l=(0,s.Z)(e,c);return(0,a.jsxs)("g",(0,r.Z)((0,r.Z)({textAnchor:"middle",fill:n?i.AJ.black:"var(--rmg-theme-fg)"},l),{},{children:[(0,a.jsx)("rect",{height:40,width:40,rx:4,x:-20,fill:n?"#fff":"var(--rmg-theme-colour)"}),(0,a.jsx)("text",{className:"rmg-name__en",fontSize:20,dy:12,children:t}),(0,a.jsx)("text",{className:"rmg-name__zh",fontSize:12,dy:26,children:"\u5c4f\u853d\u95e8"}),(0,a.jsx)("text",{className:"rmg-name__en",fontSize:6.5,dy:36,children:"Screen Door"})]}))}},99952:function(e,t,n){n.r(t);var r=n(29439),s=n(45987),i=n(1413),a=n(4942),c=n(93433),l=n(72791),o=n(20888),g=n(58519),h=n(20713),u=n(37732),d=n(62554),x=n(80184),f=["destIds"],m=["destIds"],p=h.Ht.RailMap;t.default=function(){var e=(0,u.Qy)((function(e){return e.app})).canvasScale,t=(0,u.Qy)((function(e){return e.param})),n=t.svgWidth,r=t.svg_height,s=t.direction,i=t.psd_num,a=t.info_panel_type,c=t.notesGZMTR,l=t.current_stn_idx,f=t.stn_list,m=t.theme,z=n[p],w=f[l];return(0,x.jsxs)(d.default,{type:p,svgWidth:z,svgHeight:r,canvasScale:e,theme:m,children:[(0,x.jsx)(v,{}),(0,x.jsx)(o.default,{variant:a,isShowLight:a===h.p.gz2otis,isShowPSD:a===h.p.gz2otis&&i}),s===h.wA.left&&w.parents.includes("linestart")||s===h.wA.right&&w.children.includes("lineend")?(0,x.jsx)(y,{}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(g.default,{}),(0,x.jsx)(j,{}),c.map((function(e,t){return(0,x.jsx)(_,{note:e},t)}))]}),a===h.p.gz2otis&&(0,x.jsx)("line",{x2:z,transform:"translate(0,90)",strokeWidth:3,stroke:"black"})]})};var v=(0,l.memo)((function(){return(0,x.jsxs)("defs",{children:[(0,x.jsx)("path",{id:"arrow_direction",d:"M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z",fill:"black"}),(0,x.jsx)("path",{id:"inttick",d:"M 0,0 v 18",strokeLinecap:"square"})]})})),j=function(){var e,t=(0,u.Qy)((function(e){return e.helper})).routes,n=(0,u.Qy)((function(e){return e.param})),r=n.direction,s=n.direction_gz_x,o=n.direction_gz_y,g=n.current_stn_idx,d=(0,l.useMemo)((function(){return(0,c.Z)(new Set(t.reduce((function(e,t){return t.includes(g)?e.concat(t.filter((function(e){return!["linestart","lineend"].includes(e)})).slice(r===h.wA.left?0:-1)[0]):e}),[]).filter((function(e){return e!==g}))))}),[g,r,t.toString()]),f={textAnchor:r===h.wA.left?"start":"end",transform:"translate(".concat(r===h.wA.left?65:-65,",-5)"),destIds:d};return(0,x.jsxs)("g",{id:"direction_gz",style:(e={},(0,a.Z)(e,"--x-percentage",s),(0,a.Z)(e,"--y-percentage",o),e),children:[(0,x.jsx)("use",{xlinkHref:"#arrow_direction",style:(0,a.Z)({},"--rotate",r===h.wA.left?"0deg":"180deg")}),2!==d.length?(0,x.jsx)(z,(0,i.Z)({},f)):(0,x.jsx)(w,(0,i.Z)({},f))]})},z=function(e){var t=e.destIds,n=(0,s.Z)(e,f),r=(0,u.Qy)((function(e){return e.param.stn_list}));return(0,x.jsxs)("g",(0,i.Z)((0,i.Z)({},n),{},{children:[(0,x.jsx)("text",{className:"rmg-name__zh",fontSize:28,children:t.map((function(e){return r[e].name[0]})).join("/")+"\u65b9\u5411"}),(0,x.jsx)("text",{className:"rmg-name__en",fontSize:14,dy:22,children:"Towards "+t.map((function(e){return r[e].name[1].replace("\\"," ")})).join("/")})]}))},w=function(e){var t=e.destIds,n=(0,s.Z)(e,m),r=(0,u.Qy)((function(e){return e.param.direction})),a=(0,u.Qy)((function(e){return e.param.stn_list})),o=t.map((function(e){return a[e].name[0].length})),g=Math.min.apply(Math,(0,c.Z)(o)),d=g>1&&o[0]!==o[1]?Math.abs(o[0]-o[1])/(g-1):0;return(0,x.jsxs)("g",(0,i.Z)((0,i.Z)({},n),{},{children:[t.map((function(e,t){return(0,x.jsxs)(l.Fragment,{children:[(0,x.jsx)("text",{className:"rmg-name__zh",fontSize:25,x:r===h.wA.left?0:-75,y:42*t-21,letterSpacing:o[t]>o[1-t]?"0em":"".concat(d,"em"),children:a[e].name[0]}),(0,x.jsx)("text",{className:"rmg-name__en",fontSize:11.5,x:r===h.wA.left?0:-75,y:42*t-1,children:"Towards "+a[e].name[1].replace("\\"," ")})]},e)})),(0,x.jsx)("text",{className:"rmg-name__zh",fontSize:28,x:r===h.wA.left?25*(Math.max.apply(Math,(0,c.Z)(o))+1):0,y:5,children:"\u65b9\u5411"})]}))},y=l.memo((function(){return(0,x.jsxs)("g",{id:"terminus_gz",textAnchor:"middle",children:[(0,x.jsx)("text",{className:"rmg-name__zh",fontSize:90,children:"\u7ec8 \u70b9 \u7ad9"}),(0,x.jsx)("text",{dy:70,className:"rmg-name__en",fontSize:36,children:"Terminal"}),(0,x.jsxs)("g",{strokeWidth:8,stroke:"#000",children:[(0,x.jsx)("path",{d:"M -160,68 h -160"}),(0,x.jsx)("path",{d:"M 160,68 h 160"})]})]})})),_=l.memo((function(e){var t,n=l.useRef(null),s=l.useState({width:0,height:0,y:0}),i=(0,r.Z)(s,2),c=i[0],o=i[1];return l.useEffect((function(){return o(n.current.getBBox())}),[e.note[0],e.note[1]]),(0,x.jsxs)("g",{className:"note-box",style:(t={},(0,a.Z)(t,"--x-percentage",e.note[2]),(0,a.Z)(t,"--y-percentage",e.note[3]),t),children:[e.note[4]&&(0,x.jsx)("rect",{height:c.height+4,width:c.width+4,x:-2,y:c.y-2,fill:"none",stroke:"black",strokeWidth:.5}),(0,x.jsxs)("g",{ref:n,children:[(0,x.jsx)("g",{fontSize:16,letterSpacing:1.2,children:e.note[0].split("\n").map((function(e,t){return(0,x.jsx)("text",{className:"rmg-name__zh",y:18*t,children:e},t)}))}),(0,x.jsx)("g",{fontSize:10,letterSpacing:.33,transform:"translate(0,".concat(18*e.note[0].split("\n").length,")"),children:e.note[1].split("\n").map((function(t,n){var r;return(0,x.jsx)("text",{className:"rmg-name__en",y:11*n,textLength:n<((null===(r=e.note[1].match(/\n/g))||void 0===r?void 0:r.length)||0)?c.width:navigator.userAgent.includes("Firefox")?-1:0,lengthAdjust:"spacing",children:t},n)}))})]})]})}),(function(e,t){return e.note.toString()===t.note.toString()}))},20888:function(e,t,n){n.r(t);var r=n(1413),s=n(4942),i=n(72791),a=n(15362),c=n(80184);t.default=function(e){var t=function(e){switch(e){case"gz28":case"gz2otis":case"gz6":case"gzgf":return 60;case"gz1":case"gz3":return 40;case"gz4":case"gz5":case"gz1421":return 20;default:return 0}}(e.variant),n=i.useMemo((function(){switch(e.variant){case"gz1":return(0,c.jsx)("circle",{cy:-58,r:16,fill:"red"});case"gz28":case"gz2otis":return(0,c.jsx)("ellipse",{cy:-30,rx:24,ry:12,fill:"orange"});case"gz3":return(0,c.jsx)("rect",{x:-15,y:-55,height:30,width:30,fill:"red"});case"gz6":return(0,c.jsx)("ellipse",{cy:-30,rx:24,ry:12,fill:"white"});case"gz1421":return(0,c.jsx)("ellipse",{cy:-38,rx:24,ry:12,fill:"orange"});case"gz5":return(0,c.jsx)("rect",{x:-30,y:-70,height:30,width:60,fill:"orange"});case"gz4":return(0,c.jsx)("rect",{x:-50,y:-50,height:25,width:100,fill:"whitesmoke"});case"gzgf":return(0,c.jsx)("rect",{x:-30,y:-58,height:30,width:60,fill:"orange"});default:return(0,c.jsx)(c.Fragment,{})}}),[e.variant]);return(0,c.jsxs)("g",{transform:"translate(0,".concat("gz4"===e.variant?-20:0,")"),children:[(0,c.jsx)("rect",{id:"strip_gz",style:(0,s.Z)({},"--height","".concat(t,"px"))}),(0,c.jsx)("g",{style:{transform:"translate(calc(var(--rmg-svg-width) / 2),var(--rmg-svg-height))"},children:e.isShowLight&&n}),!1!==e.isShowPSD&&(0,c.jsx)(l,(0,r.Z)({},e))]})};var l=i.memo((function(e){var t,n=["gz28","gz2otis","gz6","gzgf"].includes(e.variant),r=function(e){switch(e){case"gz1":case"gz3":return"82px";case"gz4":return"65px";case"gz5":return"80px";case"gz1421":return"62px";default:return"58px"}}(e.variant);return(0,c.jsx)(a.default,{num:e.isShowPSD,inStrip:n,style:(t={},(0,s.Z)(t,"--psd-dy",r),(0,s.Z)(t,"transform","translate(var(--translate-x), var(--translate-y))"),(0,s.Z)(t,"--translate-x","calc(var(--rmg-svg-width) / 2 + 80px)"),(0,s.Z)(t,"--translate-y","calc(var(--rmg-svg-height) - var(--psd-dy, 58px))"),t)})}),(function(e,t){return e.variant===t.variant&&e.isShowPSD===t.isShowPSD}))},62554:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var r=n(4942),s=(n(72791),n(80184));function i(e){var t,n=e.type,i=e.svgWidth,a=e.svgHeight,c=e.canvasScale,l=e.theme,o=e.children;return(0,s.jsxs)("svg",{id:n,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",height:a*c,viewBox:"0 0 ".concat(i," ").concat(a),colorInterpolationFilters:"sRGB",style:(t={},(0,r.Z)(t,"--rmg-svg-width",i+"px"),(0,r.Z)(t,"--rmg-svg-height",a+"px"),(0,r.Z)(t,"--rmg-theme-colour",l[2]),(0,r.Z)(t,"--rmg-theme-fg",l[3]),t),children:[(0,s.jsx)("rect",{id:"canvas-bg",fill:"white",style:{height:"var(--rmg-svg-height)",width:"var(--rmg-svg-width)"}}),o,(0,s.jsx)("rect",{id:"canvas-border",fill:"none",strokeWidth:3,stroke:"none",style:{height:"var(--rmg-svg-height)",width:"var(--rmg-svg-width)"}})]})}}}]);
//# sourceMappingURL=9952.1309d87e.chunk.js.map