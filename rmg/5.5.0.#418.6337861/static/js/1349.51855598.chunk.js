"use strict";(self.webpackChunkrmg=self.webpackChunkrmg||[]).push([[1349,5031,8052],{13203:function(e,t,n){n.d(t,{MM:function(){return s},Yg:function(){return l}});var r=n(1413),a=n(85884),o=n(20713),c=n(37732),i=n(8785),s=(0,a.Z)((0,i.Bx)()),u=c.ZP.getState(),l=function(e){return s((0,r.Z)((0,r.Z)({},u),{},{param:(0,r.Z)((0,r.Z)({},u.param),{},{stn_list:e})}))};o.H_.through,o.H_.through},35031:function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var r=n(1413),a=(n(72791),n(80184));function o(e){return(0,a.jsx)("rect",(0,r.Z)({x:-22.5,height:24,width:45,rx:4.5},e))}},21359:function(e,t,n){n.r(t);var r=n(29439),a=n(72791),o=n(7043),c=n(80184);t.default=(0,a.memo)((function(e){var t=e.lineName,n=e.commonPart,i=(0,a.useRef)(null),s=(0,a.useState)({x:0,height:0,width:0}),u=(0,r.Z)(s,2),l=u[0],d=u[1];(0,a.useEffect)((function(){i.current&&d(i.current.getBBox())}),[t.toString()]);var f=o.MAX_WIDTH/Math.max(o.MAX_WIDTH,l.width),x=(-l.x-l.width/2)*f,h=l.height*(1-f)*1.2/2;return(0,c.jsx)("g",{ref:i,transform:"translate(".concat(x,",").concat(h,")scale(").concat(f,")"),children:(0,c.jsxs)("text",{className:"rmg-name__zh",fontSize:14,y:12,textAnchor:"end",children:[n,(0,c.jsx)("tspan",{className:"rmg-name__zh",fontSize:8,x:0,dy:-2,textAnchor:"start",children:t[0].slice(n.length).trim()}),(0,c.jsx)("tspan",{className:"rmg-name__en",fontSize:4,x:0,dy:6,textAnchor:"start",children:t[1].slice(n.length).trim()})]})})}),(function(e,t){return e.lineName.toString()===t.lineName.toString()}))},11349:function(e,t,n){n.r(t);n(72791);var r=n(7043),a=n(20713),o=n(37722),c=n(99607),i=n(80184),s=jest.fn();SVGElement.prototype.getBBox=s,describe("GZMTRLineIcon",(function(){beforeEach((function(){s.mockReturnValue({width:0})})),it("Can render line icon for passed station as expected",(function(){var e=(0,o.s)((0,i.jsx)("svg",{children:(0,i.jsx)(r.default,{lineName:["18\u53f7\u7ebf","Line 18"],foregroundColour:a.AJ.black,backgroundColour:"#000000",passed:!0})})).container,t=e.querySelector("g");expect(t).toBeInTheDocument(),expect(null===t||void 0===t?void 0:t.getAttribute("fill")).toBe(a.AJ.white);var n=e.querySelector("rect");expect(n).toBeInTheDocument(),expect(null===n||void 0===n?void 0:n.getAttribute("fill")).toBe("#aaa")})),it("Can render type 1 line icon as expected",(function(){(0,o.s)((0,i.jsx)("svg",{children:(0,i.jsx)(r.default,{lineName:["18\u53f7\u7ebf","Line 18"],foregroundColour:a.AJ.white,backgroundColour:"#000000"})})),expect(c.sp.getByText("18").tagName).toBe("tspan"),expect(c.sp.getByText("\u53f7\u7ebf").tagName).toBe("tspan"),expect(c.sp.getByText("Line 18").tagName).toBe("text")})),it("Can render type 2 line icon as expected",(function(){(0,o.s)((0,i.jsx)("svg",{children:(0,i.jsx)(r.default,{lineName:["APM\u7ebf","APM Line"],foregroundColour:a.AJ.white,backgroundColour:"#000000"})})),expect(c.sp.getByText("\u7ebf").tagName).toBe("tspan"),expect(c.sp.getByText("Line").tagName).toBe("tspan"),expect(c.sp.getByText("APM").tagName).toBe("text")})),it("Can render type 3 line icon as expected",(function(){(0,o.s)((0,i.jsx)("svg",{children:(0,i.jsx)(r.default,{lineName:["\u4f5b\u5c712\u53f7\u7ebf","Foshan Line 2"],foregroundColour:a.AJ.white,backgroundColour:"#000000"})})),expect(c.sp.getByText("\u4f5b\u5c712\u53f7\u7ebf").tagName).toBe("text"),expect(c.sp.getByText("Foshan Line 2").tagName).toBe("text")}))}))},7043:function(e,t,n){n.r(t),n.d(t,{MAX_WIDTH:function(){return u}});var r=n(29439),a=n(72791),o=n(20713),c=n(21359),i=n(35031),s=n(80184),u=42;t.default=(0,a.memo)((function(e){var t=e.lineName,n=e.foregroundColour,f=e.backgroundColour,x=e.passed,h=l(t),g=(0,r.Z)(h,2),m=g[0],p=g[1],B=(0,a.useRef)(null),j=(0,a.useRef)(null),v=(0,a.useState)({width:0}),N=(0,r.Z)(v,2),y=N[0],C=N[1],S=(0,a.useState)({width:0}),_=(0,r.Z)(S,2),w=_[0],A=_[1];(0,a.useEffect)((function(){B.current&&C(B.current.getBBox()),j.current&&A(j.current.getBBox())}),[t.toString()]);var Z=u/Math.max(u,y.width),z=u/Math.max(u,w.width);return(0,s.jsxs)("g",{textAnchor:"middle",fill:x?o.AJ.white:n,children:[(0,s.jsx)(i.default,{fill:x?"#aaa":f}),2===m?(0,s.jsx)(c.default,{lineName:t,commonPart:p}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("text",{ref:B,y:d(m,"zh",Z),className:"rmg-name__zh",fontSize:12,transform:"scale(".concat(Z,")"),children:1===m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("tspan",{fontSize:16,dy:.7,className:"rmg-name__zh",children:p}),(0,s.jsx)("tspan",{dy:-.7,className:"rmg-name__zh",children:t[0].slice(p.length)})]}):t[0]}),(0,s.jsx)("text",{ref:j,y:d(m,"en",z),className:"rmg-name__en",fontSize:8,transform:"scale(".concat(z,")"),children:t[1]})]})]})}),(function(e,t){return e.lineName.toString()===t.lineName.toString()&&e.foregroundColour===t.foregroundColour&&e.backgroundColour===t.backgroundColour&&e.passed===t.passed}));var l=function(e){var t=e[0].match(/^(\d+)\D+$/);if(t)return[1,t[1]];var n=e.map((function(e){return e.match(/^([\w\d]+).+$/)}));return n[0]&&n[1]&&n[0][1]===n[1][1]?[2,n[0][1]]:[3,""]},d=function(e,t,n){switch(e){case 1:return("zh"===t?7.3:19.5)*(2-n);case 2:return 0;case 3:return"zh"===t?8*(2-n):19.5+47.53125*(1-n)-(1===n?0:5.5)}}},37722:function(e,t,n){n.d(t,{s:function(){return m}});var r=n(45987),a=n(1413),o=(n(24089),n(72791),n(99607)),c=n(83533),i=n(46726),s=n(59434),u=n(37732),l=n(13203),d=n(16871),f=n(80184),x=["store"],h={store:(0,l.MM)((0,a.Z)({},u.ZP.getState()))},g=function(e){var t=e.children,n=e.store;return(0,f.jsx)(c.a,{i18n:i.Z,children:(0,f.jsx)(s.zt,{store:n,children:(0,f.jsx)(d.VA,{children:t})})})},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,n=t.store,c=(0,r.Z)(t,x);return(0,o.sY)(e,(0,a.Z)({wrapper:function(e){return(0,f.jsx)(g,(0,a.Z)({store:n},e))}},c))}}}]);
//# sourceMappingURL=1349.51855598.chunk.js.map