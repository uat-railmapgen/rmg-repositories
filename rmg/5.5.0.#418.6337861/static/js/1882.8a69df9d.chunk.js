"use strict";(self.webpackChunkrmg=self.webpackChunkrmg||[]).push([[1882,8306],{31882:function(t,e,n){n.r(e);var o=n(1413),r=n(93433),a=n(20713),c=n(68306),i=Array.from(new Array(20),(function(t,e){return e+2})).map((function(t){return(0,r.Z)(Array(t).keys()).map((function(t){return String.fromCharCode(t+97)}))})).map((function(t){return t.map((function(e){return{loopline:t,current_stn_id:e}}))})).flat().map((function(t){return Array.from(new Array(t.loopline.length-1),(function(t,e){return e+1})).map((function(e){return(0,o.Z)((0,o.Z)({},t),{},{bottom_factor:e,left_and_right_factor:Math.floor((t.loopline.length-2*e)/2)})}))})).flat().filter((function(t){return t.bottom_factor>0&&t.left_and_right_factor>=0&&t.bottom_factor+t.left_and_right_factor>0})),l=[{loopline:["a","b","c","d","e"],branch_stn_id:"b",bottom_factor:1,left_and_right_factor:1},{loopline:["a","b","c","d","e"],branch_stn_id:"b",bottom_factor:0,left_and_right_factor:1},{loopline:["a","b","c","d","e"],branch_stn_id:"b",bottom_factor:1,left_and_right_factor:0},{loopline:["a","b","c","d","e"],branch_stn_id:"b",bottom_factor:2,left_and_right_factor:0},{loopline:["a","b","c","d","e"],branch_stn_id:"b",bottom_factor:0,left_and_right_factor:2},{loopline:["a","b","c","d","e"],branch_stn_id:"d",bottom_factor:1,left_and_right_factor:1},{loopline:["a","b","c","d","e"],branch_stn_id:"d",bottom_factor:0,left_and_right_factor:1},{loopline:["a","b","c","d","e"],branch_stn_id:"d",bottom_factor:1,left_and_right_factor:0},{loopline:["a","b","c","d","e"],branch_stn_id:"d",bottom_factor:2,left_and_right_factor:0},{loopline:["a","b","c","d","e"],branch_stn_id:"d",bottom_factor:0,left_and_right_factor:2}],_=[{loopline:["a","b","c","d","e"],branch_stn_ids:["b","d"],left_and_right_factor:0,arc:"major"},{loopline:["a","b","c","d","e"],branch_stn_ids:["b","d"],left_and_right_factor:0,arc:"minor"},{loopline:["a","b","c","d","e"],branch_stn_ids:["a","c"],left_and_right_factor:0,arc:"major"},{loopline:["a","b","c","d","e"],branch_stn_ids:["c","a"],left_and_right_factor:0,arc:"major"},{loopline:["a","b","c","d","e"],branch_stn_ids:["b","c"],left_and_right_factor:0,arc:"major"},{loopline:["a","b","c","d","e"],branch_stn_ids:["a","e"],left_and_right_factor:0,arc:"minor"},{loopline:["a","b","c","d","e","f"],branch_stn_ids:["b","e"],left_and_right_factor:1,arc:"major"},{loopline:["a","b","c","d","e","f"],branch_stn_ids:["e","b"],left_and_right_factor:1,arc:"major"},{loopline:["a","b","c","d","e","f"],branch_stn_ids:["d","c"],left_and_right_factor:1,arc:"minor"}];describe("Unit tests for loop methods",(function(){it.each(i)("Correctly split loop stations",(function(t){var e=t.loopline,n=t.current_stn_id,o=t.bottom_factor,a=t.left_and_right_factor,i=(0,c.split_loop_stns)(e,n,o,a);expect(i.top.length).toBeGreaterThanOrEqual(1),expect(i.right.length).toBeGreaterThanOrEqual(a),expect(i.bottom.length).toBeGreaterThanOrEqual(o),expect(i.left.length).toBeGreaterThanOrEqual(a);var l=[].concat((0,r.Z)(i.top),(0,r.Z)(i.right),(0,r.Z)(i.left),(0,r.Z)(i.bottom));expect(l.length).toBe(e.length),expect(l.sort()).toEqual(e.sort())})),it.each(l)("Correctly split loop stations with one branch",(function(t){var e=t.loopline,n=t.branch_stn_id,o=t.bottom_factor,a=t.left_and_right_factor,i=(0,c.split_loop_stns_with_branch)(e,n,o,a);expect(i.top.length).toBeGreaterThanOrEqual(1),expect(i.right.length).toBeGreaterThanOrEqual(a),expect(i.bottom.length).toBeGreaterThanOrEqual(o),expect(i.left.length).toBeGreaterThanOrEqual(a),expect(i.top.at(0)).toBe(n);var l=[].concat((0,r.Z)(i.top),(0,r.Z)(i.right),(0,r.Z)(i.left),(0,r.Z)(i.bottom));expect(l.length).toBe(e.length),expect(l.sort()).toEqual(e.sort())})),it.each(_)("Correctly split loop stations with two branches",(function(t){var e=t.loopline,n=t.branch_stn_ids,o=t.left_and_right_factor,a=t.arc,i=(0,c.split_loop_stns_with_branches)(e,n,o,a);expect(i.top.length).toBeGreaterThanOrEqual(1),expect(i.right.length).toBeGreaterThanOrEqual(o),expect(i.bottom.length).toBeGreaterThanOrEqual(0),expect(i.left.length).toBeGreaterThanOrEqual(o),expect(i.top.at(0)).toMatch(new RegExp(n.join("|"))),expect(i.top.at(-1)).toMatch(new RegExp(n.join("|")));var l=[].concat((0,r.Z)(i.top),(0,r.Z)(i.right),(0,r.Z)(i.left),(0,r.Z)(i.bottom));expect(l.length).toBe(e.length),expect(l.sort()).toEqual(e.sort())})),it("Correctly get pivot stations",(function(){var t,e=[["a","b","c","d","e"]],n=Object.fromEntries(e[0].map((function(t){return[t,{loop_pivot:!1}]})));t=(0,c.get_pivot_stations)(e,a.wA.left,n,"b"),expect(t.length).toBe(0),n.c.loop_pivot=!0,t=(0,c.get_pivot_stations)(e,a.wA.left,n,"b"),expect(t.length).toBe(1),expect(t).toEqual(["c"]),t=(0,c.get_pivot_stations)(e,a.wA.right,n,"b"),expect(t.length).toBe(2),expect(t).toEqual(["c","c"]),n.e.loop_pivot=!0,t=(0,c.get_pivot_stations)(e,a.wA.left,n,"b"),expect(t.length).toBe(2),expect(t).toEqual(["e","c"]),t=(0,c.get_pivot_stations)(e,a.wA.right,n,"b"),expect(t.length).toBe(2),expect(t).toEqual(["c","e"]),t=(0,c.get_pivot_stations)(e,a.wA.left,n,"e"),expect(t.length).toBe(2),expect(t).toEqual(["c","e"]),t=(0,c.get_pivot_stations)(e,a.wA.right,n,"e"),expect(t.length).toBe(2),expect(t).toEqual(["c","e"])}))}))},68306:function(t,e,n){n.r(e),n.d(e,{split_loop_stns:function(){return a},split_loop_stns_with_branch:function(){return c},split_loop_stns_with_branches:function(){return i},get_xshares_yshares_of_loop:function(){return l},get_pivot_stations:function(){return _}});var o=n(29439),r=n(93433),a=function(t,e,n,o){var a=t.length-2*o-n,c=t.findIndex((function(t){return t===e})),i=[].concat((0,r.Z)(t),(0,r.Z)(t),(0,r.Z)(t)),l=t.length+c-Math.floor(a/2)+(a%2===0?1:0),_=t.length+c+Math.floor(a/2);return{top:i.slice(l,_+1),left:i.slice(l-o,l),right:i.slice(_+1,_+1+o),bottom:i.slice(_+1+o,_+1+o+n)}},c=function(t,e,n,o){var a=t.length-2*o-n,c=[].concat((0,r.Z)(t),(0,r.Z)(t),(0,r.Z)(t)),i=t.length+t.findIndex((function(t){return t===e})),l=c[i+a-1],_=t.length+t.findIndex((function(t){return t===l}))+(i+a>2*t.length?t.length:0);return{top:c.slice(i,_+1),left:c.slice(i-o,i),right:c.slice(_+1,_+1+o),bottom:c.slice(_+1+o,_+1+o+n)}},i=function(t,e,n,r){var a=t.findIndex((function(t){return t===e[0]})),i=t.findIndex((function(t){return t===e[1]})),l=a>i?[i,a,e[1],e[0]]:[a,i,e[0],e[1]],_=(0,o.Z)(l,4);a=_[0],i=_[1],e[0]=_[2],e[1]=_[3];var f=t.slice(a,i+1),h=t.filter((function(t){return!f.filter((function(t){return!e.includes(t)})).includes(t)})),s=t.length-("major"===r?Math.max:Math.min)(f.length,h.length)-2*n,p="major"===r?f.length>h.length?e[0]:e[1]:f.length>h.length?e[1]:e[0];return c(t,p,s,n)},l=function(t,e){var n=Object.fromEntries(t.map((function(t){return[t,-1]}))),o=Object.fromEntries(t.map((function(t){return[t,-1]})));return e.top.forEach((function(t,r){n[t]=0+1/(e.top.length+1)*(r+1),o[t]=0})),e.right.forEach((function(t,r){n[t]=1,o[t]=0+1/(e.right.length+1)*(r+1)})),e.bottom.forEach((function(t,r){n[t]=1-1/(e.bottom.length+1)*(r+1),o[t]=1})),e.left.forEach((function(t,r){n[t]=0,o[t]=1-1/(e.left.length+1)*(r+1)})),{x_shares:n,y_shares:o}},_=function(t,e,n,o){var a=t[0].filter((function(t){return!["linestart","lineend"].includes(t)})),c=[].concat((0,r.Z)(a),(0,r.Z)(a),(0,r.Z)(a)),i="r"===e?c:c.reverse(),l=i.findIndex((function(t){return o===t}))+a.length;return i.slice(l+1).filter((function(t){return n[t].loop_pivot})).slice(void 0,2)}}}]);
//# sourceMappingURL=1882.8a69df9d.chunk.js.map