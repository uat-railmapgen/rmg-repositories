"use strict";(self.webpackChunkrmg=self.webpackChunkrmg||[]).push([[8519,5031,8052,5900,1793,8827,127,6373,830,9197,3824,2901],{35031:function(t,n,e){e.r(n),e.d(n,{default:function(){return i}});var r=e(1413),a=(e(72791),e(80184));function i(t){return(0,a.jsx)("rect",(0,r.Z)({x:-22.5,height:24,width:45,rx:4.5},t))}},21359:function(t,n,e){e.r(n);var r=e(29439),a=e(72791),i=e(7043),c=e(80184);n.default=(0,a.memo)((function(t){var n=t.lineName,e=t.commonPart,s=(0,a.useRef)(null),o=(0,a.useState)({x:0,height:0,width:0}),u=(0,r.Z)(o,2),l=u[0],h=u[1];(0,a.useEffect)((function(){s.current&&h(s.current.getBBox())}),[n.toString()]);var d=i.MAX_WIDTH/Math.max(i.MAX_WIDTH,l.width),f=(-l.x-l.width/2)*d,m=l.height*(1-d)*1.2/2;return(0,c.jsx)("g",{ref:s,transform:"translate(".concat(f,",").concat(m,")scale(").concat(d,")"),children:(0,c.jsxs)("text",{className:"rmg-name__zh",fontSize:14,y:12,textAnchor:"end",children:[e,(0,c.jsx)("tspan",{className:"rmg-name__zh",fontSize:8,x:0,dy:-2,textAnchor:"start",children:n[0].slice(e.length).trim()}),(0,c.jsx)("tspan",{className:"rmg-name__en",fontSize:4,x:0,dy:6,textAnchor:"start",children:n[1].slice(e.length).trim()})]})})}),(function(t,n){return t.lineName.toString()===n.lineName.toString()}))},7043:function(t,n,e){e.r(n),e.d(n,{MAX_WIDTH:function(){return u}});var r=e(29439),a=e(72791),i=e(20713),c=e(21359),s=e(35031),o=e(80184),u=42;n.default=(0,a.memo)((function(t){var n=t.lineName,e=t.foregroundColour,d=t.backgroundColour,f=t.passed,m=l(n),g=(0,r.Z)(m,2),x=g[0],p=g[1],v=(0,a.useRef)(null),S=(0,a.useRef)(null),y=(0,a.useState)({width:0}),j=(0,r.Z)(y,2),Z=j[0],_=j[1],M=(0,a.useState)({width:0}),N=(0,r.Z)(M,2),w=N[0],P=N[1];(0,a.useEffect)((function(){v.current&&_(v.current.getBBox()),S.current&&P(S.current.getBBox())}),[n.toString()]);var k=u/Math.max(u,Z.width),z=u/Math.max(u,w.width);return(0,o.jsxs)("g",{textAnchor:"middle",fill:f?i.AJ.white:e,children:[(0,o.jsx)(s.default,{fill:f?"#aaa":d}),2===x?(0,o.jsx)(c.default,{lineName:n,commonPart:p}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("text",{ref:v,y:h(x,"zh",k),className:"rmg-name__zh",fontSize:12,transform:"scale(".concat(k,")"),children:1===x?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("tspan",{fontSize:16,dy:.7,className:"rmg-name__zh",children:p}),(0,o.jsx)("tspan",{dy:-.7,className:"rmg-name__zh",children:n[0].slice(p.length)})]}):n[0]}),(0,o.jsx)("text",{ref:S,y:h(x,"en",z),className:"rmg-name__en",fontSize:8,transform:"scale(".concat(z,")"),children:n[1]})]})]})}),(function(t,n){return t.lineName.toString()===n.lineName.toString()&&t.foregroundColour===n.foregroundColour&&t.backgroundColour===n.backgroundColour&&t.passed===n.passed}));var l=function(t){var n=t[0].match(/^(\d+)\D+$/);if(n)return[1,n[1]];var e=t.map((function(t){return t.match(/^([\w\d]+).+$/)}));return e[0]&&e[1]&&e[0][1]===e[1][1]?[2,e[0][1]]:[3,""]},h=function(t,n,e){switch(t){case 1:return("zh"===n?7.3:19.5)*(2-e);case 2:return 0;case 3:return"zh"===n?8*(2-e):19.5+47.53125*(1-e)-(1===e?0:5.5)}}},55900:function(t,n,e){e.r(n);var r=e(72791),a=e(80184);n.default=(0,r.memo)((function(t){var n=t.passed,e=t.large?"M0,12.95 V-12.95 H-12.95 a12.95,12.95 0 0,0 0,25.9 h25.9 a12.95,12.95 0 0,0 0,-25.9 H0":"M0,9.25 V-9.25 H-9.25 a9.25,9.25 0 0,0 0,18.5 h18.5 a9.25,9.25 0 0,0 0,-18.5 H0";return(0,a.jsx)("path",{d:e,fill:"#fff",strokeWidth:2,stroke:n?"#aaa":"var(--rmg-theme-colour)"})}),(function(t,n){return t.passed===n.passed&&t.large===n.large}))},91793:function(t,n,e){e.r(n),e.d(n,{default:function(){return l}});var r=e(1413),a=e(29439),i=e(45987),c=e(72791),s=e(55900),o=e(80184),u=["lineNum","stnNum","passed","large"];function l(t){var n=t.lineNum,e=t.stnNum,l=t.passed,h=t.large,d=(0,i.Z)(t,u),f=(0,c.useRef)(null),m=(0,c.useRef)(null),g=(0,c.useState)({width:0}),x=(0,a.Z)(g,2),p=x[0],v=x[1],S=(0,c.useState)({width:0}),y=(0,a.Z)(S,2),j=y[0],Z=y[1];(0,c.useEffect)((function(){v(f.current.getBBox()),Z(m.current.getBBox())}),[n,e]);var _=15/Math.max(15,p.width),M=2===n.length&&2===e.length?_:15/Math.max(15,j.width);return(0,o.jsxs)("g",(0,r.Z)((0,r.Z)({},d),{},{children:[(0,o.jsx)(s.default,{passed:l,large:h}),(0,o.jsxs)("g",{textAnchor:"middle",fontSize:13.5,transform:h?"scale(1.4)":"",fill:l?"#aaa":"#000",children:[(0,o.jsx)("g",{transform:"translate(-9.25,0)scale(".concat(_,")"),children:(0,o.jsx)("text",{ref:f,className:"rmg-name__zh",children:n})}),(0,o.jsx)("g",{transform:"translate(9.25,0)scale(".concat(M,")"),children:(0,o.jsx)("text",{ref:m,className:"rmg-name__zh",children:e})})]})]}))}},38827:function(t,n,e){e.r(n),e.d(n,{default:function(){return s}});var r=e(1413),a=e(45987),i=(e(72791),e(80184)),c=["passed"];function s(t){var n=t.passed,e=(0,a.Z)(t,c);return(0,i.jsxs)("g",(0,r.Z)((0,r.Z)({textAnchor:"middle",fill:n?"#aaa":"var(--rmg-theme-colour)"},e),{},{children:[(0,i.jsx)("text",{className:"rmg-name__zh",fontSize:13,children:"\u5feb\u8f66\u505c\u9760\u7ad9"}),(0,i.jsx)("text",{dy:10,className:"rmg-name__en",fontSize:6.5,children:"Express Station"})]}))}},16373:function(t,n,e){e.r(n),e.d(n,{default:function(){return l}});var r=e(29439),a=e(72791),i=e(20713),c=e(30127),s=e(40830),o=e(38827),u=e(80184);function l(t){var n=t.primaryName,e=t.secondaryName,l=t.stationState,h=t.flipped,d=t.express,f=(0,a.useState)({width:0}),m=(0,r.Z)(f,2),g=m[0],x=m[1],p=(0,a.useState)({x:0,width:-20}),v=(0,r.Z)(p,2),S=v[0],y=v[1],j=n[1].split("\\").length,Z={g:{x:0,y:h?17.5:-20-14*j*Math.cos(-45)},StationSecondaryName:{x:(g.width+S.width/2+10)*(h?-1:1),y:2+5*(j-1)},ExpressTag:{x:(g.width+S.width+20+35)*(h?-1:1),y:2+5*(j-1)}};return(0,u.jsxs)("g",{textAnchor:h?"end":"start",fill:function(t){switch(t){case i.KR.PASSED:return"#aaa";case i.KR.CURRENT:return"#f00";case i.KR.FUTURE:return"#000"}}(l),transform:"translate(".concat(Z.g.x,",").concat(Z.g.y,")rotate(-45)"),children:[(0,u.jsx)(c.default,{stnName:n,onUpdate:x}),e&&(0,u.jsx)(s.default,{stnName:e,onUpdate:y,passed:l===i.KR.PASSED,transform:"translate(".concat(Z.StationSecondaryName.x,",").concat(Z.StationSecondaryName.y,")")}),d&&(0,u.jsx)(o.default,{passed:l===i.KR.PASSED,transform:"translate(".concat(Z.ExpressTag.x,",").concat(Z.ExpressTag.y,")")})]})}},30127:function(t,n,e){e.r(n);var r=e(72791),a=e(80184);n.default=(0,r.memo)((function(t){var n=t.stnName,e=t.onUpdate,i=(0,r.useRef)(null);return(0,r.useEffect)((function(){e&&e(i.current.getBBox())}),[n.toString()]),(0,a.jsxs)("g",{ref:i,children:[(0,a.jsx)("text",{className:"rmg-name__zh",fontSize:18,children:n[0]}),(0,a.jsx)("g",{fontSize:10.5,children:n[1].split("\\").map((function(t,n){return(0,a.jsx)("text",{className:"rmg-name__en",dy:16+11*n,children:t},n)}))})]})}),(function(t,n){return t.stnName.toString()===n.stnName.toString()}))},40830:function(t,n,e){e.r(n),e.d(n,{default:function(){return u}});var r=e(1413),a=e(29439),i=e(45987),c=e(72791),s=e(80184),o=["stnName","onUpdate","passed"];function u(t){var n=t.stnName,e=t.onUpdate,u=t.passed,l=(0,i.Z)(t,o),h=(0,c.useRef)(null),d=(0,c.useState)({x:0,width:0}),f=(0,a.Z)(d,2),m=f[0],g=f[1];return(0,c.useEffect)((function(){var t=h.current.getBBox();g(t),e&&e(t)}),[n.toString()]),(0,s.jsxs)("g",(0,r.Z)((0,r.Z)({fill:u?"#aaa":"#000"},l),{},{children:[(0,s.jsxs)("g",{transform:"translate(0,3)",fontSize:18,children:[(0,s.jsx)("text",{textAnchor:"end",x:m.x-3,className:"rmg-name__zh",children:"("}),(0,s.jsx)("text",{textAnchor:"start",x:m.width+m.x+3,className:"rmg-name__zh",children:")"})]}),(0,s.jsxs)("g",{ref:h,textAnchor:"middle",children:[(0,s.jsx)("text",{className:"rmg-name__zh",fontSize:13,children:n[0]}),(0,s.jsx)("text",{dy:10,className:"rmg-name__en",fontSize:6.5,children:n[1]})]})]}))}},58519:function(t,n,e){e.r(n);var r=e(4942),a=e(1413),i=e(72791),c=e(79197),s=e(23824),o=e(20713),u=e(37732),l=e(7043),h=e(80184),d=function(t,n){return 2===t[n].parents.length||2===t[n].children.length?.25:0};n.default=function(){var t,n=(0,u.Qy)((function(t){return t.helper})),e=n.branches,c=n.routes,x=n.depsStr,p=(0,u.Qy)((function(t){return t.param})),v=p.svgWidth,S=p.svg_height,y=p.y_pc,j=p.padding,Z=p.branchSpacingPct,_=p.direction,M=p.line_name,N=p.current_stn_idx,w=p.stn_list,P=(0,s.adjacencyList)(w,d,d),k=(0,i.useMemo)((function(){return console.log("computing x shares"),Object.keys(w).reduce((function(t,n){return(0,a.Z)((0,a.Z)({},t),{},(0,r.Z)({},n,function(t,n,e){var r=(0,s.criticalPathMethod)("linestart","lineend",n);if(r.nodes.includes(t))return(0,s.criticalPathMethod)(r.nodes[1],t,n).len;for(var a=e.filter((function(n){return n.includes(t)}))[0],i=t;!r.nodes.includes(i);)i=a[a.indexOf(i)-1];for(var c=t;!r.nodes.includes(c);)c=a[a.indexOf(c)+1];var o="linestart"===i,u="lineend"===c;if(a.toString()===e[0].toString()){var l=[];return o||u?o?(l[0]=0,l[1]=(0,s.criticalPathMethod)(r.nodes[1],c,n).len,l[2]=(0,s.criticalPathMethod)(a[1],t,n).len,l[3]=(0,s.criticalPathMethod)(t,c,n).len):(l[0]=(0,s.criticalPathMethod)(r.nodes[1],i,n).len,l[1]=(0,s.criticalPathMethod)(i,r.nodes.slice(-2)[0],n).len,l[2]=(0,s.criticalPathMethod)(i,t,n).len,l[3]=(0,s.criticalPathMethod)(t,a.slice(-2)[0],n).len):(l[0]=(0,s.criticalPathMethod)(r.nodes[1],i,n).len,l[1]=(0,s.criticalPathMethod)(i,c,n).len,l[2]=(0,s.criticalPathMethod)(i,t,n).len,l[3]=(0,s.criticalPathMethod)(t,c,n).len),l[0]+l[2]*l[1]/(l[2]+l[3])}if(o||u)return o?(0,s.criticalPathMethod)(r.nodes[1],c,n).len-(0,s.criticalPathMethod)(t,c,n).len:(0,s.criticalPathMethod)(r.nodes[1],i,n).len+(0,s.criticalPathMethod)(i,t,n).len;var h=[];return h[0]=(0,s.criticalPathMethod)(r.nodes[1],i,n).len,h[1]=(0,s.criticalPathMethod)(i,c,n).len,h[2]=(0,s.criticalPathMethod)(i,t,n).len,h[3]=(0,s.criticalPathMethod)(t,c,n).len,h[0]+h[2]*h[1]/(h[2]+h[3])}(n,P,e)))}),{})}),[e.toString(),JSON.stringify(P)]),z=(0,s.criticalPathMethod)("linestart","lineend",P),b=(0,s.criticalPathMethod)(z.nodes[1],z.nodes.slice(-2)[0],P),O=_===o.wA.right?[v[o.Ht.RailMap]*j/100+65,v[o.Ht.RailMap]*(1-j/100)-20]:[v[o.Ht.RailMap]*j/100,v[o.Ht.RailMap]*(1-j/100)-65],R=Object.keys(k).reduce((function(t,n){return(0,a.Z)((0,a.Z)({},t),{},(0,r.Z)({},n,O[0]+k[n]/b.len*(O[1]-O[0])))}),{}),E=(0,i.useMemo)((function(){return console.log("computing y shares"),Object.keys(w).reduce((function(t,n){if(e[0].includes(n))return(0,a.Z)((0,a.Z)({},t),{},(0,r.Z)({},n,0));var i=e.slice(1).filter((function(t){return t.includes(n)}))[0];return(0,a.Z)((0,a.Z)({},t),{},(0,r.Z)({},n,w[i[0]].children.indexOf(i[1])?-2:2))}),{})}),[x]),A=Object.keys(E).reduce((function(t,n){return(0,a.Z)((0,a.Z)({},t),{},(0,r.Z)({},n,-E[n]*Z*S/200))}),{}),H=(0,i.useMemo)((function(){return(0,s.getStnState)(N,c,_)}),[N,_,c.toString()]),T=e.map((function(t){return(0,s.drawLine)(t,H)})).reduce((function(t,n){return t.main.push(n.main),t.pass.push(n.pass),t}),{main:[],pass:[]}),B=Object.keys(T).reduce((function(t,n){return(0,a.Z)((0,a.Z)({},t),{},(0,r.Z)({},n,T[n].map((function(t){return m(t,R,A)}))))}),{});return(0,h.jsxs)("g",{id:"main",style:(t={},(0,r.Z)(t,"--y-percentage",y),(0,r.Z)(t,"transform","translateY(calc(var(--y-percentage) * var(--rmg-svg-height) / 100))"),t),children:[(0,h.jsx)(f,{paths:B}),(0,h.jsx)(g,{xs:R,ys:A,stnStates:H}),(0,h.jsx)("g",{id:"line_name",style:(0,r.Z)({},"--translate-x",_===o.wA.right?"".concat(O[0]-65,"px"):"".concat(O[1]+65,"px")),children:(0,h.jsx)(l.default,{lineName:M,foregroundColour:"var(--rmg-theme-fg)",backgroundColour:"var(--rmg-theme-colour)"})})]})};var f=i.memo((function(t){return(0,h.jsxs)("g",{fill:"none",strokeWidth:4,children:[(0,h.jsx)("g",{stroke:"#aaa",strokeDasharray:4,children:t.paths.pass.map((function(t,n){return(0,h.jsx)("path",{d:t},n)}))}),(0,h.jsx)("g",{stroke:"var(--rmg-theme-colour)",children:t.paths.main.map((function(t,n){return(0,h.jsx)("path",{d:t},n)}))})]})}),(function(t,n){return JSON.stringify(t.paths)===JSON.stringify(n.paths)})),m=function(t,n,e){var r,a=[];return t.forEach((function(t){var i=n[t],c=e[t];if(!r&&0!==r)return r=c,void a.push("M ".concat(i,",").concat(c));0===c?(c<r&&a.push("H ".concat(i-40),"a 40,40 0 0,0 40,-40","V ".concat(c)),c>r&&a.push("H ".concat(i-40),"a 40,40 0 0,1 40,40","V ".concat(c))):(c<r&&a.push("V ".concat(c+40),"a 40,40 0 0,1 40,-40","H ".concat(i)),c>r&&a.push("V ".concat(c-40),"a 40,40 0 0,0 40,40","H ".concat(i))),a.push("H ".concat(i)),r=c})),a.join(" ").replace(/( H ([\d.]+))+/g," H $2")},g=function(t){var n=t.xs,e=t.ys,r=t.stnStates,a=(0,u.Qy)((function(t){return t.param.stn_list}));return(0,h.jsx)("g",{id:"stn_icons",children:Object.keys(a).filter((function(t){return!["linestart","lineend"].includes(t)})).map((function(t){return(0,h.jsx)("g",{style:{transform:"translate(".concat(n[t],"px,").concat(e[t],"px)")},children:(0,h.jsx)(c.default,{stnId:t,stnState:r[t],stnY:e[t]})},t)}))})}},79197:function(t,n,e){e.r(n);var r=e(45987),a=e(1413),i=e(93433),c=(e(72791),e(91793)),s=e(20713),o=e(37732),u=e(7043),l=e(16373),h=e(80184),d=["intInfos","stnState","tickRotation"],f=["intInfos","tickRotation","stnState"];n.default=function(t){var n=t.stnId,e=t.stnState,r=t.stnY,a=(0,o.Qy)((function(t){return t.param.theme})),u=(0,o.Qy)((function(t){return t.param.line_name})),d=(0,o.Qy)((function(t){return t.param.line_num})),f=(0,o.Qy)((function(t){return t.param.stn_list[n]})),g=2===f.parents.length||2===f.children.length,x=r>0||1===f.parents.indexOf(f.branch.left[1]||"")||1===f.children.indexOf(f.branch.right[1]||"")?180:0,p=f.name[1].split("\\").length,v=g?180===x?16+12*(p-1)*Math.cos(-45):-9:180===x?-6:(25+15*(p-1))*Math.cos(-45);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(m,{intInfos:g?[[a[0],a[1],"var(--rmg-theme-colour)","var(--rmg-theme-fg)"].concat((0,i.Z)(u))].concat(f.transfer.info[0]):f.transfer.info[0],stnState:e,tickRotation:x}),(0,h.jsx)(c.default,{lineNum:d,stnNum:f.num,passed:-1===e}),(0,h.jsx)("g",{transform:"translate(".concat(-v,",0)"),children:(0,h.jsx)(l.default,{primaryName:f.name,secondaryName:f.secondaryName||void 0,stationState:e,flipped:180===x,express:f.services.includes(s.K9.express)})})]})};var m=function(t){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(g,(0,a.Z)({strokeWidth:4},t)),(0,h.jsx)(x,(0,a.Z)({transform:"translate(0,".concat(180===t.tickRotation?-47:23,")")},t))]})},g=function(t){var n=t.intInfos,e=t.stnState,i=t.tickRotation,c=(0,r.Z)(t,d);return(0,h.jsx)("g",(0,a.Z)((0,a.Z)({},c),{},{children:n.map((function(t,r){return(0,h.jsx)("use",{xlinkHref:"#inttick",stroke:-1===e?"#aaa":t[2],transform:"translate(".concat(-2*(n.length-1)+4*r,",0)rotate(").concat(180===i?180:0,")")},r)}))}))},x=function(t){var n=t.intInfos,e=t.tickRotation,i=t.stnState,c=(0,r.Z)(t,f);return(0,h.jsx)("g",(0,a.Z)((0,a.Z)({},c),{},{children:n.map((function(t,n){return(0,h.jsx)("g",{transform:"translate(0,".concat(28*n*(180===e?-1:1),")"),children:(0,h.jsx)(u.default,{lineName:[t[4],t[5]],foregroundColour:t[3],backgroundColour:t[2],passed:-1===i})},n)}))}))}},23824:function(t,n,e){e.r(n),e.d(n,{adjacencyList:function(){return h},criticalPathMethod:function(){return d},getXShareMTR:function(){return f},getStnState:function(){return m},Stations:function(){return g},drawLine:function(){return x}});var r=e(29439),a=e(15671),i=e(43144),c=e(93433),s=e(37762),o=e(4942),u=e(1413),l=e(20713),h=function(t,n,e){return Object.keys(t).reduce((function(r,a){return(0,u.Z)((0,u.Z)({},r),{},(0,o.Z)({},a,t[a].children.reduce((function(r,i){return(0,u.Z)((0,u.Z)({},r),{},(0,o.Z)({},i,1+n(t,i)+e(t,a)))}),{})))}),{})},d=function t(n,e,r){if(n===e)return{len:0,nodes:[n]};var a=[],i=[];Object.keys(r[n]).forEach((function(c){var s=t(c,e,r);s.len<0||(a.push(r[n][c]+s.len),s.nodes.unshift(n),i.push(s.nodes))}));var c=Math.max.apply(Math,a);return{len:c,nodes:i[a.indexOf(c)]}},f=function(t,n,e){var r=d("linestart","lineend",n);if(r.nodes.includes(t))return d(r.nodes[1],t,n).len;for(var a=e.filter((function(n){return n.includes(t)}))[0],i=t;!r.nodes.includes(i);)i=a[a.indexOf(i)-1];for(var c=t;!r.nodes.includes(c);)c=a[a.indexOf(c)+1];var s="linestart"===i,o=[];return s||"lineend"===c?s?(o[0]=0,o[1]=d(r.nodes[1],c,n).len,o[2]=d(a[1],t,n).len,o[3]=d(t,c,n).len):(o[0]=d(r.nodes[1],i,n).len,o[1]=d(i,r.nodes.slice(-2)[0],n).len,o[2]=d(i,t,n).len,o[3]=d(t,a.slice(-2)[0],n).len):(o[0]=d(r.nodes[1],i,n).len,o[1]=d(i,c,n).len,o[2]=d(i,t,n).len,o[3]=d(t,c,n).len),o[0]+o[2]*o[1]/(o[2]+o[3])},m=function(t,n,e){var r;return console.log("computing stations' states"),(0,c.Z)(new Set((r=[]).concat.apply(r,(0,c.Z)(n)))).reduce((function(r,a){return(0,u.Z)((0,u.Z)({},r),{},(0,o.Z)({},a,a===t?0:(e===l.wA.right?function(t,n,e){var r,a=(0,s.Z)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value,c=i.indexOf(t),o=i.indexOf(n);if(-1!==c&&c<o)return!0}}catch(u){a.e(u)}finally{a.f()}return!1}(t,a,n):function(t,n,e){var r,a=(0,s.Z)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value,c=i.indexOf(t),o=i.indexOf(n);if(-1!==o&&o<c)return!0}}catch(u){a.e(u)}finally{a.f()}return!1}(t,a,n))?1:-1))}),{})},g=function(){function t(n){var e=this;(0,a.Z)(this,t),this.yShares={},this.xShares={},this.namePoss={},this.stnList={},this.criticalPath={},this.leftWideFactor=function(t){return 0},this.rightWideFactor=function(t){return 0},this.pathTurnParams=function(t){var n=35-17.5*Math.sqrt(3),e=t-2*n;return{tr:35,dx_a:17.5,dy_a:n,dx_l:e*Math.sqrt(3),dy_l:e}},this.pathTurnSE=function(t){var n=e.pathTurnParams(t),r=n.tr,a=n.dx_a,i=n.dy_a,c=n.dx_l,s=n.dy_l;return"a ".concat(r,",").concat(r," 0 0,1 ").concat(a,",").concat(i," l ").concat(c,",").concat(s," a ").concat(r,",").concat(r," 0 0,0 ").concat(a,",").concat(i)},this.pathTurnNE=function(t){var n=e.pathTurnParams(t),r=n.tr,a=n.dx_a,i=n.dy_a,c=n.dx_l,s=n.dy_l;return"a ".concat(r,",").concat(r," 0 0,0 ").concat(a,",").concat(-i," l ").concat(c,",").concat(-s," a ").concat(r,",").concat(r," 0 0,1 ").concat(a,",").concat(-i)},this.stnList=n.stnList,this.criticalPath=n.criticalPath}return(0,i.Z)(t,[{key:"getYShare",value:function(t,n){if(t in this.yShares)return this.yShares[t];if(["linestart","lineend"].includes(t)||this.stnList[t].parents.length>1||this.stnList[t].children.length>1)return this.yShares[t]=0,0;var e=this.stnList[t].parents[0];if(e){if(1===this.stnList[e].children.length){var r=this.getYShare(e);return this.yShares[t]=r,r}var a=0===this.stnList[e].children.indexOf(t)?1:-1;return this.yShares[t]=a,a}return this.yShares[t]=0,0}},{key:"_linePath",value:function(t,n,e,a,i,c,s,o){var u=this,l=(0,r.Z)([],3),h=l[0],d=l[1],f=l[2],m=[],g=this.pathTurnParams(c),x=g.dx_a+g.dx_l/2,p=(n[1]-n[0])/s.len*2,v=((n[1]-n[0])/s.len-2*x)/2;return v+p<0&&console.warn("SVG width too small! ".concat(v+p)),t.forEach((function(n){var r=a[n],s=i[n];if(!d&&0!==d)return h=n,f=r,d=s,void(1===t.length?m.push("M ".concat(r,",").concat(s)):e[0].includes(n)?e[0].includes(t[1])?m.push("M ".concat(r,",").concat(s)):(a[t[1]]>0&&m.push("M ".concat(r,",").concat(s+o)),i[t[1]]<0&&m.push("M ".concat(r,",").concat(s-o))):m.push("M ".concat(r,",").concat(s)));s>d?(m.push("h ".concat(0===s?r-f-p*u.leftWideFactor(n)-v-2*x:p*u.rightWideFactor(h)+v)),m.push(u.pathTurnSE(c))):s<d&&(m.push("h ".concat(0===s?r-f-p*u.leftWideFactor(n)-v-2*x:p*u.rightWideFactor(h)+v)),m.push(u.pathTurnNE(c))),m.push("H ".concat(r)),h=n,f=r,d=s})),m.join(" ").replace(/( H ([\d.]+))+/g," H $2")}}],[{key:"getYShares",value:function(t,n){console.log("computing y shares");var e=new this({stnList:t});return Object.keys(t).forEach((function(t){["linestart","lineend"].includes(t)||t in e.yShares||e.getYShare(t,n)})),e.yShares}}]),t}(),x=function(t,n){var e=(t=t.filter((function(t){return!["linestart","lineend"].includes(t)}))).filter((function(t){return n[t]>=0})),r=t.filter((function(t){return n[t]<=0}));return 1===e.length&&(r=t),0===e.filter((function(t){return-1!==r.indexOf(t)})).length&&e.length&&(r[0]===t[0]?r.push(e[0]):e[0]===t[0]&&e[e.length-1]===t[t.length-1]&&r.length?(r=t,e=[]):r.unshift(e[e.length-1])),{main:e,pass:r}}},37762:function(t,n,e){e.d(n,{Z:function(){return a}});var r=e(40181);function a(t,n){var e="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=(0,r.Z)(t))||n&&t&&"number"===typeof t.length){e&&(t=e);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,s=!0,o=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return s=t.done,t},e:function(t){o=!0,c=t},f:function(){try{s||null==e.return||e.return()}finally{if(o)throw c}}}}}}]);
//# sourceMappingURL=8519.e8df7354.chunk.js.map