"use strict";(self.webpackChunkrmg=self.webpackChunkrmg||[]).push([[8045,3078,2756,9145,9945,3222,5704,484],{43078:function(t,e,n){n.r(e),n.d(e,{default:function(){return o}});n(72791);var r=n(20713),a=n(52756),i=n(89945),s=n(80184);function o(t){var e=t.interchangeInfoList,n=t.direction,o=t.isPassed,l=t.isReversed,c=t.repel,d=e.length<=1?0:18*e.length;return(0,s.jsxs)("g",{children:[1===e.length&&(0,s.jsx)(a.default,{interchangeInfo:e[0],isPassed:o,position:l?r.Ly.UP:r.Ly.DOWN,repel:c}),e.length>1&&e.map((function(t,e){return(0,s.jsx)("g",{transform:"translate(0,".concat(l?-18*(e+1):18*(e+1),")"),children:(0,s.jsx)(a.default,{interchangeInfo:t,isPassed:o,position:n===r.Nm.right?r.Ly.RIGHT:r.Ly.LEFT})},e)})),(0,s.jsx)(i.default,{length:d,isPassed:o,isReversed:l})]})}},52756:function(t,e,n){n.r(e);var r=n(72791),a=n(20713),i=n(80184),s=function(t){switch(t){case a.Ly.UP:return 180;case a.Ly.DOWN:return 0;case a.Ly.LEFT:return 90;case a.Ly.RIGHT:return-90}};function o(t){var e=t.interchangeInfo,n=t.isPassed,r=t.position,o=t.repel,l=e[4].split("\\").length,c=e[5].split("\\").length,d=r===a.Ly.LEFT||o===a.Nm.left?"end":r===a.Ly.RIGHT||o===a.Nm.right?"start":"middle",u={path:{rotate:s(r)},g:{x:(r===a.Ly.LEFT?-24:r===a.Ly.RIGHT?24:0)+(o===a.Nm.left?-3:o===a.Nm.right?3:0),y:r===a.Ly.UP?-37-10*(l-1)-7*(c-1):r===a.Ly.DOWN?31:6-(20+10*(l-1)+7*(c-1)-1)/2}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M0,0v17",strokeLinecap:"round",stroke:n?"var(--rmg-grey)":e[2],strokeWidth:8,transform:"rotate(".concat(u.path.rotate,")")}),(0,i.jsxs)("g",{textAnchor:d,transform:"translate(".concat(u.g.x,",").concat(u.g.y,")"),fill:n?"var(--rmg-grey)":"var(--rmg-black)",children:[e[4].split("\\").map((function(t,e){return(0,i.jsx)("text",{dy:10*e,className:"rmg-name__zh",fontSize:10,children:t},e)})),e[5].split("\\").map((function(t,e){return(0,i.jsx)("text",{dy:10*l-1+7*e,className:"rmg-name__en",fontSize:7,children:t},l+e)}))]})]})}e.default=(0,r.memo)(o,(function(t,e){return t.interchangeInfo.toString()===e.interchangeInfo.toString()&&t.isPassed===e.isPassed&&t.position===e.position&&t.repel===e.repel}))},89145:function(t,e,n){n.r(e),n.d(e,{default:function(){return o}});n(72791);var r=n(20713),a=n(52756),i=n(89945),s=n(80184);function o(t){var e,n,o,l,c,d=t.interchangeInfoList,u=t.direction,m=t.isPassed,f=t.isReversed,g=t.isTerminal,h=t.stationName,x=null!==(e=null===h||void 0===h||null===(n=h[1])||void 0===n||null===(o=n.split("\\"))||void 0===o?void 0:o.length)&&void 0!==e?e:1,v=18*(d.length-1),y={name:{x:g?0:1===d.length?u===r.Nm.left?-13:13:u===r.Nm.left?13:-13,y:g?f?19:-28:(f?-9:9)*(d.length-1)-4-5*(x-1)}};return(0,s.jsxs)("g",{children:[d.map((function(t,e,n){return(0,s.jsx)("g",{transform:"translate(0,".concat(f?-18*e:18*e,")"),children:(0,s.jsx)(a.default,{interchangeInfo:t,isPassed:m,position:1===n.length?f?r.Ly.UP:r.Ly.DOWN:u===r.Nm.right?r.Ly.RIGHT:r.Ly.LEFT})},e)})),(0,s.jsx)(i.default,{length:v,isPassed:m,isReversed:f}),(0,s.jsxs)("g",{textAnchor:0===y.name.x?"middle":y.name.x>0?"start":"end",fill:m?"var(--rmg-grey)":"var(--rmg-black)",transform:"translate(".concat(y.name.x,",").concat(y.name.y,")"),children:[(0,s.jsx)("text",{className:"rmg-name__zh",fontSize:14,children:null===h||void 0===h?void 0:h[0]}),null===h||void 0===h||null===(l=h[1])||void 0===l||null===(c=l.split("\\"))||void 0===c?void 0:c.map((function(t,e){return(0,s.jsx)("text",{className:"rmg-name__en",fontSize:9,dy:12+10*e,children:t},e)}))]})]})}},89945:function(t,e,n){n.r(e),n.d(e,{default:function(){return a}});n(72791);var r=n(80184);function a(t){var e=t.length,n=t.isPassed,a=t.isReversed;return(0,r.jsx)("path",{d:"M-8,0 v".concat(e," a8,8 0 0,0 16,0 v-").concat(e," a8,8 0 0,0 -16,0Z"),className:"rmg-stn__mtr",stroke:n?"var(--rmg-grey)":"var(--rmg-black)",transform:"scale(1,".concat(a?-1:1,")")})}},85704:function(t,e,n){n.r(e),n.d(e,{NAME_FULL_HEIGHT:function(){return u},default:function(){return m}});var r=n(1413),a=n(29439),i=n(45987),s=n(72791),o=n(20713),l=n(73222),c=n(80184),d=["stationName","stationState","lower","align","facility"],u=33.03125;function m(t){var e=t.stationName,n=t.stationState,m=t.lower,f=t.align,g=t.facility,h=(0,i.Z)(t,d),x=(0,s.useState)({x:0,width:0}),v=(0,a.Z)(x,2),y=v[0],N=v[1],p=e[1].split("\\").length,j={g:{x:f?f===o.Nm.right?-3:3:0,y:(m?24.8125:-3.1875-u-11*(p-1))+(f?m?10:-10:0)},rect:{x:y.x-3+(g===o.mV.none?0:f?f===o.Nm.right?-3-u:0:(u+5)/2-3-u),y:-11.8125,width:y.width+6+(g===o.mV.none?0:u+3),height:u+2+11*(p-1)},use:{x:f?f===o.Nm.right?-(u+2)/2-y.width-3:(u+2)/2-2:-(y.width+3)/2,y:5.5*(p-1)-11.8125},StationName:{x:g===o.mV.none?0:f?f===o.Nm.right?0:u+3:(u+5)/2,y:0}};return(0,c.jsx)("g",(0,r.Z)((0,r.Z)({},h),{},{children:(0,c.jsxs)("g",{fill:function(t){switch(t){case o.KR.PASSED:return"var(--rmg-grey)";case o.KR.CURRENT:return"#fff";case o.KR.FUTURE:return"var(--rmg-black)"}}(n),transform:"translate(".concat(j.g.x,",").concat(j.g.y,")"),children:[n===o.KR.CURRENT&&(0,c.jsx)("rect",{x:j.rect.x,y:j.rect.y,width:j.rect.width,height:j.rect.height,fill:"var(--rmg-black)"}),g!==o.mV.none&&(0,c.jsx)("use",{xlinkHref:"#".concat(g),fill:n===o.KR.PASSED?"var(--rmg-grey)":"var(--rmg-black)",x:j.use.x,y:j.use.y}),(0,c.jsx)("g",{transform:"translate(".concat(j.StationName.x,",").concat(j.StationName.y,")"),children:(0,c.jsx)(l.default,{stnName:e,onUpdate:N,align:f})})]})}))}},73222:function(t,e,n){n.r(e);var r=n(72791),a=n(20713),i=n(40484),s=n(80184);e.default=(0,r.memo)((function(t){var e=t.stnName,n=t.onUpdate,o=t.align,l=(0,r.useRef)(null),c=function(){null===n||void 0===n||n(l.current.getBBox())};(0,r.useEffect)((function(){c(),(0,i.waitForFontReady)().then().catch(console.log).finally(c)}),[e.toString(),o]);return(0,s.jsxs)("g",{ref:l,textAnchor:function(t){switch(t){case a.Nm.left:return"start";case a.Nm.right:return"end";default:return"middle"}}(o),children:[(0,s.jsx)("text",{className:"rmg-name__zh rmg-name__mtr--station",children:e[0]}),e[1].split("\\").map((function(t,e){return(0,s.jsx)("text",{className:"rmg-name__en rmg-name__mtr--station",dy:(n=e,17+11*n),children:t},e);var n}))]})}),(function(t,e){return t.stnName.toString()===e.stnName.toString()&&t.align===e.align}))},98045:function(t,e,n){n.r(e),n.d(e,{default:function(){return c}});n(72791);var r=n(20713),a=n(43078),i=n(37732),s=n(89145),o=n(85704),l=n(80184);function c(t){var e,n,c,d,u,m,f,g=t.stationId,h=t.stationState,x=t.isReversed,v=(0,i.Qy)((function(t){return t.param.stn_list[g]})),y=v.name,N=v.parents,p=v.children,j=v.transfer,k=j.info,L=j.tick_direc,R=j.osi_names,S=j.paid_area,w=v.facility,_=null!==(e=k[0])&&void 0!==e&&e.length?N.includes("linestart")?r.Nm.left:p.includes("lineend")?r.Nm.right:void 0:void 0,P=Boolean((null===(n=k[1])||void 0===n?void 0:n.length)&&!_),T={link:{scaleX:_===r.Nm.left?-1:1,scaleY:x?-1:1},osi:{x:_?_===r.Nm.left?-41:41:0,y:_?0:x?-26:26}};return(0,l.jsxs)("g",{"data-testid":"station-icon-wrapper",children:[(null===(c=k[1])||void 0===c?void 0:c.length)&&(0,l.jsx)("path",{d:_&&null!==(d=k[0])&&void 0!==d&&d.length?"M0,0H41":"M0,0V26",strokeWidth:2.69,strokeDasharray:S?0:2.5,stroke:h===r.KR.PASSED?"var(--rmg-grey)":"var(--rmg-black)",transform:"scale(".concat(T.link.scaleX,",").concat(T.link.scaleY,")")}),(0,l.jsx)(a.default,{interchangeInfoList:k[0],direction:L===r.wA.right?r.Nm.right:r.Nm.left,isPassed:h===r.KR.PASSED,isReversed:!_&&null!==(u=k[1])&&void 0!==u&&u.length?!x:x,repel:P?L===r.wA.right?r.Nm.right:r.Nm.left:void 0}),(null===(m=k[1])||void 0===m?void 0:m.length)&&(0,l.jsx)("g",{transform:"translate(".concat(T.osi.x,",").concat(T.osi.y,")"),children:(0,l.jsx)(s.default,{interchangeInfoList:k[1],direction:_||(L===r.wA.right?r.Nm.right:r.Nm.left),stationName:R[0],isPassed:h===r.KR.PASSED,isReversed:_?!x:x,isTerminal:Boolean(_)})}),(0,l.jsx)(o.default,{stationName:y,stationState:h,facility:w,lower:x,align:null!==(f=k[0])&&void 0!==f&&f.length&&P?L===r.wA.left?r.Nm.left:r.Nm.right:void 0})]})}},40484:function(t,e,n){n.r(e),n.d(e,{waitForFontReady:function(){return o}});var r=n(15861),a=n(87757),i=n.n(a),s=n(17253),o=function(){var t=(0,r.Z)(i().mark((function t(){var e,n,r,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=3;case 1:if(!e--){t.next=19;break}return t.next=4,document.fonts.ready;case 4:n=t.sent,r=n.values();case 6:if(!(a=r.next()).done){t.next=10;break}return t.abrupt("break",14);case 10:if("GenYoMin TW"!==a.value.family){t.next=12;break}return t.abrupt("return");case 12:t.next=6;break;case 14:return console.log("GenYoMin is NOT ready. Retry attempts remaining: "+e+" ..."),t.next=17,(0,s.aA)(500);case 17:t.next=1;break;case 19:throw new Error("Failed to load GenYoMin after 3 attempts");case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}}]);
//# sourceMappingURL=8045.4b18d4d0.chunk.js.map