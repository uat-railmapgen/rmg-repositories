"use strict";(self.webpackChunkrmg=self.webpackChunkrmg||[]).push([[6479,3222,5704,484],{13203:function(t,e,n){n.d(e,{MM:function(){return s},Yg:function(){return l}});var r=n(1413),a=n(85884),i=n(20713),o=n(37732),c=n(8785),s=(0,a.Z)((0,c.Bx)()),u=o.ZP.getState(),l=function(t){return s((0,r.Z)((0,r.Z)({},u),{},{param:(0,r.Z)((0,r.Z)({},u.param),{},{stn_list:t})}))};i.H_.through,i.H_.through},66479:function(t,e,n){n.r(e);n(72791);var r=n(85704),a=n(20713),i=n(37722),o=n(80184);Document.prototype.fonts={ready:Promise.resolve([])};var c=jest.fn();SVGElement.prototype.getBBox=c;var s={x:-40,width:80};describe("Unit tests for StationNameWrapper component",(function(){it("Can calculate position of centre-aligned component correctly",(function(){var t;c.mockReturnValue(s);var e=null===(t=(0,i.s)((0,o.jsx)("svg",{children:(0,o.jsx)(r.default,{stationName:["\u8fea\u58eb\u5c3c","Disneyland Resort"],stationState:a.KR.CURRENT,facility:a.mV.disney})})).container.querySelector("rect"))||void 0===t?void 0:t.getAttribute("width");expect(Number(e)).toBe(r.NAME_FULL_HEIGHT+s.width+6+3)}))}))},85704:function(t,e,n){n.r(e),n.d(e,{NAME_FULL_HEIGHT:function(){return f},default:function(){return m}});var r=n(1413),a=n(29439),i=n(45987),o=n(72791),c=n(20713),s=n(73222),u=n(80184),l=["stationName","stationState","lower","align","facility"],f=33.03125;function m(t){var e=t.stationName,n=t.stationState,m=t.lower,d=t.align,g=t.facility,h=(0,i.Z)(t,l),x=(0,o.useState)({x:0,width:0}),p=(0,a.Z)(x,2),v=p[0],y=p[1],N=e[1].split("\\").length,w={g:{x:d?d===c.Nm.right?-3:3:0,y:(m?24.8125:-3.1875-f-11*(N-1))+(d?m?10:-10:0)},rect:{x:v.x-3+(g===c.mV.none?0:d?d===c.Nm.right?-3-f:0:(f+5)/2-3-f),y:-11.8125,width:v.width+6+(g===c.mV.none?0:f+3),height:f+2+11*(N-1)},use:{x:d?d===c.Nm.right?-(f+2)/2-v.width-3:(f+2)/2-2:-(v.width+3)/2,y:5.5*(N-1)-11.8125},StationName:{x:g===c.mV.none?0:d?d===c.Nm.right?0:f+3:(f+5)/2,y:0}};return(0,u.jsx)("g",(0,r.Z)((0,r.Z)({},h),{},{children:(0,u.jsxs)("g",{fill:function(t){switch(t){case c.KR.PASSED:return"var(--rmg-grey)";case c.KR.CURRENT:return"#fff";case c.KR.FUTURE:return"var(--rmg-black)"}}(n),transform:"translate(".concat(w.g.x,",").concat(w.g.y,")"),children:[n===c.KR.CURRENT&&(0,u.jsx)("rect",{x:w.rect.x,y:w.rect.y,width:w.rect.width,height:w.rect.height,fill:"var(--rmg-black)"}),g!==c.mV.none&&(0,u.jsx)("use",{xlinkHref:"#".concat(g),fill:n===c.KR.PASSED?"var(--rmg-grey)":"var(--rmg-black)",x:w.use.x,y:w.use.y}),(0,u.jsx)("g",{transform:"translate(".concat(w.StationName.x,",").concat(w.StationName.y,")"),children:(0,u.jsx)(s.default,{stnName:e,onUpdate:y,align:d})})]})}))}},73222:function(t,e,n){n.r(e);var r=n(72791),a=n(20713),i=n(40484),o=n(80184);e.default=(0,r.memo)((function(t){var e=t.stnName,n=t.onUpdate,c=t.align,s=(0,r.useRef)(null),u=function(){null===n||void 0===n||n(s.current.getBBox())};(0,r.useEffect)((function(){u(),(0,i.waitForFontReady)().then().catch(console.log).finally(u)}),[e.toString(),c]);return(0,o.jsxs)("g",{ref:s,textAnchor:function(t){switch(t){case a.Nm.left:return"start";case a.Nm.right:return"end";default:return"middle"}}(c),children:[(0,o.jsx)("text",{className:"rmg-name__zh rmg-name__mtr--station",children:e[0]}),e[1].split("\\").map((function(t,e){return(0,o.jsx)("text",{className:"rmg-name__en rmg-name__mtr--station",dy:(n=e,17+11*n),children:t},e);var n}))]})}),(function(t,e){return t.stnName.toString()===e.stnName.toString()&&t.align===e.align}))},40484:function(t,e,n){n.r(e),n.d(e,{waitForFontReady:function(){return c}});var r=n(15861),a=n(87757),i=n.n(a),o=n(17253),c=function(){var t=(0,r.Z)(i().mark((function t(){var e,n,r,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=3;case 1:if(!e--){t.next=19;break}return t.next=4,document.fonts.ready;case 4:n=t.sent,r=n.values();case 6:if(!(a=r.next()).done){t.next=10;break}return t.abrupt("break",14);case 10:if("GenYoMin TW"!==a.value.family){t.next=12;break}return t.abrupt("return");case 12:t.next=6;break;case 14:return console.log("GenYoMin is NOT ready. Retry attempts remaining: "+e+" ..."),t.next=17,(0,o.aA)(500);case 17:t.next=1;break;case 19:throw new Error("Failed to load GenYoMin after 3 attempts");case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},37722:function(t,e,n){n.d(e,{s:function(){return x}});var r=n(45987),a=n(1413),i=(n(24089),n(72791),n(99607)),o=n(83533),c=n(46726),s=n(59434),u=n(37732),l=n(13203),f=n(16871),m=n(80184),d=["store"],g={store:(0,l.MM)((0,a.Z)({},u.ZP.getState()))},h=function(t){var e=t.children,n=t.store;return(0,m.jsx)(o.a,{i18n:c.Z,children:(0,m.jsx)(s.zt,{store:n,children:(0,m.jsx)(f.VA,{children:e})})})},x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,n=e.store,o=(0,r.Z)(e,d);return(0,i.sY)(t,(0,a.Z)({wrapper:function(t){return(0,m.jsx)(h,(0,a.Z)({store:n},t))}},o))}}}]);
//# sourceMappingURL=6479.7902ce47.chunk.js.map