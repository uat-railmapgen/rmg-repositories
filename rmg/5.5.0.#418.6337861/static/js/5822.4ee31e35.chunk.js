"use strict";(self.webpackChunkrmg=self.webpackChunkrmg||[]).push([[5822],{35822:function(e,t,n){n.r(t);var r=n(99952),i=n(19112),s=n(80184),a={runin:(0,s.jsx)(i.default,{}),railmap:(0,s.jsx)(r.default,{})};t.default=a},99952:function(e,t,n){n.r(t);var r=n(29439),i=n(45987),s=n(1413),a=n(4942),c=n(93433),l=n(72791),o=n(20888),u=n(58519),d=n(20713),h=n(37732),m=n(62554),f=n(80184),x=["destIds"],g=["destIds"],p=d.Ht.RailMap;t.default=function(){var e=(0,h.Qy)((function(e){return e.app})).canvasScale,t=(0,h.Qy)((function(e){return e.param})),n=t.svgWidth,r=t.svg_height,i=t.direction,s=t.psd_num,a=t.info_panel_type,c=t.notesGZMTR,l=t.current_stn_idx,x=t.stn_list,g=t.theme,y=n[p],w=x[l];return(0,f.jsxs)(m.default,{type:p,svgWidth:y,svgHeight:r,canvasScale:e,theme:g,children:[(0,f.jsx)(j,{}),(0,f.jsx)(o.default,{variant:a,isShowLight:a===d.p.gz2otis,isShowPSD:a===d.p.gz2otis&&s}),i===d.wA.left&&w.parents.includes("linestart")||i===d.wA.right&&w.children.includes("lineend")?(0,f.jsx)(z,{}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(u.default,{}),(0,f.jsx)(_,{}),c.map((function(e,t){return(0,f.jsx)(S,{note:e},t)}))]}),a===d.p.gz2otis&&(0,f.jsx)("line",{x2:y,transform:"translate(0,90)",strokeWidth:3,stroke:"black"})]})};var j=(0,l.memo)((function(){return(0,f.jsxs)("defs",{children:[(0,f.jsx)("path",{id:"arrow_direction",d:"M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z",fill:"black"}),(0,f.jsx)("path",{id:"inttick",d:"M 0,0 v 18",strokeLinecap:"square"})]})})),_=function(){var e,t=(0,h.Qy)((function(e){return e.helper})).routes,n=(0,h.Qy)((function(e){return e.param})),r=n.direction,i=n.direction_gz_x,o=n.direction_gz_y,u=n.current_stn_idx,m=(0,l.useMemo)((function(){return(0,c.Z)(new Set(t.reduce((function(e,t){return t.includes(u)?e.concat(t.filter((function(e){return!["linestart","lineend"].includes(e)})).slice(r===d.wA.left?0:-1)[0]):e}),[]).filter((function(e){return e!==u}))))}),[u,r,t.toString()]),x={textAnchor:r===d.wA.left?"start":"end",transform:"translate(".concat(r===d.wA.left?65:-65,",-5)"),destIds:m};return(0,f.jsxs)("g",{id:"direction_gz",style:(e={},(0,a.Z)(e,"--x-percentage",i),(0,a.Z)(e,"--y-percentage",o),e),children:[(0,f.jsx)("use",{xlinkHref:"#arrow_direction",style:(0,a.Z)({},"--rotate",r===d.wA.left?"0deg":"180deg")}),2!==m.length?(0,f.jsx)(y,(0,s.Z)({},x)):(0,f.jsx)(w,(0,s.Z)({},x))]})},y=function(e){var t=e.destIds,n=(0,i.Z)(e,x),r=(0,h.Qy)((function(e){return e.param.stn_list}));return(0,f.jsxs)("g",(0,s.Z)((0,s.Z)({},n),{},{children:[(0,f.jsx)("text",{className:"rmg-name__zh",fontSize:28,children:t.map((function(e){return r[e].name[0]})).join("/")+"\u65b9\u5411"}),(0,f.jsx)("text",{className:"rmg-name__en",fontSize:14,dy:22,children:"Towards "+t.map((function(e){return r[e].name[1].replace("\\"," ")})).join("/")})]}))},w=function(e){var t=e.destIds,n=(0,i.Z)(e,g),r=(0,h.Qy)((function(e){return e.param.direction})),a=(0,h.Qy)((function(e){return e.param.stn_list})),o=t.map((function(e){return a[e].name[0].length})),u=Math.min.apply(Math,(0,c.Z)(o)),m=u>1&&o[0]!==o[1]?Math.abs(o[0]-o[1])/(u-1):0;return(0,f.jsxs)("g",(0,s.Z)((0,s.Z)({},n),{},{children:[t.map((function(e,t){return(0,f.jsxs)(l.Fragment,{children:[(0,f.jsx)("text",{className:"rmg-name__zh",fontSize:25,x:r===d.wA.left?0:-75,y:42*t-21,letterSpacing:o[t]>o[1-t]?"0em":"".concat(m,"em"),children:a[e].name[0]}),(0,f.jsx)("text",{className:"rmg-name__en",fontSize:11.5,x:r===d.wA.left?0:-75,y:42*t-1,children:"Towards "+a[e].name[1].replace("\\"," ")})]},e)})),(0,f.jsx)("text",{className:"rmg-name__zh",fontSize:28,x:r===d.wA.left?25*(Math.max.apply(Math,(0,c.Z)(o))+1):0,y:5,children:"\u65b9\u5411"})]}))},z=l.memo((function(){return(0,f.jsxs)("g",{id:"terminus_gz",textAnchor:"middle",children:[(0,f.jsx)("text",{className:"rmg-name__zh",fontSize:90,children:"\u7ec8 \u70b9 \u7ad9"}),(0,f.jsx)("text",{dy:70,className:"rmg-name__en",fontSize:36,children:"Terminal"}),(0,f.jsxs)("g",{strokeWidth:8,stroke:"#000",children:[(0,f.jsx)("path",{d:"M -160,68 h -160"}),(0,f.jsx)("path",{d:"M 160,68 h 160"})]})]})})),S=l.memo((function(e){var t,n=l.useRef(null),i=l.useState({width:0,height:0,y:0}),s=(0,r.Z)(i,2),c=s[0],o=s[1];return l.useEffect((function(){return o(n.current.getBBox())}),[e.note[0],e.note[1]]),(0,f.jsxs)("g",{className:"note-box",style:(t={},(0,a.Z)(t,"--x-percentage",e.note[2]),(0,a.Z)(t,"--y-percentage",e.note[3]),t),children:[e.note[4]&&(0,f.jsx)("rect",{height:c.height+4,width:c.width+4,x:-2,y:c.y-2,fill:"none",stroke:"black",strokeWidth:.5}),(0,f.jsxs)("g",{ref:n,children:[(0,f.jsx)("g",{fontSize:16,letterSpacing:1.2,children:e.note[0].split("\n").map((function(e,t){return(0,f.jsx)("text",{className:"rmg-name__zh",y:18*t,children:e},t)}))}),(0,f.jsx)("g",{fontSize:10,letterSpacing:.33,transform:"translate(0,".concat(18*e.note[0].split("\n").length,")"),children:e.note[1].split("\n").map((function(t,n){var r;return(0,f.jsx)("text",{className:"rmg-name__en",y:11*n,textLength:n<((null===(r=e.note[1].match(/\n/g))||void 0===r?void 0:r.length)||0)?c.width:navigator.userAgent.includes("Firefox")?-1:0,lengthAdjust:"spacing",children:t},n)}))})]})]})}),(function(e,t){return e.note.toString()===t.note.toString()}))}}]);
//# sourceMappingURL=5822.4ee31e35.chunk.js.map