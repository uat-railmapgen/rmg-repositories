{"version":3,"file":"static/js/railmapMTR.34348cf6.chunk.js","mappings":"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","sources":["svgs/railmap/methods/mtr.ts","svgs/railmap/methods/share.ts","svgs/mtr/station/interchange-tick.tsx","svgs/mtr/station/station-icon.tsx","svgs/mtr/station/interchange-station.tsx","svgs/mtr/station/osi-station.tsx","svgs/mtr/utils.ts","svgs/mtr/station/station-name/station-name.tsx","svgs/mtr/station/station-name/station-name-wrapper.tsx","svgs/mtr/station/station.tsx","svgs/railmap/main/main-mtr.tsx","svgs/railmap/railmap-mtr.tsx","svgs/strip/strip-mtr.tsx"],"sourcesContent":["import { Stations } from './share';\n\nexport class StationsMTR extends Stations {\n    protected leftWideFactor = (stnId: string) => {\n        var res = 0;\n        let { transfer } = this.stnList[stnId];\n        let ls = transfer.info.map(val => val.length);\n        if (transfer.tick_direc === 'l') {\n            // int3 or above\n            if (!ls[1] && ls[0] > 1) res += 0.8;\n            // osi except osi22\n            if (ls[1] && (ls[0] !== 1 || ls[1] !== 2)) res += 0.8;\n        }\n        if (ls[0] === 1 && ls[1] === 2) {\n            // osi22 not end\n            if (this.stnList[stnId].parents[0] !== 'linestart' && this.stnList[stnId].children[0] !== 'lineend')\n                res += 0.8;\n        }\n        if (this.stnList[stnId].parents.length === 2) res += 0.4;\n        if (this.stnList[this.stnList[stnId].parents[0]].children.length === 2) res += 0.4;\n        return res;\n    };\n\n    protected rightWideFactor = (stnId: string) => {\n        var res = 0;\n        let { transfer } = this.stnList[stnId];\n        let ls = transfer.info.map(val => val.length);\n        if (transfer.tick_direc === 'r') {\n            // int3 or above\n            if (!ls[1] && ls[0] > 1) res += 0.8;\n            // osi except osi22\n            if (ls[1] && (ls[0] !== 1 || ls[1] !== 2)) res += 0.8;\n        }\n        if (ls[0] === 1 && ls[1] === 2) {\n            // osi22 not end\n            if (this.stnList[stnId].parents[0] !== 'linestart' && this.stnList[stnId].children[0] !== 'lineend')\n                res += 0.8;\n        }\n        if (this.stnList[stnId].children.length === 2) res += 0.4;\n        if (this.stnList[this.stnList[stnId].children[0]].parents.length === 2) res += 0.4;\n        return res;\n    };\n}\n","import * as Global from '../../../methods';\nimport { RMGParam, ShortDirection, StationDict, StationInfo } from '../../../constants/constants';\n\n/**\n * Compute the adjacency list of the graph.\n * @param stnList Key-value pairs of station info\n * @param leftW Callback of left wide factor\n * @param rightW Callback of right wide factor\n */\nexport const adjacencyList = (\n    stnList: { [stnId: string]: StationInfo },\n    leftW: (stnList: { [stnId: string]: StationInfo }, stnId: string) => number,\n    rightW: (stnList: { [stnId: string]: StationInfo }, stnId: string) => number\n) => {\n    return Object.keys(stnList).reduce(\n        (acc, cur) => ({\n            ...acc,\n            [cur]: stnList[cur].children.reduce(\n                (a, c) => ({ ...a, [c]: 1 + leftW(stnList, c) + rightW(stnList, cur) }),\n                {}\n            ),\n        }),\n        {} as { [from: string]: { [to: string]: number } }\n    );\n};\n\n/**\n * Compute critical path and its length from `from` node to `to` node with critical path method.\n * @param from ID of station on the left\n * @param to ID of station on the right\n * @param adjMat Adjacency matrix in the form of `Object` returned from `adjacencyList` method.\n */\nexport const criticalPathMethod = (from: string, to: string, adjMat: ReturnType<typeof adjacencyList>) => {\n    if (from === to) {\n        return { len: 0, nodes: [from] };\n    }\n    let allLengths: number[] = [];\n    let criticalPaths: string[][] = [];\n    Object.keys(adjMat[from]).forEach(child => {\n        let cp = criticalPathMethod(child, to, adjMat);\n        if (cp.len < 0) return;\n        allLengths.push(adjMat[from][child] + cp.len);\n        cp.nodes.unshift(from);\n        criticalPaths.push(cp.nodes);\n    });\n    let maxLength = Math.max(...allLengths);\n    return {\n        len: maxLength,\n        nodes: criticalPaths[allLengths.indexOf(maxLength)],\n    };\n};\n\nexport const getXShareMTR = (stnId: string, adjMat: ReturnType<typeof adjacencyList>, branches: string[][]) => {\n    let criticalPath = criticalPathMethod('linestart', 'lineend', adjMat);\n    if (criticalPath.nodes.includes(stnId)) {\n        return criticalPathMethod(criticalPath.nodes[1], stnId, adjMat).len;\n    } else {\n        // must has 1 parent and 1 child only\n        let branchOfStn = branches.filter(branch => branch.includes(stnId))[0];\n\n        let partSource = stnId;\n        while (!criticalPath.nodes.includes(partSource)) {\n            partSource = branchOfStn[branchOfStn.indexOf(partSource) - 1];\n        }\n        let partSink = stnId;\n        while (!criticalPath.nodes.includes(partSink)) {\n            partSink = branchOfStn[branchOfStn.indexOf(partSink) + 1];\n        }\n\n        let leftOpenJaw = partSource === 'linestart';\n        let rightOpenJaw = partSink === 'lineend';\n\n        // expand to fit\n        let lens = [];\n        if (!leftOpenJaw && !rightOpenJaw) {\n            lens[0] = criticalPathMethod(criticalPath.nodes[1], partSource, adjMat).len;\n            lens[1] = criticalPathMethod(partSource, partSink, adjMat).len;\n            lens[2] = criticalPathMethod(partSource, stnId, adjMat).len;\n            lens[3] = criticalPathMethod(stnId, partSink, adjMat).len;\n        } else if (leftOpenJaw) {\n            lens[0] = 0;\n            lens[1] = criticalPathMethod(criticalPath.nodes[1], partSink, adjMat).len;\n            lens[2] = criticalPathMethod(branchOfStn[1], stnId, adjMat).len;\n            lens[3] = criticalPathMethod(stnId, partSink, adjMat).len;\n        } else {\n            // right open jaw\n            lens[0] = criticalPathMethod(criticalPath.nodes[1], partSource, adjMat).len;\n            lens[1] = criticalPathMethod(partSource, criticalPath.nodes.slice(-2)[0], adjMat).len;\n            lens[2] = criticalPathMethod(partSource, stnId, adjMat).len;\n            lens[3] = criticalPathMethod(stnId, branchOfStn.slice(-2)[0], adjMat).len;\n        }\n        return lens[0] + (lens[2] * lens[1]) / (lens[2] + lens[3]);\n    }\n};\n\nconst getYShare = (stnId: string, stnList: { [stnId: string]: StationInfo }) => {\n    return Global.getYShareMTR(stnId, stnList);\n};\n\n/**\n * Vertical position (in pixels) of station icon related to vertical position of line.\n */\nexport const getYReal = (stnId: string, param: RMGParam) => {\n    return -getYShare(stnId, param.stn_list) * param.branch_spacing;\n};\n\nconst _isPredecessor = (stnId1: string, stnId2: string, routes: string[][]) => {\n    for (let route of routes) {\n        let idx1 = route.indexOf(stnId1);\n        let idx2 = route.indexOf(stnId2);\n        if (idx2 !== -1 && idx2 < idx1) return true;\n    }\n    return false;\n};\n\nconst _isSuccessor = (stnId1: string, stnId2: string, routes: string[][]) => {\n    for (let route of routes) {\n        let idx1 = route.indexOf(stnId1);\n        let idx2 = route.indexOf(stnId2);\n        if (idx1 !== -1 && idx1 < idx2) return true;\n    }\n    return false;\n};\n\nexport const getStnState = (\n    currentId: string,\n    routes: string[][],\n    direction: 'l' | 'r'\n): { [stnId: string]: -1 | 0 | 1 } => {\n    console.log(\"computing stations' states\");\n    return [...new Set(([] as string[]).concat(...routes))].reduce(\n        (acc, cur: string) => ({\n            ...acc,\n            [cur]:\n                cur === currentId\n                    ? 0\n                    : (\n                          direction === ShortDirection.right\n                              ? _isSuccessor(currentId, cur, routes)\n                              : _isPredecessor(currentId, cur, routes)\n                      )\n                    ? 1\n                    : -1,\n        }),\n        {}\n    );\n};\n\nexport class Stations {\n    yShares = {} as { [stnId: string]: number };\n    xShares = {} as { [stnId: string]: number };\n    namePoss = {} as { [stnId: string]: boolean };\n    stnList = {} as StationDict;\n    criticalPath = {} as { len: number; nodes: string[] };\n\n    constructor(data: { stnList?: any; criticalPath?: any }) {\n        this.stnList = data.stnList;\n        this.criticalPath = data.criticalPath;\n    }\n\n    /**\n     * Increment of the weight of in-bound edge of a station, which increases the horizontal interval from its parents.\n     */\n    protected leftWideFactor = (stnId: string) => {\n        return 0;\n    };\n\n    /**\n     * Increment of the weight of out-bound edge of a station, which increases the horizontal interval from its children.\n     */\n    protected rightWideFactor = (stnId: string) => {\n        return 0;\n    };\n\n    /**\n     * Path weight from station 1 to station 2 (station 2 must be a child of station 1, otherwise return `-Infinity`).\n     */\n    public pathWeight = (stnId1: string, stnId2: string) => {\n        if (!this.stnList[stnId1].children.includes(stnId2)) {\n            return -Infinity;\n        }\n        return 1 + this.rightWideFactor(stnId1) + this.leftWideFactor(stnId2);\n    };\n\n    protected getYShare(stnId: string, branches?: string[][]): number {\n        if (stnId in this.yShares) return this.yShares[stnId];\n\n        if (\n            ['linestart', 'lineend'].includes(stnId) ||\n            this.stnList[stnId].parents.length > 1 ||\n            this.stnList[stnId].children.length > 1\n        ) {\n            this.yShares[stnId] = 0;\n            return 0;\n        }\n        var stnPred = this.stnList[stnId].parents[0];\n        if (stnPred) {\n            // parent exist\n            if (this.stnList[stnPred].children.length === 1) {\n                // no sibling, then y same as parent\n                let res = this.getYShare(stnPred);\n                this.yShares[stnId] = res;\n                return res;\n            } else {\n                // sibling exists, then y depends on its idx of being children\n                let res: 1 | -1 = this.stnList[stnPred].children.indexOf(stnId) === 0 ? 1 : -1;\n                this.yShares[stnId] = res;\n                return res;\n            }\n        } else {\n            // no parent, must be linestart\n            this.yShares[stnId] = 0;\n            return 0;\n        }\n    }\n\n    static getYShares(stnList: StationDict, branches?: string[][]) {\n        console.log('computing y shares');\n        let stations = new this({ stnList });\n\n        Object.keys(stnList).forEach(stnId => {\n            if (['linestart', 'lineend'].includes(stnId)) return;\n            if (stnId in stations.yShares) return;\n            stations.getYShare(stnId, branches);\n        });\n\n        return stations.yShares;\n    }\n\n    /**\n     * Parameters of the arcs involved in the `<path>` element.\n     */\n    private pathTurnParams = (branchSpacing: number) => {\n        let tr = 35; // turning radius\n        let dx_a = tr / 2; // dx of a\n        let dy_a = tr - dx_a * Math.sqrt(3); // dy of a\n        let dy_l = branchSpacing - 2 * dy_a; // dy of l\n        let dx_l = dy_l * Math.sqrt(3); // dx of l\n        return { tr, dx_a, dy_a, dx_l, dy_l };\n    };\n\n    /**\n     * Path segment from a station towards its southeast (lower-right).\n     */\n    private pathTurnSE = (branchSpacing: number) => {\n        let { tr, dx_a, dy_a, dx_l, dy_l } = this.pathTurnParams(branchSpacing);\n        return `a ${tr},${tr} 0 0,1 ${dx_a},${dy_a} l ${dx_l},${dy_l} a ${tr},${tr} 0 0,0 ${dx_a},${dy_a}`;\n    };\n\n    /**\n     * Path segment from a station towards its northeast (upper-right).\n     */\n    private pathTurnNE = (branchSpacing: number) => {\n        let { tr, dx_a, dy_a, dx_l, dy_l } = this.pathTurnParams(branchSpacing);\n        return `a ${tr},${tr} 0 0,0 ${dx_a},${-dy_a} l ${dx_l},${-dy_l} a ${tr},${tr} 0 0,1 ${dx_a},${-dy_a}`;\n    };\n\n    /**\n     * Generate `d` attribute of `<path>` element through all stations input.\n     */\n    protected _linePath(\n        stnIds: string[],\n        lineXs: [number, number],\n        branches: string[][],\n        realXs: { [stnId: string]: number },\n        realYs: { [stnId: string]: number },\n        branchSpacing: number,\n        cp: { len: number; nodes: string[] },\n        e: number\n    ) {\n        var [prevId, prevY, prevX] = [] as unknown as [string, number, number];\n        var path = [] as string[];\n\n        let { dx_a, dx_l } = this.pathTurnParams(branchSpacing);\n        let stnDX = dx_a + dx_l / 2;\n        let stnExtraH = ((lineXs[1] - lineXs[0]) / cp.len) * 2;\n        let stnSpareH = ((lineXs[1] - lineXs[0]) / cp.len - 2 * stnDX) / 2;\n        if (stnSpareH + stnExtraH < 0) {\n            console.warn(`SVG width too small! ${stnSpareH + stnExtraH}`);\n        }\n\n        stnIds.forEach(stnId => {\n            let x = realXs[stnId];\n            let y = realYs[stnId];\n            if (!prevY && prevY !== 0) {\n                [prevId, prevX, prevY] = [stnId, x, y];\n                if (stnIds.length === 1) {\n                    path.push(`M ${x},${y}`);\n                } else if (!branches[0].includes(stnId)) {\n                    // started from branch\n                    path.push(`M ${x},${y}`);\n                } else if (branches[0].includes(stnIds[1])) {\n                    // started from branching station, this is main line\n                    path.push(`M ${x},${y}`);\n                } else {\n                    // started form branching station, this is branch line\n                    if (realXs[stnIds[1]] > 0) {\n                        path.push(`M ${x},${y + e}`);\n                    }\n                    if (realYs[stnIds[1]] < 0) {\n                        path.push(`M ${x},${y - e}`);\n                    }\n                }\n                return;\n            }\n            if (y > prevY) {\n                path.push(\n                    y === 0\n                        ? `h ${x - prevX - stnExtraH * this.leftWideFactor(stnId) - stnSpareH - stnDX * 2}`\n                        : `h ${stnExtraH * this.rightWideFactor(prevId) + stnSpareH}`\n                );\n                path.push(this.pathTurnSE(branchSpacing));\n            } else if (y < prevY) {\n                path.push(\n                    y === 0\n                        ? `h ${x - prevX - stnExtraH * this.leftWideFactor(stnId) - stnSpareH - stnDX * 2}`\n                        : `h ${stnExtraH * this.rightWideFactor(prevId) + stnSpareH}`\n                );\n                path.push(this.pathTurnNE(branchSpacing));\n            }\n            path.push(`H ${x}`);\n            [prevId, prevX, prevY] = [stnId, x, y];\n        });\n\n        // simplify path\n        return path.join(' ').replace(/( H ([\\d.]+))+/g, ' H $2');\n    }\n\n    static drawLine(\n        branches: string[][],\n        stnStates: { [stnId: string]: -1 | 0 | 1 },\n        stnList: { [stnId: string]: StationInfo },\n        lineXs: [number, number],\n        xs: { [stnId: string]: number },\n        ys: { [stnId: string]: number },\n        branchSpacing: number,\n        cp: { len: number; nodes: string[] },\n        e: number = 0\n    ) {\n        let linePaths = { main: [] as string[], pass: [] as string[] };\n        branches.forEach((branch, i) => {\n            branch = branch.filter(stnId => !['linestart', 'lineend'].includes(stnId));\n            var lineMainStns = branch.filter(stnId => stnStates[stnId] >= 0);\n            var linePassStns = branch.filter(stnId => stnStates[stnId] <= 0);\n\n            if (lineMainStns.length === 1) {\n                linePassStns = branch;\n            }\n\n            if (lineMainStns.filter(stnId => linePassStns.indexOf(stnId) !== -1).length === 0 && lineMainStns.length) {\n                // if two set disjoint\n                if (linePassStns[0] === branch[0]) {\n                    // -1 -1 1 1\n                    linePassStns.push(lineMainStns[0]);\n                } else if (\n                    lineMainStns[0] === branch[0] &&\n                    lineMainStns[lineMainStns.length - 1] === branch[branch.length - 1] &&\n                    linePassStns.length\n                ) {\n                    linePassStns = branch;\n                    lineMainStns = [];\n                } else {\n                    // 1 1 -1 -1\n                    linePassStns.unshift(lineMainStns[lineMainStns.length - 1]);\n                }\n            }\n\n            linePaths.main.push(\n                new this({ stnList, criticalPath: cp })._linePath(\n                    lineMainStns,\n                    lineXs,\n                    branches,\n                    xs,\n                    ys,\n                    branchSpacing,\n                    cp,\n                    e\n                )\n            );\n            linePaths.pass.push(\n                new this({ stnList, criticalPath: cp })._linePath(\n                    linePassStns,\n                    lineXs,\n                    branches,\n                    xs,\n                    ys,\n                    branchSpacing,\n                    cp,\n                    e\n                )\n            );\n        });\n\n        return linePaths;\n    }\n}\n\nexport const drawLine = (branch: string[], stnStates: { [stnId: string]: -1 | 0 | 1 }) => {\n    branch = branch.filter(stnId => !['linestart', 'lineend'].includes(stnId));\n    let lineMainStns = branch.filter(stnId => stnStates[stnId] >= 0);\n    let linePassStns = branch.filter(stnId => stnStates[stnId] <= 0);\n\n    if (lineMainStns.length === 1) {\n        linePassStns = branch;\n    }\n\n    if (lineMainStns.filter(stnId => linePassStns.indexOf(stnId) !== -1).length === 0 && lineMainStns.length) {\n        // if two set disjoint\n        if (linePassStns[0] === branch[0]) {\n            // -1 -1 1 1\n            linePassStns.push(lineMainStns[0]);\n        } else if (\n            lineMainStns[0] === branch[0] &&\n            lineMainStns[lineMainStns.length - 1] === branch[branch.length - 1] &&\n            linePassStns.length\n        ) {\n            linePassStns = branch;\n            lineMainStns = [];\n        } else {\n            // 1 1 -1 -1\n            linePassStns.unshift(lineMainStns[lineMainStns.length - 1]);\n        }\n    }\n\n    return {\n        main: lineMainStns,\n        pass: linePassStns,\n    };\n};\n","import React, { memo } from 'react';\nimport { Direction, InterchangeInfo, Position } from '../../../constants/constants';\n\nconst getRotation = (position: Position): number => {\n    switch (position) {\n        case Position.UP:\n            return 180;\n        case Position.DOWN:\n            return 0;\n        case Position.LEFT:\n            return 90;\n        case Position.RIGHT:\n            return -90;\n    }\n};\n\ninterface InterchangeTickProps {\n    interchangeInfo: InterchangeInfo;\n    isPassed?: boolean;\n    position: Position;\n    repel?: Direction; // osi22\n}\n\nfunction InterchangeTick(props: InterchangeTickProps) {\n    const { interchangeInfo, isPassed, position, repel } = props;\n\n    const zhNameLines = interchangeInfo[4].split('\\\\').length;\n    const enNameLines = interchangeInfo[5].split('\\\\').length;\n\n    const textAnchor =\n        position === Position.LEFT || repel === Direction.left\n            ? 'end'\n            : position === Position.RIGHT || repel === Direction.right\n            ? 'start'\n            : 'middle';\n\n    const transforms = {\n        path: {\n            rotate: getRotation(position),\n        },\n        g: {\n            x:\n                (position === Position.LEFT ? -24 : position === Position.RIGHT ? 24 : 0) +\n                (repel === Direction.left ? -3 : repel === Direction.right ? 3 : 0),\n            y:\n                position === Position.UP\n                    ? -37 - 10 * (zhNameLines - 1) - 7 * (enNameLines - 1)\n                    : position === Position.DOWN\n                    ? 31\n                    : 6 - (20 + 10 * (zhNameLines - 1) + 7 * (enNameLines - 1) - 1) / 2,\n        },\n    };\n\n    return (\n        <>\n            <path\n                d=\"M0,0v17\"\n                strokeLinecap=\"round\"\n                stroke={isPassed ? 'var(--rmg-grey)' : interchangeInfo[2]}\n                strokeWidth={8}\n                transform={`rotate(${transforms.path.rotate})`}\n            />\n            <g\n                textAnchor={textAnchor}\n                transform={`translate(${transforms.g.x},${transforms.g.y})`}\n                fill={isPassed ? 'var(--rmg-grey)' : 'var(--rmg-black)'}\n            >\n                {interchangeInfo[4].split('\\\\').map((txt, i) => (\n                    <text key={i} dy={10 * i} className=\"rmg-name__zh\" fontSize={10}>\n                        {txt}\n                    </text>\n                ))}\n                {interchangeInfo[5].split('\\\\').map((txt, j) => (\n                    <text key={zhNameLines + j} dy={zhNameLines * 10 - 1 + 7 * j} className=\"rmg-name__en\" fontSize={7}>\n                        {txt}\n                    </text>\n                ))}\n            </g>\n        </>\n    );\n}\n\nexport default memo(\n    InterchangeTick,\n    (prevProps, nextProps) =>\n        prevProps.interchangeInfo.toString() === nextProps.interchangeInfo.toString() &&\n        prevProps.isPassed === nextProps.isPassed &&\n        prevProps.position === nextProps.position &&\n        prevProps.repel === nextProps.repel\n);\n","import React from 'react';\n\ninterface StationIconProps {\n    length: number;\n    isPassed?: boolean;\n    isReversed?: boolean;\n}\n\nexport default function StationIcon(props: StationIconProps) {\n    const { length, isPassed, isReversed } = props;\n\n    return (\n        <path\n            d={`M-8,0 v${length} a8,8 0 0,0 16,0 v-${length} a8,8 0 0,0 -16,0Z`}\n            className=\"rmg-stn__mtr\"\n            stroke={isPassed ? 'var(--rmg-grey)' : 'var(--rmg-black)'}\n            transform={`scale(1,${isReversed ? -1 : 1})`}\n        />\n    );\n}\n","import React from 'react';\nimport { Direction, InterchangeInfo, Position } from '../../../constants/constants';\nimport InterchangeTick from './interchange-tick';\nimport StationIcon from './station-icon';\n\ninterface InterchangeStationProps {\n    interchangeInfoList: InterchangeInfo[];\n    direction?: Direction;\n    isPassed?: boolean;\n    isReversed?: boolean;\n    repel?: Direction;\n}\n\nexport default function InterchangeStation(props: InterchangeStationProps) {\n    const { interchangeInfoList, direction, isPassed, isReversed, repel } = props;\n\n    const iconLength = interchangeInfoList.length <= 1 ? 0 : 18 * interchangeInfoList.length;\n\n    return (\n        <g>\n            {interchangeInfoList.length === 1 && (\n                <InterchangeTick\n                    interchangeInfo={interchangeInfoList[0]}\n                    isPassed={isPassed}\n                    position={isReversed ? Position.UP : Position.DOWN}\n                    repel={repel}\n                />\n            )}\n\n            {interchangeInfoList.length > 1 &&\n                interchangeInfoList.map((info, i) => (\n                    <g key={i} transform={`translate(0,${isReversed ? -18 * (i + 1) : 18 * (i + 1)})`}>\n                        <InterchangeTick\n                            interchangeInfo={info}\n                            isPassed={isPassed}\n                            position={direction === Direction.right ? Position.RIGHT : Position.LEFT}\n                        />\n                    </g>\n                ))}\n\n            <StationIcon length={iconLength} isPassed={isPassed} isReversed={isReversed} />\n        </g>\n    );\n}\n","import React from 'react';\nimport { Direction, InterchangeInfo, Name, Position } from '../../../constants/constants';\nimport InterchangeTick from './interchange-tick';\nimport StationIcon from './station-icon';\n\ninterface OsiStationProps {\n    interchangeInfoList: InterchangeInfo[];\n    direction: Direction;\n    isPassed?: boolean;\n    isReversed?: boolean;\n    isTerminal?: boolean;\n    stationName?: Name;\n}\n\nexport default function OsiStation(props: OsiStationProps) {\n    const { interchangeInfoList, direction, isPassed, isReversed, isTerminal, stationName } = props;\n\n    const enNameLines = stationName?.[1]?.split('\\\\')?.length ?? 1;\n\n    const iconLength = 18 * (interchangeInfoList.length - 1);\n    const transforms = {\n        name: {\n            x: isTerminal\n                ? 0\n                : interchangeInfoList.length === 1\n                ? direction === Direction.left\n                    ? -13\n                    : 13\n                : direction === Direction.left\n                ? 13\n                : -13,\n            y: isTerminal\n                ? isReversed\n                    ? 19\n                    : -28\n                : -4 + (isReversed ? -9 : 9) * (interchangeInfoList.length - 1) - 5 * (enNameLines - 1),\n        },\n    };\n\n    return (\n        <g>\n            {interchangeInfoList.map((info, i, arr) => (\n                <g key={i} transform={`translate(0,${isReversed ? -18 * i : 18 * i})`}>\n                    <InterchangeTick\n                        interchangeInfo={info}\n                        isPassed={isPassed}\n                        position={\n                            arr.length === 1\n                                ? isReversed\n                                    ? Position.UP\n                                    : Position.DOWN\n                                : direction === Direction.right\n                                ? Position.RIGHT\n                                : Position.LEFT\n                        }\n                    />\n                </g>\n            ))}\n\n            <StationIcon length={iconLength} isPassed={isPassed} isReversed={isReversed} />\n\n            <g\n                textAnchor={transforms.name.x === 0 ? 'middle' : transforms.name.x > 0 ? 'start' : 'end'}\n                fill={isPassed ? 'var(--rmg-grey)' : 'var(--rmg-black)'}\n                transform={`translate(${transforms.name.x},${transforms.name.y})`}\n            >\n                <text className=\"rmg-name__zh\" fontSize={14}>\n                    {stationName?.[0]}\n                </text>\n                {stationName?.[1]?.split('\\\\')?.map((txt, i) => (\n                    <text key={i} className=\"rmg-name__en\" fontSize={9} dy={12 + 10 * i}>\n                        {txt}\n                    </text>\n                ))}\n            </g>\n        </g>\n    );\n}\n","const waitFor = (ms: number) => {\n    return new Promise<void>(resolve => {\n        setTimeout(resolve, ms);\n    });\n};\n\nexport const waitForFontReady = async () => {\n    let retryAttempt = 3;\n\n    while (retryAttempt--) {\n        // #274 ready font fact set may not contain GenYoMin when first resolved\n        const fontFaceSet = await document.fonts.ready;\n        const it = fontFaceSet.values();\n        while (true) {\n            const next = it.next();\n            if (next.done) {\n                break;\n            }\n\n            if (next.value.family === 'GenYoMin TW') {\n                return;\n            }\n        }\n\n        console.log('GenYoMin is NOT ready. Retry attempts remaining: ' + retryAttempt + ' ...');\n        await waitFor(500);\n    }\n\n    throw new Error('Failed to load GenYoMin after 3 attempts');\n};\n","import React, { memo, useEffect, useRef } from 'react';\nimport { Direction, Name } from '../../../../constants/constants';\nimport { waitForFontReady } from '../../utils';\n\ninterface StationNameProps {\n    stnName: Name;\n    onUpdate?: (bBox: SVGRect) => void;\n    align?: Direction;\n}\n\nexport default memo(\n    function StationName(props: StationNameProps) {\n        const { stnName, onUpdate, align } = props;\n\n        const nameEl = useRef<SVGGElement>(null);\n\n        const updateNameBBox = () => {\n            onUpdate?.(nameEl.current!.getBBox());\n        };\n\n        useEffect(() => {\n            updateNameBBox();\n            waitForFontReady().then().catch(console.log).finally(updateNameBBox);\n        }, [stnName.toString(), align]);\n\n        const getTextAnchor = (direction?: Direction) => {\n            switch (direction) {\n                case Direction.left:\n                    return 'start';\n                case Direction.right:\n                    return 'end';\n                default:\n                    return 'middle';\n            }\n        };\n\n        const getDy = (index: number) => 17 + 11 * index;\n\n        return (\n            <g ref={nameEl} textAnchor={getTextAnchor(align)}>\n                <text className=\"rmg-name__zh rmg-name__mtr--station\">{stnName[0]}</text>\n\n                {stnName[1].split('\\\\').map((txt, i) => (\n                    <text key={i} className=\"rmg-name__en rmg-name__mtr--station\" dy={getDy(i)}>\n                        {txt}\n                    </text>\n                ))}\n            </g>\n        );\n    },\n    (prevProps, nextProps) =>\n        prevProps.stnName.toString() === nextProps.stnName.toString() && prevProps.align === nextProps.align\n);\n","import React, { SVGProps, useState } from 'react';\nimport { Direction, Facilities, Name, StationState } from '../../../../constants/constants';\nimport StationName from './station-name';\n\n/**\n * Top (in pixels) of station's Chinese name.\n */\nconst NAME_ZH_TOP = -10.8125;\n/**\n * Height (in pixels) of station's Chinese name.\n */\n// const NAME_ZH_HEIGHT = 21.625;\n/**\n * Top (in pixels) of station's English name (1 line).\n */\nconst NAME_EN_TOP = -8;\n/**\n * Height (in pixels) of station's English name (1 line).\n */\nconst NAME_EN_HEIGHT = 13.21875;\n/**\n * Difference of `y`s of station's Chinese name and English name (1 line). (This number should used as the `dy` of the English `text` element after Chinese `text` elements. )\n */\nconst NAME_ZH_EN_GAP = 17;\n/**\n * Height (in pixels) from the top of station's Chinese name to the bottom of English name (1 line).\n */\nexport const NAME_FULL_HEIGHT = -NAME_ZH_TOP + NAME_ZH_EN_GAP + NAME_EN_HEIGHT + NAME_EN_TOP;\n/**\n * Height (in pixels) of the gap between the centre of the line and the top of station's Chinese name.\n */\nconst STN_NAME_LINE_GAP = 14;\n\ninterface StationNameWrapperProps extends SVGProps<SVGGElement> {\n    stationName: Name;\n    stationState: StationState;\n    facility: Facilities;\n    lower?: boolean;\n    align?: Direction;\n}\n\nexport default function StationNameWrapper(props: StationNameWrapperProps) {\n    const { stationName, stationState, lower, align, facility, ...others } = props;\n\n    /**\n     * align = undefined: { x: -40, width: 80 }\n     * align = left: { x: 0, width: 80 }\n     * align = right: { x: -80, width: 80 }\n     */\n    const [bBox, setBBox] = useState({ x: 0, width: 0 } as SVGRect);\n\n    const getFill = (state: StationState) => {\n        switch (state) {\n            case StationState.PASSED:\n                return 'var(--rmg-grey)';\n            case StationState.CURRENT:\n                return '#fff';\n            case StationState.FUTURE:\n                return 'var(--rmg-black)';\n        }\n    };\n\n    const nameEnRows = stationName[1].split('\\\\').length;\n    const transforms = {\n        g: {\n            x: align ? (align === Direction.right ? -3 : 3) : 0,\n            y:\n                (lower\n                    ? STN_NAME_LINE_GAP - NAME_ZH_TOP\n                    : -STN_NAME_LINE_GAP - NAME_ZH_TOP - NAME_FULL_HEIGHT - 11 * (nameEnRows - 1)) +\n                (align ? (lower ? 10 : -10) : 0),\n        },\n        rect: {\n            x:\n                bBox.x -\n                3 +\n                (facility === Facilities.none\n                    ? 0\n                    : align\n                    ? align === Direction.right\n                        ? -3 - NAME_FULL_HEIGHT\n                        : 0\n                    : (NAME_FULL_HEIGHT + 5) / 2 - 3 - NAME_FULL_HEIGHT),\n            y: NAME_ZH_TOP - 1,\n            width: bBox.width + 6 + (facility === Facilities.none ? 0 : NAME_FULL_HEIGHT + 3),\n            height: NAME_FULL_HEIGHT + 2 + 11 * (nameEnRows - 1),\n        },\n        use: {\n            x: align\n                ? align === Direction.right\n                    ? -(NAME_FULL_HEIGHT + 2) / 2 - bBox.width - 3\n                    : (NAME_FULL_HEIGHT + 2) / 2 - 2\n                : -(bBox.width + 3) / 2,\n            y: NAME_ZH_TOP - 1 + 5.5 * (nameEnRows - 1),\n        },\n        StationName: {\n            x:\n                facility === Facilities.none\n                    ? 0\n                    : align\n                    ? align === Direction.right\n                        ? 0\n                        : NAME_FULL_HEIGHT + 3\n                    : (NAME_FULL_HEIGHT + 5) / 2,\n            y: 0,\n        },\n    };\n\n    return (\n        <g {...others}>\n            <g fill={getFill(stationState)} transform={`translate(${transforms.g.x},${transforms.g.y})`}>\n                {stationState === StationState.CURRENT && (\n                    <rect\n                        x={transforms.rect.x}\n                        y={transforms.rect.y}\n                        width={transforms.rect.width}\n                        height={transforms.rect.height}\n                        fill=\"var(--rmg-black)\"\n                    />\n                )}\n\n                {facility !== Facilities.none && (\n                    <use\n                        xlinkHref={`#${facility}`}\n                        fill={stationState === StationState.PASSED ? 'var(--rmg-grey)' : 'var(--rmg-black)'}\n                        x={transforms.use.x}\n                        y={transforms.use.y}\n                    />\n                )}\n\n                <g transform={`translate(${transforms.StationName.x},${transforms.StationName.y})`}>\n                    <StationName stnName={stationName} onUpdate={setBBox} align={align} />\n                </g>\n            </g>\n        </g>\n    );\n}\n","import React from 'react';\nimport { Direction, ShortDirection, StationState } from '../../../constants/constants';\nimport InterchangeStation from './interchange-station';\nimport { useAppSelector } from '../../../redux';\nimport OsiStation from './osi-station';\nimport StationNameWrapper from './station-name/station-name-wrapper';\n\ninterface StationProps {\n    stationId: string;\n    stationState: StationState;\n    isReversed: boolean; // reverse = up\n}\n\nexport default function Station(props: StationProps) {\n    const { stationId, stationState, isReversed } = props;\n\n    const {\n        name,\n        parents,\n        children,\n        transfer: { info, tick_direc, osi_names, paid_area },\n        facility,\n    } = useAppSelector(state => state.param.stn_list[stationId]);\n\n    const end: Direction | undefined = info[0]?.length\n        ? parents.includes('linestart')\n            ? Direction.left\n            : children.includes('lineend')\n            ? Direction.right\n            : undefined\n        : undefined;\n    const isRepelled = Boolean(info[1]?.length && !end);\n\n    const transforms = {\n        link: {\n            scaleX: end === Direction.left ? -1 : 1,\n            scaleY: isReversed ? -1 : 1,\n        },\n        osi: {\n            x: end ? (end === Direction.left ? -41 : 41) : 0,\n            y: end ? 0 : !isReversed ? 26 : -26,\n        },\n    };\n\n    return (\n        <g data-testid=\"station-icon-wrapper\">\n            {info[1]?.length && (\n                <path\n                    d={end && info[0]?.length ? 'M0,0H41' : 'M0,0V26'}\n                    strokeWidth={2.69}\n                    strokeDasharray={paid_area ? 0 : 2.5}\n                    stroke={stationState === StationState.PASSED ? 'var(--rmg-grey)' : 'var(--rmg-black)'}\n                    transform={`scale(${transforms.link.scaleX},${transforms.link.scaleY})`}\n                />\n            )}\n\n            <InterchangeStation\n                interchangeInfoList={info[0]}\n                direction={tick_direc === ShortDirection.right ? Direction.right : Direction.left}\n                isPassed={stationState === StationState.PASSED}\n                isReversed={!end && info[1]?.length ? !isReversed : isReversed}\n                repel={\n                    isRepelled ? (tick_direc === ShortDirection.right ? Direction.right : Direction.left) : undefined\n                }\n            />\n\n            {info[1]?.length && (\n                <g transform={`translate(${transforms.osi.x},${transforms.osi.y})`}>\n                    <OsiStation\n                        interchangeInfoList={info[1]}\n                        direction={end ? end : tick_direc === ShortDirection.right ? Direction.right : Direction.left}\n                        stationName={osi_names[0]}\n                        isPassed={stationState === StationState.PASSED}\n                        isReversed={end ? !isReversed : isReversed}\n                        isTerminal={Boolean(end)}\n                    />\n                </g>\n            )}\n\n            <StationNameWrapper\n                stationName={name}\n                stationState={stationState}\n                facility={facility}\n                lower={isReversed}\n                align={\n                    info[0]?.length && isRepelled\n                        ? tick_direc === ShortDirection.left\n                            ? Direction.left\n                            : Direction.right\n                        : undefined\n                }\n            />\n        </g>\n    );\n}\n","import React, { useMemo } from 'react';\nimport { adjacencyList, criticalPathMethod, getXShareMTR, getStnState } from '../methods/share';\nimport { StationsMTR } from '../methods/mtr';\nimport { CanvasType, RMGParam, StationDict } from '../../../constants/constants';\nimport { useAppSelector } from '../../../redux';\nimport Station from '../../mtr/station/station';\n\nconst leftWideFactor = (stnList: StationDict, stnId: string) => {\n    var res = 0;\n    let { transfer } = stnList[stnId];\n    let ls = transfer.info.map(val => val.length);\n    if (transfer.tick_direc === 'l') {\n        // int3 or above\n        if (!ls[1] && ls[0] > 1) res += 0.8;\n        // osi except osi22\n        if (ls[1] && (ls[0] !== 1 || ls[1] !== 2)) res += 0.8;\n    }\n    if (ls[0] === 1 && ls[1] === 2) {\n        // osi22 not end\n        if (stnList[stnId].parents[0] !== 'linestart' && stnList[stnId].children[0] !== 'lineend') res += 0.8;\n    }\n    // let { type, tick_direc } = stnList[stnId].transfer;\n    // if (tick_direc === 'l' && ['int3', 'osi11', 'osi12', 'osi21', 'osi31'].includes(type)) res += 0.8;\n    // if (type === 'osi22') res += 0.8;\n    if (stnList[stnId].parents.length === 2) res += 0.4;\n    if (stnList[stnList[stnId].parents[0]].children.length === 2) res += 0.4;\n    return res;\n};\n\nconst rightWideFactor = (stnList: StationDict, stnId: string) => {\n    var res = 0;\n    let { transfer } = stnList[stnId];\n    let ls = transfer.info.map(val => val.length);\n    if (transfer.tick_direc === 'r') {\n        // int3 or above\n        if (!ls[1] && ls[0] > 1) res += 0.8;\n        // osi except osi22\n        if (ls[1] && (ls[0] !== 1 || ls[1] !== 2)) res += 0.8;\n    }\n    if (ls[0] === 1 && ls[1] === 2) {\n        if (stnList[stnId].parents[0] !== 'linestart' && stnList[stnId].children[0] !== 'lineend') res += 0.8;\n    }\n    // let { type, tick_direc } = stnList[stnId].transfer;\n    // if (tick_direc === 'r' && ['int3', 'osi11', 'osi12', 'osi21', 'osi31'].includes(type)) res += 0.8;\n    // if (type === 'osi22') res += 0.8;\n    if (stnList[stnId].children.length === 2) res += 0.4;\n    if (stnList[stnList[stnId].children[0]].parents.length === 2) res += 0.4;\n    return res;\n};\n\nconst getNamePos = (stnId: string, branches: string[][], { isStagger, isFlip }: RMGParam['namePosMTR']) => {\n    if (!isStagger) return isFlip;\n    let res: number;\n    if (branches[0].includes(stnId)) {\n        res = branches[0].indexOf(stnId) % 2;\n    } else {\n        let branchOfStn = branches.filter(branch => branch.includes(stnId))[0];\n        res = (branches[0].indexOf(branchOfStn[0]) + branchOfStn.indexOf(stnId) + 1) % 2;\n    }\n    return res === 0 ? isFlip : !isFlip;\n};\n\nconst MainMTR = () => {\n    const { branches, routes, depsStr: deps } = useAppSelector(store => store.helper);\n\n    const svgWidths = useAppSelector(store => store.param.svgWidth);\n    const yPercentage = useAppSelector(store => store.param.y_pc);\n    const paddingPercentage = useAppSelector(store => store.param.padding);\n    const branchSpacing = useAppSelector(store => store.param.branch_spacing);\n    const direction = useAppSelector(store => store.param.direction);\n    const namePosition = useAppSelector(store => store.param.namePosMTR);\n\n    const currentStationIndex = useAppSelector(store => store.param.current_stn_idx);\n    const stationList = useAppSelector(store => store.param.stn_list);\n\n    const adjMat = adjacencyList(stationList, leftWideFactor, rightWideFactor);\n\n    const criticalPath = useMemo(\n        () => criticalPathMethod('linestart', 'lineend', adjMat),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [JSON.stringify(adjMat)]\n    );\n    const realCP = useMemo(\n        () => criticalPathMethod(criticalPath.nodes[1], criticalPath.nodes.slice(-2)[0], adjMat),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [JSON.stringify(adjMat)]\n    );\n\n    const xShares = useMemo(\n        () => {\n            console.log('computing x shares');\n            return Object.keys(stationList).reduce(\n                (acc, cur) => ({ ...acc, [cur]: getXShareMTR(cur, adjMat, branches) }),\n                {} as { [stnId: string]: number }\n            );\n        },\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [branches.toString(), JSON.stringify(adjMat)]\n    );\n    const lineXs: [number, number] = [\n        (svgWidths[CanvasType.RailMap] * paddingPercentage) / 100,\n        svgWidths[CanvasType.RailMap] * (1 - paddingPercentage / 100),\n    ];\n    const xs = Object.keys(xShares).reduce(\n        (acc, cur) => ({ ...acc, [cur]: lineXs[0] + (xShares[cur] / realCP.len) * (lineXs[1] - lineXs[0]) }),\n        {} as typeof xShares\n    );\n\n    const yShares = useMemo(\n        () => StationsMTR.getYShares(stationList, branches),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [deps]\n    );\n    const ys = Object.keys(yShares).reduce(\n        (acc, cur) => ({\n            ...acc,\n            [cur]: -yShares[cur] * branchSpacing,\n        }),\n        {} as typeof yShares\n    );\n\n    const stnStates = useMemo(\n        () => getStnState(currentStationIndex, routes, direction),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [currentStationIndex, direction, routes.toString()]\n    );\n\n    const namePoss = Object.keys(stationList).reduce<{ [stnId: string]: boolean }>(\n        (acc, id) => ({ ...acc, [id]: getNamePos(id, branches, namePosition) }),\n        {}\n    );\n\n    const linePaths = StationsMTR.drawLine(\n        branches,\n        stnStates,\n        stationList,\n        lineXs,\n        xs,\n        ys,\n        branchSpacing,\n        criticalPath\n    );\n\n    return (\n        <g\n            id=\"main\"\n            style={{\n                ['--y-percentage' as any]: yPercentage,\n                transform: 'translateY(calc(var(--y-percentage) * var(--rmg-svg-height) / 100))',\n            }}\n        >\n            <Lines paths={linePaths} />\n            <StationGroup xs={xs} ys={ys} stnStates={stnStates} namePoss={namePoss} />\n        </g>\n    );\n};\n\nexport default MainMTR;\n\nconst Lines = React.memo(\n    (props: { paths: { main: string[]; pass: string[] } }) => {\n        return (\n            <g fill=\"none\" strokeWidth={9.68}>\n                <g stroke=\"var(--rmg-grey)\">\n                    {props.paths.pass.map((path, i) => (\n                        <path key={i} d={path} />\n                    ))}\n                </g>\n                <g stroke=\"var(--rmg-theme-colour)\">\n                    {props.paths.main.map((path, i) => (\n                        <path key={i} d={path} />\n                    ))}\n                </g>\n            </g>\n        );\n    },\n    (prevProps, nextProps) => JSON.stringify(prevProps.paths) === JSON.stringify(nextProps.paths)\n);\n\ninterface StationGroupProps {\n    xs: { [stnId: string]: number };\n    ys: { [stnId: string]: number };\n    stnStates: { [stnId: string]: -1 | 0 | 1 };\n    namePoss: { [stnId: string]: boolean };\n}\n\nconst StationGroup = (props: StationGroupProps) => {\n    const { xs, ys, stnStates, namePoss } = props;\n\n    const stationList = useAppSelector(store => store.param.stn_list);\n\n    return (\n        <g id=\"stn_icons\">\n            {Object.keys(stationList)\n                .filter(stnId => !['linestart', 'lineend'].includes(stnId))\n                .map(stnId => (\n                    <g\n                        key={stnId}\n                        style={{\n                            transform: `translate(${xs[stnId]}px,${ys[stnId]}px)`,\n                        }}\n                    >\n                        <Station stationId={stnId} stationState={stnStates[stnId]} isReversed={namePoss[stnId]} />\n                    </g>\n                ))}\n        </g>\n    );\n};\n","import React, { memo } from 'react';\n\nimport StripMTR from '../strip/strip-mtr';\nimport MainMTR from './main/main-mtr';\n\nexport default memo(function RailMapMTR() {\n    return (\n        <>\n            <DefsMTR />\n\n            <StripMTR stripPc={90} />\n            <MainMTR />\n        </>\n    );\n});\n\nconst DefsMTR = React.memo(() => {\n    return (\n        <defs>\n            <g id=\"airport\" transform=\"scale(0.5970084519)\">\n                <rect x={-29.33899} height={58.67798} width={58.67798} />\n                <path\n                    id=\"airport\"\n                    d=\"M28.9769,6.60134c1.711.013,3.111,2.53205,3.111,4.241v10.337s17.106,15.435,17.358,15.666a1.145,1.145,0,0,1,.488,1.152v2.833c0,.651-.451.61-.695.467-.334-.119-17.151-8.863-17.151-8.863-.004,1.458-.797,9.006-1.326,13.304,0,0,4.61,2.457,4.699,2.521.334.268.352.359.352.852v2.001c0,.477-.352.428-.51.324-.183-.062-5.693-1.921-5.693-1.921a2.56018,2.56018,0,0,0-.633-.127,2.31654,2.31654,0,0,0-.666.127s-5.477,1.859-5.672,1.921c-.185.104-.523.153-.523-.324v-2.001c0-.493.029-.584.367-.852.086-.064,4.678-2.521,4.678-2.521-.524-4.298-1.307-11.846-1.325-13.304,0,0-16.822,8.744-17.148,8.863-.217.143-.69.184-.69-.467v-2.833a1.16206,1.16206,0,0,1,.473-1.152c.276-.231,17.365-15.666,17.365-15.666v-10.337c0-1.709,1.403-4.228,3.14105-4.241\"\n                    transform=\"translate(-28.9697,0.14347)\"\n                    fill=\"white\"\n                />\n            </g>\n            <g id=\"disney\" transform=\"scale(0.5970084519)\">\n                <rect x={-29.33899} width={58.67798} height={58.67798} />\n                <path\n                    fill=\"white\"\n                    d=\"M45.6152,7.85015a9.80248,9.80248,0,0,0-9.79907,9.801,9.70059,9.70059,0,0,0,.342,2.582c.002.026.002.055.002.093a.31815.31815,0,0,1-.31494.318.67741.67741,0,0,1-.12806-.02,15.71521,15.71521,0,0,0-13.498,0,.61.61,0,0,1-.122.02.31841.31841,0,0,1-.322-.318v-.067a9.62553,9.62553,0,0,0,.35608-2.608,9.803,9.803,0,1,0-9.797,9.8,10.10364,10.10364,0,0,0,2.308-.271h.05493a.31113.31113,0,0,1,.31409.318.32433.32433,0,0,1-.019.12,15.72588,15.72588,0,1,0,29.703,7.216,15.83676,15.83676,0,0,0-1.746-7.23.18417.18417,0,0,1-.0271-.106.31612.31612,0,0,1,.32007-.318h.057a10.15953,10.15953,0,0,0,2.316.271,9.80051,9.80051,0,0,0,0-19.601\"\n                    transform=\"translate(-28.9697 0.13398)\"\n                />\n            </g>\n            <clipPath id=\"hsr-clip-path\" transform=\"translate(-0.00057 0.01643)\">\n                <path\n                    fill=\"none\"\n                    d=\"M5.1606.89861a3.67176,3.67176,0,0,0-3.676,3.667v48.966a3.67842,3.67842,0,0,0,3.676,3.692h48.443a3.67892,3.67892,0,0,0,3.678-3.692V4.5656a3.67227,3.67227,0,0,0-3.678-3.667Z\"\n                />\n            </clipPath>\n            <g id=\"hsr\" transform=\"scale(0.5970084519)\">\n                <rect x={-29.33899} width={58.67798} height={58.67798} />\n                <g clipPath=\"url(#hsr-clip-path)\" transform=\"translate(-29.33899,0)\">\n                    <rect\n                        x={-3.25242}\n                        y={24.74141}\n                        width={61.75879}\n                        height={0.98008}\n                        transform=\"translate(-8.93747 17.31321) rotate(-30.16134)\"\n                        fill=\"white\"\n                    />\n                    <path\n                        d=\"M5.77169,48.97289c-2.17407-3.89294,2.56994-10.525,4.85-13.724l.173-.248a83.00826,83.00826,0,0,1,7.39294-9.285,97.384,97.384,0,0,1,11.082-9.958c7.051-6.045,15.832-5.876,16.447-5.894l11.785-.957.276,17.42-11.5271,10.586c-.36.39405-5.553,5.863-18.10193,11.035-6.752,2.783-11.877,4.146-15.66,4.146-3.301,0-5.561-1.049-6.71692-3.121\"\n                        transform=\"translate(-0.00057 0.01643)\"\n                        fill=\"white\"\n                    />\n                    <polygon\n                        points=\"57.453 29.614 32.426 58.31 35.582 58.509 57.584 30.433 57.453 29.614\"\n                        fill=\"white\"\n                    />\n                    <path\n                        d=\"M49.04708,11.61364a.94277.94277,0,0,0-.17407-.227c-.752-.93695-2.988-1.259-5.933-.793a25.98382,25.98382,0,0,0-9.99695,3.032A98.52916,98.52916,0,0,0,20.723,23.69768c-3.1759,3.487-4.645,6.388-3.62292,7.584,1.84,2.166,13.7539.716,22.00793-6.066,9.035-7.42,10.718-11.577,9.93909-13.602\"\n                        transform=\"translate(-0.00057 0.01643)\"\n                    />\n                    <path\n                        d=\"M34.65255,13.81182c5.65991-2.842,11.28088-2.856,12.1499-1.213.88306,1.652-2.99792,5.303-8.656,8.128-5.648,2.837-10.9469,3.805-11.81994,2.15-.873-1.641,2.668-6.237,8.326-9.065\"\n                        transform=\"translate(-0.00057 0.01643)\"\n                        fill=\"white\"\n                    />\n                    <path\n                        d=\"M58.10958,25.03454c-16.832,20.708-40.7301,26.038-40.7301,26.038,11-6.73,12.769-8.111,18.968-18.01,8.364-13.351,21.77808-21.549,21.912-21.63,0,0-.068,13.5-.1499,13.602\"\n                        transform=\"translate(-0.00057 0.01643)\"\n                    />\n                    <path\n                        d=\"M27.1877,26.69561l9.705-2.814a6.22768,6.22768,0,0,1-1.994,2.759,25.57277,25.57277,0,0,1-6.697,3.405,11.78221,11.78221,0,0,1-5.5.783Z\"\n                        transform=\"translate(-0.00057 0.01643)\"\n                        fill=\"white\"\n                    />\n                    <path\n                        d=\"M19.59005,25.97692a18.37656,18.37656,0,0,1,3.891-3.976,6.66452,6.66452,0,0,0-.30908,2.213l-4.391,4.829a6.18212,6.18212,0,0,1,.80908-3.066\"\n                        transform=\"translate(-0.00057 0.01643)\"\n                        fill=\"white\"\n                    />\n                    <polygon\n                        points=\"23.156 58.311 57.463 26.746 57.396 25.857 21.582 58.607 23.156 58.311\"\n                        fill=\"white\"\n                    />\n                    <path\n                        d=\"M60.15645,12.35973a68.6782,68.6782,0,0,0-12.602,9.542c-8.15,7.745-12.109,15.259-9.855,16.091,2.24793.816,10.678-4.782,18.83594-12.543,1.828-1.74,3.48-3.424,4.926-5.024Z\"\n                        transform=\"translate(-0.00057 0.01643)\"\n                        fill=\"white\"\n                    />\n                    <path\n                        d=\"M63.07638,11.82653a40.86955,40.86955,0,0,0-10,7.096c-5.90406,5.437-9.48609,11.105-7.848,11.742,1.657.631,8.28894-3.955,14.188-9.401a61.76591,61.76591,0,0,0,4.61694-4.705Z\"\n                        transform=\"translate(-0.00057 0.01643)\"\n                    />\n                    <path\n                        d=\"M12.67989,42.93969a9.87,9.87,0,0,0-5.754-1.895c-.113.22-.223.439-.33008.662a9.45046,9.45046,0,0,1,5.69507,1.749,6.27885,6.27885,0,0,1,2.61,6.305,10.16524,10.16524,0,0,1-.598,2.228c.238-.023.481-.053.725-.087.78308-2.249,1.394-6.184-2.3479-8.962\"\n                        transform=\"translate(-0.00057 0.01643)\"\n                    />\n                </g>\n            </g>\n\n            <path id=\"inttick\" d=\"M0,0v17\" strokeLinecap=\"round\" />\n        </defs>\n    );\n});\n","import React, { memo } from 'react';\n\nexport default memo(function StripMTR(props: { stripPc: number }) {\n    return (\n        <rect\n            fill=\"var(--rmg-theme-colour)\"\n            height={20}\n            style={{\n                width: 'var(--rmg-svg-width)',\n                ['--strip-percentage' as any]: props.stripPc,\n                transform: `translateY(calc(var(--strip-percentage, 95) * var(--rmg-svg-height) / 100 - 10px))`,\n            }}\n        />\n    );\n});\n"],"names":["StationsMTR","leftWideFactor","stnId","res","transfer","stnList","ls","info","map","val","length","tick_direc","parents","children","rightWideFactor","Stations","adjacencyList","leftW","rightW","Object","keys","reduce","acc","cur","a","c","criticalPathMethod","from","to","adjMat","len","nodes","allLengths","criticalPaths","forEach","child","cp","push","unshift","maxLength","Math","max","indexOf","getXShareMTR","branches","criticalPath","includes","branchOfStn","filter","branch","partSource","partSink","leftOpenJaw","lens","slice","getStnState","currentId","routes","direction","console","log","Set","concat","ShortDirection","stnId1","stnId2","route","idx1","idx2","_isSuccessor","_isPredecessor","data","yShares","xShares","namePoss","pathWeight","Infinity","pathTurnParams","branchSpacing","dy_a","tr","sqrt","dy_l","dx_a","dx_l","pathTurnSE","pathTurnNE","this","stnPred","getYShare","stnIds","lineXs","realXs","realYs","e","prevId","prevY","prevX","path","stnDX","stnExtraH","stnSpareH","warn","x","y","join","replace","stations","stnStates","xs","ys","linePaths","main","pass","i","lineMainStns","linePassStns","_linePath","drawLine","getRotation","position","Position","InterchangeTick","props","interchangeInfo","isPassed","repel","zhNameLines","split","enNameLines","textAnchor","Direction","transforms","rotate","g","d","strokeLinecap","stroke","strokeWidth","transform","fill","txt","dy","className","fontSize","j","memo","prevProps","nextProps","toString","StationIcon","isReversed","InterchangeStation","interchangeInfoList","iconLength","OsiStation","isTerminal","stationName","name","arr","waitFor","ms","Promise","resolve","setTimeout","waitForFontReady","retryAttempt","document","fonts","ready","fontFaceSet","it","values","next","done","value","family","Error","stnName","onUpdate","align","nameEl","useRef","updateNameBBox","current","getBBox","useEffect","then","catch","finally","ref","getTextAnchor","index","StationNameWrapper","stationState","lower","facility","others","useState","width","bBox","setBBox","nameEnRows","STN_NAME_LINE_GAP","rect","Facilities","NAME_ZH_TOP","NAME_FULL_HEIGHT","height","use","StationName","state","StationState","getFill","xlinkHref","Station","stationId","useAppSelector","param","stn_list","osi_names","paid_area","end","undefined","isRepelled","Boolean","link","scaleX","scaleY","osi","strokeDasharray","store","helper","deps","depsStr","svgWidths","svgWidth","yPercentage","y_pc","paddingPercentage","padding","branch_spacing","namePosition","namePosMTR","currentStationIndex","current_stn_idx","stationList","useMemo","JSON","stringify","realCP","CanvasType","id","isStagger","isFlip","getNamePos","style","Lines","paths","StationGroup","React","DefsMTR","stripPc","clipPath","points"],"sourceRoot":""}