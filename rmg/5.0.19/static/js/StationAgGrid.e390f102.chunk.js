"use strict";(self.webpackChunkrmg=self.webpackChunkrmg||[]).push([[1985],{4523:function(e,n,r){r.r(n),r.d(n,{default:function(){return h}});var t=r(1413),a=r(8332),i=r(2791),o=r(2953),l=r(6169),u=r(713),d=r(2020),c=r(8735),s=r(8539),f=r(6705),p=r(184);function m(e){var n=e.lineNumber,r=e.stationNumber,t={h:"24px",position:"relative",color:"black","&::before":{content:"''",w:"calc(100% + 2px)",h:"26px",position:"absolute",top:"-1px",left:"-1px",bg:"white",borderRadius:"13px"},span:{display:"flex",justifyContent:"center",alignItems:"center",padding:"3px",minWidth:"24px",border:"2px solid",borderColor:e.lineColour,zIndex:1,"&:first-of-type":{borderRadius:"12px 0 0 12px"},"&:last-of-type":{borderRadius:"0 12px 12px 0",marginLeft:"-2px"}}};return(0,p.jsxs)(c.kC,{sx:t,children:[(0,p.jsx)("span",{children:n}),(0,p.jsx)("span",{children:r})]})}function h(e){var n=e.branchIndex,r=(0,d.$)().t,h=(0,l.TL)(),g=(0,l.CG)((function(e){return e.app.sidePanelMode})),x=(0,l.CG)((function(e){return e.param})),v=x.style,R=x.theme,b=x.stn_list,N=x.line_num,S=x.coline,w=(0,l.CG)((function(e){return e.helper.branches}))[n].filter((function(e){return!["linestart","lineend"].includes(e)})),C=(0,i.useRef)(null),j=(0,i.useRef)(!1);(0,i.useEffect)((function(){j.current&&C.current&&(1===C.current.api.getSelectedRows().length&&g!==u.Sg.STATION&&C.current.api.deselectAll())}),[j.current,g]);var y=w.map((function(e){return(0,t.Z)((0,t.Z)({},b[e]),{},{id:e,rowSpan:h((0,f.z7)(e,n))})})),G=[{headerName:r("StationAgGrid.num"),field:"num",cellRenderer:function(e){var n=e.value;return(0,p.jsx)(m,{lineNumber:N,stationNumber:n,lineColour:R[2]})},pinned:"left",minWidth:110,hide:![u.RM.GZMTR].includes(v)},{headerName:r("Chinese name"),field:"name",valueFormatter:function(e){var n=e.value,r=e.data;return n[0]+(v===u.RM.GZMTR&&r.secondaryName&&r.secondaryName[0]?" (".concat(r.secondaryName[0],")"):"")}},{headerName:r("English name"),field:"name",cellRenderer:function(e){var n=e.value,r=e.data;return(0,p.jsx)(a.iR,{text:n[1]+(v===u.RM.GZMTR&&r.secondaryName&&r.secondaryName[1]?" (".concat(r.secondaryName[1],")"):"")})},minWidth:300},{headerName:r("StationAgGrid.interchange"),field:"transfer",cellRenderer:function(e){var n=e.value;return(0,p.jsx)(c.Ug,{children:n.info.flat().map((function(e,n){return(0,p.jsx)(a.l2,{name:[e[4],e[5]],bg:e[2],fg:e[3],showShortName:!0},n)}))})}},{headerName:r("StationAgGrid.coline"),field:"rowSpan",rowSpan:function(e){return e.data.rowSpan[0]},cellClassRules:{"rmg-ag-grid--spanned-cell":function(e){return e.value[0]>0}},cellRenderer:function(e){var n,r,t=e.value;return(0,p.jsx)(c.Ug,{children:null===(n=S[t[1]])||void 0===n||null===(r=n.colors)||void 0===r?void 0:r.map((function(e,n){return(0,p.jsx)(a.l2,{name:[e[4],e[5]],bg:e[2],fg:e[3],showShortName:!0},n)}))})},hide:![u.RM.SHMetro].includes(v)}];return(0,p.jsx)(a.A,{children:(0,p.jsx)(o.AgGridReact,{ref:C,rowData:y,defaultColDef:{resizable:!0},columnDefs:G,getRowId:function(e){return e.data.id},headerHeight:36,rowHeight:36,suppressCellFocus:!0,suppressMovableColumns:!0,suppressRowTransform:!0,rowSelection:"single",onSelectionChanged:function(e){var n,r=null===(n=e.api.getSelectedRows())||void 0===n?void 0:n.map((function(e){return e.id}));console.log("StationAgGrid.handleSelectionChanged():: Row selection changed",r),null!==r&&void 0!==r&&r.length&&(h((0,s.B4)(u.Sg.STATION)),h((0,s.NQ)(r[0])),h((0,s.EH)(void 0)))},onGridReady:function(){return j.current=!0},debug:!1})})}}}]);
//# sourceMappingURL=StationAgGrid.e390f102.chunk.js.map