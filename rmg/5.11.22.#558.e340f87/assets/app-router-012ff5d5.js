import{j as m,a7 as Ln,F as Re,B as we,a3 as Ee,a8 as Dn,x as zn,a1 as Me,M as Ne,a2 as He,r as We,s as Ue,t as Ze,a9 as mt,aa as Pt,ab as It,ac as Ge,ad as Ct,ae as ut,w as Je,v as st,y as $e,a5 as Fn,i as de,J as Le,a6 as Ie,af as De,z as pt,C as _t,ag as Bn,ah as Vn,ai as Mn,aj as Ut,W as Nn,ak as sn,c as Hn,al as Wn}from"./chakra-f6b4d908.js";import{r as K,c as ct,g as Un,u as Zn}from"./react-f83802c2.js";import{_ as E,u as ee,r as he,E as ye,R as ft,a as an,b as le,c as fe,d as Gn,e as Q,f as Zt,g as Gt,h as ge,i as $t,C as Pe,j as on,k as Yt,M as xe,l as ln,m as $n,n as Yn,F as St,o as Fe,p as Ce,q as jt,s as qn,t as Lt,v as at,S as Ye,w as Kn,x as qt,y as Jn,z as Kt,A as Xn,B as Qn,D as At,G as er,H as tr,I as nr,J as rr,K as sr,L as ar,N as ht,O as je,P as ir,Q as or,T as lr,U as Dt,V as zt,W as Ft,X as cr,Y as dr,Z as ur,$ as kt,a0 as Ot,a1 as hr,a2 as Jt,a3 as mr,a4 as pr,a5 as cn,a6 as dn,a7 as _r,a8 as un,a9 as hn,aa as Xt,ab as fr,ac as gr,ad as vr,ae as yr,af as br,ag as Er,ah as xr,ai as wr,aj as Sr,ak as yt,al as jr,am as Ar,an as kr,ao as Or,ap as Rr,aq as Tr,ar as Pr,as as Ir,at as Be,au as qe,av as it,aw as Ke,ax as Ve,ay as mn,az as Cr,aA as Rt,aB as Tt,aC as Lr,aD as Dr,aE as zr,aF as Fr,aG as Br,aH as Vr,aI as Mr,aJ as Nr,aK as Qt,aL as pn,aM as Hr,aN as Wr,aO as Ur,aP as _n,aQ as Zr,aR as Gr,aS as $r,aT as Yr,aU as qr,aV as Kr,aW as Jr,aX as Xr,aY as Qr,aZ as ze,a_ as fn,a$ as bt,b0 as es,b1 as ts,b2 as ns,b3 as rs,b4 as ss,b5 as Et,b6 as xt,b7 as as,b8 as is}from"./index-3cc89a45.js";import{i as gn,w as os,d as en,a as vn,r as ls,P as cs,u as ds}from"./param-updater-utils-d614355c.js";var us=function(p){var g=p.text,n=p.delimiter;return m.jsx("span",{children:g.split(n||"\\").map(function(i,a){return a?[m.jsx(Ln,{children:"⏎"},a),i]:i})})};const hs={mtr:()=>E(()=>import("./index-448067ba.js"),["assets/index-448067ba.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-3cc89a45.js","assets/index-d22c1e14.css","assets/share-ee4dcb3b.js","assets/mtr-9ba1096e.js","assets/param-updater-utils-d614355c.js"]),gzmtr:()=>E(()=>import("./index-71d9b06e.js"),["assets/index-71d9b06e.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-3cc89a45.js","assets/index-d22c1e14.css","assets/share-ee4dcb3b.js"]),shmetro:()=>E(()=>import("./index-67d9b5ee.js"),["assets/index-67d9b5ee.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-3cc89a45.js","assets/index-d22c1e14.css","assets/share-ee4dcb3b.js","assets/mtr-9ba1096e.js","assets/param-updater-utils-d614355c.js"])};function ms(p){const[g,n]=K.useState({});return K.useEffect(()=>(hs[p]().then(i=>{n(i.default)}).catch(i=>{console.error("Failed to load canvas for style ".concat(p),i),n({})}),()=>{n({})}),[p]),g}const ps={position:"relative",flexDirection:"row",overflowX:"auto","&::before, &::after":{content:'""',margin:"auto"},"& > svg":{flex:"0 0 auto",border:"1px solid black"}};function _s(){const{canvasToShow:p,canvasScale:g}=ee(t=>t.app),{svg_height:n,style:i}=ee(t=>t.param),a=ms(i);K.useEffect(()=>{document.getElementById("css_share").href="/rmg/"+"styles/share_".concat(i,".css"),he.event(ye.STYLE_CHANGE,{style:i})},[i]);const e=Object.keys(a).filter(t=>p.includes(t)),r=n*g;return m.jsx(Re,{minH:r,sx:ps,children:Object.keys(a).length===0?m.jsx(ft,{isIndeterminate:!0}):e.map(t=>m.jsx(an,{sx:{minWidth:750,height:r},children:a[t]},t+i))})}function fs(){const{t:p}=le(),g=fe(),n=ee(o=>o.app.selectedStation);console.log("InfoSection:: Rendering for",n);const i=ee(o=>o.param.style),{num:a,name:e,secondaryName:r}=ee(o=>o.param.stn_list[n]),t=[{type:"input",label:p("StationSidePanel.info.num"),value:a,placeholder:"01",onChange:o=>g(Gn(n,o)),hidden:![Q.GZMTR].includes(i)},{type:"input",label:p("Chinese name"),value:e[0],onChange:o=>g(Zt(n,[o,e[1]]))},{type:"input",label:p("English name"),value:e[1],onChange:o=>g(Zt(n,[e[0],o]))},{type:"input",label:p("StationSidePanel.info.zhSecondary"),value:r?r[0]:"",placeholder:"1号航站楼",onChange:o=>g(Gt(n,[o,r?r[1]:""])),hidden:![Q.GZMTR].includes(i)},{type:"input",label:p("StationSidePanel.info.enSecondary"),value:r?r[1]:"",placeholder:"Terminal 1",onChange:o=>g(Gt(n,[r?r[0]:"",o])),hidden:![Q.GZMTR].includes(i)}];return m.jsxs(we,{p:1,children:[m.jsx(Ee,{as:"h5",size:"sm",children:p("StationSidePanel.info.title")}),m.jsx(ge,{fields:t,minW:130})]})}const yn=(p,g)=>{const n=p[g];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((i,a)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+g)))})};function gs(p){const{countryCode:g,svgFilename:n}=p,[i,a]=K.useState(void 0);return K.useEffect(()=>{n&&yn(Object.assign({"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E6-1F1F7.svg":()=>E(()=>import("./1F1E6-1F1F7-249b5959.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E6-1F1F9.svg":()=>E(()=>import("./1F1E6-1F1F9-a3474a87.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E6-1F1FA.svg":()=>E(()=>import("./1F1E6-1F1FA-0fdfb9b9.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E6-1F1FF.svg":()=>E(()=>import("./1F1E6-1F1FF-c961f61f.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E7-1F1EA.svg":()=>E(()=>import("./1F1E7-1F1EA-87b63ce0.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E7-1F1F4.svg":()=>E(()=>import("./1F1E7-1F1F4-8e88acbd.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E7-1F1F7.svg":()=>E(()=>import("./1F1E7-1F1F7-2e5da46f.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E8-1F1E6.svg":()=>E(()=>import("./1F1E8-1F1E6-572cf376.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E8-1F1F1.svg":()=>E(()=>import("./1F1E8-1F1F1-bb957357.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E8-1F1F3.svg":()=>E(()=>import("./1F1E8-1F1F3-866d09b5.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E9-1F1EA.svg":()=>E(()=>import("./1F1E9-1F1EA-2bcac591.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E9-1F1F0.svg":()=>E(()=>import("./1F1E9-1F1F0-130b3df9.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1EA-1F1EC.svg":()=>E(()=>import("./1F1EA-1F1EC-190b639e.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1EA-1F1F8.svg":()=>E(()=>import("./1F1EA-1F1F8-e9f6e238.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1EB-1F1F7.svg":()=>E(()=>import("./1F1EB-1F1F7-12f823eb.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1EC-1F1F7.svg":()=>E(()=>import("./1F1EC-1F1F7-d16bd178.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1ED-1F1F0.svg":()=>E(()=>import("./1F1ED-1F1F0-1346b158.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1ED-1F1FA.svg":()=>E(()=>import("./1F1ED-1F1FA-e44befe3.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1EE-1F1E9.svg":()=>E(()=>import("./1F1EE-1F1E9-256ea73c.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1EE-1F1EA.svg":()=>E(()=>import("./1F1EE-1F1EA-a47e0f5f.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1EE-1F1F3.svg":()=>E(()=>import("./1F1EE-1F1F3-44d109aa.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1EE-1F1F7.svg":()=>E(()=>import("./1F1EE-1F1F7-c924004a.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1EE-1F1F9.svg":()=>E(()=>import("./1F1EE-1F1F9-38eff108.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1EF-1F1F5.svg":()=>E(()=>import("./1F1EF-1F1F5-93518547.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F0-1F1F5.svg":()=>E(()=>import("./1F1F0-1F1F5-c35a0536.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F0-1F1F7.svg":()=>E(()=>import("./1F1F0-1F1F7-4e778503.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F0-1F1FF.svg":()=>E(()=>import("./1F1F0-1F1FF-2f61e48a.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F2-1F1F4.svg":()=>E(()=>import("./1F1F2-1F1F4-bb2225c7.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F2-1F1FD.svg":()=>E(()=>import("./1F1F2-1F1FD-31d458ab.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F2-1F1FE.svg":()=>E(()=>import("./1F1F2-1F1FE-9d12ac27.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F3-1F1F1.svg":()=>E(()=>import("./1F1F3-1F1F1-d799cc7f.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F3-1F1F4.svg":()=>E(()=>import("./1F1F3-1F1F4-36b22a7a.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F5-1F1E6.svg":()=>E(()=>import("./1F1F5-1F1E6-a403b725.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F5-1F1EA.svg":()=>E(()=>import("./1F1F5-1F1EA-2359ab5b.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F5-1F1F0.svg":()=>E(()=>import("./1F1F5-1F1F0-796e787d.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F5-1F1F1.svg":()=>E(()=>import("./1F1F5-1F1F1-56d472c9.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F5-1F1F9.svg":()=>E(()=>import("./1F1F5-1F1F9-48f96f04.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F7-1F1F4.svg":()=>E(()=>import("./1F1F7-1F1F4-a774c3a2.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F7-1F1FA.svg":()=>E(()=>import("./1F1F7-1F1FA-3b81f8de.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F8-1F1E6.svg":()=>E(()=>import("./1F1F8-1F1E6-481d8837.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F8-1F1EA.svg":()=>E(()=>import("./1F1F8-1F1EA-3583e0b5.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F8-1F1EC.svg":()=>E(()=>import("./1F1F8-1F1EC-2b92413d.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F9-1F1ED.svg":()=>E(()=>import("./1F1F9-1F1ED-0757641b.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F9-1F1F7.svg":()=>E(()=>import("./1F1F9-1F1F7-f7cf6b4a.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F9-1F1FC.svg":()=>E(()=>import("./1F1F9-1F1FC-82e8fcc5.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1FA-1F1E6.svg":()=>E(()=>import("./1F1FA-1F1E6-fc868471.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1FA-1F1F3.svg":()=>E(()=>import("./1F1FA-1F1F3-dddb091b.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1FA-1F1F8.svg":()=>E(()=>import("./1F1FA-1F1F8-47f8491b.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1FA-1F1FF.svg":()=>E(()=>import("./1F1FA-1F1FF-0989e0a8.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1FB-1F1EA.svg":()=>E(()=>import("./1F1FB-1F1EA-8edd6b29.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1FB-1F1F3.svg":()=>E(()=>import("./1F1FB-1F1F3-2e88414b.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F3F4-E0067-E0062-E0065-E006E-E0067-E007F.svg":()=>E(()=>import("./1F3F4-E0067-E0062-E0065-E006E-E0067-E007F-8302e24f.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F3F4-E0067-E0062-E0073-E0063-E0074-E007F.svg":()=>E(()=>import("./1F3F4-E0067-E0062-E0073-E0063-E0074-E007F-a5d75104.js"),[])}),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/".concat(n.slice(0,-4),".svg")).then(e=>e.default).then(a).catch(e=>console.error("Failed to find SVG file ".concat(n," as ").concat(e==null?void 0:e.message)))},[n]),i?m.jsx(Dn,{src:i,alt:"Flag of ".concat(g),h:17,mr:1}):m.jsx(m.Fragment,{})}function vs(p){const{defaultValueId:g,onChange:n}=p,{i18n:i}=le(),a=g?$t.find(_=>_.id===g):void 0,e=_=>{var y,u;return(u=(y=i.languages.map(d=>_.name[d]).find(d=>d!==void 0))!=null?y:_.name.en)!=null?u:""},r=_=>{var h,b;const y=_.country==="TW"&&["zh-Hans","zh-CN"].includes(i.languages[0]),u=["Win32","Win64"].includes(navigator.platform),d=i.languages.map(f=>_.name[f]).find(f=>f!==void 0),l=(h=Yt.find(f=>f.id===_.country))==null?void 0:h.flagSvg,v=(b=Yt.find(f=>f.id===_.country))==null?void 0:b.flagEmoji;return m.jsxs(m.Fragment,{children:[y?m.jsx("span",{children:"🏴 "}):u?m.jsx(gs,{countryCode:_.country,svgFilename:l}):m.jsxs("span",{children:[v," "]}),d]})},t=(_,y)=>Object.values(_.name).some(u=>u.includes(y)),o=$t.slice().sort((_,y)=>_.id===Pe.Other?1:y.id===Pe.Other?-1:e(_).localeCompare(e(y),i.languages[0]));return m.jsx(on,{data:o,displayValue:e,displayHandler:r,predicate:t,defaultValue:a,onChange:_=>n==null?void 0:n(_.id)})}const ys=p=>{const[g,n]=K.useState([]);return K.useEffect(()=>{yn(Object.assign({"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/adelaide.js":()=>E(()=>import("./adelaide-cbc1a3d5.js"),["assets/adelaide-cbc1a3d5.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/almaty.js":()=>E(()=>import("./almaty-53614efa.js"),["assets/almaty-53614efa.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/amsterdam.js":()=>E(()=>import("./amsterdam-676368f3.js"),["assets/amsterdam-676368f3.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/ankara.js":()=>E(()=>import("./ankara-dda42f22.js"),["assets/ankara-dda42f22.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/athens.js":()=>E(()=>import("./athens-16dd0c8c.js"),["assets/athens-16dd0c8c.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/baku.js":()=>E(()=>import("./baku-bae24922.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/bangkok.js":()=>E(()=>import("./bangkok-8ad452eb.js"),["assets/bangkok-8ad452eb.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/barcelona.js":()=>E(()=>import("./barcelona-e1829a31.js"),["assets/barcelona-e1829a31.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/beijing.js":()=>E(()=>import("./beijing-2be317c8.js"),["assets/beijing-2be317c8.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/berlin.js":()=>E(()=>import("./berlin-e76689e3.js"),["assets/berlin-e76689e3.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/bne.js":()=>E(()=>import("./bne-9bc6e380.js"),["assets/bne-9bc6e380.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/bonn.js":()=>E(()=>import("./bonn-021fc668.js"),["assets/bonn-021fc668.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/boston.js":()=>E(()=>import("./boston-a1c07844.js"),["assets/boston-a1c07844.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/brussels.js":()=>E(()=>import("./brussels-09ed0ed7.js"),["assets/brussels-09ed0ed7.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/bucharest.js":()=>E(()=>import("./bucharest-dec16d21.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/budapest.js":()=>E(()=>import("./budapest-b6137533.js"),["assets/budapest-b6137533.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/buenosaires.js":()=>E(()=>import("./buenosaires-f21ae099.js"),["assets/buenosaires-f21ae099.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/busan.js":()=>E(()=>import("./busan-183df5d6.js"),["assets/busan-183df5d6.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/cairo.js":()=>E(()=>import("./cairo-381a5daa.js"),["assets/cairo-381a5daa.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/caracas.js":()=>E(()=>import("./caracas-9842ae87.js"),["assets/caracas-9842ae87.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/cbr.js":()=>E(()=>import("./cbr-d46f0985.js"),["assets/cbr-d46f0985.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/changchun.js":()=>E(()=>import("./changchun-291ec061.js"),["assets/changchun-291ec061.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/changsha.js":()=>E(()=>import("./changsha-c2c7c5cd.js"),["assets/changsha-c2c7c5cd.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/changzhou.js":()=>E(()=>import("./changzhou-15699eaa.js"),["assets/changzhou-15699eaa.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/chengdu.js":()=>E(()=>import("./chengdu-2fde8740.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/chennai.js":()=>E(()=>import("./chennai-acf3e7fa.js"),["assets/chennai-acf3e7fa.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/chongqing.js":()=>E(()=>import("./chongqing-fe6fa6aa.js"),["assets/chongqing-fe6fa6aa.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/chuzhou.js":()=>E(()=>import("./chuzhou-4fbb9d58.js"),["assets/chuzhou-4fbb9d58.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/cochabamba.js":()=>E(()=>import("./cochabamba-b492947b.js"),["assets/cochabamba-b492947b.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/cologne.js":()=>E(()=>import("./cologne-cfd5d2a1.js"),["assets/cologne-cfd5d2a1.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/copenhagen.js":()=>E(()=>import("./copenhagen-b55ba3b3.js"),["assets/copenhagen-b55ba3b3.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/daegu.js":()=>E(()=>import("./daegu-8f53d357.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/dalian.js":()=>E(()=>import("./dalian-08981d46.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/delhi.js":()=>E(()=>import("./delhi-eaa3d5a0.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/dongguan.js":()=>E(()=>import("./dongguan-9877cd9c.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/dortmund.js":()=>E(()=>import("./dortmund-9b54795b.js"),["assets/dortmund-9b54795b.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/dublin.js":()=>E(()=>import("./dublin-ac6e4da5.js"),["assets/dublin-ac6e4da5.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/edinburgh.js":()=>E(()=>import("./edinburgh-9726c05b.js"),["assets/edinburgh-9726c05b.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/eskisehir.js":()=>E(()=>import("./eskisehir-5404753b.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/foshan.js":()=>E(()=>import("./foshan-ad2ea8a6.js"),["assets/foshan-ad2ea8a6.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/frankfurt.js":()=>E(()=>import("./frankfurt-f1ee3295.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/fuzhou.js":()=>E(()=>import("./fuzhou-b46cc0fa.js"),["assets/fuzhou-b46cc0fa.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/glasgow.js":()=>E(()=>import("./glasgow-e714346d.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/gothenburg.js":()=>E(()=>import("./gothenburg-7c5ab626.js"),["assets/gothenburg-7c5ab626.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/guadalajara.js":()=>E(()=>import("./guadalajara-dc4a5f1d.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/guangzhou.js":()=>E(()=>import("./guangzhou-4e74ef1e.js"),["assets/guangzhou-4e74ef1e.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/guiyang.js":()=>E(()=>import("./guiyang-9e2702d7.js"),["assets/guiyang-9e2702d7.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/hamburg.js":()=>E(()=>import("./hamburg-42275e88.js"),["assets/hamburg-42275e88.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/hangzhou.js":()=>E(()=>import("./hangzhou-302d110d.js"),["assets/hangzhou-302d110d.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/hanoi.js":()=>E(()=>import("./hanoi-6c252433.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/harbin.js":()=>E(()=>import("./harbin-687d6138.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/hefei.js":()=>E(()=>import("./hefei-48b36053.js"),["assets/hefei-48b36053.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/hiroshima.js":()=>E(()=>import("./hiroshima-7a449dc8.js"),["assets/hiroshima-7a449dc8.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/hochiminh.js":()=>E(()=>import("./hochiminh-9f62b24b.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/hohhot.js":()=>E(()=>import("./hohhot-b86e1e26.js"),["assets/hohhot-b86e1e26.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/hongkong.js":()=>E(()=>import("./hongkong-958ab1d2.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/iashi.js":()=>E(()=>import("./iashi-8191ac42.js"),["assets/iashi-8191ac42.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/istanbul.js":()=>E(()=>import("./istanbul-796135ab.js"),["assets/istanbul-796135ab.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/jakarta.js":()=>E(()=>import("./jakarta-953479e4.js"),["assets/jakarta-953479e4.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/jinan.js":()=>E(()=>import("./jinan-b6389b78.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/kansai.js":()=>E(()=>import("./kansai-0b9b4179.js"),["assets/kansai-0b9b4179.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/kaohsiung.js":()=>E(()=>import("./kaohsiung-1a75e57f.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/kaosiung.js":()=>E(()=>import("./kaosiung-111389e1.js"),["assets/kaosiung-111389e1.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/kharkiv.js":()=>E(()=>import("./kharkiv-41f5005f.js"),["assets/kharkiv-41f5005f.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/klangvalley.js":()=>E(()=>import("./klangvalley-9114a5fa.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/kunming.js":()=>E(()=>import("./kunming-c96d7a3d.js"),["assets/kunming-c96d7a3d.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/kyiv.js":()=>E(()=>import("./kyiv-37728b31.js"),["assets/kyiv-37728b31.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/lahore.js":()=>E(()=>import("./lahore-05f63e1c.js"),["assets/lahore-05f63e1c.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/lanzhou.js":()=>E(()=>import("./lanzhou-879e2ba1.js"),["assets/lanzhou-879e2ba1.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/liege.js":()=>E(()=>import("./liege-662aa0a5.js"),["assets/liege-662aa0a5.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/lille.js":()=>E(()=>import("./lille-0c699cc2.js"),["assets/lille-0c699cc2.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/lima.js":()=>E(()=>import("./lima-118ba6e3.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/lisbon.js":()=>E(()=>import("./lisbon-82e2f436.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/littlerockcity.js":()=>E(()=>import("./littlerockcity-878ebecd.js"),["assets/littlerockcity-878ebecd.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/london.js":()=>E(()=>import("./london-34cf9da4.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/losangeles.js":()=>E(()=>import("./losangeles-ffde77d9.js"),["assets/losangeles-ffde77d9.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/lucknow.js":()=>E(()=>import("./lucknow-2460f1ab.js"),["assets/lucknow-2460f1ab.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/luoyang.js":()=>E(()=>import("./luoyang-74b2d89b.js"),["assets/luoyang-74b2d89b.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/lyon.js":()=>E(()=>import("./lyon-238d246d.js"),["assets/lyon-238d246d.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/macao.js":()=>E(()=>import("./macao-19ac9346.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/madrid.js":()=>E(()=>import("./madrid-6bfb12e3.js"),["assets/madrid-6bfb12e3.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/manchester.js":()=>E(()=>import("./manchester-706e33c3.js"),["assets/manchester-706e33c3.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/marseille.js":()=>E(()=>import("./marseille-fb672626.js"),["assets/marseille-fb672626.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/melbourne.js":()=>E(()=>import("./melbourne-42cab07d.js"),["assets/melbourne-42cab07d.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/mexicocity.js":()=>E(()=>import("./mexicocity-c686ab4f.js"),["assets/mexicocity-c686ab4f.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/milan.js":()=>E(()=>import("./milan-93b8fb0e.js"),["assets/milan-93b8fb0e.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/monterrey.js":()=>E(()=>import("./monterrey-e5156659.js"),["assets/monterrey-e5156659.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/montreal.js":()=>E(()=>import("./montreal-2c31318e.js"),["assets/montreal-2c31318e.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/moscow.js":()=>E(()=>import("./moscow-46223135.js"),["assets/moscow-46223135.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/munich.js":()=>E(()=>import("./munich-574989b5.js"),["assets/munich-574989b5.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/nagpur.js":()=>E(()=>import("./nagpur-dcd462ec.js"),["assets/nagpur-dcd462ec.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/nanchang.js":()=>E(()=>import("./nanchang-c1622735.js"),["assets/nanchang-c1622735.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/nanjing.js":()=>E(()=>import("./nanjing-30ac4f20.js"),["assets/nanjing-30ac4f20.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/nanning.js":()=>E(()=>import("./nanning-58e8a96c.js"),["assets/nanning-58e8a96c.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/nantes.js":()=>E(()=>import("./nantes-83463225.js"),["assets/nantes-83463225.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/nantong.js":()=>E(()=>import("./nantong-8f92212c.js"),["assets/nantong-8f92212c.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/naples.js":()=>E(()=>import("./naples-19d71e84.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/neworleans.js":()=>E(()=>import("./neworleans-ca997d71.js"),["assets/neworleans-ca997d71.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/newtaipei.js":()=>E(()=>import("./newtaipei-2d07dd7a.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/newyork.js":()=>E(()=>import("./newyork-8efe93b0.js"),["assets/newyork-8efe93b0.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/nice.js":()=>E(()=>import("./nice-c2e78886.js"),["assets/nice-c2e78886.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/ningbo.js":()=>E(()=>import("./ningbo-8a53f42e.js"),["assets/ningbo-8a53f42e.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/novosibirsk.js":()=>E(()=>import("./novosibirsk-8aef6f43.js"),["assets/novosibirsk-8aef6f43.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/osaka.js":()=>E(()=>import("./osaka-26f54f06.js"),["assets/osaka-26f54f06.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/oslo.js":()=>E(()=>import("./oslo-09abdab2.js"),["assets/oslo-09abdab2.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/other.js":()=>E(()=>import("./other-176be433.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/ottawa.js":()=>E(()=>import("./ottawa-4b65fdb2.js"),["assets/ottawa-4b65fdb2.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/panamacity.js":()=>E(()=>import("./panamacity-f35a7b94.js"),["assets/panamacity-f35a7b94.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/paris.js":()=>E(()=>import("./paris-cc43eb3c.js"),["assets/paris-cc43eb3c.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/perth.js":()=>E(()=>import("./perth-7f41a3bc.js"),["assets/perth-7f41a3bc.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/pyongyang.js":()=>E(()=>import("./pyongyang-c2c7625a.js"),["assets/pyongyang-c2c7625a.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/qingdao.js":()=>E(()=>import("./qingdao-c4c1ab91.js"),["assets/qingdao-c4c1ab91.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/rheinruhr.js":()=>E(()=>import("./rheinruhr-d291a748.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/rio.js":()=>E(()=>import("./rio-050ae3c4.js"),["assets/rio-050ae3c4.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/riyadh.js":()=>E(()=>import("./riyadh-9c891997.js"),["assets/riyadh-9c891997.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/rome.js":()=>E(()=>import("./rome-9fdd74e7.js"),["assets/rome-9fdd74e7.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/rotterdam.js":()=>E(()=>import("./rotterdam-b02fa4e9.js"),["assets/rotterdam-b02fa4e9.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/saltlakecity.js":()=>E(()=>import("./saltlakecity-6aeb635c.js"),["assets/saltlakecity-6aeb635c.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/samara.js":()=>E(()=>import("./samara-df7f1372.js"),["assets/samara-df7f1372.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/sanfrancisco.js":()=>E(()=>import("./sanfrancisco-55e6de2a.js"),["assets/sanfrancisco-55e6de2a.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/sanktpeterburg.js":()=>E(()=>import("./sanktpeterburg-87b7088d.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/santiago.js":()=>E(()=>import("./santiago-81aa3f7f.js"),["assets/santiago-81aa3f7f.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/saopaulo.js":()=>E(()=>import("./saopaulo-2b2589b6.js"),["assets/saopaulo-2b2589b6.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/seoul.js":()=>E(()=>import("./seoul-959f627e.js"),["assets/seoul-959f627e.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/sevilla.js":()=>E(()=>import("./sevilla-8df88065.js"),["assets/sevilla-8df88065.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/shanghai.js":()=>E(()=>import("./shanghai-eb5fbf6b.js"),["assets/shanghai-eb5fbf6b.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/shaoxing.js":()=>E(()=>import("./shaoxing-8777eea2.js"),["assets/shaoxing-8777eea2.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/shenyang.js":()=>E(()=>import("./shenyang-3cbfd7cb.js"),["assets/shenyang-3cbfd7cb.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/shenzhen.js":()=>E(()=>import("./shenzhen-1025b46b.js"),["assets/shenzhen-1025b46b.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/shijiazhuang.js":()=>E(()=>import("./shijiazhuang-5a67e860.js"),["assets/shijiazhuang-5a67e860.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/shiraz.js":()=>E(()=>import("./shiraz-ae98b371.js"),["assets/shiraz-ae98b371.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/singapore.js":()=>E(()=>import("./singapore-fd02212f.js"),["assets/singapore-fd02212f.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/stlouis.js":()=>E(()=>import("./stlouis-cf66390e.js"),["assets/stlouis-cf66390e.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/stockholm.js":()=>E(()=>import("./stockholm-5eca41a9.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/suzhou.js":()=>E(()=>import("./suzhou-c119177c.js"),["assets/suzhou-c119177c.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/sydney.js":()=>E(()=>import("./sydney-bf4dbe8f.js"),["assets/sydney-bf4dbe8f.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/taichung.js":()=>E(()=>import("./taichung-8fe38fe4.js"),["assets/taichung-8fe38fe4.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/taipei.js":()=>E(()=>import("./taipei-dd4b377b.js"),["assets/taipei-dd4b377b.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/taiyuan.js":()=>E(()=>import("./taiyuan-4b04ca6d.js"),["assets/taiyuan-4b04ca6d.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/taoyuan.js":()=>E(()=>import("./taoyuan-fa04c3f0.js"),["assets/taoyuan-fa04c3f0.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/tashkent.js":()=>E(()=>import("./tashkent-5e763414.js"),["assets/tashkent-5e763414.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/tehran.js":()=>E(()=>import("./tehran-293c71a8.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/tianjin.js":()=>E(()=>import("./tianjin-21ed5bf0.js"),["assets/tianjin-21ed5bf0.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/tokyo.js":()=>E(()=>import("./tokyo-8b27ac8a.js"),["assets/tokyo-8b27ac8a.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/toronto.js":()=>E(()=>import("./toronto-cf196201.js"),["assets/toronto-cf196201.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/turin.js":()=>E(()=>import("./turin-a5440f19.js"),["assets/turin-a5440f19.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/tyneandwear.js":()=>E(()=>import("./tyneandwear-b3da8462.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/urumqi.js":()=>E(()=>import("./urumqi-a91f478e.js"),["assets/urumqi-a91f478e.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/vienna.js":()=>E(()=>import("./vienna-1e8eea57.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/warsaw.js":()=>E(()=>import("./warsaw-f8de6abb.js"),["assets/warsaw-f8de6abb.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/washington.js":()=>E(()=>import("./washington-2999f272.js"),["assets/washington-2999f272.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/wenzhou.js":()=>E(()=>import("./wenzhou-ab97bd61.js"),["assets/wenzhou-ab97bd61.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/wuhan.js":()=>E(()=>import("./wuhan-b3c951e7.js"),["assets/wuhan-b3c951e7.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/wuxi.js":()=>E(()=>import("./wuxi-68576026.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/xiamen.js":()=>E(()=>import("./xiamen-cca9c4f0.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/xian.js":()=>E(()=>import("./xian-8681c0de.js"),["assets/xian-8681c0de.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/xuzhou.js":()=>E(()=>import("./xuzhou-fb943915.js"),["assets/xuzhou-fb943915.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/yekaterinburg.js":()=>E(()=>import("./yekaterinburg-a2543e02.js"),["assets/yekaterinburg-a2543e02.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/yevpatoria.js":()=>E(()=>import("./yevpatoria-ccea65c1.js"),["assets/yevpatoria-ccea65c1.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/yokohama.js":()=>E(()=>import("./yokohama-e5139f05.js"),["assets/yokohama-e5139f05.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/zhengzhou.js":()=>E(()=>import("./zhengzhou-5af35ddb.js"),["assets/zhengzhou-5af35ddb.js","assets/index-3cc89a45.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-d22c1e14.css"])}),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/".concat(p,".js")).then(i=>n(i.default)).catch(()=>n([]))},[p]),g};function bs(p){const{city:g,defaultValueId:n,onChange:i}=p,{i18n:a}=le(),e=ys(g),r=n?e.find(y=>y.id===n):void 0,t=y=>{var u;return(u=a.languages.map(d=>y.name[d]).find(d=>d!==void 0))!=null?u:""},o=y=>{const u=t(y);return m.jsx(ln,{name:u,fg:y.fg||xe.white,bg:y.colour})},_=(y,u)=>Object.values(y.name).some(d=>d.includes(u));return m.jsx(on,{data:e,displayValue:t,displayHandler:o,predicate:_,defaultValue:r,onChange:y=>i==null?void 0:i(y.id,y.colour,y.fg||xe.white)})}function Bt(p){const{isOpen:g,onClose:n,defaultTheme:i,onUpdate:a}=p,{t:e}=le(),r=zn("primary.500","primary.300"),[t,o]=K.useState(i==null?void 0:i[0]),[_,y]=K.useState(i==null?void 0:i[1]),[u,d]=K.useState((i==null?void 0:i[2])||"#AAAAAA"),[l,v]=K.useState((i==null?void 0:i[3])||xe.white);K.useEffect(()=>{i&&(o(i[0]),y(i[1]),d(i[2]),v(i[3]))},[g,i==null?void 0:i.toString()]);const h=[{type:"custom",label:e("ColourModal.city"),component:m.jsx(vs,{defaultValueId:t,onChange:j=>{o(j),y(void 0),d("#AAAAAA"),v(xe.white)}})},{type:"custom",label:e("ColourModal.line"),component:m.jsx(bs,{city:t,defaultValueId:_,onChange:(j,O,F)=>{y(j),d(O),v(F)}})}],b=[{type:"input",label:e("ColourModal.bg"),variant:"color",value:u,placeholder:"#F3D03E",onChange:j=>{o(Pe.Other),y("other"),d(j)}},{type:"select",label:e("ColourModal.fg"),value:l,options:{[xe.white]:e("ColourModal.white"),[xe.black]:e("ColourModal.black")},onChange:j=>{o(Pe.Other),y("other"),v(j)}}],f=()=>{he.isStandaloneWindow()?window.open("/rmg-palette","_blank"):he.openApp("rmg-palette")},x=t&&_&&u&&l,k=()=>{x&&(a==null||a([t,_,u,l]),n(),he.event(ye.SELECT_COLOUR,{cityCode:t,lineCode:_}))};return m.jsxs(Me,{isOpen:g,onClose:n,children:[m.jsx(Ne,{}),m.jsxs(He,{children:[m.jsx(We,{children:e("ColourModal.title")}),m.jsx(Ue,{}),m.jsx(Ze,{children:m.jsxs(mt,{children:[m.jsx(ln,{name:e("ColourModal.example"),fg:l,bg:u}),m.jsxs(Pt,{isFitted:!0,colorScheme:"primary",w:"100%",defaultIndex:t===Pe.Other?1:0,children:[m.jsxs(It,{children:[m.jsx(Ge,{children:e("ColourModal.palette")}),m.jsx(Ge,{children:e("ColourModal.custom")})]}),m.jsxs(Ct,{children:[m.jsx(ut,{children:m.jsx(ge,{fields:h})}),m.jsx(ut,{children:m.jsx(ge,{fields:b})})]})]})]})}),m.jsxs(Je,{children:[m.jsxs(st,{fontSize:"sm",marginRight:2,children:[e("ColourModal.seeAll"),m.jsxs($e,{color:r,onClick:f,children:[e("Palette")," ",m.jsx(Fn,{as:$n})]})]}),m.jsx(de,{colorScheme:"primary",onClick:k,isDisabled:!x,children:e("Confirm")})]})]})]})}class Es{static hexToRgb(g){return[parseInt(g.slice(1,3),16),parseInt(g.slice(3,5),16),parseInt(g.slice(5,7),16)]}static fade(g,n){return"rgba(".concat([...this.hexToRgb(g),n].join(","),")")}static euclideanDistance(g,n){return this.hexToRgb(g).reduce((i,a,e)=>i+Math.pow(a-this.hexToRgb(n)[e],2),0)}}function Vt(p){var a;const{theme:g,onClick:n}=p,{t:i}=le();return m.jsx(Le,{size:"xs","aria-label":i("Colour"),mt:"0.45px",color:g==null?void 0:g[3],bg:g==null?void 0:g[2],_hover:{bg:Es.fade((a=g==null?void 0:g[2])!=null?a:"#aaaaaa",.7)},icon:m.jsx(Yn,{}),onClick:n})}function xs(p){var b;const{interchangeList:g,onAdd:n,onDelete:i,onUpdate:a}=p,{t:e}=le(),[r,t]=K.useState(!1),[o,_]=K.useState(0),{style:y,theme:u,stn_list:d}=ee(f=>f.param),l=Object.values(d).reduce((f,x)=>{const[k,j]=f;return[[...new Set(k.concat(x.transfer.groups.map(O=>O.lines.map(F=>F.name[0])).flat()))],[...new Set(j.concat(x.transfer.groups.map(O=>O.lines.map(F=>F.name[1])).flat()))]]},[[],[]]),v=Object.fromEntries(Object.entries(St).filter(([f])=>!["railway"].includes(f)).map(([f,x])=>[f,e(x)])),h=g.map((f,x)=>[{type:"input",label:e("Chinese name"),value:f.name[0],onChange:k=>a==null?void 0:a(x,{...f,name:[k,f.name[1]]}),optionList:l[0]},{type:"input",label:e("English name"),value:f.name[1],onChange:k=>a==null?void 0:a(x,{...f,name:[f.name[0],k]}),optionList:l[1]},{type:"select",label:e("Line icon"),value:f.facility,options:v,onChange:k=>a==null?void 0:a(x,{...f,facility:k}),hidden:![Q.MTR].includes(y)}]);return m.jsxs(Fe,{direction:"column",children:[g.length===0&&m.jsxs(Ie,{spacing:.5,"data-testid":"interchange-card-stack",children:[m.jsx(st,{as:"i",flex:1,align:"center",fontSize:"md",colorScheme:"gray",children:e("StationSidePanel.interchange.noInterchanges")}),m.jsx(Le,{size:"sm",variant:"ghost","aria-label":e("StationSidePanel.interchange.add"),onClick:()=>n==null?void 0:n({theme:[u[0],"","#aaaaaa",xe.white],name:["",""]}),icon:m.jsx(Ce,{})})]}),g.map((f,x)=>m.jsxs(Ie,{spacing:.5,"data-testid":"interchange-card-stack-".concat(x),children:[m.jsx(jt,{label:e("Colour"),minW:"40px",noLabel:x!==0,children:m.jsx(Vt,{theme:f.theme,onClick:()=>{t(!0),_(x)}})}),m.jsx(ge,{fields:h[x],noLabel:x!==0}),n&&x===h.length-1?m.jsx(Le,{size:"sm",variant:"ghost","aria-label":e("StationSidePanel.interchange.copy"),onClick:()=>n==null?void 0:n(g.slice(-1)[0]),icon:m.jsx(qn,{})}):m.jsx(we,{minW:8}),i&&m.jsx(Le,{size:"sm",variant:"ghost","aria-label":e("StationSidePanel.interchange.remove"),onClick:()=>i==null?void 0:i(x),icon:m.jsx(Lt,{})})]},x)),m.jsx(Bt,{isOpen:r,onClose:()=>t(!1),defaultTheme:(b=g[o])==null?void 0:b.theme,onUpdate:f=>a==null?void 0:a(o,{...g[o],theme:f})})]})}function ws(){const{t:p}=le(),g=fe(),n=ee(u=>u.app.selectedStation),{theme:i,style:a}=ee(u=>u.param),{transfer:e}=ee(u=>u.param.stn_list[n]),r=u=>{var d,l,v,h;return[{type:"input",label:p("Station Chinese name"),value:(l=(d=e.groups[u].name)==null?void 0:d[0])!=null?l:"",hidden:![Q.MTR].includes(a),onChange:b=>{var f,x;return g(qt(n,u,[b,(x=(f=e.groups[u].name)==null?void 0:f[1])!=null?x:""]))}},{type:"input",label:p("Station English name"),value:(h=(v=e.groups[u].name)==null?void 0:v[1])!=null?h:"",hidden:![Q.MTR].includes(a),onChange:b=>{var f,x;return g(qt(n,u,[(x=(f=e.groups[u].name)==null?void 0:f[0])!=null?x:"",b]))}},{type:"switch",label:p("Paid area"),isChecked:e.paid_area,onChange:b=>g(Jn(n,b)),hidden:![Q.MTR].includes(a)||u===0,oneLine:!0}]},t=u=>d=>{g(Kt(n,u,d))},o=u=>d=>{g(Xn(n,u,d))},_=u=>(d,l)=>{g(Qn(n,u,d,l))},y=()=>{g(Kt(n,e.groups.length,{theme:[i[0],"","#AAAAAA",xe.white],name:["",""]}))};return m.jsxs(mt,{align:"flex-start",p:1,children:[m.jsxs(Re,{w:"100%",children:[m.jsx(Ee,{as:"h5",size:"sm",mr:"auto",children:p("StationSidePanel.interchange.title")}),a===Q.MTR&&m.jsx(at,{selections:[{label:p("Text on the left"),value:Ye.left},{label:p("Text on the right"),value:Ye.right}],defaultValue:e.tick_direc,onChange:u=>g(Kn(n,u))})]}),e.groups.map((u,d)=>m.jsxs(K.Fragment,{children:[m.jsx(Ee,{as:"h6",size:"xs",children:p(d===0?"StationSidePanel.interchange.within":d===1?"StationSidePanel.interchange.outStation":"StationSidePanel.interchange.outSystem")}),d!==0&&m.jsx(ge,{fields:r(d)}),m.jsx(xs,{interchangeList:u.lines,onAdd:t(d),onDelete:o(d),onUpdate:_(d)})]},d)),e.groups.length<3&&m.jsx(de,{size:"xs",variant:"ghost",alignSelf:"flex-end",leftIcon:m.jsx(Ce,{}),onClick:y,children:p("StationSidePanel.interchange.addGroup")})]})}function Ss(){const{t:p}=le(),g=fe(),n=ee(v=>v.app.selectedStation),{style:i,loop:a}=ee(v=>v.param),{services:e,facility:r,loop_pivot:t,one_line:o,int_padding:_}=ee(v=>v.param.stn_list[n]),y=Object.values(At).map(v=>({label:p("StationSidePanel.more."+v),value:v,disabled:v===At.local&&i!==Q.SHMetro})),u=Object.fromEntries(Object.entries(St).filter(([v])=>!["railway"].includes(v)).map(([v,h])=>[v,p(h)])),d=Object.fromEntries(Object.entries(St).filter(([v])=>!["np360"].includes(v)).map(([v,h])=>[v,p(h)])),l=[{type:"custom",label:p("StationSidePanel.more.service"),component:m.jsx(at,{selections:y,defaultValue:e,onChange:v=>g(er(n,v)),multiSelect:!0}),hidden:![Q.GZMTR,Q.SHMetro].includes(i)},{type:"select",label:p("StationSidePanel.more.facility"),value:r,options:i===Q.MTR?u:d,onChange:v=>g(tr(n,v)),hidden:![Q.MTR,Q.SHMetro].includes(i)},{type:"switch",label:p("StationSidePanel.more.pivot"),isChecked:t,onChange:v=>g(nr(n,v)),hidden:![Q.SHMetro].includes(i)||!a,minW:"full",oneLine:!0},{type:"switch",label:p("StationSidePanel.more.oneLine"),isChecked:o,onChange:v=>g(rr(n,v)),hidden:![Q.SHMetro].includes(i),minW:"full",oneLine:!0},{type:"input",label:p("StationSidePanel.more.intPadding"),value:_.toString(),validator:v=>Number.isInteger(v),onChange:v=>g(sr(n,Number(v))),hidden:![Q.SHMetro].includes(i)},{type:"custom",label:p("StationSidePanel.more.intPaddingApplyGlobal"),component:m.jsx(at,{selections:[{label:p("StationSidePanel.more.apply"),value:"",disabled:!1}],defaultValue:"",onChange:v=>g(ar(n))}),oneLine:!0,hidden:![Q.SHMetro].includes(i)}];return m.jsxs(we,{p:1,children:[m.jsx(Ee,{as:"h5",size:"sm",children:p("StationSidePanel.more.title")}),m.jsx(ge,{fields:l})]})}function js(){const{t:p}=le(),g=fe(),n=ee(u=>u.app.selectedStation),i=ee(u=>u.param.stn_list),{parents:a,children:e,branch:r}=i[n],t={[ht.through]:p("StationSidePanel.branch.through"),[ht.nonThrough]:p("StationSidePanel.branch.nonThrough")},o=u=>(u===je.left?a:e).reduce((d,l)=>({...d,[l]:i[l].name.join(" ")}),{}),_={upper:p("StationSidePanel.branch.upper"),lower:p("StationSidePanel.branch.lower")},y=u=>r[u].length?[{type:"select",label:p("StationSidePanel.branch.type"),options:t,value:r[u][0],onChange:d=>g(ir(n,u,d))},{type:"select",label:p("StationSidePanel.branch.firstStation"),options:o(u),value:r[u][1],onChange:d=>g(or(n,u,d))},{type:"select",label:p("StationSidePanel.branch.position"),options:_,value:(u===je.left?a:e)[0]===r[u][1]?"upper":"lower",onChange:()=>g(lr(n,u))}]:[];return m.jsxs(we,{p:1,children:[m.jsx(Ee,{as:"h5",size:"sm",children:p("Branches")}),m.jsx(Ee,{as:"h6",size:"xs",children:p("Branch on the left")}),m.jsx(Fe,{direction:"column",children:a.length===2?m.jsx(ge,{fields:y(je.left)}):m.jsx(st,{as:"i",flex:1,align:"center",fontSize:"md",colorScheme:"gray",children:p("No branches found")})}),m.jsx(Ee,{as:"h6",size:"xs",children:p("Branch on the right")}),m.jsx(Fe,{direction:"column",children:e.length===2?m.jsx(ge,{fields:y(je.right)}):m.jsx(st,{as:"i",flex:1,align:"center",fontSize:"md",colorScheme:"gray",children:p("No branches found")})})]})}function As(){return m.jsxs(Dt,{children:[m.jsx(fs,{}),m.jsx(De,{}),m.jsx(ws,{}),m.jsx(De,{}),m.jsx(js,{}),m.jsx(De,{}),m.jsx(Ss,{})]})}function ks(){const{t:p}=le(),g=zt(),{style:n,svgWidth:i,svg_height:a,y_pc:e,branchSpacingPct:r,padding:t,direction_gz_x:o,direction_gz_y:_,loop:y}=ee(d=>d.param),u=[...Ft[n].map(d=>({type:"input",label:p("StyleSidePanel.layout.".concat(d,"Width")),value:i[d].toString(),onChange:l=>g(cr(Number(l),d))})),{type:"input",label:p("StyleSidePanel.layout.canvasHeight"),value:a.toString(),onChange:d=>g(dr(Number(d)))},{type:"slider",label:p("StyleSidePanel.layout.verticalPosition"),value:e,min:0,max:100,onChange:d=>g(ur(d)),leftIcon:m.jsx(kt,{}),rightIcon:m.jsx(Ot,{}),hidden:![Q.MTR,Q.GZMTR].includes(n)},{type:"slider",label:p(y?"StyleSidePanel.layout.branchSpacingLoop":"Branch spacing"),value:r,min:0,max:y?50:100,onChange:d=>g(hr(d)),leftIcon:m.jsx(Jt,{}),rightIcon:m.jsx(Ce,{})},{type:"slider",label:p("StyleSidePanel.layout.padding"),value:t,min:0,max:50,onChange:d=>g(mr(d)),leftIcon:m.jsx(Jt,{}),rightIcon:m.jsx(Ce,{})},{type:"slider",label:p("StyleSidePanel.layout.directionGzX"),value:o,min:0,max:100,onChange:d=>g(pr(d)),leftIcon:m.jsx(cn,{}),rightIcon:m.jsx(dn,{}),hidden:![Q.GZMTR].includes(n)},{type:"slider",label:p("StyleSidePanel.layout.directionGzY"),value:_,min:0,max:100,onChange:d=>g(_r(d)),leftIcon:m.jsx(kt,{}),rightIcon:m.jsx(Ot,{}),hidden:![Q.GZMTR].includes(n)}];return m.jsxs(we,{p:1,children:[m.jsx(Ee,{as:"h5",size:"sm",children:p("StyleSidePanel.layout.title")}),m.jsx(ge,{fields:u,minW:130})]})}function Os(){const{t:p}=le(),g=fe(),{style:n,theme:i,line_name:a,line_num:e,direction:r,platform_num:t,psd_num:o,namePosMTR:_,customiseMTRDest:y,info_panel_type:u}=ee(j=>j.param),[d,l]=K.useState(!1),v=[{label:p("StyleSidePanel.design.left"),value:Ye.left},{label:p("StyleSidePanel.design.right"),value:Ye.right}],h=Object.values(un).reduce((j,O)=>({...j,[O]:p("StyleSidePanel.design."+O)}),{}),b=Object.values(hn).reduce((j,O)=>({...j,[O]:p("StyleSidePanel.design."+O)}),{}),f=[{type:"custom",label:p("Colour"),component:m.jsx(Vt,{theme:i,onClick:()=>l(!0)}),minW:"40px"},{type:"input",label:p("StyleSidePanel.design.zhLineName"),value:a[0],onChange:j=>g(Xt([j,a[1]])),minW:130},{type:"input",label:p("StyleSidePanel.design.enLineName"),value:a[1],onChange:j=>g(Xt([a[0],j])),minW:130},{type:"input",label:p("StyleSidePanel.design.lineNum"),value:e,onChange:j=>g(fr(j)),hidden:![Q.GZMTR].includes(n)},{type:"input",label:p("StyleSidePanel.design.platformNum"),value:t||"",onChange:j=>g(gr(j))},{type:"input",label:p("StyleSidePanel.design.psdNum"),value:o,onChange:j=>g(vr(j)),hidden:![Q.GZMTR].includes(n)},{type:"select",label:p("StyleSidePanel.design.panelType"),value:u,options:n===Q.GZMTR?h:b,onChange:j=>g(yr(j)),hidden:![Q.GZMTR,Q.SHMetro].includes(n)},{type:"custom",label:p("StyleSidePanel.design.direction"),component:m.jsx(at,{selections:v,defaultValue:r,onChange:j=>g(br(j))}),minW:"full",oneLine:!0}],x=[{label:p("StyleSidePanel.design.alternatively"),value:!0},{label:p("StyleSidePanel.design.onOneSide"),value:!1}],k=[{type:"custom",label:p("StyleSidePanel.design.nameDisplay"),component:m.jsxs(Ie,{spacing:.5,children:[m.jsx(Le,{size:"xs",variant:"ghost","aria-label":p("StyleSidePanel.design.flip"),title:p("StyleSidePanel.design.flip"),icon:m.jsx(Er,{}),onClick:()=>g(xr())}),m.jsx(at,{selections:x,defaultValue:_.isStagger,onChange:j=>g(wr(j))})]}),minW:"full",oneLine:!0,hidden:![Q.MTR].includes(n)},{type:"switch",label:p("StyleSidePanel.design.legacyDestination"),isChecked:y.isLegacy,onChange:j=>g(Sr(j)),hidden:![Q.MTR].includes(n),minW:"full",oneLine:!0},{type:"switch",label:p("StyleSidePanel.design.overrideTerminal"),isChecked:y.terminal!==!1,onChange:j=>g(yt(j?["",""]:!1)),hidden:![Q.MTR].includes(n),minW:"full",oneLine:!0},{type:"input",label:p("StyleSidePanel.design.terminalZhName"),value:y.terminal?y.terminal[0]:"",placeholder:"機場及博覽館",onChange:j=>g(yt([j,y.terminal?y.terminal[1]:""])),hidden:![Q.MTR].includes(n)||y.terminal===!1},{type:"input",label:p("StyleSidePanel.design.terminalEnName"),value:y.terminal?y.terminal[1]:"",placeholder:"Airport and AsiaWorld-Expo",onChange:j=>g(yt([y.terminal?y.terminal[0]:"",j])),hidden:![Q.MTR].includes(n)||y.terminal===!1}];return m.jsxs(we,{p:1,children:[m.jsx(Ee,{as:"h5",size:"sm",children:p("StyleSidePanel.design.title")}),m.jsx(ge,{fields:[...f,...k],minW:130}),m.jsx(Bt,{isOpen:d,onClose:()=>l(!1),defaultTheme:i,onUpdate:j=>g(jr(j))})]})}function Rs(){const{t:p}=le(),g=fe(),{branches:n}=ee(d=>d.helper),{loop:i,loop_info:a}=ee(d=>d.param),{bank:e,left_and_right_factor:r,bottom_factor:t}=a,o=n.flat().filter((d=>l=>(d[l]=(d[l]||0)+1)===2)({})).filter(d=>!["linestart","lineend"].includes(d)),_=Math.abs(n[0].indexOf(o[0])-n[0].indexOf(o[1])),y=n.length>=2?(0,Math.min)(n[0].length-2-_,_):Math.floor((n[0].length-2-t*2)/2),u=[{type:"switch",label:p("StyleSidePanel.loop.isLoop"),isChecked:i,onChange:d=>g(Ar(d)),minW:"full",oneLine:!0},{type:"switch",label:p("StyleSidePanel.loop.isBank"),isChecked:e,onChange:d=>g(kr(d)),minW:"full",oneLine:!0,hidden:!i},{type:"slider",label:p("StyleSidePanel.loop.leftRightFactor"),value:r,min:0,max:y,onChange:d=>g(Or(Math.floor(d))),hidden:!i},{type:"slider",label:p("StyleSidePanel.loop.bottomFactor"),value:t,min:0,max:Math.floor((n[0].length-2-r*2)/2),onChange:d=>g(Rr(Math.floor(d))),hidden:!i||i&&n.length>2}];return m.jsxs(we,{p:1,children:[m.jsx(Ee,{as:"h5",size:"sm",children:p("StyleSidePanel.loop.title")}),m.jsx(ge,{fields:u})]})}function Ts(p){const{note:g,onUpdate:n,onDelete:i}=p,{t:a}=le(),e=[{type:"textarea",label:a("StyleSidePanel.note.zhNote"),value:g[0],onChange:t=>n==null?void 0:n([t,g[1],g[2],g[3],g[4]])},{type:"textarea",label:a("StyleSidePanel.note.enNote"),value:g[1],onChange:t=>n==null?void 0:n([g[0],t,g[2],g[3],g[4]])},{type:"switch",label:a("StyleSidePanel.note.border"),isChecked:g[4],onChange:t=>n==null?void 0:n([g[0],g[1],g[2],g[3],t]),oneLine:!0}],r=[{type:"slider",label:a("StyleSidePanel.note.positionX"),value:g[2],min:0,max:100,onChange:t=>n==null?void 0:n([g[0],g[1],t,g[3],g[4]]),leftIcon:m.jsx(cn,{}),rightIcon:m.jsx(dn,{})},{type:"slider",label:a("StyleSidePanel.note.positionY"),value:g[3],min:0,max:100,onChange:t=>n==null?void 0:n([g[0],g[1],g[2],t,g[4]]),leftIcon:m.jsx(kt,{}),rightIcon:m.jsx(Ot,{})}];return m.jsxs(Fe,{direction:"column",children:[m.jsx(ge,{fields:e,minW:"full"}),m.jsxs(Ie,{spacing:.5,sx:{"&>div":{flex:1}},children:[m.jsx(ge,{fields:r}),m.jsx(Le,{size:"sm",variant:"ghost","aria-label":a("StyleSidePanel.note.remove"),onClick:()=>i==null?void 0:i(),icon:m.jsx(Lt,{})})]})]})}function Ps(){const{t:p}=le(),g=fe(),n=ee(i=>i.param.notesGZMTR);return m.jsxs(we,{p:1,children:[m.jsx(Ee,{as:"h5",size:"sm",children:p("StyleSidePanel.note.title")}),m.jsxs(mt,{spacing:.5,children:[n.map((i,a)=>m.jsx(Ts,{note:i,onUpdate:e=>g(Tr(a,e)),onDelete:()=>g(Pr(a))},a)),m.jsx(de,{size:"xs",variant:"ghost",leftIcon:m.jsx(Ce,{}),alignSelf:"flex-end",onClick:()=>g(Ir()),children:p("StyleSidePanel.note.add")})]})]})}function Is(){const{style:p}=ee(g=>g.param);return m.jsxs(Dt,{children:[m.jsx(ks,{}),m.jsx(De,{}),m.jsx(Os,{}),p===Q.GZMTR&&m.jsxs(m.Fragment,{children:[m.jsx(De,{}),m.jsx(Ps,{})]}),p===Q.SHMetro&&m.jsxs(m.Fragment,{children:[m.jsx(De,{}),m.jsx(Rs,{})]})]})}const Mt=(p,g)=>{if(["linestart","lineend"].includes(p)||g[p].parents.length>1||g[p].children.length>1)return 0;const n=g[p].parents[0];return n?g[n].children.length===1?Mt(n,g):g[n].children.indexOf(p)===0?1:-1:0},Cs=p=>(g,n)=>{const{stn_list:i,current_stn_idx:a}=n().param;if(p===a)return console.log("removeStation():: failed as current station cannot be deleted"),!1;const{parents:e,children:r}=i[p];return Object.keys(i).length===4?(console.log("removeStation():: failed as only 2 stations remaining"),!1):e.length===2&&r.length===2?(console.log("removeStation():: failed as branches on both sides cannot be combined"),!1):Object.keys(i).some(o=>![p,"linestart","lineend"].includes(o)&&Mt(o,i)===0)?!0:(console.log("removeStation():: failed as selected station is the only station without siblings"),!1)},Ls=p=>(g,n)=>{const i=n().param.stn_list,{parents:a,children:e}=i[p];let r=JSON.parse(JSON.stringify(i));a.length===2||e.length===2?(a.forEach(t=>{r[t].children=e}),e.forEach(t=>{r[t].parents=a}),a.length===1&&(r[a[0]].branch.right=r[p].branch.right),e.length===1&&(r[e[0]].branch.left=r[p].branch.left)):i[a[0]].children.length===2&&i[e[0]].parents.length===2?r={...i,[a[0]]:{...i[a[0]],children:i[a[0]].children.filter(t=>t!==p),branch:{...i[a[0]].branch,right:[]}},[e[0]]:{...i[e[0]],parents:i[e[0]].parents.filter(t=>t!==p),branch:{...i[e[0]].branch,left:[]}}}:(a.forEach(t=>{const o=r[t].children.indexOf(p);e.length?r[t].children[o]=e[0]:r[t].children.splice(o,1),r[t].branch.right[1]===p&&(r[t].branch.right[1]=e[0])}),e.forEach(t=>{const o=r[t].parents.indexOf(p);a.length?r[t].parents[o]=a[0]:r[t].parents.splice(o,1),r[t].branch.left[1]===p&&(r[t].branch.left[1]=a[0])})),delete r[p],g(Be(r))};function Ds(...p){return p.reduce((g,n)=>g.map(i=>n.map(a=>i.concat([a]))).reduce((i,a)=>i.concat(a),[]),[[]])}const Xe=(p,g)=>!!g[p[0]].children.indexOf(p[1]),bn=(p,g)=>[p[0][1],p[0][p[0].length-2],...p[0].filter(n=>p.slice(1).filter(i=>Xe(i,g)).map(i=>i.filter(a=>!["linestart","lineend"].includes(a))).map(i=>[i[0],i[i.length-1]]).flat().includes(n))],zs=(p,g)=>p.slice(1).filter(n=>Xe(n,g)).map(n=>n.filter(i=>!["linestart","lineend"].includes(i))).map(n=>[n[0],n[n.length-1]]),Fs=p=>(g,n)=>{const i=n().helper.branches;if(p===0){const a=n().param.stn_list,e=bn(i,a);return Ds(e,e).filter(r=>r[0]!==r[1])}else{const a=i[p];if(a){const e=a.filter(r=>!["linestart","lineend"].includes(r));return[[e[0],e.slice(-1)[0]]]}else return[]}},Wa=(p,g)=>(n,i)=>{const a=i().param.coline,e=i().helper.branches[g];for(const[r,t]of Object.entries(a))if(t.from===p&&e.includes(t.to)){const o=e.indexOf(p),_=e.indexOf(t.to);if(_>o)return[_-o+1,r]}else if(t.to===p&&e.includes(t.to)){const o=e.indexOf(p),_=e.indexOf(t.from);if(_>o)return[_-o+1,r]}return[0,void 0]},En=(p,g)=>(n,i)=>{const a=i().param.stn_list,e=i().helper.branches;if(p===g)throw new Error("addColine():: failed for same stnId");const r=bn(e,a).filter(o=>[p,g].includes(o)),t=zs(e,a).filter(o=>[p,g].every(_=>o.includes(_)));if(r.length===2&&t.length>0)throw new Error("addColine():: main check failed for ".concat(p,", ").concat(g));if(r.length!==2&&t.length!==1)throw new Error("addColine():: branch check failed for ".concat(p,", ").concat(g))},Bs=p=>(g,n)=>{const i=n().param.coline,e=n().helper.branches[p];return e?Object.entries(i).reduce((r,t)=>e.includes(t[1].from)&&e.includes(t[1].to)?{...r,[t[0]]:t[1]}:{...r},{}):{}},Vs=p=>(g,n)=>{const i=n().param.coline;if(Object.keys(i).length===0)return;const a=Object.entries(i).reduce((e,r)=>r[1].from!==p&&r[1].to!==p?{...e,[r[0]]:r[1]}:{...e},{});g(qe(a))},Ms=(p,g,n,i=!0)=>(a,e)=>{const r=e().param.coline;a(En(p,g)),a(qe({...r,[it(4)]:{from:p,to:g,colors:n,display:i}}))},Ns=(p,g,n,i=!0)=>(a,e)=>{const r=e().param.coline;if(p in r){a(En(g,n));const t={...r,[p]:{...r[p],from:g,to:n,display:i}};a(qe(t))}},Hs=(p,g)=>(n,i)=>{const a=i().param.coline;if(p in a&&a[p].colors.length>g){const e=a[p].colors.filter((r,t)=>t!==g);if(e.length===0){const{[p]:r,...t}=a;n(qe(t))}else{const r={...a,[p]:{...a[p],colors:e}};n(qe(r))}}},Ws=(p,g,n)=>(i,a)=>{const e=a().param.coline;p in e&&e[p].colors.length>g&&(e[p].colors=e[p].colors.map((r,t)=>t===g?[0,1,2,3,4,5].map(o=>n[o]===void 0?r[o]:n[o]):r),i(qe(e)))};function Us(p){const{isOpen:g,onClose:n}=p,{t:i}=le(),a=fe(),e=ee(_=>_.app.selectedStation),[r,t]=K.useState(!1);K.useEffect(()=>{g||t(!1)},[g]);const o=()=>{const _=a(Cs(e));_?(n(),a(Ke(Ve.CLOSE)),a(mn("linestart")),a(Vs(e)),a(Ls(e))):t(!0),he.event(ye.REMOVE_STATION,{success:_})};return m.jsxs(Me,{isOpen:g,onClose:n,children:[m.jsx(Ne,{}),m.jsxs(He,{children:[r&&m.jsxs(pt,{status:"error",variant:"solid",size:"xs",children:[m.jsx(_t,{}),i("Unable to remove this station.")]}),m.jsxs(we,{position:"relative",children:[m.jsx(We,{children:i("Remove station")}),m.jsx(Ue,{})]}),m.jsx(Ze,{children:i("Are you sure to remove station? You cannot undo this action.")}),m.jsxs(Je,{children:[m.jsx(de,{onClick:n,children:i("Cancel")}),m.jsx(de,{colorScheme:"primary",onClick:o,ml:3,children:i("Confirm")})]})]})]})}function Zs(){const{t:p}=le(),g=fe(),n=ee(e=>e.app.selectedStation),[i,a]=K.useState(!1);return m.jsxs(Cr,{children:[m.jsxs(Ie,{children:[m.jsx(de,{size:"sm",variant:"outline",onClick:()=>g(Rt(n)),children:p("StationSidePanel.footer.current")}),m.jsx(de,{size:"sm",variant:"outline",onClick:()=>a(!0),children:p("StationSidePanel.footer.remove")})]}),m.jsx(Us,{isOpen:i,onClose:()=>a(!1)})]})}function Gs(p){const{colineInfo:g,routeOptions:n,onUpdateRoute:i,onUpdateColourInfo:a,onDelete:e}=p,{t:r}=le(),[t,o]=K.useState(!1),_=[{type:"select",label:"Route",value:[g.from,g.to].join(","),options:n,onChange:u=>i==null?void 0:i(u)}],y=[{type:"custom",label:r("Colour"),component:m.jsx(Vt,{theme:[g.colors[0][0],g.colors[0][1],g.colors[0][2],g.colors[0][3]],onClick:()=>o(!0)})},{type:"input",label:r("Chinese name"),value:g.colors[0][4],minW:120,onChange:u=>a==null?void 0:a([g.colors[0][0],g.colors[0][1],g.colors[0][2],g.colors[0][3],u,g.colors[0][5]])},{type:"input",label:r("English name"),value:g.colors[0][5],minW:120,onChange:u=>a==null?void 0:a([g.colors[0][0],g.colors[0][1],g.colors[0][2],g.colors[0][3],g.colors[0][4],u])}];return m.jsxs(Fe,{direction:"column",children:[m.jsx(ge,{fields:_,minW:"full"}),m.jsxs(Ie,{spacing:.5,children:[m.jsx(ge,{fields:y}),m.jsx(Le,{size:"sm",variant:"ghost","aria-label":"Delete colour for route",onClick:()=>e==null?void 0:e(0),icon:m.jsx(Lt,{})})]}),m.jsx(Bt,{isOpen:t,onClose:()=>o(!1),defaultTheme:g.colors[0].slice(0,4),onUpdate:u=>a==null?void 0:a([...u,g.colors[0][4],g.colors[0][5]])})]})}function $s(){const{t:p}=le(),g=fe(),n=ee(d=>d.app.selectedBranch),{theme:i,stn_list:a}=ee(d=>d.param),e=g(Bs(n)),r=g(Fs(n)),t=d=>d.map(l=>a[l].name.join(" - ")).join(" ~ "),o=r.reduce((d,l)=>({...d,[l.join(",")]:t(l)}),{}),_=()=>{console.log("ColineSection.handleAddTrackSharing():: Adding track sharing to branch ".concat(n," with default combination"),r[0]),g(Ms(r[0][0],r[0][1],[[i[0],"","#AAAAAA",xe.white,"",""]]))},y=d=>l=>{const[v,h]=l.split(",");console.log("ColineSection.handleUpdateRoute():: Updating route, colineId=".concat(d,", from=").concat(v,", to=").concat(h));try{g(Ns(d,v,h))}catch(b){g(Tt({status:"error",message:"Unable to draw this share track."}))}},u=(d,l)=>{g(Hs(d,l))};return m.jsxs(mt,{align:"flex-start",p:1,children:[m.jsx(Ee,{as:"h5",size:"sm",children:p("BranchSidePanel.coline.title")}),Object.entries(e).map(([d,l])=>m.jsx(Gs,{colineInfo:l,routeOptions:o,onUpdateRoute:y(d),onUpdateColourInfo:v=>g(Ws(d,0,v)),onDelete:v=>u(d,v)},d)),(n===0||Object.keys(e).length===0)&&m.jsx(de,{size:"xs",variant:"ghost",alignSelf:"flex-end",leftIcon:m.jsx(Ce,{}),onClick:_,children:p("BranchSidePanel.coline.add")})]})}function Ys(p){const{isOpen:g,onClose:n}=p,{t:i}=le(),a=fe(),e=ee(j=>j.app.selectedBranch),{style:r,stn_list:t}=ee(j=>j.param),o=ee(j=>j.helper.branches),[_,y]=K.useState(e),[u,d]=K.useState("1"),[l,v]=K.useState("2"),[h,b]=K.useState("asc");K.useEffect(()=>{y(e)},[e]);const f=[{type:"select",label:i("AutoNumModal.where"),value:_,options:{...o.reduce((j,O,F)=>({...j,[F]:F===0?i("AutoNumModal.main"):r!==Q.SHMetro||!Xe(O,t)?i("AutoNumModal.branch")+" "+F:i("AutoNumModal.external")+" "+F}),{})},onChange:j=>y(j)},{type:"input",label:i("AutoNumModal.from"),value:u,validator:j=>!isNaN(Number(j)),onChange:d,debouncedDelay:0},{type:"input",label:i("AutoNumModal.maxLength"),validator:j=>!isNaN(Number(j)),value:l,onChange:v,debouncedDelay:0},{type:"select",label:i("AutoNumModal.sort"),value:h,options:{asc:i("AutoNumModal.asc"),desc:i("AutoNumModal.desc")},onChange:j=>b(j)}],x=()=>{a(Lr(_,Number(u),Number(l),h)),n(),he.event(ye.AUTO_NUMBERING,{})},k=!u||!l||isNaN(Number(u))||isNaN(Number(l));return m.jsxs(Me,{isOpen:g,onClose:n,children:[m.jsx(Ne,{}),m.jsxs(He,{children:[m.jsx(We,{children:i("AutoNumModal.title")}),m.jsx(Ue,{}),m.jsx(Ze,{children:m.jsx(ge,{fields:f})}),m.jsx(Je,{children:m.jsx(de,{colorScheme:"primary",isDisabled:k,onClick:x,children:i("Confirm")})})]})]})}const Nt=p=>(g,n)=>{const a=n().helper.branches[p];return a.includes("linestart")||a.includes("lineend")?1:2},xn=p=>(g,n)=>{const{branches:i}=n().helper,a=i[0],e=i[p];return a.slice(a.indexOf(e[0])+1,a.indexOf(e.slice(-1)[0]))},qs=(p,g)=>n=>n(Nt(g))===2?(console.log("isStationValid2ConnectBranch():: failed as current branch has 2 connected ends"),!1):n(xn(g)).includes(p)?!0:(console.log("isStationValid2ConnectBranch():: failed as the target station is invalid"),!1),Ks=(p,g)=>(n,i)=>{if(!n(qs(p,g)))return!1;const{branches:e}=i().helper,r=i().param.stn_list,t=e[g];if(t[0]==="linestart"){const o={...r,[t[1]]:{...r[t[1]],parents:[p]},[p]:{...r[p],children:r.linestart.children.map(_=>_===t[1]?_:r[p].children[0]),branch:{left:[],right:r.linestart.branch.right}},linestart:{...r.linestart,children:r.linestart.children.filter(_=>_!==t[1]),branch:{left:[],right:[]}}};return n(Be(o)),!0}else{const o=t.slice(-2)[0],_={...r,[o]:{...r[o],children:[p]},[p]:{...r[p],parents:r.lineend.parents.map(y=>y===o?y:r[p].parents[0]),branch:{right:[],left:r.lineend.branch.left}},lineend:{...r.lineend,parents:r.lineend.parents.filter(y=>y!==o),branch:{left:[],right:[]}}};return n(Be(_)),!0}},wn=p=>(g,n)=>{const{branches:i}=n().helper,a=n().param.stn_list,e=i[0],r=i[p];if(g(Nt(p))!==2)return console.log("getPossibleDirection():: failed as there is no possible direction"),[];const o=e.indexOf(r[0]),_=e.slice(0,o),y=e.indexOf(r.slice(-1)[0]),u=e.slice(y+1),d=_.every(v=>a[v].children.length<=1&&a[v].parents.length<=1),l=u.every(v=>a[v].children.length<=1&&a[v].parents.length<=1);return d?l?[je.left,je.right]:[je.left]:l?[je.right]:[]},Js=(p,g)=>(n,i)=>{if(!n(wn(g)).includes(p))return console.log("disconnectFromMainLine():: failed as the aim direction is not in the possible direction list"),!1;const{branches:e}=i().helper,r=i().param.stn_list,t=e[0],o=e[g];if(p===je.left){const _=o[0],y={...r,[o[1]]:{...r[o[1]],parents:["linestart"]},[_]:{...r[_],children:r[_].children.filter(u=>u!==o[1]),branch:{right:[],left:[]}},linestart:{...r.linestart,children:r[_].children.map(u=>u===o[1]?u:t[1]),branch:{left:[],right:r[_].branch.right}}};return n(Be(y)),!0}else{const _=o.slice(-1)[0],y=o.slice(-2)[0],u={...r,[y]:{...r[y],children:["lineend"]},[_]:{...r[_],parents:r[_].parents.filter(d=>d!==y),branch:{right:[],left:[]}},lineend:{...r.lineend,parents:r[_].parents.map(d=>d===y?d:t.slice(-2)[0]),branch:{right:[],left:r[_].branch.left}}};return n(Be(u)),!0}};function tn(p){const{direction:g}=p,{t:n}=le(),i=fe(),{branches:a}=ee(C=>C.helper),e=ee(C=>C.app.selectedBranch),{style:r,stn_list:t}=ee(C=>C.param),[o,_]=K.useState(!1),[y,u]=K.useState(""),d=a[e].filter(C=>!["linestart","lineend"].includes(C)),l=g===je.left?d[0]:d.slice(-1)[0],v=t[l],h=i(xn(e)),b=i(Nt(e)),f=i(wn(e)),x=b===1&&!a[0].includes(l),k=f.includes(g),j=h.reduce((C,B)=>{var P;return{...C,[B]:(P=t[B])==null?void 0:P.name.join(" - ")}},{"":n("Please select...")}),O=()=>{const C=i(Ks(y,e));C?_(!1):i(Tt({status:"error",message:n("Unable to connect to main line.")})),he.event(ye.CONNECT_BRANCH,{style:r,success:C})},F=()=>{const C=i(Js(g,e));C||i(Tt({status:"error",message:n("Unable to disconnect from main line.")})),he.event(ye.DISCONNECT_BRANCH,{style:r,success:C})};return m.jsxs(Fe,{direction:"column",children:[m.jsxs(Re,{alignItems:"center",children:[m.jsx(jt,{label:n("Station name"),flex:1,children:m.jsx(Dr,{defaultValue:v.name.join(" "),isDisabled:!0})}),o?m.jsx(de,{mx:1,size:"sm",variant:"outline",onClick:()=>_(!1),children:n("Cancel")}):x?m.jsx(de,{mx:1,size:"sm",variant:"solid",colorScheme:"primary",onClick:()=>_(!0),children:n("Connect to main line")}):m.jsx(de,{mx:1,size:"sm",variant:"solid",colorScheme:"primary",onClick:F,isDisabled:!k,children:n("Disconnect from main line")})]}),o&&m.jsxs(Re,{alignItems:"center",children:[m.jsx(jt,{label:n("Target station"),flex:1,children:m.jsx(zr,{defaultValue:y,options:j,disabledOptions:[""],onChange:({target:{value:C}})=>u(C)})}),m.jsx(de,{mx:1,size:"sm",variant:"solid",colorScheme:"primary",onClick:O,isDisabled:!y,children:n("Confirm")})]})]})}function Xs(){const{t:p}=le(),g=fe(),n=ee(t=>t.param.style),i=ee(t=>t.app.selectedBranch),[a,e]=K.useState(!1),r=()=>{g(Vr(n===Q.SHMetro)),he.event(ye.REVERSE_STATIONS,{style:n})};return m.jsxs(we,{p:1,children:[m.jsx(Ee,{as:"h5",size:"sm",children:p("BranchSidePanel.action.title")}),m.jsxs(Re,{wrap:"wrap",sx:{p:1,"&> *":{flexShrink:0,flexBasis:"100%","&:not(:first-of-type)":{marginTop:2}}},children:[i!==0&&n!==Q.SHMetro&&m.jsxs(m.Fragment,{children:[m.jsx(Ee,{as:"h6",size:"xs",children:p("Branch left end")}),m.jsx(tn,{direction:je.left}),m.jsx(Ee,{as:"h6",size:"xs",children:p("Branch right end")}),m.jsx(tn,{direction:je.right})]}),n===Q.GZMTR&&m.jsx(de,{size:"sm",variant:"outline",leftIcon:m.jsx(Fr,{}),alignSelf:"flex-end",onClick:()=>e(!0),children:p("BranchSidePanel.action.autoNum")}),m.jsx(de,{size:"sm",variant:"outline",leftIcon:m.jsx(Br,{}),alignSelf:"flex-end",onClick:r,children:n===Q.SHMetro?p("BranchSidePanel.action.flip"):p("BranchSidePanel.action.reverse")})]}),m.jsx(Ys,{isOpen:a,onClose:()=>e(!1)})]})}function Qs(){const p=ee(a=>a.app.selectedBranch),{style:g,stn_list:n}=ee(a=>a.param),i=ee(a=>a.helper.branches);return m.jsxs(Dt,{children:[g===Q.SHMetro&&(p===0||Xe(i[p],n))&&m.jsxs(m.Fragment,{children:[m.jsx($s,{}),m.jsx(De,{})]}),m.jsx(Xs,{})]})}const ea=410;function ta(){var t,o;const{t:p}=le(),g=zt(),{sidePanelMode:n,selectedStation:i}=ee(_=>_.app),a=ee(_=>{var y;return(y=_.param.stn_list[i])==null?void 0:y.name}),e={STATION:{header:m.jsx(us,{text:(a==null?void 0:a.join(" - "))||""}),body:m.jsx(As,{}),footer:m.jsx(Zs,{})},STYLE:{header:p("StyleSidePanel.header"),body:m.jsx(Is,{})},BRANCH:{header:p("BranchSidePanel.header"),body:m.jsx(Qs,{})},CLOSE:{header:"Close"}},r=()=>{g(Ke(Ve.CLOSE))};return m.jsxs(Mr,{isOpen:n!==Ve.CLOSE,width:ea,header:"Dummy header",children:[m.jsx(Nr,{onClose:r,children:e[n].header}),(t=e[n])==null?void 0:t.body,(o=e[n])==null?void 0:o.footer]})}function dt(p){throw new Error('Could not dynamically require "'+p+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Sn={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(p,g){(function(n){p.exports=n()})(function(){return function n(i,a,e){function r(_,y){if(!a[_]){if(!i[_]){var u=typeof dt=="function"&&dt;if(!y&&u)return u(_,!0);if(t)return t(_,!0);var d=new Error("Cannot find module '"+_+"'");throw d.code="MODULE_NOT_FOUND",d}var l=a[_]={exports:{}};i[_][0].call(l.exports,function(v){var h=i[_][1][v];return r(h||v)},l,l.exports,n,i,a,e)}return a[_].exports}for(var t=typeof dt=="function"&&dt,o=0;o<e.length;o++)r(e[o]);return r}({1:[function(n,i,a){var e=n("./utils"),r=n("./support"),t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(o){for(var _,y,u,d,l,v,h,b=[],f=0,x=o.length,k=x,j=e.getTypeOf(o)!=="string";f<o.length;)k=x-f,u=j?(_=o[f++],y=f<x?o[f++]:0,f<x?o[f++]:0):(_=o.charCodeAt(f++),y=f<x?o.charCodeAt(f++):0,f<x?o.charCodeAt(f++):0),d=_>>2,l=(3&_)<<4|y>>4,v=1<k?(15&y)<<2|u>>6:64,h=2<k?63&u:64,b.push(t.charAt(d)+t.charAt(l)+t.charAt(v)+t.charAt(h));return b.join("")},a.decode=function(o){var _,y,u,d,l,v,h=0,b=0,f="data:";if(o.substr(0,f.length)===f)throw new Error("Invalid base64 input, it looks like a data url.");var x,k=3*(o=o.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(o.charAt(o.length-1)===t.charAt(64)&&k--,o.charAt(o.length-2)===t.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=r.uint8array?new Uint8Array(0|k):new Array(0|k);h<o.length;)_=t.indexOf(o.charAt(h++))<<2|(d=t.indexOf(o.charAt(h++)))>>4,y=(15&d)<<4|(l=t.indexOf(o.charAt(h++)))>>2,u=(3&l)<<6|(v=t.indexOf(o.charAt(h++))),x[b++]=_,l!==64&&(x[b++]=y),v!==64&&(x[b++]=u);return x}},{"./support":30,"./utils":32}],2:[function(n,i,a){var e=n("./external"),r=n("./stream/DataWorker"),t=n("./stream/Crc32Probe"),o=n("./stream/DataLengthProbe");function _(y,u,d,l,v){this.compressedSize=y,this.uncompressedSize=u,this.crc32=d,this.compression=l,this.compressedContent=v}_.prototype={getContentWorker:function(){var y=new r(e.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),u=this;return y.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new r(e.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},_.createWorkerFrom=function(y,u,d){return y.pipe(new t).pipe(new o("uncompressedSize")).pipe(u.compressWorker(d)).pipe(new o("compressedSize")).withStreamInfo("compression",u)},i.exports=_},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,i,a){var e=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new e("STORE compression")},uncompressWorker:function(){return new e("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,i,a){var e=n("./utils"),r=function(){for(var t,o=[],_=0;_<256;_++){t=_;for(var y=0;y<8;y++)t=1&t?3988292384^t>>>1:t>>>1;o[_]=t}return o}();i.exports=function(t,o){return t!==void 0&&t.length?e.getTypeOf(t)!=="string"?function(_,y,u,d){var l=r,v=d+u;_^=-1;for(var h=d;h<v;h++)_=_>>>8^l[255&(_^y[h])];return-1^_}(0|o,t,t.length,0):function(_,y,u,d){var l=r,v=d+u;_^=-1;for(var h=d;h<v;h++)_=_>>>8^l[255&(_^y.charCodeAt(h))];return-1^_}(0|o,t,t.length,0):0}},{"./utils":32}],5:[function(n,i,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,i,a){var e=null;e=typeof Promise<"u"?Promise:n("lie"),i.exports={Promise:e}},{lie:37}],7:[function(n,i,a){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",r=n("pako"),t=n("./utils"),o=n("./stream/GenericWorker"),_=e?"uint8array":"array";function y(u,d){o.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=d,this.meta={}}a.magic="\b\0",t.inherits(y,o),y.prototype.processChunk=function(u){this.meta=u.meta,this._pako===null&&this._createPako(),this._pako.push(t.transformTo(_,u.data),!1)},y.prototype.flush=function(){o.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(d){u.push({data:d,meta:u.meta})}},a.compressWorker=function(u){return new y("Deflate",u)},a.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,i,a){function e(l,v){var h,b="";for(h=0;h<v;h++)b+=String.fromCharCode(255&l),l>>>=8;return b}function r(l,v,h,b,f,x){var k,j,O=l.file,F=l.compression,C=x!==_.utf8encode,B=t.transformTo("string",x(O.name)),P=t.transformTo("string",_.utf8encode(O.name)),N=O.comment,Y=t.transformTo("string",x(N)),A=t.transformTo("string",_.utf8encode(N)),z=P.length!==O.name.length,c=A.length!==N.length,V="",re="",U="",ae=O.dir,Z=O.date,se={crc32:0,compressedSize:0,uncompressedSize:0};v&&!h||(se.crc32=l.crc32,se.compressedSize=l.compressedSize,se.uncompressedSize=l.uncompressedSize);var L=0;v&&(L|=8),C||!z&&!c||(L|=2048);var I=0,ne=0;ae&&(I|=16),f==="UNIX"?(ne=798,I|=function(q,me){var be=q;return q||(be=me?16893:33204),(65535&be)<<16}(O.unixPermissions,ae)):(ne=20,I|=function(q){return 63&(q||0)}(O.dosPermissions)),k=Z.getUTCHours(),k<<=6,k|=Z.getUTCMinutes(),k<<=5,k|=Z.getUTCSeconds()/2,j=Z.getUTCFullYear()-1980,j<<=4,j|=Z.getUTCMonth()+1,j<<=5,j|=Z.getUTCDate(),z&&(re=e(1,1)+e(y(B),4)+P,V+="up"+e(re.length,2)+re),c&&(U=e(1,1)+e(y(Y),4)+A,V+="uc"+e(U.length,2)+U);var J="";return J+="\n\0",J+=e(L,2),J+=F.magic,J+=e(k,2),J+=e(j,2),J+=e(se.crc32,4),J+=e(se.compressedSize,4),J+=e(se.uncompressedSize,4),J+=e(B.length,2),J+=e(V.length,2),{fileRecord:u.LOCAL_FILE_HEADER+J+B+V,dirRecord:u.CENTRAL_FILE_HEADER+e(ne,2)+J+e(Y.length,2)+"\0\0\0\0"+e(I,4)+e(b,4)+B+V+Y}}var t=n("../utils"),o=n("../stream/GenericWorker"),_=n("../utf8"),y=n("../crc32"),u=n("../signature");function d(l,v,h,b){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=h,this.encodeFileName=b,this.streamFiles=l,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}t.inherits(d,o),d.prototype.push=function(l){var v=l.meta.percent||0,h=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(l):(this.bytesWritten+=l.data.length,o.prototype.push.call(this,{data:l.data,meta:{currentFile:this.currentFile,percent:h?(v+100*(h-b-1))/h:100}}))},d.prototype.openedSource=function(l){this.currentSourceOffset=this.bytesWritten,this.currentFile=l.file.name;var v=this.streamFiles&&!l.file.dir;if(v){var h=r(l,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:h.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(l){this.accumulate=!1;var v=this.streamFiles&&!l.file.dir,h=r(l,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),v)this.push({data:function(b){return u.DATA_DESCRIPTOR+e(b.crc32,4)+e(b.compressedSize,4)+e(b.uncompressedSize,4)}(l),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var l=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var h=this.bytesWritten-l,b=function(f,x,k,j,O){var F=t.transformTo("string",O(j));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+e(f,2)+e(f,2)+e(x,4)+e(k,4)+e(F.length,2)+F}(this.dirRecords.length,h,l,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(l){this._sources.push(l);var v=this;return l.on("data",function(h){v.processChunk(h)}),l.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),l.on("error",function(h){v.error(h)}),this},d.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(l){var v=this._sources;if(!o.prototype.error.call(this,l))return!1;for(var h=0;h<v.length;h++)try{v[h].error(l)}catch(b){}return!0},d.prototype.lock=function(){o.prototype.lock.call(this);for(var l=this._sources,v=0;v<l.length;v++)l[v].lock()},i.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,i,a){var e=n("../compressions"),r=n("./ZipFileWorker");a.generateWorker=function(t,o,_){var y=new r(o.streamFiles,_,o.platform,o.encodeFileName),u=0;try{t.forEach(function(d,l){u++;var v=function(x,k){var j=x||k,O=e[j];if(!O)throw new Error(j+" is not a valid compression method !");return O}(l.options.compression,o.compression),h=l.options.compressionOptions||o.compressionOptions||{},b=l.dir,f=l.date;l._compressWorker(v,h).withStreamInfo("file",{name:d,dir:b,date:f,comment:l.comment||"",unixPermissions:l.unixPermissions,dosPermissions:l.dosPermissions}).pipe(y)}),y.entriesCount=u}catch(d){y.error(d)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,i,a){function e(){if(!(this instanceof e))return new e;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var r=new e;for(var t in this)typeof this[t]!="function"&&(r[t]=this[t]);return r}}(e.prototype=n("./object")).loadAsync=n("./load"),e.support=n("./support"),e.defaults=n("./defaults"),e.version="3.10.1",e.loadAsync=function(r,t){return new e().loadAsync(r,t)},e.external=n("./external"),i.exports=e},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,i,a){var e=n("./utils"),r=n("./external"),t=n("./utf8"),o=n("./zipEntries"),_=n("./stream/Crc32Probe"),y=n("./nodejsUtils");function u(d){return new r.Promise(function(l,v){var h=d.decompressed.getContentWorker().pipe(new _);h.on("error",function(b){v(b)}).on("end",function(){h.streamInfo.crc32!==d.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):l()}).resume()})}i.exports=function(d,l){var v=this;return l=e.extend(l||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:t.utf8decode}),y.isNode&&y.isStream(d)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):e.prepareContent("the loaded zip file",d,!0,l.optimizedBinaryString,l.base64).then(function(h){var b=new o(l);return b.load(h),b}).then(function(h){var b=[r.Promise.resolve(h)],f=h.files;if(l.checkCRC32)for(var x=0;x<f.length;x++)b.push(u(f[x]));return r.Promise.all(b)}).then(function(h){for(var b=h.shift(),f=b.files,x=0;x<f.length;x++){var k=f[x],j=k.fileNameStr,O=e.resolve(k.fileNameStr);v.file(O,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:l.createFolders}),k.dir||(v.file(O).unsafeOriginalName=j)}return b.zipComment.length&&(v.comment=b.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,i,a){var e=n("../utils"),r=n("../stream/GenericWorker");function t(o,_){r.call(this,"Nodejs stream input adapter for "+o),this._upstreamEnded=!1,this._bindStream(_)}e.inherits(t,r),t.prototype._bindStream=function(o){var _=this;(this._stream=o).pause(),o.on("data",function(y){_.push({data:y,meta:{percent:0}})}).on("error",function(y){_.isPaused?this.generatedError=y:_.error(y)}).on("end",function(){_.isPaused?_._upstreamEnded=!0:_.end()})},t.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},t.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=t},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,i,a){var e=n("readable-stream").Readable;function r(t,o,_){e.call(this,o),this._helper=t;var y=this;t.on("data",function(u,d){y.push(u)||y._helper.pause(),_&&_(d)}).on("error",function(u){y.emit("error",u)}).on("end",function(){y.push(null)})}n("../utils").inherits(r,e),r.prototype._read=function(){this._helper.resume()},i.exports=r},{"../utils":32,"readable-stream":16}],14:[function(n,i,a){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(e,r){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,r);if(typeof e=="number")throw new Error('The "data" argument must not be a number');return new Buffer(e,r)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var r=new Buffer(e);return r.fill(0),r},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&typeof e.on=="function"&&typeof e.pause=="function"&&typeof e.resume=="function"}}},{}],15:[function(n,i,a){function e(O,F,C){var B,P=t.getTypeOf(F),N=t.extend(C||{},y);N.date=N.date||new Date,N.compression!==null&&(N.compression=N.compression.toUpperCase()),typeof N.unixPermissions=="string"&&(N.unixPermissions=parseInt(N.unixPermissions,8)),N.unixPermissions&&16384&N.unixPermissions&&(N.dir=!0),N.dosPermissions&&16&N.dosPermissions&&(N.dir=!0),N.dir&&(O=f(O)),N.createFolders&&(B=b(O))&&x.call(this,B,!0);var Y=P==="string"&&N.binary===!1&&N.base64===!1;C&&C.binary!==void 0||(N.binary=!Y),(F instanceof u&&F.uncompressedSize===0||N.dir||!F||F.length===0)&&(N.base64=!1,N.binary=!0,F="",N.compression="STORE",P="string");var A=null;A=F instanceof u||F instanceof o?F:v.isNode&&v.isStream(F)?new h(O,F):t.prepareContent(O,F,N.binary,N.optimizedBinaryString,N.base64);var z=new d(O,A,N);this.files[O]=z}var r=n("./utf8"),t=n("./utils"),o=n("./stream/GenericWorker"),_=n("./stream/StreamHelper"),y=n("./defaults"),u=n("./compressedObject"),d=n("./zipObject"),l=n("./generate"),v=n("./nodejsUtils"),h=n("./nodejs/NodejsStreamInputAdapter"),b=function(O){O.slice(-1)==="/"&&(O=O.substring(0,O.length-1));var F=O.lastIndexOf("/");return 0<F?O.substring(0,F):""},f=function(O){return O.slice(-1)!=="/"&&(O+="/"),O},x=function(O,F){return F=F!==void 0?F:y.createFolders,O=f(O),this.files[O]||e.call(this,O,null,{dir:!0,createFolders:F}),this.files[O]};function k(O){return Object.prototype.toString.call(O)==="[object RegExp]"}var j={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(O){var F,C,B;for(F in this.files)B=this.files[F],(C=F.slice(this.root.length,F.length))&&F.slice(0,this.root.length)===this.root&&O(C,B)},filter:function(O){var F=[];return this.forEach(function(C,B){O(C,B)&&F.push(B)}),F},file:function(O,F,C){if(arguments.length!==1)return O=this.root+O,e.call(this,O,F,C),this;if(k(O)){var B=O;return this.filter(function(N,Y){return!Y.dir&&B.test(N)})}var P=this.files[this.root+O];return P&&!P.dir?P:null},folder:function(O){if(!O)return this;if(k(O))return this.filter(function(P,N){return N.dir&&O.test(P)});var F=this.root+O,C=x.call(this,F),B=this.clone();return B.root=C.name,B},remove:function(O){O=this.root+O;var F=this.files[O];if(F||(O.slice(-1)!=="/"&&(O+="/"),F=this.files[O]),F&&!F.dir)delete this.files[O];else for(var C=this.filter(function(P,N){return N.name.slice(0,O.length)===O}),B=0;B<C.length;B++)delete this.files[C[B].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(O){var F,C={};try{if((C=t.extend(O||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=C.type.toLowerCase(),C.compression=C.compression.toUpperCase(),C.type==="binarystring"&&(C.type="string"),!C.type)throw new Error("No output type specified.");t.checkSupport(C.type),C.platform!=="darwin"&&C.platform!=="freebsd"&&C.platform!=="linux"&&C.platform!=="sunos"||(C.platform="UNIX"),C.platform==="win32"&&(C.platform="DOS");var B=C.comment||this.comment||"";F=l.generateWorker(this,C,B)}catch(P){(F=new o("error")).error(P)}return new _(F,C.type||"string",C.mimeType)},generateAsync:function(O,F){return this.generateInternalStream(O).accumulate(F)},generateNodeStream:function(O,F){return(O=O||{}).type||(O.type="nodebuffer"),this.generateInternalStream(O).toNodejsStream(F)}};i.exports=j},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,i,a){i.exports=n("stream")},{stream:void 0}],17:[function(n,i,a){var e=n("./DataReader");function r(t){e.call(this,t);for(var o=0;o<this.data.length;o++)t[o]=255&t[o]}n("../utils").inherits(r,e),r.prototype.byteAt=function(t){return this.data[this.zero+t]},r.prototype.lastIndexOfSignature=function(t){for(var o=t.charCodeAt(0),_=t.charCodeAt(1),y=t.charCodeAt(2),u=t.charCodeAt(3),d=this.length-4;0<=d;--d)if(this.data[d]===o&&this.data[d+1]===_&&this.data[d+2]===y&&this.data[d+3]===u)return d-this.zero;return-1},r.prototype.readAndCheckSignature=function(t){var o=t.charCodeAt(0),_=t.charCodeAt(1),y=t.charCodeAt(2),u=t.charCodeAt(3),d=this.readData(4);return o===d[0]&&_===d[1]&&y===d[2]&&u===d[3]},r.prototype.readData=function(t){if(this.checkOffset(t),t===0)return[];var o=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,o},i.exports=r},{"../utils":32,"./DataReader":18}],18:[function(n,i,a){var e=n("../utils");function r(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var o,_=0;for(this.checkOffset(t),o=this.index+t-1;o>=this.index;o--)_=(_<<8)+this.byteAt(o);return this.index+=t,_},readString:function(t){return e.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},i.exports=r},{"../utils":32}],19:[function(n,i,a){var e=n("./Uint8ArrayReader");function r(t){e.call(this,t)}n("../utils").inherits(r,e),r.prototype.readData=function(t){this.checkOffset(t);var o=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,o},i.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,i,a){var e=n("./DataReader");function r(t){e.call(this,t)}n("../utils").inherits(r,e),r.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},r.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},r.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},r.prototype.readData=function(t){this.checkOffset(t);var o=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,o},i.exports=r},{"../utils":32,"./DataReader":18}],21:[function(n,i,a){var e=n("./ArrayReader");function r(t){e.call(this,t)}n("../utils").inherits(r,e),r.prototype.readData=function(t){if(this.checkOffset(t),t===0)return new Uint8Array(0);var o=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,o},i.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(n,i,a){var e=n("../utils"),r=n("../support"),t=n("./ArrayReader"),o=n("./StringReader"),_=n("./NodeBufferReader"),y=n("./Uint8ArrayReader");i.exports=function(u){var d=e.getTypeOf(u);return e.checkSupport(d),d!=="string"||r.uint8array?d==="nodebuffer"?new _(u):r.uint8array?new y(e.transformTo("uint8array",u)):new t(e.transformTo("array",u)):new o(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,i,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,i,a){var e=n("./GenericWorker"),r=n("../utils");function t(o){e.call(this,"ConvertWorker to "+o),this.destType=o}r.inherits(t,e),t.prototype.processChunk=function(o){this.push({data:r.transformTo(this.destType,o.data),meta:o.meta})},i.exports=t},{"../utils":32,"./GenericWorker":28}],25:[function(n,i,a){var e=n("./GenericWorker"),r=n("../crc32");function t(){e.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(t,e),t.prototype.processChunk=function(o){this.streamInfo.crc32=r(o.data,this.streamInfo.crc32||0),this.push(o)},i.exports=t},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,i,a){var e=n("../utils"),r=n("./GenericWorker");function t(o){r.call(this,"DataLengthProbe for "+o),this.propName=o,this.withStreamInfo(o,0)}e.inherits(t,r),t.prototype.processChunk=function(o){if(o){var _=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=_+o.data.length}r.prototype.processChunk.call(this,o)},i.exports=t},{"../utils":32,"./GenericWorker":28}],27:[function(n,i,a){var e=n("../utils"),r=n("./GenericWorker");function t(o){r.call(this,"DataWorker");var _=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,o.then(function(y){_.dataIsReady=!0,_.data=y,_.max=y&&y.length||0,_.type=e.getTypeOf(y),_.isPaused||_._tickAndRepeat()},function(y){_.error(y)})}e.inherits(t,r),t.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},t.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,e.delay(this._tickAndRepeat,[],this)),!0)},t.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(e.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},t.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var o=null,_=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":o=this.data.substring(this.index,_);break;case"uint8array":o=this.data.subarray(this.index,_);break;case"array":case"nodebuffer":o=this.data.slice(this.index,_)}return this.index=_,this.push({data:o,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=t},{"../utils":32,"./GenericWorker":28}],28:[function(n,i,a){function e(r){this.name=r||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}e.prototype={push:function(r){this.emit("data",r)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(r){this.emit("error",r)}return!0},error:function(r){return!this.isFinished&&(this.isPaused?this.generatedError=r:(this.isFinished=!0,this.emit("error",r),this.previous&&this.previous.error(r),this.cleanUp()),!0)},on:function(r,t){return this._listeners[r].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(r,t){if(this._listeners[r])for(var o=0;o<this._listeners[r].length;o++)this._listeners[r][o].call(this,t)},pipe:function(r){return r.registerPrevious(this)},registerPrevious:function(r){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=r.streamInfo,this.mergeStreamInfo(),this.previous=r;var t=this;return r.on("data",function(o){t.processChunk(o)}),r.on("end",function(){t.end()}),r.on("error",function(o){t.error(o)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var r=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),r=!0),this.previous&&this.previous.resume(),!r},flush:function(){},processChunk:function(r){this.push(r)},withStreamInfo:function(r,t){return this.extraStreamInfo[r]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var r in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,r)&&(this.streamInfo[r]=this.extraStreamInfo[r])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var r="Worker "+this.name;return this.previous?this.previous+" -> "+r:r}},i.exports=e},{}],29:[function(n,i,a){var e=n("../utils"),r=n("./ConvertWorker"),t=n("./GenericWorker"),o=n("../base64"),_=n("../support"),y=n("../external"),u=null;if(_.nodestream)try{u=n("../nodejs/NodejsStreamOutputAdapter")}catch(v){}function d(v,h){return new y.Promise(function(b,f){var x=[],k=v._internalType,j=v._outputType,O=v._mimeType;v.on("data",function(F,C){x.push(F),h&&h(C)}).on("error",function(F){x=[],f(F)}).on("end",function(){try{var F=function(C,B,P){switch(C){case"blob":return e.newBlob(e.transformTo("arraybuffer",B),P);case"base64":return o.encode(B);default:return e.transformTo(C,B)}}(j,function(C,B){var P,N=0,Y=null,A=0;for(P=0;P<B.length;P++)A+=B[P].length;switch(C){case"string":return B.join("");case"array":return Array.prototype.concat.apply([],B);case"uint8array":for(Y=new Uint8Array(A),P=0;P<B.length;P++)Y.set(B[P],N),N+=B[P].length;return Y;case"nodebuffer":return Buffer.concat(B);default:throw new Error("concat : unsupported type '"+C+"'")}}(k,x),O);b(F)}catch(C){f(C)}x=[]}).resume()})}function l(v,h,b){var f=h;switch(h){case"blob":case"arraybuffer":f="uint8array";break;case"base64":f="string"}try{this._internalType=f,this._outputType=h,this._mimeType=b,e.checkSupport(f),this._worker=v.pipe(new r(f)),v.lock()}catch(x){this._worker=new t("error"),this._worker.error(x)}}l.prototype={accumulate:function(v){return d(this,v)},on:function(v,h){var b=this;return v==="data"?this._worker.on(v,function(f){h.call(b,f.data,f.meta)}):this._worker.on(v,function(){e.delay(h,arguments,b)}),this},resume:function(){return e.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(e.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},v)}},i.exports=l},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,i,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var e=new ArrayBuffer(0);try{a.blob=new Blob([e],{type:"application/zip"}).size===0}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(e),a.blob=r.getBlob("application/zip").size===0}catch(o){a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch(t){a.nodestream=!1}},{"readable-stream":16}],31:[function(n,i,a){for(var e=n("./utils"),r=n("./support"),t=n("./nodejsUtils"),o=n("./stream/GenericWorker"),_=new Array(256),y=0;y<256;y++)_[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;_[254]=_[254]=1;function u(){o.call(this,"utf-8 decode"),this.leftOver=null}function d(){o.call(this,"utf-8 encode")}a.utf8encode=function(l){return r.nodebuffer?t.newBufferFrom(l,"utf-8"):function(v){var h,b,f,x,k,j=v.length,O=0;for(x=0;x<j;x++)(64512&(b=v.charCodeAt(x)))==55296&&x+1<j&&(64512&(f=v.charCodeAt(x+1)))==56320&&(b=65536+(b-55296<<10)+(f-56320),x++),O+=b<128?1:b<2048?2:b<65536?3:4;for(h=r.uint8array?new Uint8Array(O):new Array(O),x=k=0;k<O;x++)(64512&(b=v.charCodeAt(x)))==55296&&x+1<j&&(64512&(f=v.charCodeAt(x+1)))==56320&&(b=65536+(b-55296<<10)+(f-56320),x++),b<128?h[k++]=b:(b<2048?h[k++]=192|b>>>6:(b<65536?h[k++]=224|b>>>12:(h[k++]=240|b>>>18,h[k++]=128|b>>>12&63),h[k++]=128|b>>>6&63),h[k++]=128|63&b);return h}(l)},a.utf8decode=function(l){return r.nodebuffer?e.transformTo("nodebuffer",l).toString("utf-8"):function(v){var h,b,f,x,k=v.length,j=new Array(2*k);for(h=b=0;h<k;)if((f=v[h++])<128)j[b++]=f;else if(4<(x=_[f]))j[b++]=65533,h+=x-1;else{for(f&=x===2?31:x===3?15:7;1<x&&h<k;)f=f<<6|63&v[h++],x--;1<x?j[b++]=65533:f<65536?j[b++]=f:(f-=65536,j[b++]=55296|f>>10&1023,j[b++]=56320|1023&f)}return j.length!==b&&(j.subarray?j=j.subarray(0,b):j.length=b),e.applyFromCharCode(j)}(l=e.transformTo(r.uint8array?"uint8array":"array",l))},e.inherits(u,o),u.prototype.processChunk=function(l){var v=e.transformTo(r.uint8array?"uint8array":"array",l.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var h=v;(v=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),v.set(h,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var b=function(x,k){var j;for((k=k||x.length)>x.length&&(k=x.length),j=k-1;0<=j&&(192&x[j])==128;)j--;return j<0||j===0?k:j+_[x[j]]>k?j:k}(v),f=v;b!==v.length&&(r.uint8array?(f=v.subarray(0,b),this.leftOver=v.subarray(b,v.length)):(f=v.slice(0,b),this.leftOver=v.slice(b,v.length))),this.push({data:a.utf8decode(f),meta:l.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=u,e.inherits(d,o),d.prototype.processChunk=function(l){this.push({data:a.utf8encode(l.data),meta:l.meta})},a.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,i,a){var e=n("./support"),r=n("./base64"),t=n("./nodejsUtils"),o=n("./external");function _(h){return h}function y(h,b){for(var f=0;f<h.length;++f)b[f]=255&h.charCodeAt(f);return b}n("setimmediate"),a.newBlob=function(h,b){a.checkSupport("blob");try{return new Blob([h],{type:b})}catch(x){try{var f=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return f.append(h),f.getBlob(b)}catch(k){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(h,b,f){var x=[],k=0,j=h.length;if(j<=f)return String.fromCharCode.apply(null,h);for(;k<j;)b==="array"||b==="nodebuffer"?x.push(String.fromCharCode.apply(null,h.slice(k,Math.min(k+f,j)))):x.push(String.fromCharCode.apply(null,h.subarray(k,Math.min(k+f,j)))),k+=f;return x.join("")},stringifyByChar:function(h){for(var b="",f=0;f<h.length;f++)b+=String.fromCharCode(h[f]);return b},applyCanBeUsed:{uint8array:function(){try{return e.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(h){return!1}}(),nodebuffer:function(){try{return e.nodebuffer&&String.fromCharCode.apply(null,t.allocBuffer(1)).length===1}catch(h){return!1}}()}};function d(h){var b=65536,f=a.getTypeOf(h),x=!0;if(f==="uint8array"?x=u.applyCanBeUsed.uint8array:f==="nodebuffer"&&(x=u.applyCanBeUsed.nodebuffer),x)for(;1<b;)try{return u.stringifyByChunk(h,f,b)}catch(k){b=Math.floor(b/2)}return u.stringifyByChar(h)}function l(h,b){for(var f=0;f<h.length;f++)b[f]=h[f];return b}a.applyFromCharCode=d;var v={};v.string={string:_,array:function(h){return y(h,new Array(h.length))},arraybuffer:function(h){return v.string.uint8array(h).buffer},uint8array:function(h){return y(h,new Uint8Array(h.length))},nodebuffer:function(h){return y(h,t.allocBuffer(h.length))}},v.array={string:d,array:_,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return t.newBufferFrom(h)}},v.arraybuffer={string:function(h){return d(new Uint8Array(h))},array:function(h){return l(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:_,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return t.newBufferFrom(new Uint8Array(h))}},v.uint8array={string:d,array:function(h){return l(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:_,nodebuffer:function(h){return t.newBufferFrom(h)}},v.nodebuffer={string:d,array:function(h){return l(h,new Array(h.length))},arraybuffer:function(h){return v.nodebuffer.uint8array(h).buffer},uint8array:function(h){return l(h,new Uint8Array(h.length))},nodebuffer:_},a.transformTo=function(h,b){if(b=b||"",!h)return b;a.checkSupport(h);var f=a.getTypeOf(b);return v[f][h](b)},a.resolve=function(h){for(var b=h.split("/"),f=[],x=0;x<b.length;x++){var k=b[x];k==="."||k===""&&x!==0&&x!==b.length-1||(k===".."?f.pop():f.push(k))}return f.join("/")},a.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":e.nodebuffer&&t.isBuffer(h)?"nodebuffer":e.uint8array&&h instanceof Uint8Array?"uint8array":e.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(h){if(!e[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(h){var b,f,x="";for(f=0;f<(h||"").length;f++)x+="\\x"+((b=h.charCodeAt(f))<16?"0":"")+b.toString(16).toUpperCase();return x},a.delay=function(h,b,f){setImmediate(function(){h.apply(f||null,b||[])})},a.inherits=function(h,b){function f(){}f.prototype=b.prototype,h.prototype=new f},a.extend=function(){var h,b,f={};for(h=0;h<arguments.length;h++)for(b in arguments[h])Object.prototype.hasOwnProperty.call(arguments[h],b)&&f[b]===void 0&&(f[b]=arguments[h][b]);return f},a.prepareContent=function(h,b,f,x,k){return o.Promise.resolve(b).then(function(j){return e.blob&&(j instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(j))!==-1)&&typeof FileReader<"u"?new o.Promise(function(O,F){var C=new FileReader;C.onload=function(B){O(B.target.result)},C.onerror=function(B){F(B.target.error)},C.readAsArrayBuffer(j)}):j}).then(function(j){var O=a.getTypeOf(j);return O?(O==="arraybuffer"?j=a.transformTo("uint8array",j):O==="string"&&(k?j=r.decode(j):f&&x!==!0&&(j=function(F){return y(F,e.uint8array?new Uint8Array(F.length):new Array(F.length))}(j))),j):o.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,i,a){var e=n("./reader/readerFor"),r=n("./utils"),t=n("./signature"),o=n("./zipEntry"),_=n("./support");function y(u){this.files=[],this.loadOptions=u}y.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var d=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(d)+", expected "+r.pretty(u)+")")}},isSignature:function(u,d){var l=this.reader.index;this.reader.setIndex(u);var v=this.reader.readString(4)===d;return this.reader.setIndex(l),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),d=_.uint8array?"uint8array":"array",l=r.transformTo(d,u);this.zipComment=this.loadOptions.decodeFileName(l)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,d,l,v=this.zip64EndOfCentralSize-44;0<v;)u=this.reader.readInt(2),d=this.reader.readInt(4),l=this.reader.readData(d),this.zip64ExtensibleData[u]={id:u,length:d,value:l}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,d;for(u=0;u<this.files.length;u++)d=this.files[u],this.reader.setIndex(d.localHeaderOffset),this.checkSignature(t.LOCAL_FILE_HEADER),d.readLocalPart(this.reader),d.handleUTF8(),d.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(t.CENTRAL_FILE_HEADER);)(u=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(t.CENTRAL_DIRECTORY_END);if(u<0)throw this.isSignature(0,t.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var d=u;if(this.checkSignature(t.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(t.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(t.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,t.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(t.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(t.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var l=this.centralDirOffset+this.centralDirSize;this.zip64&&(l+=20,l+=12+this.zip64EndOfCentralSize);var v=d-l;if(0<v)this.isSignature(d,t.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(u){this.reader=e(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,i,a){var e=n("./reader/readerFor"),r=n("./utils"),t=n("./compressedObject"),o=n("./crc32"),_=n("./utf8"),y=n("./compressions"),u=n("./support");function d(l,v){this.options=l,this.loadOptions=v}d.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(l){var v,h;if(l.skip(22),this.fileNameLength=l.readInt(2),h=l.readInt(2),this.fileName=l.readData(this.fileNameLength),l.skip(h),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(b){for(var f in y)if(Object.prototype.hasOwnProperty.call(y,f)&&y[f].magic===b)return y[f];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new t(this.compressedSize,this.uncompressedSize,this.crc32,v,l.readData(this.compressedSize))},readCentralPart:function(l){this.versionMadeBy=l.readInt(2),l.skip(2),this.bitFlag=l.readInt(2),this.compressionMethod=l.readString(2),this.date=l.readDate(),this.crc32=l.readInt(4),this.compressedSize=l.readInt(4),this.uncompressedSize=l.readInt(4);var v=l.readInt(2);if(this.extraFieldsLength=l.readInt(2),this.fileCommentLength=l.readInt(2),this.diskNumberStart=l.readInt(2),this.internalFileAttributes=l.readInt(2),this.externalFileAttributes=l.readInt(4),this.localHeaderOffset=l.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");l.skip(v),this.readExtraFields(l),this.parseZIP64ExtraField(l),this.fileComment=l.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var l=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),l==0&&(this.dosPermissions=63&this.externalFileAttributes),l==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var l=e(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=l.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=l.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=l.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=l.readInt(4))}},readExtraFields:function(l){var v,h,b,f=l.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});l.index+4<f;)v=l.readInt(2),h=l.readInt(2),b=l.readData(h),this.extraFields[v]={id:v,length:h,value:b};l.setIndex(f)},handleUTF8:function(){var l=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=_.utf8decode(this.fileName),this.fileCommentStr=_.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var h=r.transformTo(l,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(h)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var f=r.transformTo(l,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(f)}}},findExtraFieldUnicodePath:function(){var l=this.extraFields[28789];if(l){var v=e(l.value);return v.readInt(1)!==1||o(this.fileName)!==v.readInt(4)?null:_.utf8decode(v.readData(l.length-5))}return null},findExtraFieldUnicodeComment:function(){var l=this.extraFields[25461];if(l){var v=e(l.value);return v.readInt(1)!==1||o(this.fileComment)!==v.readInt(4)?null:_.utf8decode(v.readData(l.length-5))}return null}},i.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,i,a){function e(v,h,b){this.name=v,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=h,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var r=n("./stream/StreamHelper"),t=n("./stream/DataWorker"),o=n("./utf8"),_=n("./compressedObject"),y=n("./stream/GenericWorker");e.prototype={internalStream:function(v){var h=null,b="string";try{if(!v)throw new Error("No output type specified.");var f=(b=v.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),h=this._decompressWorker();var x=!this._dataBinary;x&&!f&&(h=h.pipe(new o.Utf8EncodeWorker)),!x&&f&&(h=h.pipe(new o.Utf8DecodeWorker))}catch(k){(h=new y("error")).error(k)}return new r(h,b,"")},async:function(v,h){return this.internalStream(v).accumulate(h)},nodeStream:function(v,h){return this.internalStream(v||"nodebuffer").toNodejsStream(h)},_compressWorker:function(v,h){if(this._data instanceof _&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new o.Utf8EncodeWorker)),_.createWorkerFrom(b,v,h)},_decompressWorker:function(){return this._data instanceof _?this._data.getContentWorker():this._data instanceof y?this._data:new t(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},l=0;l<u.length;l++)e.prototype[u[l]]=d;i.exports=e},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,i,a){(function(e){var r,t,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var _=0,y=new o(v),u=e.document.createTextNode("");y.observe(u,{characterData:!0}),r=function(){u.data=_=++_%2}}else if(e.setImmediate||e.MessageChannel===void 0)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var h=e.document.createElement("script");h.onreadystatechange=function(){v(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},e.document.documentElement.appendChild(h)}:function(){setTimeout(v,0)};else{var d=new e.MessageChannel;d.port1.onmessage=v,r=function(){d.port2.postMessage(0)}}var l=[];function v(){var h,b;t=!0;for(var f=l.length;f;){for(b=l,l=[],h=-1;++h<f;)b[h]();f=l.length}t=!1}i.exports=function(h){l.push(h)!==1||t||r()}}).call(this,typeof ct<"u"?ct:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,i,a){var e=n("immediate");function r(){}var t={},o=["REJECTED"],_=["FULFILLED"],y=["PENDING"];function u(f){if(typeof f!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,f!==r&&h(this,f)}function d(f,x,k){this.promise=f,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function l(f,x,k){e(function(){var j;try{j=x(k)}catch(O){return t.reject(f,O)}j===f?t.reject(f,new TypeError("Cannot resolve promise with itself")):t.resolve(f,j)})}function v(f){var x=f&&f.then;if(f&&(typeof f=="object"||typeof f=="function")&&typeof x=="function")return function(){x.apply(f,arguments)}}function h(f,x){var k=!1;function j(C){k||(k=!0,t.reject(f,C))}function O(C){k||(k=!0,t.resolve(f,C))}var F=b(function(){x(O,j)});F.status==="error"&&j(F.value)}function b(f,x){var k={};try{k.value=f(x),k.status="success"}catch(j){k.status="error",k.value=j}return k}(i.exports=u).prototype.finally=function(f){if(typeof f!="function")return this;var x=this.constructor;return this.then(function(k){return x.resolve(f()).then(function(){return k})},function(k){return x.resolve(f()).then(function(){throw k})})},u.prototype.catch=function(f){return this.then(null,f)},u.prototype.then=function(f,x){if(typeof f!="function"&&this.state===_||typeof x!="function"&&this.state===o)return this;var k=new this.constructor(r);return this.state!==y?l(k,this.state===_?f:x,this.outcome):this.queue.push(new d(k,f,x)),k},d.prototype.callFulfilled=function(f){t.resolve(this.promise,f)},d.prototype.otherCallFulfilled=function(f){l(this.promise,this.onFulfilled,f)},d.prototype.callRejected=function(f){t.reject(this.promise,f)},d.prototype.otherCallRejected=function(f){l(this.promise,this.onRejected,f)},t.resolve=function(f,x){var k=b(v,x);if(k.status==="error")return t.reject(f,k.value);var j=k.value;if(j)h(f,j);else{f.state=_,f.outcome=x;for(var O=-1,F=f.queue.length;++O<F;)f.queue[O].callFulfilled(x)}return f},t.reject=function(f,x){f.state=o,f.outcome=x;for(var k=-1,j=f.queue.length;++k<j;)f.queue[k].callRejected(x);return f},u.resolve=function(f){return f instanceof this?f:t.resolve(new this(r),f)},u.reject=function(f){var x=new this(r);return t.reject(x,f)},u.all=function(f){var x=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=f.length,j=!1;if(!k)return this.resolve([]);for(var O=new Array(k),F=0,C=-1,B=new this(r);++C<k;)P(f[C],C);return B;function P(N,Y){x.resolve(N).then(function(A){O[Y]=A,++F!==k||j||(j=!0,t.resolve(B,O))},function(A){j||(j=!0,t.reject(B,A))})}},u.race=function(f){var x=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=f.length,j=!1;if(!k)return this.resolve([]);for(var O=-1,F=new this(r);++O<k;)C=f[O],x.resolve(C).then(function(B){j||(j=!0,t.resolve(F,B))},function(B){j||(j=!0,t.reject(F,B))});var C;return F}},{immediate:36}],38:[function(n,i,a){var e={};(0,n("./lib/utils/common").assign)(e,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),i.exports=e},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,i,a){var e=n("./zlib/deflate"),r=n("./utils/common"),t=n("./utils/strings"),o=n("./zlib/messages"),_=n("./zlib/zstream"),y=Object.prototype.toString,u=0,d=-1,l=0,v=8;function h(f){if(!(this instanceof h))return new h(f);this.options=r.assign({level:d,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:l,to:""},f||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var k=e.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(k!==u)throw new Error(o[k]);if(x.header&&e.deflateSetHeader(this.strm,x.header),x.dictionary){var j;if(j=typeof x.dictionary=="string"?t.string2buf(x.dictionary):y.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(k=e.deflateSetDictionary(this.strm,j))!==u)throw new Error(o[k]);this._dict_set=!0}}function b(f,x){var k=new h(x);if(k.push(f,!0),k.err)throw k.msg||o[k.err];return k.result}h.prototype.push=function(f,x){var k,j,O=this.strm,F=this.options.chunkSize;if(this.ended)return!1;j=x===~~x?x:x===!0?4:0,typeof f=="string"?O.input=t.string2buf(f):y.call(f)==="[object ArrayBuffer]"?O.input=new Uint8Array(f):O.input=f,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new r.Buf8(F),O.next_out=0,O.avail_out=F),(k=e.deflate(O,j))!==1&&k!==u)return this.onEnd(k),!(this.ended=!0);O.avail_out!==0&&(O.avail_in!==0||j!==4&&j!==2)||(this.options.to==="string"?this.onData(t.buf2binstring(r.shrinkBuf(O.output,O.next_out))):this.onData(r.shrinkBuf(O.output,O.next_out)))}while((0<O.avail_in||O.avail_out===0)&&k!==1);return j===4?(k=e.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===u):j!==2||(this.onEnd(u),!(O.avail_out=0))},h.prototype.onData=function(f){this.chunks.push(f)},h.prototype.onEnd=function(f){f===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},a.Deflate=h,a.deflate=b,a.deflateRaw=function(f,x){return(x=x||{}).raw=!0,b(f,x)},a.gzip=function(f,x){return(x=x||{}).gzip=!0,b(f,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,i,a){var e=n("./zlib/inflate"),r=n("./utils/common"),t=n("./utils/strings"),o=n("./zlib/constants"),_=n("./zlib/messages"),y=n("./zlib/zstream"),u=n("./zlib/gzheader"),d=Object.prototype.toString;function l(h){if(!(this instanceof l))return new l(h);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},h||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||h&&h.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var f=e.inflateInit2(this.strm,b.windowBits);if(f!==o.Z_OK)throw new Error(_[f]);this.header=new u,e.inflateGetHeader(this.strm,this.header)}function v(h,b){var f=new l(b);if(f.push(h,!0),f.err)throw f.msg||_[f.err];return f.result}l.prototype.push=function(h,b){var f,x,k,j,O,F,C=this.strm,B=this.options.chunkSize,P=this.options.dictionary,N=!1;if(this.ended)return!1;x=b===~~b?b:b===!0?o.Z_FINISH:o.Z_NO_FLUSH,typeof h=="string"?C.input=t.binstring2buf(h):d.call(h)==="[object ArrayBuffer]"?C.input=new Uint8Array(h):C.input=h,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new r.Buf8(B),C.next_out=0,C.avail_out=B),(f=e.inflate(C,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&P&&(F=typeof P=="string"?t.string2buf(P):d.call(P)==="[object ArrayBuffer]"?new Uint8Array(P):P,f=e.inflateSetDictionary(this.strm,F)),f===o.Z_BUF_ERROR&&N===!0&&(f=o.Z_OK,N=!1),f!==o.Z_STREAM_END&&f!==o.Z_OK)return this.onEnd(f),!(this.ended=!0);C.next_out&&(C.avail_out!==0&&f!==o.Z_STREAM_END&&(C.avail_in!==0||x!==o.Z_FINISH&&x!==o.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=t.utf8border(C.output,C.next_out),j=C.next_out-k,O=t.buf2string(C.output,k),C.next_out=j,C.avail_out=B-j,j&&r.arraySet(C.output,C.output,k,j,0),this.onData(O)):this.onData(r.shrinkBuf(C.output,C.next_out)))),C.avail_in===0&&C.avail_out===0&&(N=!0)}while((0<C.avail_in||C.avail_out===0)&&f!==o.Z_STREAM_END);return f===o.Z_STREAM_END&&(x=o.Z_FINISH),x===o.Z_FINISH?(f=e.inflateEnd(this.strm),this.onEnd(f),this.ended=!0,f===o.Z_OK):x!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(C.avail_out=0))},l.prototype.onData=function(h){this.chunks.push(h)},l.prototype.onEnd=function(h){h===o.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},a.Inflate=l,a.inflate=v,a.inflateRaw=function(h,b){return(b=b||{}).raw=!0,v(h,b)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,i,a){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(o){for(var _=Array.prototype.slice.call(arguments,1);_.length;){var y=_.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var u in y)y.hasOwnProperty(u)&&(o[u]=y[u])}}return o},a.shrinkBuf=function(o,_){return o.length===_?o:o.subarray?o.subarray(0,_):(o.length=_,o)};var r={arraySet:function(o,_,y,u,d){if(_.subarray&&o.subarray)o.set(_.subarray(y,y+u),d);else for(var l=0;l<u;l++)o[d+l]=_[y+l]},flattenChunks:function(o){var _,y,u,d,l,v;for(_=u=0,y=o.length;_<y;_++)u+=o[_].length;for(v=new Uint8Array(u),_=d=0,y=o.length;_<y;_++)l=o[_],v.set(l,d),d+=l.length;return v}},t={arraySet:function(o,_,y,u,d){for(var l=0;l<u;l++)o[d+l]=_[y+l]},flattenChunks:function(o){return[].concat.apply([],o)}};a.setTyped=function(o){o?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,r)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,t))},a.setTyped(e)},{}],42:[function(n,i,a){var e=n("./common"),r=!0,t=!0;try{String.fromCharCode.apply(null,[0])}catch(u){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(u){t=!1}for(var o=new e.Buf8(256),_=0;_<256;_++)o[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;function y(u,d){if(d<65537&&(u.subarray&&t||!u.subarray&&r))return String.fromCharCode.apply(null,e.shrinkBuf(u,d));for(var l="",v=0;v<d;v++)l+=String.fromCharCode(u[v]);return l}o[254]=o[254]=1,a.string2buf=function(u){var d,l,v,h,b,f=u.length,x=0;for(h=0;h<f;h++)(64512&(l=u.charCodeAt(h)))==55296&&h+1<f&&(64512&(v=u.charCodeAt(h+1)))==56320&&(l=65536+(l-55296<<10)+(v-56320),h++),x+=l<128?1:l<2048?2:l<65536?3:4;for(d=new e.Buf8(x),h=b=0;b<x;h++)(64512&(l=u.charCodeAt(h)))==55296&&h+1<f&&(64512&(v=u.charCodeAt(h+1)))==56320&&(l=65536+(l-55296<<10)+(v-56320),h++),l<128?d[b++]=l:(l<2048?d[b++]=192|l>>>6:(l<65536?d[b++]=224|l>>>12:(d[b++]=240|l>>>18,d[b++]=128|l>>>12&63),d[b++]=128|l>>>6&63),d[b++]=128|63&l);return d},a.buf2binstring=function(u){return y(u,u.length)},a.binstring2buf=function(u){for(var d=new e.Buf8(u.length),l=0,v=d.length;l<v;l++)d[l]=u.charCodeAt(l);return d},a.buf2string=function(u,d){var l,v,h,b,f=d||u.length,x=new Array(2*f);for(l=v=0;l<f;)if((h=u[l++])<128)x[v++]=h;else if(4<(b=o[h]))x[v++]=65533,l+=b-1;else{for(h&=b===2?31:b===3?15:7;1<b&&l<f;)h=h<<6|63&u[l++],b--;1<b?x[v++]=65533:h<65536?x[v++]=h:(h-=65536,x[v++]=55296|h>>10&1023,x[v++]=56320|1023&h)}return y(x,v)},a.utf8border=function(u,d){var l;for((d=d||u.length)>u.length&&(d=u.length),l=d-1;0<=l&&(192&u[l])==128;)l--;return l<0||l===0?d:l+o[u[l]]>d?l:d}},{"./common":41}],43:[function(n,i,a){i.exports=function(e,r,t,o){for(var _=65535&e|0,y=e>>>16&65535|0,u=0;t!==0;){for(t-=u=2e3<t?2e3:t;y=y+(_=_+r[o++]|0)|0,--u;);_%=65521,y%=65521}return _|y<<16|0}},{}],44:[function(n,i,a){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,i,a){var e=function(){for(var r,t=[],o=0;o<256;o++){r=o;for(var _=0;_<8;_++)r=1&r?3988292384^r>>>1:r>>>1;t[o]=r}return t}();i.exports=function(r,t,o,_){var y=e,u=_+o;r^=-1;for(var d=_;d<u;d++)r=r>>>8^y[255&(r^t[d])];return-1^r}},{}],46:[function(n,i,a){var e,r=n("../utils/common"),t=n("./trees"),o=n("./adler32"),_=n("./crc32"),y=n("./messages"),u=0,d=4,l=0,v=-2,h=-1,b=4,f=2,x=8,k=9,j=286,O=30,F=19,C=2*j+1,B=15,P=3,N=258,Y=N+P+1,A=42,z=113,c=1,V=2,re=3,U=4;function ae(s,M){return s.msg=y[M],M}function Z(s){return(s<<1)-(4<s?9:0)}function se(s){for(var M=s.length;0<=--M;)s[M]=0}function L(s){var M=s.state,D=M.pending;D>s.avail_out&&(D=s.avail_out),D!==0&&(r.arraySet(s.output,M.pending_buf,M.pending_out,D,s.next_out),s.next_out+=D,M.pending_out+=D,s.total_out+=D,s.avail_out-=D,M.pending-=D,M.pending===0&&(M.pending_out=0))}function I(s,M){t._tr_flush_block(s,0<=s.block_start?s.block_start:-1,s.strstart-s.block_start,M),s.block_start=s.strstart,L(s.strm)}function ne(s,M){s.pending_buf[s.pending++]=M}function J(s,M){s.pending_buf[s.pending++]=M>>>8&255,s.pending_buf[s.pending++]=255&M}function q(s,M){var D,S,w=s.max_chain_length,R=s.strstart,H=s.prev_length,W=s.nice_match,T=s.strstart>s.w_size-Y?s.strstart-(s.w_size-Y):0,G=s.window,X=s.w_mask,$=s.prev,te=s.strstart+N,ue=G[R+H-1],oe=G[R+H];s.prev_length>=s.good_match&&(w>>=2),W>s.lookahead&&(W=s.lookahead);do if(G[(D=M)+H]===oe&&G[D+H-1]===ue&&G[D]===G[R]&&G[++D]===G[R+1]){R+=2,D++;do;while(G[++R]===G[++D]&&G[++R]===G[++D]&&G[++R]===G[++D]&&G[++R]===G[++D]&&G[++R]===G[++D]&&G[++R]===G[++D]&&G[++R]===G[++D]&&G[++R]===G[++D]&&R<te);if(S=N-(te-R),R=te-N,H<S){if(s.match_start=M,W<=(H=S))break;ue=G[R+H-1],oe=G[R+H]}}while((M=$[M&X])>T&&--w!=0);return H<=s.lookahead?H:s.lookahead}function me(s){var M,D,S,w,R,H,W,T,G,X,$=s.w_size;do{if(w=s.window_size-s.lookahead-s.strstart,s.strstart>=$+($-Y)){for(r.arraySet(s.window,s.window,$,$,0),s.match_start-=$,s.strstart-=$,s.block_start-=$,M=D=s.hash_size;S=s.head[--M],s.head[M]=$<=S?S-$:0,--D;);for(M=D=$;S=s.prev[--M],s.prev[M]=$<=S?S-$:0,--D;);w+=$}if(s.strm.avail_in===0)break;if(H=s.strm,W=s.window,T=s.strstart+s.lookahead,G=w,X=void 0,X=H.avail_in,G<X&&(X=G),D=X===0?0:(H.avail_in-=X,r.arraySet(W,H.input,H.next_in,X,T),H.state.wrap===1?H.adler=o(H.adler,W,X,T):H.state.wrap===2&&(H.adler=_(H.adler,W,X,T)),H.next_in+=X,H.total_in+=X,X),s.lookahead+=D,s.lookahead+s.insert>=P)for(R=s.strstart-s.insert,s.ins_h=s.window[R],s.ins_h=(s.ins_h<<s.hash_shift^s.window[R+1])&s.hash_mask;s.insert&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[R+P-1])&s.hash_mask,s.prev[R&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=R,R++,s.insert--,!(s.lookahead+s.insert<P)););}while(s.lookahead<Y&&s.strm.avail_in!==0)}function be(s,M){for(var D,S;;){if(s.lookahead<Y){if(me(s),s.lookahead<Y&&M===u)return c;if(s.lookahead===0)break}if(D=0,s.lookahead>=P&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+P-1])&s.hash_mask,D=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),D!==0&&s.strstart-D<=s.w_size-Y&&(s.match_length=q(s,D)),s.match_length>=P)if(S=t._tr_tally(s,s.strstart-s.match_start,s.match_length-P),s.lookahead-=s.match_length,s.match_length<=s.max_lazy_match&&s.lookahead>=P){for(s.match_length--;s.strstart++,s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+P-1])&s.hash_mask,D=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart,--s.match_length!=0;);s.strstart++}else s.strstart+=s.match_length,s.match_length=0,s.ins_h=s.window[s.strstart],s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+1])&s.hash_mask;else S=t._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++;if(S&&(I(s,!1),s.strm.avail_out===0))return c}return s.insert=s.strstart<P-1?s.strstart:P-1,M===d?(I(s,!0),s.strm.avail_out===0?re:U):s.last_lit&&(I(s,!1),s.strm.avail_out===0)?c:V}function ie(s,M){for(var D,S,w;;){if(s.lookahead<Y){if(me(s),s.lookahead<Y&&M===u)return c;if(s.lookahead===0)break}if(D=0,s.lookahead>=P&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+P-1])&s.hash_mask,D=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),s.prev_length=s.match_length,s.prev_match=s.match_start,s.match_length=P-1,D!==0&&s.prev_length<s.max_lazy_match&&s.strstart-D<=s.w_size-Y&&(s.match_length=q(s,D),s.match_length<=5&&(s.strategy===1||s.match_length===P&&4096<s.strstart-s.match_start)&&(s.match_length=P-1)),s.prev_length>=P&&s.match_length<=s.prev_length){for(w=s.strstart+s.lookahead-P,S=t._tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-P),s.lookahead-=s.prev_length-1,s.prev_length-=2;++s.strstart<=w&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+P-1])&s.hash_mask,D=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),--s.prev_length!=0;);if(s.match_available=0,s.match_length=P-1,s.strstart++,S&&(I(s,!1),s.strm.avail_out===0))return c}else if(s.match_available){if((S=t._tr_tally(s,0,s.window[s.strstart-1]))&&I(s,!1),s.strstart++,s.lookahead--,s.strm.avail_out===0)return c}else s.match_available=1,s.strstart++,s.lookahead--}return s.match_available&&(S=t._tr_tally(s,0,s.window[s.strstart-1]),s.match_available=0),s.insert=s.strstart<P-1?s.strstart:P-1,M===d?(I(s,!0),s.strm.avail_out===0?re:U):s.last_lit&&(I(s,!1),s.strm.avail_out===0)?c:V}function ce(s,M,D,S,w){this.good_length=s,this.max_lazy=M,this.nice_length=D,this.max_chain=S,this.func=w}function ve(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*C),this.dyn_dtree=new r.Buf16(2*(2*O+1)),this.bl_tree=new r.Buf16(2*(2*F+1)),se(this.dyn_ltree),se(this.dyn_dtree),se(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(B+1),this.heap=new r.Buf16(2*j+1),se(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*j+1),se(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function pe(s){var M;return s&&s.state?(s.total_in=s.total_out=0,s.data_type=f,(M=s.state).pending=0,M.pending_out=0,M.wrap<0&&(M.wrap=-M.wrap),M.status=M.wrap?A:z,s.adler=M.wrap===2?0:1,M.last_flush=u,t._tr_init(M),l):ae(s,v)}function ke(s){var M=pe(s);return M===l&&function(D){D.window_size=2*D.w_size,se(D.head),D.max_lazy_match=e[D.level].max_lazy,D.good_match=e[D.level].good_length,D.nice_match=e[D.level].nice_length,D.max_chain_length=e[D.level].max_chain,D.strstart=0,D.block_start=0,D.lookahead=0,D.insert=0,D.match_length=D.prev_length=P-1,D.match_available=0,D.ins_h=0}(s.state),M}function Ae(s,M,D,S,w,R){if(!s)return v;var H=1;if(M===h&&(M=6),S<0?(H=0,S=-S):15<S&&(H=2,S-=16),w<1||k<w||D!==x||S<8||15<S||M<0||9<M||R<0||b<R)return ae(s,v);S===8&&(S=9);var W=new ve;return(s.state=W).strm=s,W.wrap=H,W.gzhead=null,W.w_bits=S,W.w_size=1<<W.w_bits,W.w_mask=W.w_size-1,W.hash_bits=w+7,W.hash_size=1<<W.hash_bits,W.hash_mask=W.hash_size-1,W.hash_shift=~~((W.hash_bits+P-1)/P),W.window=new r.Buf8(2*W.w_size),W.head=new r.Buf16(W.hash_size),W.prev=new r.Buf16(W.w_size),W.lit_bufsize=1<<w+6,W.pending_buf_size=4*W.lit_bufsize,W.pending_buf=new r.Buf8(W.pending_buf_size),W.d_buf=1*W.lit_bufsize,W.l_buf=3*W.lit_bufsize,W.level=M,W.strategy=R,W.method=D,ke(s)}e=[new ce(0,0,0,0,function(s,M){var D=65535;for(D>s.pending_buf_size-5&&(D=s.pending_buf_size-5);;){if(s.lookahead<=1){if(me(s),s.lookahead===0&&M===u)return c;if(s.lookahead===0)break}s.strstart+=s.lookahead,s.lookahead=0;var S=s.block_start+D;if((s.strstart===0||s.strstart>=S)&&(s.lookahead=s.strstart-S,s.strstart=S,I(s,!1),s.strm.avail_out===0)||s.strstart-s.block_start>=s.w_size-Y&&(I(s,!1),s.strm.avail_out===0))return c}return s.insert=0,M===d?(I(s,!0),s.strm.avail_out===0?re:U):(s.strstart>s.block_start&&(I(s,!1),s.strm.avail_out),c)}),new ce(4,4,8,4,be),new ce(4,5,16,8,be),new ce(4,6,32,32,be),new ce(4,4,16,16,ie),new ce(8,16,32,32,ie),new ce(8,16,128,128,ie),new ce(8,32,128,256,ie),new ce(32,128,258,1024,ie),new ce(32,258,258,4096,ie)],a.deflateInit=function(s,M){return Ae(s,M,x,15,8,0)},a.deflateInit2=Ae,a.deflateReset=ke,a.deflateResetKeep=pe,a.deflateSetHeader=function(s,M){return s&&s.state?s.state.wrap!==2?v:(s.state.gzhead=M,l):v},a.deflate=function(s,M){var D,S,w,R;if(!s||!s.state||5<M||M<0)return s?ae(s,v):v;if(S=s.state,!s.output||!s.input&&s.avail_in!==0||S.status===666&&M!==d)return ae(s,s.avail_out===0?-5:v);if(S.strm=s,D=S.last_flush,S.last_flush=M,S.status===A)if(S.wrap===2)s.adler=0,ne(S,31),ne(S,139),ne(S,8),S.gzhead?(ne(S,(S.gzhead.text?1:0)+(S.gzhead.hcrc?2:0)+(S.gzhead.extra?4:0)+(S.gzhead.name?8:0)+(S.gzhead.comment?16:0)),ne(S,255&S.gzhead.time),ne(S,S.gzhead.time>>8&255),ne(S,S.gzhead.time>>16&255),ne(S,S.gzhead.time>>24&255),ne(S,S.level===9?2:2<=S.strategy||S.level<2?4:0),ne(S,255&S.gzhead.os),S.gzhead.extra&&S.gzhead.extra.length&&(ne(S,255&S.gzhead.extra.length),ne(S,S.gzhead.extra.length>>8&255)),S.gzhead.hcrc&&(s.adler=_(s.adler,S.pending_buf,S.pending,0)),S.gzindex=0,S.status=69):(ne(S,0),ne(S,0),ne(S,0),ne(S,0),ne(S,0),ne(S,S.level===9?2:2<=S.strategy||S.level<2?4:0),ne(S,3),S.status=z);else{var H=x+(S.w_bits-8<<4)<<8;H|=(2<=S.strategy||S.level<2?0:S.level<6?1:S.level===6?2:3)<<6,S.strstart!==0&&(H|=32),H+=31-H%31,S.status=z,J(S,H),S.strstart!==0&&(J(S,s.adler>>>16),J(S,65535&s.adler)),s.adler=1}if(S.status===69)if(S.gzhead.extra){for(w=S.pending;S.gzindex<(65535&S.gzhead.extra.length)&&(S.pending!==S.pending_buf_size||(S.gzhead.hcrc&&S.pending>w&&(s.adler=_(s.adler,S.pending_buf,S.pending-w,w)),L(s),w=S.pending,S.pending!==S.pending_buf_size));)ne(S,255&S.gzhead.extra[S.gzindex]),S.gzindex++;S.gzhead.hcrc&&S.pending>w&&(s.adler=_(s.adler,S.pending_buf,S.pending-w,w)),S.gzindex===S.gzhead.extra.length&&(S.gzindex=0,S.status=73)}else S.status=73;if(S.status===73)if(S.gzhead.name){w=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>w&&(s.adler=_(s.adler,S.pending_buf,S.pending-w,w)),L(s),w=S.pending,S.pending===S.pending_buf_size)){R=1;break}R=S.gzindex<S.gzhead.name.length?255&S.gzhead.name.charCodeAt(S.gzindex++):0,ne(S,R)}while(R!==0);S.gzhead.hcrc&&S.pending>w&&(s.adler=_(s.adler,S.pending_buf,S.pending-w,w)),R===0&&(S.gzindex=0,S.status=91)}else S.status=91;if(S.status===91)if(S.gzhead.comment){w=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>w&&(s.adler=_(s.adler,S.pending_buf,S.pending-w,w)),L(s),w=S.pending,S.pending===S.pending_buf_size)){R=1;break}R=S.gzindex<S.gzhead.comment.length?255&S.gzhead.comment.charCodeAt(S.gzindex++):0,ne(S,R)}while(R!==0);S.gzhead.hcrc&&S.pending>w&&(s.adler=_(s.adler,S.pending_buf,S.pending-w,w)),R===0&&(S.status=103)}else S.status=103;if(S.status===103&&(S.gzhead.hcrc?(S.pending+2>S.pending_buf_size&&L(s),S.pending+2<=S.pending_buf_size&&(ne(S,255&s.adler),ne(S,s.adler>>8&255),s.adler=0,S.status=z)):S.status=z),S.pending!==0){if(L(s),s.avail_out===0)return S.last_flush=-1,l}else if(s.avail_in===0&&Z(M)<=Z(D)&&M!==d)return ae(s,-5);if(S.status===666&&s.avail_in!==0)return ae(s,-5);if(s.avail_in!==0||S.lookahead!==0||M!==u&&S.status!==666){var W=S.strategy===2?function(T,G){for(var X;;){if(T.lookahead===0&&(me(T),T.lookahead===0)){if(G===u)return c;break}if(T.match_length=0,X=t._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++,X&&(I(T,!1),T.strm.avail_out===0))return c}return T.insert=0,G===d?(I(T,!0),T.strm.avail_out===0?re:U):T.last_lit&&(I(T,!1),T.strm.avail_out===0)?c:V}(S,M):S.strategy===3?function(T,G){for(var X,$,te,ue,oe=T.window;;){if(T.lookahead<=N){if(me(T),T.lookahead<=N&&G===u)return c;if(T.lookahead===0)break}if(T.match_length=0,T.lookahead>=P&&0<T.strstart&&($=oe[te=T.strstart-1])===oe[++te]&&$===oe[++te]&&$===oe[++te]){ue=T.strstart+N;do;while($===oe[++te]&&$===oe[++te]&&$===oe[++te]&&$===oe[++te]&&$===oe[++te]&&$===oe[++te]&&$===oe[++te]&&$===oe[++te]&&te<ue);T.match_length=N-(ue-te),T.match_length>T.lookahead&&(T.match_length=T.lookahead)}if(T.match_length>=P?(X=t._tr_tally(T,1,T.match_length-P),T.lookahead-=T.match_length,T.strstart+=T.match_length,T.match_length=0):(X=t._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++),X&&(I(T,!1),T.strm.avail_out===0))return c}return T.insert=0,G===d?(I(T,!0),T.strm.avail_out===0?re:U):T.last_lit&&(I(T,!1),T.strm.avail_out===0)?c:V}(S,M):e[S.level].func(S,M);if(W!==re&&W!==U||(S.status=666),W===c||W===re)return s.avail_out===0&&(S.last_flush=-1),l;if(W===V&&(M===1?t._tr_align(S):M!==5&&(t._tr_stored_block(S,0,0,!1),M===3&&(se(S.head),S.lookahead===0&&(S.strstart=0,S.block_start=0,S.insert=0))),L(s),s.avail_out===0))return S.last_flush=-1,l}return M!==d?l:S.wrap<=0?1:(S.wrap===2?(ne(S,255&s.adler),ne(S,s.adler>>8&255),ne(S,s.adler>>16&255),ne(S,s.adler>>24&255),ne(S,255&s.total_in),ne(S,s.total_in>>8&255),ne(S,s.total_in>>16&255),ne(S,s.total_in>>24&255)):(J(S,s.adler>>>16),J(S,65535&s.adler)),L(s),0<S.wrap&&(S.wrap=-S.wrap),S.pending!==0?l:1)},a.deflateEnd=function(s){var M;return s&&s.state?(M=s.state.status)!==A&&M!==69&&M!==73&&M!==91&&M!==103&&M!==z&&M!==666?ae(s,v):(s.state=null,M===z?ae(s,-3):l):v},a.deflateSetDictionary=function(s,M){var D,S,w,R,H,W,T,G,X=M.length;if(!s||!s.state||(R=(D=s.state).wrap)===2||R===1&&D.status!==A||D.lookahead)return v;for(R===1&&(s.adler=o(s.adler,M,X,0)),D.wrap=0,X>=D.w_size&&(R===0&&(se(D.head),D.strstart=0,D.block_start=0,D.insert=0),G=new r.Buf8(D.w_size),r.arraySet(G,M,X-D.w_size,D.w_size,0),M=G,X=D.w_size),H=s.avail_in,W=s.next_in,T=s.input,s.avail_in=X,s.next_in=0,s.input=M,me(D);D.lookahead>=P;){for(S=D.strstart,w=D.lookahead-(P-1);D.ins_h=(D.ins_h<<D.hash_shift^D.window[S+P-1])&D.hash_mask,D.prev[S&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=S,S++,--w;);D.strstart=S,D.lookahead=P-1,me(D)}return D.strstart+=D.lookahead,D.block_start=D.strstart,D.insert=D.lookahead,D.lookahead=0,D.match_length=D.prev_length=P-1,D.match_available=0,s.next_in=W,s.input=T,s.avail_in=H,D.wrap=R,l},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,i,a){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,i,a){i.exports=function(e,r){var t,o,_,y,u,d,l,v,h,b,f,x,k,j,O,F,C,B,P,N,Y,A,z,c,V;t=e.state,o=e.next_in,c=e.input,_=o+(e.avail_in-5),y=e.next_out,V=e.output,u=y-(r-e.avail_out),d=y+(e.avail_out-257),l=t.dmax,v=t.wsize,h=t.whave,b=t.wnext,f=t.window,x=t.hold,k=t.bits,j=t.lencode,O=t.distcode,F=(1<<t.lenbits)-1,C=(1<<t.distbits)-1;e:do{k<15&&(x+=c[o++]<<k,k+=8,x+=c[o++]<<k,k+=8),B=j[x&F];t:for(;;){if(x>>>=P=B>>>24,k-=P,(P=B>>>16&255)===0)V[y++]=65535&B;else{if(!(16&P)){if(!(64&P)){B=j[(65535&B)+(x&(1<<P)-1)];continue t}if(32&P){t.mode=12;break e}e.msg="invalid literal/length code",t.mode=30;break e}N=65535&B,(P&=15)&&(k<P&&(x+=c[o++]<<k,k+=8),N+=x&(1<<P)-1,x>>>=P,k-=P),k<15&&(x+=c[o++]<<k,k+=8,x+=c[o++]<<k,k+=8),B=O[x&C];n:for(;;){if(x>>>=P=B>>>24,k-=P,!(16&(P=B>>>16&255))){if(!(64&P)){B=O[(65535&B)+(x&(1<<P)-1)];continue n}e.msg="invalid distance code",t.mode=30;break e}if(Y=65535&B,k<(P&=15)&&(x+=c[o++]<<k,(k+=8)<P&&(x+=c[o++]<<k,k+=8)),l<(Y+=x&(1<<P)-1)){e.msg="invalid distance too far back",t.mode=30;break e}if(x>>>=P,k-=P,(P=y-u)<Y){if(h<(P=Y-P)&&t.sane){e.msg="invalid distance too far back",t.mode=30;break e}if(z=f,(A=0)===b){if(A+=v-P,P<N){for(N-=P;V[y++]=f[A++],--P;);A=y-Y,z=V}}else if(b<P){if(A+=v+b-P,(P-=b)<N){for(N-=P;V[y++]=f[A++],--P;);if(A=0,b<N){for(N-=P=b;V[y++]=f[A++],--P;);A=y-Y,z=V}}}else if(A+=b-P,P<N){for(N-=P;V[y++]=f[A++],--P;);A=y-Y,z=V}for(;2<N;)V[y++]=z[A++],V[y++]=z[A++],V[y++]=z[A++],N-=3;N&&(V[y++]=z[A++],1<N&&(V[y++]=z[A++]))}else{for(A=y-Y;V[y++]=V[A++],V[y++]=V[A++],V[y++]=V[A++],2<(N-=3););N&&(V[y++]=V[A++],1<N&&(V[y++]=V[A++]))}break}}break}}while(o<_&&y<d);o-=N=k>>3,x&=(1<<(k-=N<<3))-1,e.next_in=o,e.next_out=y,e.avail_in=o<_?_-o+5:5-(o-_),e.avail_out=y<d?d-y+257:257-(y-d),t.hold=x,t.bits=k}},{}],49:[function(n,i,a){var e=n("../utils/common"),r=n("./adler32"),t=n("./crc32"),o=n("./inffast"),_=n("./inftrees"),y=1,u=2,d=0,l=-2,v=1,h=852,b=592;function f(A){return(A>>>24&255)+(A>>>8&65280)+((65280&A)<<8)+((255&A)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(A){var z;return A&&A.state?(z=A.state,A.total_in=A.total_out=z.total=0,A.msg="",z.wrap&&(A.adler=1&z.wrap),z.mode=v,z.last=0,z.havedict=0,z.dmax=32768,z.head=null,z.hold=0,z.bits=0,z.lencode=z.lendyn=new e.Buf32(h),z.distcode=z.distdyn=new e.Buf32(b),z.sane=1,z.back=-1,d):l}function j(A){var z;return A&&A.state?((z=A.state).wsize=0,z.whave=0,z.wnext=0,k(A)):l}function O(A,z){var c,V;return A&&A.state?(V=A.state,z<0?(c=0,z=-z):(c=1+(z>>4),z<48&&(z&=15)),z&&(z<8||15<z)?l:(V.window!==null&&V.wbits!==z&&(V.window=null),V.wrap=c,V.wbits=z,j(A))):l}function F(A,z){var c,V;return A?(V=new x,(A.state=V).window=null,(c=O(A,z))!==d&&(A.state=null),c):l}var C,B,P=!0;function N(A){if(P){var z;for(C=new e.Buf32(512),B=new e.Buf32(32),z=0;z<144;)A.lens[z++]=8;for(;z<256;)A.lens[z++]=9;for(;z<280;)A.lens[z++]=7;for(;z<288;)A.lens[z++]=8;for(_(y,A.lens,0,288,C,0,A.work,{bits:9}),z=0;z<32;)A.lens[z++]=5;_(u,A.lens,0,32,B,0,A.work,{bits:5}),P=!1}A.lencode=C,A.lenbits=9,A.distcode=B,A.distbits=5}function Y(A,z,c,V){var re,U=A.state;return U.window===null&&(U.wsize=1<<U.wbits,U.wnext=0,U.whave=0,U.window=new e.Buf8(U.wsize)),V>=U.wsize?(e.arraySet(U.window,z,c-U.wsize,U.wsize,0),U.wnext=0,U.whave=U.wsize):(V<(re=U.wsize-U.wnext)&&(re=V),e.arraySet(U.window,z,c-V,re,U.wnext),(V-=re)?(e.arraySet(U.window,z,c-V,V,0),U.wnext=V,U.whave=U.wsize):(U.wnext+=re,U.wnext===U.wsize&&(U.wnext=0),U.whave<U.wsize&&(U.whave+=re))),0}a.inflateReset=j,a.inflateReset2=O,a.inflateResetKeep=k,a.inflateInit=function(A){return F(A,15)},a.inflateInit2=F,a.inflate=function(A,z){var c,V,re,U,ae,Z,se,L,I,ne,J,q,me,be,ie,ce,ve,pe,ke,Ae,s,M,D,S,w=0,R=new e.Buf8(4),H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!A||!A.state||!A.output||!A.input&&A.avail_in!==0)return l;(c=A.state).mode===12&&(c.mode=13),ae=A.next_out,re=A.output,se=A.avail_out,U=A.next_in,V=A.input,Z=A.avail_in,L=c.hold,I=c.bits,ne=Z,J=se,M=d;e:for(;;)switch(c.mode){case v:if(c.wrap===0){c.mode=13;break}for(;I<16;){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}if(2&c.wrap&&L===35615){R[c.check=0]=255&L,R[1]=L>>>8&255,c.check=t(c.check,R,2,0),I=L=0,c.mode=2;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&L)<<8)+(L>>8))%31){A.msg="incorrect header check",c.mode=30;break}if((15&L)!=8){A.msg="unknown compression method",c.mode=30;break}if(I-=4,s=8+(15&(L>>>=4)),c.wbits===0)c.wbits=s;else if(s>c.wbits){A.msg="invalid window size",c.mode=30;break}c.dmax=1<<s,A.adler=c.check=1,c.mode=512&L?10:12,I=L=0;break;case 2:for(;I<16;){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}if(c.flags=L,(255&c.flags)!=8){A.msg="unknown compression method",c.mode=30;break}if(57344&c.flags){A.msg="unknown header flags set",c.mode=30;break}c.head&&(c.head.text=L>>8&1),512&c.flags&&(R[0]=255&L,R[1]=L>>>8&255,c.check=t(c.check,R,2,0)),I=L=0,c.mode=3;case 3:for(;I<32;){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}c.head&&(c.head.time=L),512&c.flags&&(R[0]=255&L,R[1]=L>>>8&255,R[2]=L>>>16&255,R[3]=L>>>24&255,c.check=t(c.check,R,4,0)),I=L=0,c.mode=4;case 4:for(;I<16;){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}c.head&&(c.head.xflags=255&L,c.head.os=L>>8),512&c.flags&&(R[0]=255&L,R[1]=L>>>8&255,c.check=t(c.check,R,2,0)),I=L=0,c.mode=5;case 5:if(1024&c.flags){for(;I<16;){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}c.length=L,c.head&&(c.head.extra_len=L),512&c.flags&&(R[0]=255&L,R[1]=L>>>8&255,c.check=t(c.check,R,2,0)),I=L=0}else c.head&&(c.head.extra=null);c.mode=6;case 6:if(1024&c.flags&&(Z<(q=c.length)&&(q=Z),q&&(c.head&&(s=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),e.arraySet(c.head.extra,V,U,q,s)),512&c.flags&&(c.check=t(c.check,V,q,U)),Z-=q,U+=q,c.length-=q),c.length))break e;c.length=0,c.mode=7;case 7:if(2048&c.flags){if(Z===0)break e;for(q=0;s=V[U+q++],c.head&&s&&c.length<65536&&(c.head.name+=String.fromCharCode(s)),s&&q<Z;);if(512&c.flags&&(c.check=t(c.check,V,q,U)),Z-=q,U+=q,s)break e}else c.head&&(c.head.name=null);c.length=0,c.mode=8;case 8:if(4096&c.flags){if(Z===0)break e;for(q=0;s=V[U+q++],c.head&&s&&c.length<65536&&(c.head.comment+=String.fromCharCode(s)),s&&q<Z;);if(512&c.flags&&(c.check=t(c.check,V,q,U)),Z-=q,U+=q,s)break e}else c.head&&(c.head.comment=null);c.mode=9;case 9:if(512&c.flags){for(;I<16;){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}if(L!==(65535&c.check)){A.msg="header crc mismatch",c.mode=30;break}I=L=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),A.adler=c.check=0,c.mode=12;break;case 10:for(;I<32;){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}A.adler=c.check=f(L),I=L=0,c.mode=11;case 11:if(c.havedict===0)return A.next_out=ae,A.avail_out=se,A.next_in=U,A.avail_in=Z,c.hold=L,c.bits=I,2;A.adler=c.check=1,c.mode=12;case 12:if(z===5||z===6)break e;case 13:if(c.last){L>>>=7&I,I-=7&I,c.mode=27;break}for(;I<3;){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}switch(c.last=1&L,I-=1,3&(L>>>=1)){case 0:c.mode=14;break;case 1:if(N(c),c.mode=20,z!==6)break;L>>>=2,I-=2;break e;case 2:c.mode=17;break;case 3:A.msg="invalid block type",c.mode=30}L>>>=2,I-=2;break;case 14:for(L>>>=7&I,I-=7&I;I<32;){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}if((65535&L)!=(L>>>16^65535)){A.msg="invalid stored block lengths",c.mode=30;break}if(c.length=65535&L,I=L=0,c.mode=15,z===6)break e;case 15:c.mode=16;case 16:if(q=c.length){if(Z<q&&(q=Z),se<q&&(q=se),q===0)break e;e.arraySet(re,V,U,q,ae),Z-=q,U+=q,se-=q,ae+=q,c.length-=q;break}c.mode=12;break;case 17:for(;I<14;){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}if(c.nlen=257+(31&L),L>>>=5,I-=5,c.ndist=1+(31&L),L>>>=5,I-=5,c.ncode=4+(15&L),L>>>=4,I-=4,286<c.nlen||30<c.ndist){A.msg="too many length or distance symbols",c.mode=30;break}c.have=0,c.mode=18;case 18:for(;c.have<c.ncode;){for(;I<3;){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}c.lens[H[c.have++]]=7&L,L>>>=3,I-=3}for(;c.have<19;)c.lens[H[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,D={bits:c.lenbits},M=_(0,c.lens,0,19,c.lencode,0,c.work,D),c.lenbits=D.bits,M){A.msg="invalid code lengths set",c.mode=30;break}c.have=0,c.mode=19;case 19:for(;c.have<c.nlen+c.ndist;){for(;ce=(w=c.lencode[L&(1<<c.lenbits)-1])>>>16&255,ve=65535&w,!((ie=w>>>24)<=I);){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}if(ve<16)L>>>=ie,I-=ie,c.lens[c.have++]=ve;else{if(ve===16){for(S=ie+2;I<S;){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}if(L>>>=ie,I-=ie,c.have===0){A.msg="invalid bit length repeat",c.mode=30;break}s=c.lens[c.have-1],q=3+(3&L),L>>>=2,I-=2}else if(ve===17){for(S=ie+3;I<S;){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}I-=ie,s=0,q=3+(7&(L>>>=ie)),L>>>=3,I-=3}else{for(S=ie+7;I<S;){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}I-=ie,s=0,q=11+(127&(L>>>=ie)),L>>>=7,I-=7}if(c.have+q>c.nlen+c.ndist){A.msg="invalid bit length repeat",c.mode=30;break}for(;q--;)c.lens[c.have++]=s}}if(c.mode===30)break;if(c.lens[256]===0){A.msg="invalid code -- missing end-of-block",c.mode=30;break}if(c.lenbits=9,D={bits:c.lenbits},M=_(y,c.lens,0,c.nlen,c.lencode,0,c.work,D),c.lenbits=D.bits,M){A.msg="invalid literal/lengths set",c.mode=30;break}if(c.distbits=6,c.distcode=c.distdyn,D={bits:c.distbits},M=_(u,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,D),c.distbits=D.bits,M){A.msg="invalid distances set",c.mode=30;break}if(c.mode=20,z===6)break e;case 20:c.mode=21;case 21:if(6<=Z&&258<=se){A.next_out=ae,A.avail_out=se,A.next_in=U,A.avail_in=Z,c.hold=L,c.bits=I,o(A,J),ae=A.next_out,re=A.output,se=A.avail_out,U=A.next_in,V=A.input,Z=A.avail_in,L=c.hold,I=c.bits,c.mode===12&&(c.back=-1);break}for(c.back=0;ce=(w=c.lencode[L&(1<<c.lenbits)-1])>>>16&255,ve=65535&w,!((ie=w>>>24)<=I);){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}if(ce&&!(240&ce)){for(pe=ie,ke=ce,Ae=ve;ce=(w=c.lencode[Ae+((L&(1<<pe+ke)-1)>>pe)])>>>16&255,ve=65535&w,!(pe+(ie=w>>>24)<=I);){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}L>>>=pe,I-=pe,c.back+=pe}if(L>>>=ie,I-=ie,c.back+=ie,c.length=ve,ce===0){c.mode=26;break}if(32&ce){c.back=-1,c.mode=12;break}if(64&ce){A.msg="invalid literal/length code",c.mode=30;break}c.extra=15&ce,c.mode=22;case 22:if(c.extra){for(S=c.extra;I<S;){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}c.length+=L&(1<<c.extra)-1,L>>>=c.extra,I-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=23;case 23:for(;ce=(w=c.distcode[L&(1<<c.distbits)-1])>>>16&255,ve=65535&w,!((ie=w>>>24)<=I);){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}if(!(240&ce)){for(pe=ie,ke=ce,Ae=ve;ce=(w=c.distcode[Ae+((L&(1<<pe+ke)-1)>>pe)])>>>16&255,ve=65535&w,!(pe+(ie=w>>>24)<=I);){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}L>>>=pe,I-=pe,c.back+=pe}if(L>>>=ie,I-=ie,c.back+=ie,64&ce){A.msg="invalid distance code",c.mode=30;break}c.offset=ve,c.extra=15&ce,c.mode=24;case 24:if(c.extra){for(S=c.extra;I<S;){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}c.offset+=L&(1<<c.extra)-1,L>>>=c.extra,I-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){A.msg="invalid distance too far back",c.mode=30;break}c.mode=25;case 25:if(se===0)break e;if(q=J-se,c.offset>q){if((q=c.offset-q)>c.whave&&c.sane){A.msg="invalid distance too far back",c.mode=30;break}me=q>c.wnext?(q-=c.wnext,c.wsize-q):c.wnext-q,q>c.length&&(q=c.length),be=c.window}else be=re,me=ae-c.offset,q=c.length;for(se<q&&(q=se),se-=q,c.length-=q;re[ae++]=be[me++],--q;);c.length===0&&(c.mode=21);break;case 26:if(se===0)break e;re[ae++]=c.length,se--,c.mode=21;break;case 27:if(c.wrap){for(;I<32;){if(Z===0)break e;Z--,L|=V[U++]<<I,I+=8}if(J-=se,A.total_out+=J,c.total+=J,J&&(A.adler=c.check=c.flags?t(c.check,re,J,ae-J):r(c.check,re,J,ae-J)),J=se,(c.flags?L:f(L))!==c.check){A.msg="incorrect data check",c.mode=30;break}I=L=0}c.mode=28;case 28:if(c.wrap&&c.flags){for(;I<32;){if(Z===0)break e;Z--,L+=V[U++]<<I,I+=8}if(L!==(4294967295&c.total)){A.msg="incorrect length check",c.mode=30;break}I=L=0}c.mode=29;case 29:M=1;break e;case 30:M=-3;break e;case 31:return-4;case 32:default:return l}return A.next_out=ae,A.avail_out=se,A.next_in=U,A.avail_in=Z,c.hold=L,c.bits=I,(c.wsize||J!==A.avail_out&&c.mode<30&&(c.mode<27||z!==4))&&Y(A,A.output,A.next_out,J-A.avail_out)?(c.mode=31,-4):(ne-=A.avail_in,J-=A.avail_out,A.total_in+=ne,A.total_out+=J,c.total+=J,c.wrap&&J&&(A.adler=c.check=c.flags?t(c.check,re,J,A.next_out-J):r(c.check,re,J,A.next_out-J)),A.data_type=c.bits+(c.last?64:0)+(c.mode===12?128:0)+(c.mode===20||c.mode===15?256:0),(ne==0&&J===0||z===4)&&M===d&&(M=-5),M)},a.inflateEnd=function(A){if(!A||!A.state)return l;var z=A.state;return z.window&&(z.window=null),A.state=null,d},a.inflateGetHeader=function(A,z){var c;return A&&A.state&&2&(c=A.state).wrap?((c.head=z).done=!1,d):l},a.inflateSetDictionary=function(A,z){var c,V=z.length;return A&&A.state?(c=A.state).wrap!==0&&c.mode!==11?l:c.mode===11&&r(1,z,V,0)!==c.check?-3:Y(A,z,V,V)?(c.mode=31,-4):(c.havedict=1,d):l},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,i,a){var e=n("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],t=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],_=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(y,u,d,l,v,h,b,f){var x,k,j,O,F,C,B,P,N,Y=f.bits,A=0,z=0,c=0,V=0,re=0,U=0,ae=0,Z=0,se=0,L=0,I=null,ne=0,J=new e.Buf16(16),q=new e.Buf16(16),me=null,be=0;for(A=0;A<=15;A++)J[A]=0;for(z=0;z<l;z++)J[u[d+z]]++;for(re=Y,V=15;1<=V&&J[V]===0;V--);if(V<re&&(re=V),V===0)return v[h++]=20971520,v[h++]=20971520,f.bits=1,0;for(c=1;c<V&&J[c]===0;c++);for(re<c&&(re=c),A=Z=1;A<=15;A++)if(Z<<=1,(Z-=J[A])<0)return-1;if(0<Z&&(y===0||V!==1))return-1;for(q[1]=0,A=1;A<15;A++)q[A+1]=q[A]+J[A];for(z=0;z<l;z++)u[d+z]!==0&&(b[q[u[d+z]]++]=z);if(C=y===0?(I=me=b,19):y===1?(I=r,ne-=257,me=t,be-=257,256):(I=o,me=_,-1),A=c,F=h,ae=z=L=0,j=-1,O=(se=1<<(U=re))-1,y===1&&852<se||y===2&&592<se)return 1;for(;;){for(B=A-ae,N=b[z]<C?(P=0,b[z]):b[z]>C?(P=me[be+b[z]],I[ne+b[z]]):(P=96,0),x=1<<A-ae,c=k=1<<U;v[F+(L>>ae)+(k-=x)]=B<<24|P<<16|N|0,k!==0;);for(x=1<<A-1;L&x;)x>>=1;if(x!==0?(L&=x-1,L+=x):L=0,z++,--J[A]==0){if(A===V)break;A=u[d+b[z]]}if(re<A&&(L&O)!==j){for(ae===0&&(ae=re),F+=c,Z=1<<(U=A-ae);U+ae<V&&!((Z-=J[U+ae])<=0);)U++,Z<<=1;if(se+=1<<U,y===1&&852<se||y===2&&592<se)return 1;v[j=L&O]=re<<24|U<<16|F-h|0}}return L!==0&&(v[F+L]=A-ae<<24|64<<16|0),f.bits=re,0}},{"../utils/common":41}],51:[function(n,i,a){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,i,a){var e=n("../utils/common"),r=0,t=1;function o(w){for(var R=w.length;0<=--R;)w[R]=0}var _=0,y=29,u=256,d=u+1+y,l=30,v=19,h=2*d+1,b=15,f=16,x=7,k=256,j=16,O=17,F=18,C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],B=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(d+2));o(Y);var A=new Array(2*l);o(A);var z=new Array(512);o(z);var c=new Array(256);o(c);var V=new Array(y);o(V);var re,U,ae,Z=new Array(l);function se(w,R,H,W,T){this.static_tree=w,this.extra_bits=R,this.extra_base=H,this.elems=W,this.max_length=T,this.has_stree=w&&w.length}function L(w,R){this.dyn_tree=w,this.max_code=0,this.stat_desc=R}function I(w){return w<256?z[w]:z[256+(w>>>7)]}function ne(w,R){w.pending_buf[w.pending++]=255&R,w.pending_buf[w.pending++]=R>>>8&255}function J(w,R,H){w.bi_valid>f-H?(w.bi_buf|=R<<w.bi_valid&65535,ne(w,w.bi_buf),w.bi_buf=R>>f-w.bi_valid,w.bi_valid+=H-f):(w.bi_buf|=R<<w.bi_valid&65535,w.bi_valid+=H)}function q(w,R,H){J(w,H[2*R],H[2*R+1])}function me(w,R){for(var H=0;H|=1&w,w>>>=1,H<<=1,0<--R;);return H>>>1}function be(w,R,H){var W,T,G=new Array(b+1),X=0;for(W=1;W<=b;W++)G[W]=X=X+H[W-1]<<1;for(T=0;T<=R;T++){var $=w[2*T+1];$!==0&&(w[2*T]=me(G[$]++,$))}}function ie(w){var R;for(R=0;R<d;R++)w.dyn_ltree[2*R]=0;for(R=0;R<l;R++)w.dyn_dtree[2*R]=0;for(R=0;R<v;R++)w.bl_tree[2*R]=0;w.dyn_ltree[2*k]=1,w.opt_len=w.static_len=0,w.last_lit=w.matches=0}function ce(w){8<w.bi_valid?ne(w,w.bi_buf):0<w.bi_valid&&(w.pending_buf[w.pending++]=w.bi_buf),w.bi_buf=0,w.bi_valid=0}function ve(w,R,H,W){var T=2*R,G=2*H;return w[T]<w[G]||w[T]===w[G]&&W[R]<=W[H]}function pe(w,R,H){for(var W=w.heap[H],T=H<<1;T<=w.heap_len&&(T<w.heap_len&&ve(R,w.heap[T+1],w.heap[T],w.depth)&&T++,!ve(R,W,w.heap[T],w.depth));)w.heap[H]=w.heap[T],H=T,T<<=1;w.heap[H]=W}function ke(w,R,H){var W,T,G,X,$=0;if(w.last_lit!==0)for(;W=w.pending_buf[w.d_buf+2*$]<<8|w.pending_buf[w.d_buf+2*$+1],T=w.pending_buf[w.l_buf+$],$++,W===0?q(w,T,R):(q(w,(G=c[T])+u+1,R),(X=C[G])!==0&&J(w,T-=V[G],X),q(w,G=I(--W),H),(X=B[G])!==0&&J(w,W-=Z[G],X)),$<w.last_lit;);q(w,k,R)}function Ae(w,R){var H,W,T,G=R.dyn_tree,X=R.stat_desc.static_tree,$=R.stat_desc.has_stree,te=R.stat_desc.elems,ue=-1;for(w.heap_len=0,w.heap_max=h,H=0;H<te;H++)G[2*H]!==0?(w.heap[++w.heap_len]=ue=H,w.depth[H]=0):G[2*H+1]=0;for(;w.heap_len<2;)G[2*(T=w.heap[++w.heap_len]=ue<2?++ue:0)]=1,w.depth[T]=0,w.opt_len--,$&&(w.static_len-=X[2*T+1]);for(R.max_code=ue,H=w.heap_len>>1;1<=H;H--)pe(w,G,H);for(T=te;H=w.heap[1],w.heap[1]=w.heap[w.heap_len--],pe(w,G,1),W=w.heap[1],w.heap[--w.heap_max]=H,w.heap[--w.heap_max]=W,G[2*T]=G[2*H]+G[2*W],w.depth[T]=(w.depth[H]>=w.depth[W]?w.depth[H]:w.depth[W])+1,G[2*H+1]=G[2*W+1]=T,w.heap[1]=T++,pe(w,G,1),2<=w.heap_len;);w.heap[--w.heap_max]=w.heap[1],function(oe,Se){var Qe,Oe,et,_e,ot,vt,Te=Se.dyn_tree,Ht=Se.max_code,Pn=Se.stat_desc.static_tree,In=Se.stat_desc.has_stree,Cn=Se.stat_desc.extra_bits,Wt=Se.stat_desc.extra_base,tt=Se.stat_desc.max_length,lt=0;for(_e=0;_e<=b;_e++)oe.bl_count[_e]=0;for(Te[2*oe.heap[oe.heap_max]+1]=0,Qe=oe.heap_max+1;Qe<h;Qe++)tt<(_e=Te[2*Te[2*(Oe=oe.heap[Qe])+1]+1]+1)&&(_e=tt,lt++),Te[2*Oe+1]=_e,Ht<Oe||(oe.bl_count[_e]++,ot=0,Wt<=Oe&&(ot=Cn[Oe-Wt]),vt=Te[2*Oe],oe.opt_len+=vt*(_e+ot),In&&(oe.static_len+=vt*(Pn[2*Oe+1]+ot)));if(lt!==0){do{for(_e=tt-1;oe.bl_count[_e]===0;)_e--;oe.bl_count[_e]--,oe.bl_count[_e+1]+=2,oe.bl_count[tt]--,lt-=2}while(0<lt);for(_e=tt;_e!==0;_e--)for(Oe=oe.bl_count[_e];Oe!==0;)Ht<(et=oe.heap[--Qe])||(Te[2*et+1]!==_e&&(oe.opt_len+=(_e-Te[2*et+1])*Te[2*et],Te[2*et+1]=_e),Oe--)}}(w,R),be(G,ue,w.bl_count)}function s(w,R,H){var W,T,G=-1,X=R[1],$=0,te=7,ue=4;for(X===0&&(te=138,ue=3),R[2*(H+1)+1]=65535,W=0;W<=H;W++)T=X,X=R[2*(W+1)+1],++$<te&&T===X||($<ue?w.bl_tree[2*T]+=$:T!==0?(T!==G&&w.bl_tree[2*T]++,w.bl_tree[2*j]++):$<=10?w.bl_tree[2*O]++:w.bl_tree[2*F]++,G=T,ue=($=0)===X?(te=138,3):T===X?(te=6,3):(te=7,4))}function M(w,R,H){var W,T,G=-1,X=R[1],$=0,te=7,ue=4;for(X===0&&(te=138,ue=3),W=0;W<=H;W++)if(T=X,X=R[2*(W+1)+1],!(++$<te&&T===X)){if($<ue)for(;q(w,T,w.bl_tree),--$!=0;);else T!==0?(T!==G&&(q(w,T,w.bl_tree),$--),q(w,j,w.bl_tree),J(w,$-3,2)):$<=10?(q(w,O,w.bl_tree),J(w,$-3,3)):(q(w,F,w.bl_tree),J(w,$-11,7));G=T,ue=($=0)===X?(te=138,3):T===X?(te=6,3):(te=7,4)}}o(Z);var D=!1;function S(w,R,H,W){J(w,(_<<1)+(W?1:0),3),function(T,G,X,$){ce(T),$&&(ne(T,X),ne(T,~X)),e.arraySet(T.pending_buf,T.window,G,X,T.pending),T.pending+=X}(w,R,H,!0)}a._tr_init=function(w){D||(function(){var R,H,W,T,G,X=new Array(b+1);for(T=W=0;T<y-1;T++)for(V[T]=W,R=0;R<1<<C[T];R++)c[W++]=T;for(c[W-1]=T,T=G=0;T<16;T++)for(Z[T]=G,R=0;R<1<<B[T];R++)z[G++]=T;for(G>>=7;T<l;T++)for(Z[T]=G<<7,R=0;R<1<<B[T]-7;R++)z[256+G++]=T;for(H=0;H<=b;H++)X[H]=0;for(R=0;R<=143;)Y[2*R+1]=8,R++,X[8]++;for(;R<=255;)Y[2*R+1]=9,R++,X[9]++;for(;R<=279;)Y[2*R+1]=7,R++,X[7]++;for(;R<=287;)Y[2*R+1]=8,R++,X[8]++;for(be(Y,d+1,X),R=0;R<l;R++)A[2*R+1]=5,A[2*R]=me(R,5);re=new se(Y,C,u+1,d,b),U=new se(A,B,0,l,b),ae=new se(new Array(0),P,0,v,x)}(),D=!0),w.l_desc=new L(w.dyn_ltree,re),w.d_desc=new L(w.dyn_dtree,U),w.bl_desc=new L(w.bl_tree,ae),w.bi_buf=0,w.bi_valid=0,ie(w)},a._tr_stored_block=S,a._tr_flush_block=function(w,R,H,W){var T,G,X=0;0<w.level?(w.strm.data_type===2&&(w.strm.data_type=function($){var te,ue=4093624447;for(te=0;te<=31;te++,ue>>>=1)if(1&ue&&$.dyn_ltree[2*te]!==0)return r;if($.dyn_ltree[18]!==0||$.dyn_ltree[20]!==0||$.dyn_ltree[26]!==0)return t;for(te=32;te<u;te++)if($.dyn_ltree[2*te]!==0)return t;return r}(w)),Ae(w,w.l_desc),Ae(w,w.d_desc),X=function($){var te;for(s($,$.dyn_ltree,$.l_desc.max_code),s($,$.dyn_dtree,$.d_desc.max_code),Ae($,$.bl_desc),te=v-1;3<=te&&$.bl_tree[2*N[te]+1]===0;te--);return $.opt_len+=3*(te+1)+5+5+4,te}(w),T=w.opt_len+3+7>>>3,(G=w.static_len+3+7>>>3)<=T&&(T=G)):T=G=H+5,H+4<=T&&R!==-1?S(w,R,H,W):w.strategy===4||G===T?(J(w,2+(W?1:0),3),ke(w,Y,A)):(J(w,4+(W?1:0),3),function($,te,ue,oe){var Se;for(J($,te-257,5),J($,ue-1,5),J($,oe-4,4),Se=0;Se<oe;Se++)J($,$.bl_tree[2*N[Se]+1],3);M($,$.dyn_ltree,te-1),M($,$.dyn_dtree,ue-1)}(w,w.l_desc.max_code+1,w.d_desc.max_code+1,X+1),ke(w,w.dyn_ltree,w.dyn_dtree)),ie(w),W&&ce(w)},a._tr_tally=function(w,R,H){return w.pending_buf[w.d_buf+2*w.last_lit]=R>>>8&255,w.pending_buf[w.d_buf+2*w.last_lit+1]=255&R,w.pending_buf[w.l_buf+w.last_lit]=255&H,w.last_lit++,R===0?w.dyn_ltree[2*H]++:(w.matches++,R--,w.dyn_ltree[2*(c[H]+u+1)]++,w.dyn_dtree[2*I(R)]++),w.last_lit===w.lit_bufsize-1},a._tr_align=function(w){J(w,2,3),q(w,k,Y),function(R){R.bi_valid===16?(ne(R,R.bi_buf),R.bi_buf=0,R.bi_valid=0):8<=R.bi_valid&&(R.pending_buf[R.pending++]=255&R.bi_buf,R.bi_buf>>=8,R.bi_valid-=8)}(w)}},{"../utils/common":41}],53:[function(n,i,a){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,i,a){(function(e){(function(r,t){if(!r.setImmediate){var o,_,y,u,d=1,l={},v=!1,h=r.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(r);b=b&&b.setTimeout?b:r,o={}.toString.call(r.process)==="[object process]"?function(j){process.nextTick(function(){x(j)})}:function(){if(r.postMessage&&!r.importScripts){var j=!0,O=r.onmessage;return r.onmessage=function(){j=!1},r.postMessage("","*"),r.onmessage=O,j}}()?(u="setImmediate$"+Math.random()+"$",r.addEventListener?r.addEventListener("message",k,!1):r.attachEvent("onmessage",k),function(j){r.postMessage(u+j,"*")}):r.MessageChannel?((y=new MessageChannel).port1.onmessage=function(j){x(j.data)},function(j){y.port2.postMessage(j)}):h&&"onreadystatechange"in h.createElement("script")?(_=h.documentElement,function(j){var O=h.createElement("script");O.onreadystatechange=function(){x(j),O.onreadystatechange=null,_.removeChild(O),O=null},_.appendChild(O)}):function(j){setTimeout(x,0,j)},b.setImmediate=function(j){typeof j!="function"&&(j=new Function(""+j));for(var O=new Array(arguments.length-1),F=0;F<O.length;F++)O[F]=arguments[F+1];var C={callback:j,args:O};return l[d]=C,o(d),d++},b.clearImmediate=f}function f(j){delete l[j]}function x(j){if(v)setTimeout(x,0,j);else{var O=l[j];if(O){v=!0;try{(function(F){var C=F.callback,B=F.args;switch(B.length){case 0:C();break;case 1:C(B[0]);break;case 2:C(B[0],B[1]);break;case 3:C(B[0],B[1],B[2]);break;default:C.apply(t,B)}})(O)}finally{f(j),v=!1}}}}function k(j){j.source===r&&typeof j.data=="string"&&j.data.indexOf(u)===0&&x(+j.data.slice(u.length))}})(typeof self>"u"?e===void 0?this:e:self)}).call(this,typeof ct<"u"?ct:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Sn);var na=Sn.exports;const ra=Un(na),sa=async(p,g,n,i,a)=>{var o,_,y;const e=document.querySelector("svg#".concat(p));if(!e)throw new Error("Requested canvas SVG element not found");const r=Number((o=e.style.getPropertyValue("--rmg-svg-height").match(/\d+/g))==null?void 0:o[0]),t=e.cloneNode(!0);if(t.setAttribute("height",(r*(a||100)/100).toString()),t.style.setProperty("all","initial"),["share"].map(u=>{var d;return[...((d=[...document.querySelectorAll("link")].filter(l=>l.id==="css_"+u)[0])==null?void 0:d.sheet).cssRules].map(l=>l.cssText).join(" ")}).forEach(u=>{const d=document.createElement("style");d.textContent=u,t.prepend(d)}),(_=t.querySelector("rect#canvas-border"))==null||_.setAttribute("stroke",i?"black":"none"),(y=t.querySelector("rect#canvas-bg"))==null||y.setAttribute("fill",n?"none":"white"),g===Q.MTR)try{const u=await oa(t),d=document.createElement("style");d.textContent=u.join("\n"),t.prepend(d)}catch(u){alert("Failed to fonts. Fonts in the exported PNG will be missing."),console.error(u)}return t},aa=p=>new Promise(g=>{const n=new FileReader;n.onloadend=()=>g(n.result),n.readAsDataURL(p)}),ia=(p,g)=>p.find(n=>{const i=n.style;return i.getPropertyValue("font-family").replace(/^"(.+)"$/,"$1")===g.family&&i.getPropertyValue("unicode-range")===g.unicodeRange}),oa=async p=>{var e,r,t;const g=Array.from(new Set([...p.querySelectorAll(".rmg-name__zh"),...p.querySelectorAll(".rmg-name__en")].map(o=>o.innerHTML).join("").replace(/\s/g,""))).join(""),n=await document.fonts.load("80px GenYoMin TW, Vegur",g),i=Array.from(((t=(r=(e=document.querySelector("link#css_share"))==null?void 0:e.sheet)==null?void 0:r.cssRules)==null?void 0:t[0]).styleSheet.cssRules),a=n.reduce((o,_)=>{const y=ia(i,_);return y?o.find(d=>{const l=d.style,v=y.style;return l.getPropertyValue("font-family")===v.getPropertyValue("font-family")&&l.getPropertyValue("unicode-range")===v.getPropertyValue("unicode-range")})?o:o.concat(y):o},[]);return await Promise.all(a.map(async o=>{try{const _=await fetch(la(o)),y=await aa(await _.blob());return o.cssText.replace(/src:[ \w('",\-:/.)]+;/g,"src: url('".concat(y,"'); "))}catch(_){return console.error(_),""}}))},la=p=>{var n;const g=p.style.src;return gn()?g.replace(/^url\("(\S+)"\).*$/,"$1"):"/rmg/styles/"+((n=g.match(/^url\("([\S*]+)"\)/))==null?void 0:n[1])},ca=async(p,g,n)=>{const i=p.viewBox.baseVal.width,a=p.viewBox.baseVal.height,e=document.querySelectorAll("canvas")[0];e.width=Number(i)*window.devicePixelRatio*g,e.height=Number(a)*window.devicePixelRatio*g,p.setAttribute("width",e.width.toString()),p.setAttribute("height",e.height.toString());const r=e.getContext("2d");return r.clearRect(0,0,e.width,e.height),p.querySelectorAll(".rmg-name__en.rmg-name__gzmtr--next2-dest").forEach(t=>t.setAttribute("font-size","8.5px")),p.querySelectorAll("text, tspan").forEach(t=>{const o=window.getComputedStyle(t);t.setAttribute("font-family",o.fontFamily),t.setAttribute("fill",o.fill),t.setAttribute("dominant-baseline",o.dominantBaseline),t.setAttribute("text-anchor",o.textAnchor||"")}),new Promise((t,o)=>{const _=new Image;_.onload=()=>{setTimeout(()=>{r.drawImage(_,0,0,e.width,e.height),e.toBlob(y=>{y?t(y):o("Canvas blob is null")},"image/png")},n?2e3:0)},_.onerror=o,_.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(p.outerHTML)))})};function da(p){const{isOpen:g,onClose:n}=p,{t:i}=le(),a=fe(),[e,r]=K.useState(""),[t,o]=K.useState(!1),[_,y]=K.useState(!1),[u,d]=K.useState(100),[l,v]=K.useState("png"),h=ee(P=>P.app.canvasToShow),{style:b,stn_list:f,current_stn_idx:x,line_name:k}=ee(P=>P.param);K.useEffect(()=>{e!==""&&!h.includes(e)&&r("")},[h]);const j=Ft[b].reduce((P,N)=>h.includes(N)?{...P,[N]:i("CanvasType."+N)}:{...P},{"":i("DownloadModal.pleaseSelect")}),O=[25,33,50,67,75,80,90,100,110,125,150,175,200,250,300,400,500].reduce((P,N)=>({...P,[N]:"".concat(N,"%")}),{}),F={png:i("DownloadModal.png"),svg:i("DownloadModal.svg")},C=[{type:"select",label:i("DownloadModal.canvas"),value:e,options:j,disabledOptions:[""],onChange:P=>r(P),minW:"full"},{type:"switch",label:i("DownloadModal.transparent"),isChecked:t,onChange:o,oneLine:!0,minW:"full"},{type:"switch",label:i("DownloadModal.showBorder"),isChecked:_,onChange:y,oneLine:!0,minW:"full"},{type:"select",label:i("DownloadModal.scale"),value:u,options:O,onChange:P=>d(P)},{type:"select",label:i("DownloadModal.format"),value:l,options:F,onChange:P=>v(P)}],B=async P=>{a(Qt(0));const N=P==="current"?[x]:Object.keys(f).filter(A=>!["linestart","lineend"].includes(A)),Y=new ra;for(const A in N){a(Qt((Number(A)+1)/N.length*100));const z=N[A];a(Rt(z)),await os(500);const c=await sa(e,b,t,_,u);document.body.appendChild(c);const V="rmg.".concat(z,".").concat(f[z].name[0],".").concat(f[z].name[1]).replaceAll(/\\|\/|\||\*|:|\?|<|>|"/g,"_");if(l==="png"){const re=gn()&&A==="0",U=await ca(c,u/100,re);N.length>1?Y.file("".concat(V,".png"),U):en("".concat(V,".png"),U)}else if(l==="svg"){c.removeAttribute("height");const re="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(c.outerHTML)));N.length>1?Y.file("".concat(V,".svg"),re.split("base64,")[1],{base64:!0}):vn(V+".svg","image/svg+xml",c.outerHTML)}document.body.removeChild(c)}if(N.length>1){const A=await Y.generateAsync({type:"blob"}),z="rmg.".concat(k[0],".").concat(k[1],".zip").replaceAll(" ","_");en(z,A)}he.event(ye.DOWNLOAD_IMAGES,{canvasToDownload:e,style:b,option:P,format:l}),a(Rt(x)),a(pn()),n()};return m.jsxs(Me,{isOpen:g,onClose:n,children:[m.jsx(Ne,{}),m.jsxs(He,{children:[m.jsx(We,{children:i("DownloadModal.title")}),m.jsx(Ue,{}),m.jsx(Ze,{children:m.jsx(ge,{fields:C})}),m.jsx(Je,{children:m.jsxs(Ie,{children:[m.jsx(de,{colorScheme:"primary",variant:"outline",size:"sm",onClick:()=>B("current"),isDisabled:!e,children:i("DownloadModal.downloadOne")}),b!==Q.GZMTR&&m.jsx(de,{colorScheme:"primary",variant:"outline",size:"sm",onClick:()=>B("all"),isDisabled:!e,children:i("DownloadModal.downloadAll")})]})})]})]})}function ua(){const{t:p}=le(),[g,n]=K.useState(!1),{paramConfig:i}=ee(r=>r.app),a=ee(r=>r.param),e=()=>{vn("RMG_".concat(i==null?void 0:i.id,".json"),"application/json",JSON.stringify(a)),he.event(ye.DOWNLOAD_PARAM,{style:a.style})};return m.jsxs(Bn,{children:[m.jsx(Vn,{as:de,variant:"ghost",size:"sm",rightIcon:m.jsx(Hr,{}),children:p("DownloadActions.downloads")}),m.jsxs(Mn,{children:[m.jsx(Ut,{onClick:e,children:p("DownloadActions.configFile")}),m.jsx(Ut,{onClick:()=>n(!0),children:p("DownloadActions.images")})]}),m.jsx(da,{isOpen:g,onClose:()=>n(!1)})]})}function gt(){const[p,g]=Zn();return[p,i=>{if(g(i),Object.keys(i)){const a=new URLSearchParams(i);he.updateUrl("/rmg/?"+a)}else he.updateUrl("/rmg/")}]}function ha(){const{t:p}=le(),g=zt(),[,n]=gt(),i=()=>{g(Ke(Ve.CLOSE)),g(_n(void 0)),n({})};return m.jsxs(Ie,{ml:"auto",w:"fit-content",children:[m.jsx(de,{variant:"ghost",size:"sm",leftIcon:m.jsx(Wr,{}),onClick:i,children:p("All projects")}),m.jsx(ua,{}),m.jsx(de,{variant:"solid",size:"sm",colorScheme:"primary",leftIcon:m.jsx(Ur,{}),onClick:()=>g(Ke(Ve.STYLE)),children:p("HeaderActions.editStyle")})]})}function ma(){const{t:p}=le(),g=fe(),{canvasToShow:n,canvasScale:i}=ee(_=>_.app),a=ee(_=>_.param.style),e=Object.values(Q).reduce((_,y)=>({..._,[y]:p("RmgStyle."+y)}),{}),r=Ft[a].map(_=>({label:p("CanvasType."+_),value:_})),t=_=>{g(Jr(_))},o=[{type:"select",label:p("Style"),value:a,options:e,onChange:_=>t(_)},{type:"custom",label:p("View"),component:m.jsx(Zr,{displayValue:p("Select canvas"),selections:r,defaultValue:n,onChange:_=>g(Gr(_))})},{type:"slider",label:p("Canvas scale"),value:i,min:.1,max:2,step:.01,onChange:_=>g($r(_)),leftIcon:m.jsx(Yr,{}),rightIcon:m.jsx(qr,{})}];return m.jsxs(Kr,{children:[m.jsx(ge,{fields:o,minW:160}),m.jsx(ha,{})]})}const pa=p=>{switch(p){case Q.MTR:return[Pe.Hongkong,"twl","#E2231A",xe.white];case Q.GZMTR:return[Pe.Guangzhou,"gz1","#F3D03E",xe.black];case Q.SHMetro:return[Pe.Shanghai,"sh1","#E4002B",xe.white];default:return[Pe.Other,"other","#AAAAAA",xe.white]}},_a=p=>{switch(p){case"zh-Hans":return["1号线","Line 1"];case"zh-Hant":return["荃灣綫","Tsuen Wan Line"];default:return["地鐵線","Metro Line"]}},nt=p=>({name:["未命名 "+p,"Unnamed "+p],secondaryName:!1,num:"00",services:[At.local],parents:[],children:[],branch:{left:[],right:[]},transfer:{groups:[{lines:[]}],tick_direc:Ye.right,paid_area:!0},facility:"",loop_pivot:!1,one_line:!0,int_padding:355}),fa=(p,g)=>{const n=nt("linestart");n.name=["LEFT END","LEFT END"];const i=nt("lineend");i.name=["RIGHT END","RIGHT END"];const a=it(6),e=nt(a);e.num="01";const r=it(6),t=nt(r);return t.num="02",n.children=[a],e.parents=["linestart"],e.children=[r],t.parents=[a],t.children=["lineend"],i.parents=[r],{svgWidth:{destination:1200,runin:1200,railmap:1200,indoor:1200},svg_height:300,style:p,y_pc:50,padding:10,branchSpacingPct:33,direction:Ye.left,platform_num:"1",theme:pa(p),line_name:_a(g),current_stn_idx:r,stn_list:{linestart:n,[a]:e,[r]:t,lineend:i},namePosMTR:{isStagger:!0,isFlip:!0},customiseMTRDest:{isLegacy:!1,terminal:!1},line_num:"1",psd_num:"1",info_panel_type:p===Q.SHMetro?hn.sh:un.gz1,notesGZMTR:[],direction_gz_x:40,direction_gz_y:70,coline:{},loop:!1,loop_info:{bank:!0,left_and_right_factor:1,bottom_factor:1}}},rt=(p,g,n,i)=>(a,e)=>{const r=e().param.stn_list;let t=it(6);for(;t in r;)t=it(6);const o=nt(t);if(p!=="new"){const _={...r,[g]:{...r[g],children:r[g].children.map(y=>y===n?t:y),branch:{left:r[g].branch.left,right:r[g].branch.right.length&&r[g].branch.right[1]===n?[r[g].branch.right[0],t]:r[g].branch.right}},[n]:{...r[n],parents:r[n].parents.map(y=>y===g?t:y),branch:{left:r[n].branch.left.length&&r[n].branch.left[1]===g?[r[n].branch.left[0],t]:r[n].branch.left,right:r[n].branch.right}},[t]:{...o,parents:[g],children:[n]}};return a(Be(_)),t}else{if(!i)return!1;const _={...r,[g]:{...r[g],children:i==="upper"?[t,r[g].children[0]]:[r[g].children[0],t],branch:{left:r[g].branch.left,right:[ht.through,t]}},[n]:{...r[n],parents:i==="upper"?[t,r[n].parents[0]]:[r[n].parents[0],t],branch:{left:[ht.through,t],right:r[n].branch.right}},[t]:{...o,parents:[g],children:[n]}};return a(Be(_)),t}},ga=(p,g,n)=>(i,a)=>{const r=a().helper.branches[p];if(r!=null&&r.length)if(g==="before"){const t=r[r.indexOf(n)-1];return i(rt(p.toString(),t,n))}else{const t=r[r.indexOf(n)+1];return i(rt(p.toString(),n,t))}else return!1},va=()=>(p,g)=>{const n=g().param.stn_list;return g().helper.branches[0].filter(a=>{const e=n[a].parents.length+n[a].children.length===4,r=Mt(a,n)===0;return!e&&r})},nn=(p,g)=>(n,i)=>{const a=i().param.stn_list,e=i().helper.branches;return!e[0].includes(p)||!e[0].includes(g)?"Branch should end at main line":e[0].indexOf(p)>=e[0].indexOf(g)?"Not in correct ordering":p==="linestart"&&g==="lineend"?"Should not be parallel to main line":p==="linestart"&&e[0].indexOf(g)===1?"Branch should not be open jaw from the first station":g==="lineend"&&e[0].indexOf(p)===e[0].length-2?"Branch should not be open jaw from the last station":a[p].children.length>1||a[g].parents.length>1?"Branch already exist":e.slice(1).some(o=>o.slice(1,-1).includes(p)||o.slice(1,-1).includes(g))?"Cannot branch out from existing branch":e[0].slice(e[0].indexOf(p)+1,e[0].indexOf(g)).every(o=>a[o].parents.length===1&&a[o].children.length===1)?"":"One or more stations between both ends are branching out"};function ya(p){var F,C;const{isOpen:g,onClose:n}=p,{t:i}=le(),a=fe(),e=ee(B=>B.app.selectedBranch),{style:r,stn_list:t}=ee(B=>B.param),o=ee(B=>B.helper.branches),[_,y]=K.useState(e),[u,d]=K.useState("before"),[l,v]=K.useState(""),[h,b]=K.useState(!1);K.useEffect(()=>{y(e)},[e]),K.useEffect(()=>{g||b(!1)},[g]);const f=(C=(F=o[Number(_)])==null?void 0:F.slice(1,-1))!=null?C:[],x=B=>B.reduce((P,N)=>{var Y;return{...P,[N]:(Y=t[N])==null?void 0:Y.name.join(" - ")}},{"":i("AddStationModal.pleaseSelect")}),k=[{type:"select",label:i("AddStationModal.where"),value:_,options:{...o.reduce((B,P,N)=>({...B,[N]:N===0?i("AddStationModal.main"):r!==Q.SHMetro||!Xe(P,t)?i("AddStationModal.branch")+" "+N:i("AddStationModal.external")+" "+N}),{})},onChange:B=>j(B),minW:"full"},{type:"select",label:i("AddStationModal.preposition"),value:u,options:{before:i("AddStationModal.before"),after:i("AddStationModal.after")},onChange:B=>d(B)},{type:"select",label:i("AddStationModal.pivot"),value:l,options:x(f),disabledOptions:[""],onChange:B=>v(B)}],j=B=>{y(B),v("")},O=()=>{const B=a(ga(_,u,l));B?(n(),a(mn(B)),a(Ke(Ve.STATION))):(console.log("false here"),b(!0)),he.event(ye.ADD_STATION,{style:r,branchIndex:_,success:B})};return m.jsxs(Me,{isOpen:g,onClose:n,children:[m.jsx(Ne,{}),m.jsxs(He,{children:[h&&m.jsxs(pt,{status:"error",variant:"solid",size:"xs",children:[m.jsx(_t,{}),i("AddStationModal.error")]}),m.jsxs(we,{position:"relative",children:[m.jsx(We,{children:i("AddStationModal.title")}),m.jsx(Ue,{})]}),m.jsx(Ze,{children:m.jsx(ge,{fields:k})}),m.jsx(Je,{children:m.jsx(de,{colorScheme:"primary",onClick:O,isDisabled:!l,children:i("Confirm")})})]})]})}function ba(p){const{isOpen:g,onClose:n}=p,{t:i}=le(),a=fe(),[e,r]=K.useState("new"),[t,o]=K.useState(""),[_,y]=K.useState(""),[u,d]=K.useState("upper"),[l,v]=K.useState(""),[h,b]=K.useState(""),{style:f,stn_list:x}=ee(Y=>Y.param);K.useEffect(()=>{g||(r("new"),o(""),y(""))},[g]);const j=(Y=>Y.reduce((A,z)=>{var c;return{...A,[z]:(c=x[z])==null?void 0:c.name.join(" - ")}},{"":i("NewBranchModal.pleaseSelect")}))(a(va())),O=[{type:"select",label:i("NewBranchModal.where"),value:e,options:{new:i("NewBranchModal.new"),ext:i("NewBranchModal.ext")},disabledOptions:f===Q.SHMetro?[]:["ext"],onChange:Y=>F(Y),minW:"full"},{type:"select",label:i("NewBranchModal.from"),value:t,options:j,disabledOptions:[""],onChange:Y=>C(Y),isInvalid:!!l},{type:"select",label:i("NewBranchModal.to"),value:_,options:j,disabledOptions:[""],onChange:Y=>B(Y),isInvalid:!!h},{type:"select",label:i("NewBranchModal.position"),value:u,options:{upper:i("NewBranchModal.upper"),lower:i("NewBranchModal.lower")},onChange:Y=>d(Y),minW:"full",hidden:e!=="new"||f===Q.SHMetro}],F=Y=>{r(Y),o(""),y(""),v(""),b("")},C=Y=>{o(Y),v(""),Y&&_&&b(a(nn(Y,_)))},B=Y=>{y(Y),b(""),t&&Y&&v(a(nn(t,Y)))},P=()=>{let Y;e==="ext"?Y=a(rt("new",t,_,"lower")):f===Q.SHMetro?Y=a(rt("new",t,_,"upper")):Y=a(rt("new",t,_,u)),Y&&(n(),he.event(ye.ADD_BRANCH,{style:f,where:e}))},N=!!(!t||!_||l||h);return m.jsxs(Me,{isOpen:g,onClose:n,children:[m.jsx(Ne,{}),m.jsxs(He,{children:[m.jsx(We,{children:i("NewBranchModal.title")}),m.jsx(Ue,{}),m.jsx(Ze,{children:m.jsx(ge,{fields:O})}),m.jsx(Je,{children:m.jsx(de,{colorScheme:"primary",title:N?l||h:i("Confirm"),onClick:P,isDisabled:N,children:i("Confirm")})})]})]})}const Ea=K.lazy(()=>E(()=>import("./station-ag-grid-13cd34d6.js"),["assets/station-ag-grid-13cd34d6.js","assets/chakra-f6b4d908.js","assets/react-f83802c2.js","assets/index-3cc89a45.js","assets/index-d22c1e14.css","assets/ag-grid-9b63b9e1.js","assets/param-updater-utils-d614355c.js"]));function xa(){const{t:p}=le(),g=fe(),[n,i]=K.useState(!1),[a,e]=K.useState(!1),r=ee(u=>u.app.selectedBranch),{style:t,stn_list:o}=ee(u=>u.param),_=ee(u=>u.helper.branches),y=()=>{g(Ke(Ve.BRANCH))};return m.jsxs(we,{flex:1,overflow:"hidden",children:[m.jsxs(Pt,{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden",index:r,onChange:u=>g(Xr(u)),children:[m.jsxs(It,{children:[_.map((u,d)=>d===0?m.jsx(Ge,{children:p("GridTabs.main")},d):t!==Q.SHMetro||!Xe(u,o)?m.jsx(Ge,{children:p("GridTabs.branch")+" "+d},d):m.jsx(Ge,{children:p("GridTabs.external")+" "+d},d)),m.jsx(Le,{size:"sm",variant:"ghost",alignSelf:"center","aria-label":"New branch",onClick:()=>e(!0),icon:m.jsx(Ce,{})}),m.jsxs(Ie,{marginLeft:"auto",marginRight:1,children:[m.jsx(de,{variant:"outline",size:"xs",leftIcon:m.jsx(Ce,{}),onClick:()=>i(!0),children:p("GridTabs.addStation")}),m.jsx(de,{size:"xs",colorScheme:"primary",onClick:y,children:p("GridTabs.editLine")})]})]}),m.jsx(Ct,{flex:1,overflowY:"auto",children:_.map((u,d)=>m.jsx(ut,{padding:0,h:"100%",position:"relative",children:m.jsx(an,{suspenseFallback:m.jsx(ft,{isIndeterminate:!0}),children:m.jsx(Ea,{branchIndex:d})})},d))})]}),m.jsx(ya,{isOpen:n,onClose:()=>i(!1)}),m.jsx(ba,{isOpen:a,onClose:()=>e(!1)})]})}function wa(){const p=fe(),g=ee(i=>i.app.globalAlerts),n=i=>{he.isStandaloneWindow()?window.open("/".concat(i),"_blank"):he.openApp(i)};return m.jsx(m.Fragment,{children:Object.entries(g).map(([i,{message:a,url:e,linkedApp:r}])=>m.jsxs(pt,{status:i,variant:"solid",size:"xs",pl:3,pr:1,py:0,children:[m.jsx(_t,{}),r?m.jsx($e,{onClick:()=>n(r),children:a}):e?m.jsx($e,{href:e,target:"_blank",children:a}):a,m.jsx(Nn,{ml:"auto",onClick:()=>p(Qr(i))})]},i))})}function Sa(){const{t:p}=le(),g=ee(a=>a.app.isLoading),[n,i]=K.useState(!1);return K.useEffect(()=>{he.isStandaloneWindow()&&!window.localStorage.getItem(ze.DO_NOT_SHOW_RMT_MSG)&&i(!0)},[]),m.jsxs(fn,{children:[g&&m.jsx(ft,{isIndeterminate:g<0,value:g>=0?g:void 0}),m.jsx(ma,{}),n&&m.jsxs(pt,{status:"info",variant:"solid",size:"xs",pl:3,pr:1,py:1,children:[m.jsx(_t,{}),m.jsxs(st,{sx:{"& a, button":{fontWeight:"bold",textDecoration:"underline"}},children:[p("Try out")," ",m.jsx($e,{href:"/?app=rmg",isExternal:!0,children:p("Rail Map Toolkit")})," ",p("now and enjoy an even better rail map design experience!")," ",m.jsx($e,{as:"button",ml:"auto",onClick:()=>i(!1),children:p("Close")})," | ",m.jsx($e,{as:"button",onClick:()=>{i(!1),window.localStorage.setItem(ze.DO_NOT_SHOW_RMT_MSG,"true")},children:p("Don't show me again")})]})]}),m.jsx(wa,{}),m.jsxs(Re,{flex:1,overflow:"hidden",position:"relative",children:[m.jsxs(Re,{as:"section",direction:"column",flex:1,ml:1,mr:1,overflow:"hidden",children:[m.jsx(we,{children:m.jsx(_s,{})}),m.jsx(xa,{})]}),m.jsx(ta,{})]}),m.jsx("canvas",{style:{display:"none"}})]})}const jn=[{id:"basic",name:{en:"Basic",ko:"기본","zh-Hans":"基本","zh-Hant":"基本"}},{id:"mtr",name:{en:"MTR",ko:"홍콩 지하철","zh-Hans":"港铁","zh-Hant":"港鐵"}},{id:"gzmtr",name:{en:"Guangzhou Metro",ko:"광저우 지하철","zh-Hans":"广州地铁","zh-Hant":"廣州地鐵"}},{id:"shmetro",name:{en:"Shanghai Metro",ko:"상해 지하철","zh-Hans":"上海地铁","zh-Hant":"上海地鐵"}}],ja=Object.freeze(Object.defineProperty({__proto__:null,default:jn},Symbol.toStringTag,{value:"Module"})),An=[{filename:"default",name:{en:"Default",ko:"묵인","zh-Hans":"默认","zh-Hant":"預設"},style:"mtr"},{filename:"coline",name:{en:"Track Share",ko:"공용선","zh-Hans":"共线","zh-Hant":"共綫"},style:"shmetro"},{filename:"loop",name:{en:"Loop Line",ko:"순환선","zh-Hans":"环线","zh-Hant":"環綫"},style:"shmetro"}],kn=[{filename:"twl",name:{en:"Tsuen Wan Line",ko:"췬완선","zh-Hans":"荃湾线","zh-Hant":"荃灣綫"},uploadBy:"wongchito",style:"mtr"},{filename:"ktl",name:{en:"Kwun Tong Line",ko:"군통선","zh-Hans":"观塘线","zh-Hant":"觀塘綫"},uploadBy:"wongchito",style:"mtr"},{filename:"isl",name:{en:"Island Line",ko:"공도선","zh-Hans":"港岛线","zh-Hant":"港島綫"},uploadBy:"wongchito",style:"mtr"},{filename:"tkl",name:{en:"Tseung Kwan O Line",ko:"정관오선","zh-Hans":"将军澳线","zh-Hant":"將軍澳綫"},uploadBy:"wongchito",style:"mtr"},{filename:"tcl",name:{en:"Tung Chung Line",ko:"둥충선","zh-Hans":"东涌线","zh-Hant":"東涌綫"},uploadBy:"wongchito",style:"mtr"},{filename:"sile",name:{en:"South Island Line",ko:"남공도선","zh-Hans":"南港岛线","zh-Hant":"南港島綫"},uploadBy:"wongchito",style:"mtr"},{filename:"drl",name:{en:"Disneyland Resort Line",ko:"디즈니선","zh-Hans":"迪士尼线","zh-Hant":"迪士尼綫"},uploadBy:"wongchito",style:"mtr"},{filename:"ael",name:{en:"Airport Express",ko:"홍콩 공항철도","zh-Hans":"机场快线","zh-Hant":"機場快綫"},uploadBy:"wongchito",style:"mtr"},{filename:"eal",name:{en:"East Rail Line",ko:"둥팃선","zh-Hans":"东铁线","zh-Hant":"東鐵綫"},uploadBy:"wongchito",style:"mtr"},{filename:"tml",name:{en:"Tuen Ma Line","zh-Hans":"屯马线","zh-Hant":"屯馬綫",ko:"튄마선"},uploadBy:"wongchito",style:"mtr"}],On=[{filename:"gz1",name:{en:"Line 1",ko:"1호선","zh-Hans":"1号线","zh-Hant":"1號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz2",name:{en:"Line 2",ko:"2호선","zh-Hans":"2号线","zh-Hant":"2號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz3",name:{en:"Line 3",ko:"3호선","zh-Hans":"3号线","zh-Hant":"3號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz4",name:{en:"Line 4",ko:"4호선","zh-Hans":"4号线","zh-Hant":"4號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz5",name:{en:"Line 5",ko:"5호선","zh-Hans":"5号线","zh-Hant":"5號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz6",name:{en:"Line 6",ko:"6호선","zh-Hans":"6号线","zh-Hant":"6號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz7",name:{en:"Line 7",ko:"7호선","zh-Hans":"7号线","zh-Hant":"7號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz8",name:{en:"Line 8",ko:"8호선","zh-Hans":"8号线","zh-Hant":"8號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz9",name:{en:"Line 9",ko:"9호선","zh-Hans":"9号线","zh-Hant":"9號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz13",name:{en:"Line 13",ko:"13호선","zh-Hans":"13号线","zh-Hant":"13號線"},uploadBy:"Dingdong2334",style:"gzmtr"},{filename:"gz14",name:{en:"Line 14",ko:"14호선","zh-Hans":"14号线","zh-Hant":"14號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz18",name:{en:"Line 18","zh-Hans":"18号线","zh-Hant":"18號線",ko:"18호선"},uploadBy:"Dingdong2334",style:"gzmtr"},{filename:"gz21",name:{en:"Line 21",ko:"21호선","zh-Hans":"21号线","zh-Hant":"21號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz22",name:{en:"Line 22",ko:"22호선","zh-Hans":"22号线","zh-Hant":"22號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gf",name:{en:"Guangfo Line",ko:"광포 지하철","zh-Hans":"广佛线","zh-Hant":"廣佛線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"apm",name:{en:"APM Line",ko:"주장신청 자동운송 체계","zh-Hans":"APM线","zh-Hant":"APM線"},uploadBy:"Dingdong2334",style:"gzmtr"},{filename:"thz1",name:{en:"Haizhu Tram Line 1",ko:"하이주 전차 1호선","zh-Hans":"海珠有轨1号线","zh-Hant":"海珠有軌1號線"},uploadBy:"clearng-kly",style:"gzmtr"},{filename:"thp1",name:{en:"Huangpu Tram Line 1",ko:"황푸 전차 1호선","zh-Hans":"黄埔有轨1号线","zh-Hant":"黃埔有軌1號線"},uploadBy:"clearng-kly",style:"gzmtr"}],Rn=[{filename:"sh1",name:{en:"Line 1",ko:"1호선","zh-Hans":"1号线","zh-Hant":"1號線"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh2",name:{en:"Line 2",ko:"2호선","zh-Hans":"2号线","zh-Hant":"2號線"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh3",name:{en:"Line 3 (External)",ko:"3호선(공선)","zh-Hans":"3号线 （共线）","zh-Hant":"3號線 （共線）"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh4",name:{en:"Line 4 (Loop)",ko:"4호선(순환선)","zh-Hans":"4号线 （环线）","zh-Hant":"4號線 （環線）"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh3&4",name:{en:"Line 3 and 4 (External with Loop)",ko:"3호선과 4호선(공선과 순환선)","zh-Hans":"3与4号线 （共线与环线）","zh-Hant":"3與4號線 （共線與環線）"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh5",name:{en:"Line 5",ko:"5호선","zh-Hans":"5号线","zh-Hant":"5號線"},uploadBy:"Tianxiu11111",style:"shmetro"},{filename:"sh6",name:{en:"Line 6",ko:"6호선","zh-Hans":"6号线","zh-Hant":"6號線"},uploadBy:"Thomastzc",style:"shmetro"},{filename:"sh7",name:{en:"Line 7",ko:"7호선","zh-Hans":"7号线","zh-Hant":"7號線"},uploadBy:"Thomastzc",style:"shmetro"},{filename:"sh8",name:{en:"Line 8",ko:"8호선","zh-Hans":"8号线","zh-Hant":"8號線"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh9",name:{en:"Line 9",ko:"9호선","zh-Hans":"9号线","zh-Hant":"9號線"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh10",name:{en:"Line 10 (Branch)",ko:"10호선(지선)","zh-Hans":"10号线 （支线）","zh-Hant":"10號線 （支線）"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh11",name:{en:"Line 11",ko:"11호선","zh-Hans":"11号线","zh-Hant":"11號線"},uploadBy:"Tianxiu11111",style:"shmetro"},{filename:"sh12",name:{en:"Line 12",ko:"12호선","zh-Hans":"12号线","zh-Hant":"12號線"},uploadBy:"Andy1782010",style:"shmetro"},{filename:"sh13",name:{en:"Line 13",ko:"13호선","zh-Hans":"13号线","zh-Hant":"13號線"},uploadBy:"Andy1782010",style:"shmetro"},{filename:"sh14",name:{en:"Line 14",ko:"14호선","zh-Hans":"14号线","zh-Hant":"14號線"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh15",name:{en:"Line 15",ko:"15호선","zh-Hans":"15号线","zh-Hant":"15號線"},uploadBy:"Thomastzc",style:"shmetro"},{filename:"sh16",name:{en:"Line 16 (Express)",ko:"16호선(급행)","zh-Hans":"16号线 （快车）","zh-Hant":"16號線 （快車）"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh17",name:{en:"Line 17",ko:"17호선","zh-Hans":"17号线","zh-Hant":"17號線"},uploadBy:"Thomastzc",style:"shmetro"},{filename:"sh18",name:{en:"Line 18",ko:"18호선","zh-Hans":"18号线","zh-Hant":"18號線"},uploadBy:"Tianxiu11111",style:"shmetro"}],Tn={basic:An,mtr:kn,gzmtr:On,shmetro:Rn},Aa=Object.freeze(Object.defineProperty({__proto__:null,basic:An,default:Tn,gzmtr:On,mtr:kn,shmetro:Rn},Symbol.toStringTag,{value:"Module"}));var rn;(function(p){p.MTR="mtr",p.GZMTR="gzmtr",p.SHMetro="shmetro"})(rn||(rn={}));const wt=jn,ka=Tn,Oa=async()=>{try{return await(await fetch("/rmg-templates/resources/other-company-config.json")).json()}catch(p){return console.error("Failed to fetch non-core company config",p),[]}},Ra=async p=>{try{return await(await fetch("/rmg-templates/resources/templates/"+p+"/00config.json")).json()}catch(g){return console.error("Failed to fetch template list for "+p,g),[]}},Ta=async(p,g)=>await(await fetch("/rmg-templates/resources/templates/".concat(p,"/").concat(g,".json"))).json(),Pa=Object.assign({"/node_modules/@railmapgen/rmg-templates-resources/templates/basic/coline.json":()=>E(()=>import("./coline-f8f9d6ad.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/basic/default.json":()=>E(()=>import("./default-8638e856.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/basic/loop.json":()=>E(()=>import("./loop-2739a486.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/company-config.json":()=>E(()=>Promise.resolve().then(()=>ja),void 0),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/apm.json":()=>E(()=>import("./apm-6e72c810.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gf.json":()=>E(()=>import("./gf-18503731.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz1.json":()=>E(()=>import("./gz1-75ca50af.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz13.json":()=>E(()=>import("./gz13-05ce4bc5.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz14.json":()=>E(()=>import("./gz14-0d29f52b.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz18.json":()=>E(()=>import("./gz18-e8d4e789.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz2.json":()=>E(()=>import("./gz2-4c7b72d4.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz21.json":()=>E(()=>import("./gz21-fde5cfda.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz22.json":()=>E(()=>import("./gz22-68732269.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz3.json":()=>E(()=>import("./gz3-6bbd1d1a.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz4.json":()=>E(()=>import("./gz4-cda087f7.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz5.json":()=>E(()=>import("./gz5-9cfad33f.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz6.json":()=>E(()=>import("./gz6-ef051d83.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz7.json":()=>E(()=>import("./gz7-d485fe1c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz8.json":()=>E(()=>import("./gz8-9bfb0da0.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz9.json":()=>E(()=>import("./gz9-d4b7ed92.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/thp1.json":()=>E(()=>import("./thp1-a903ecca.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/thz1.json":()=>E(()=>import("./thz1-1ae6befb.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/ael.json":()=>E(()=>import("./ael-4597497c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/drl.json":()=>E(()=>import("./drl-31b14420.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/eal.json":()=>E(()=>import("./eal-34089efb.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/isl.json":()=>E(()=>import("./isl-f1ae743f.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/ktl.json":()=>E(()=>import("./ktl-a9936c0c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/sile.json":()=>E(()=>import("./sile-9f2ad194.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/tcl.json":()=>E(()=>import("./tcl-820e4d78.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/tkl.json":()=>E(()=>import("./tkl-8050f7fc.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/tml.json":()=>E(()=>import("./tml-b1f1459e.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/twl.json":()=>E(()=>import("./twl-cfa1235a.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh1.json":()=>E(()=>import("./sh1-16505f5a.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh10.json":()=>E(()=>import("./sh10-20d49595.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh11.json":()=>E(()=>import("./sh11-f590ba3c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh12.json":()=>E(()=>import("./sh12-55a7651d.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh13.json":()=>E(()=>import("./sh13-f5ab141e.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh14.json":()=>E(()=>import("./sh14-e4f19564.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh15.json":()=>E(()=>import("./sh15-450e891e.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh16.json":()=>E(()=>import("./sh16-af851e67.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh17.json":()=>E(()=>import("./sh17-7a345c0f.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh18.json":()=>E(()=>import("./sh18-57e7f645.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh2.json":()=>E(()=>import("./sh2-5e30f125.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh3&4.json":()=>E(()=>import("./sh3_4-e404007d.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh3.json":()=>E(()=>import("./sh3-d2f3bfdd.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh4.json":()=>E(()=>import("./sh4-f52274b7.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh5.json":()=>E(()=>import("./sh5-4c805b99.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh6.json":()=>E(()=>import("./sh6-9ebc745d.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh7.json":()=>E(()=>import("./sh7-8f088603.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh8.json":()=>E(()=>import("./sh8-87130c53.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh9.json":()=>E(()=>import("./sh9-7e967e6c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/template-configs.json":()=>E(()=>Promise.resolve().then(()=>Aa),void 0)});function Ia(p){const{isOpen:g,onClose:n,onOpenParam:i}=p,{t:a}=le(),e=fe(),[r,t]=K.useState(wt),[o,_]=K.useState(ka);K.useEffect(()=>{Oa().then(u=>{t([...wt,...u]);for(const d of u)Ra(d.id).then(l=>{_(v=>({...v,[d.id]:l}))})})},[]);const y=async(u,d,l)=>{e(ts());const v=r.find(f=>f.id===u),h=v?bt(v.name):u,b=wt.some(f=>f.id===u);try{const f=b?(await Pa["/node_modules/@railmapgen/rmg-templates-resources/templates/".concat(u,"/").concat(d,".json")]()).default:await Ta(u,d);i(f,[h,l].join(" "))}catch(f){console.error("Failed to fetch template",f)}he.event(ye.OPEN_TEMPLATE,{company:u,filename:d}),e(pn())};return m.jsxs(Me,{isOpen:g,onClose:n,children:[m.jsx(Ne,{}),m.jsxs(He,{children:[m.jsx(We,{children:a("TemplateModal.title")}),m.jsx(Ue,{}),m.jsx(Ze,{children:m.jsxs(Pt,{isLazy:!0,size:"sm",orientation:"vertical",colorScheme:"primary",children:[m.jsx(It,{maxW:150,children:r.map(u=>m.jsx(Ge,{children:bt(u.name)},u.id))}),m.jsx(Ct,{maxW:250,children:Object.entries(o).sort((u,d)=>r.findIndex(l=>l.id===u[0])-r.findIndex(l=>l.id===d[0])).map(([u,d])=>m.jsx(ut,{as:Re,flexDirection:"column",py:0,px:1,children:d.map(l=>{var h;const v=bt(l.name);return m.jsx(es,{variant:"ghost",size:"sm",primaryText:v,secondaryText:a("by")+": "+((h=l.uploadBy)!=null?h:"Unknown"),onClick:()=>y(u,l.filename,v)},l.filename)})},u))})]})})]})]})}const Ca={flexWrap:"wrap",flex:"1 1 0%",minW:120,"& button":{w:"100%",m:1}};function La(p){const{selectedParam:g,disableNew:n,onError:i}=p,{t:a}=le(),[,e]=gt(),[r,t]=K.useState(!1),o=K.useRef(null),_=K.useRef(null);K.useEffect(()=>{var v;g&&((v=_.current)==null||v.focus())},[g]);const y=()=>{const v=fa(Q.MTR,he.getLanguage()),h=Et(JSON.stringify(v));e({project:h}),he.event(ye.NEW_PARAM,{})},u=(v,h)=>{const b=Et(JSON.stringify(v),h);e({project:b})},d=async v=>{var b;const h=(b=v.target.files)==null?void 0:b[0];console.log("handleImportProject():: received file",h);try{if(!h)i(a("OpenActions.unknownError"));else if(h.type!=="application/json")i(a("OpenActions.invalidType"));else{const f=await ls(h),x=Et(f);e({project:x}),he.event(ye.UPLOAD_PARAM,{})}}catch(f){i(a("OpenActions.unknownError")),console.error("handleImportProject():: Unknown error occurred while parsing the uploaded file",f)}v.target.value=""},l=()=>{g&&(e({project:g}),he.event(ye.OPEN_PARAM,{}))};return m.jsxs(Re,{sx:Ca,children:[m.jsx(de,{leftIcon:m.jsx(Ce,{}),onClick:y,isDisabled:n,children:a("Blank project")}),m.jsx(de,{leftIcon:m.jsx(ns,{}),onClick:()=>t(!0),isDisabled:n,children:a("Open template")}),m.jsx(de,{leftIcon:m.jsx(rs,{}),onClick:()=>{var v;return(v=o.current)==null?void 0:v.click()},isDisabled:n,children:a("Import project")}),m.jsx(de,{ref:_,colorScheme:"primary",leftIcon:m.jsx(ss,{}),onClick:l,isDisabled:g===void 0,children:a("Open selected")}),m.jsx("input",{ref:o,type:"file",accept:".json",hidden:!0,onChange:d,"data-testid":"file-upload"}),m.jsx(Ia,{isOpen:r,onClose:()=>t(!1),onOpenParam:u})]})}const Da={flexDirection:"column",p:2,h3:{m:2},"& > div":{m:2,flexWrap:"wrap",flexDirection:{base:"column",md:"row"}}};function za(p){const{downloading:g}=p,{t:n}=le(),[i]=gt(),a=i.get("project"),[e,r]=K.useState([]),[t,o]=K.useState(),_=K.useRef(null),y=sn();K.useEffect(()=>{r(xt())},[g]),Hn({ref:_,handler:()=>o(void 0)});const u=v=>{const{id:h,name:b,lastModified:f}=v;h&&(window.localStorage.setItem(ze.PARAM_CONFIG_BY_ID+h,JSON.stringify({name:b,lastModified:f})),o(void 0),r(xt()),he.event(ye.UPDATE_PARAM_CONFIG,{}))},d=v=>{window.localStorage.removeItem(ze.PARAM_BY_ID+v),window.localStorage.removeItem(ze.PARAM_CONFIG_BY_ID+v),o(void 0),r(xt()),he.event(ye.REMOVE_PARAM,{})},l=v=>{y({description:v,status:"error",duration:1e4,isClosable:!0})};return m.jsxs(fn,{justifyContent:"center",children:[a&&m.jsx(ft,{isIndeterminate:!0}),m.jsx(Wn,{children:m.jsxs(Fe,{sx:Da,children:[m.jsx(Ee,{as:"h3",size:"lg",children:n("Saved projects")}),m.jsxs(Re,{ref:_,children:[m.jsx(cs,{paramRegistry:e,downloading:g,selectedParam:t,onParamSelect:o,onParamRemove:d,onParamUpdate:u}),m.jsx(La,{selectedParam:t,disableNew:e.length>=10,onError:l})]})]})})]})}const Fa=p=>g=>{let n={id:p};const i=window.localStorage.getItem(ze.PARAM_CONFIG_BY_ID+p);i===null?console.warn("Config for paramID=".concat(p," does not exist in localStorage")):n={...n,...JSON.parse(i)};try{const a=window.localStorage.getItem(ze.PARAM_BY_ID+p);if(a===null)return console.warn("Param ID=".concat(p," does not exist in localStorage")),!1;{const e=ds(JSON.parse(a));return g(_n(n)),g(as(e)),!0}}catch(a){return console.warn("Failed to parse param.",a),!1}};function Ba(){const{t:p}=le(),g=fe(),{paramConfig:n}=ee(d=>d.app),[i,a]=gt(),e=i.get("project"),r=i.get("external"),[t,o]=K.useState(!1),[_,y]=K.useState(),u=sn();return K.useEffect(()=>{if(console.log("searchParam: project=".concat(e,", external=").concat(r)),e&&r)console.warn("AppRouter:: Both param ID and external URL are provided. External URL will be ignored."),a({project:e});else if(e)u.closeAll(),e===(n==null?void 0:n.id)?(console.log("AppRouter:: Store param ID matches URL param ID. Rendering app view..."),o(!0)):(console.log("AppRouter:: Loading app view for param (ID=".concat(e,")...")),g(Fa(e))?o(!0):(console.log("AppRouter:: Failed to read param (ID=".concat(e,"). Rendering param selector view...")),u({description:p("Project selected is invalid or corrupted."),status:"error",duration:1e4,isClosable:!0}),a({})));else if(r){console.log("AppRouter:: External project URl is provided. Downloading project...");const d=decodeURIComponent(r);y(d),is(d).then(l=>{l?a({project:l}):(console.log("AppRouter:: Failed to download param from ".concat(d,". Rendering param selector view...")),u({description:p("External URL cannot be opened."),status:"error",duration:1e4,isClosable:!0}),a({})),y(void 0)})}else console.log("AppRouter:: No URL param ID or external URL provided. Rendering param selector view..."),o(!1)},[e,r]),t?m.jsx(Sa,{}):m.jsx(za,{downloading:_})}const Ua=Object.freeze(Object.defineProperty({__proto__:null,default:Ba},Symbol.toStringTag,{value:"Module"}));export{us as R,Ua as a,Wa as g,Xe as i};
