{"version":3,"file":"static/js/AppRoot.ec914499.chunk.js","mappings":"oFAAA,IAAIA,EAAM,CACT,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,IAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,IACA,KAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,kDAAmD,CAClD,MACA,MAED,kDAAmD,CAClD,MACA,MAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,CACP,IAGD,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B,OAAOR,EAAoBK,EAAEG,EAAI,IAAIJ,MAAK,WACzC,OAAOJ,EAAoBU,EAAED,EAAI,GAClC,GACD,CACAX,EAAoBa,KAAO,WAAa,OAAOC,OAAOD,KAAKd,EAAM,EACjEC,EAAoBW,GAAK,MACzBI,EAAOC,QAAUhB,C,wBCtKjB,IAAID,EAAM,CACT,iBAAkB,CACjB,MACA,MAED,cAAe,CACd,MACA,MAED,YAAa,CACZ,MACA,MAED,iBAAkB,CACjB,MACA,MAED,eAAgB,CACf,MACA,KAED,cAAe,CACd,MACA,MAED,cAAe,CACd,MACA,MAED,iBAAkB,CACjB,MACA,MAED,gBAAiB,CAChB,MACA,MAED,aAAc,CACb,MACA,MAED,gBAAiB,CAChB,MACA,MAED,eAAgB,CACf,MACA,MAED,iBAAkB,CACjB,MACA,MAED,aAAc,CACb,MACA,MAED,cAAe,CACd,MACA,MAED,aAAc,CACb,MACA,KAED,gBAAiB,CAChB,MACA,MAED,gBAAiB,CAChB,MACA,MAED,iBAAkB,CACjB,MACA,MAED,iBAAkB,CACjB,MACA,MAED,cAAe,CACd,MACA,MAED,iBAAkB,CACjB,MACA,MAED,eAAgB,CACf,MACA,MAED,kBAAmB,CAClB,MACA,MAED,mBAAoB,CACnB,MACA,IAED,iBAAkB,CACjB,MACA,MAED,gBAAiB,CAChB,MACA,KAED,aAAc,CACb,MACA,MAED,cAAe,CACd,KACA,MAED,iBAAkB,CACjB,MACA,MAED,gBAAiB,CAChB,MACA,MAED,gBAAiB,CAChB,MACA,KAED,aAAc,CACb,KACA,MAED,cAAe,CACd,MACA,MAED,iBAAkB,CACjB,MACA,MAED,mBAAoB,CACnB,MACA,MAED,eAAgB,CACf,MACA,MAED,YAAa,CACZ,MACA,MAED,cAAe,CACd,MACA,KAED,cAAe,CACd,MACA,MAED,aAAc,CACb,MACA,MAED,cAAe,CACd,MACA,MAED,aAAc,CACb,MACA,MAED,gBAAiB,CAChB,MACA,MAED,cAAe,CACd,MACA,MAED,eAAgB,CACf,KACA,MAED,cAAe,CACd,MACA,MAED,iBAAkB,CACjB,MACA,MAED,aAAc,CACb,MACA,MAED,YAAa,CACZ,KACA,KAED,aAAc,CACb,MACA,MAED,cAAe,CACd,MACA,MAED,aAAc,CACb,MACA,MAED,eAAgB,CACf,MACA,KAED,iBAAkB,CACjB,MACA,MAED,cAAe,CACd,KACA,MAED,oBAAqB,CACpB,MACA,MAED,sBAAuB,CACtB,MACA,MAED,gBAAiB,CAChB,MACA,MAED,gBAAiB,CAChB,MACA,MAED,aAAc,CACb,MACA,MAED,gBAAiB,CAChB,MACA,MAED,gBAAiB,CAChB,MACA,MAED,gBAAiB,CAChB,MACA,GAED,gBAAiB,CAChB,MACA,MAED,iBAAkB,CACjB,MACA,MAED,iBAAkB,CACjB,MACA,MAED,cAAe,CACd,MACA,MAED,gBAAiB,CAChB,MACA,MAED,cAAe,CACd,MACA,KAED,cAAe,CACd,MACA,MAED,eAAgB,CACf,MACA,MAED,aAAc,CACb,MACA,MAED,eAAgB,CACf,MACA,MAED,mBAAoB,CACnB,KACA,MAED,cAAe,CACd,MACA,MAED,cAAe,CACd,KACA,MAED,aAAc,CACb,MACA,MAED,YAAa,CACZ,KACA,MAED,cAAe,CACd,MACA,MAED,YAAa,CACZ,MACA,MAED,gBAAiB,CAChB,IACA,MAED,iBAAkB,CACjB,MACA,OAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,CACP,IAGD,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B,OAAOR,EAAoBK,EAAEG,EAAI,IAAIJ,MAAK,WACzC,OAAOJ,EAAoBS,EAC5B,GACD,CACAX,EAAoBa,KAAO,WAAa,OAAOC,OAAOD,KAAKd,EAAM,EACjEC,EAAoBW,GAAK,MACzBI,EAAOC,QAAUhB,C,wBC9VjB,IAAID,EAAM,CACT,sBAAuB,CACtB,MACA,MAED,uBAAwB,CACvB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,sBAAuB,CACtB,MACA,MAED,uBAAwB,CACvB,MACA,MAED,uBAAwB,CACvB,KACA,MAED,uBAAwB,CACvB,MACA,MAED,uBAAwB,CACvB,MACA,MAED,uBAAwB,CACvB,MACA,MAED,uBAAwB,CACvB,MACA,MAED,sBAAuB,CACtB,MACA,MAED,sBAAuB,CACtB,MACA,MAED,sBAAuB,CACtB,MACA,MAED,sBAAuB,CACtB,MACA,MAED,sBAAuB,CACtB,MACA,MAED,sBAAuB,CACtB,MACA,MAED,sBAAuB,CACtB,MACA,MAED,sBAAuB,CACtB,MACA,MAED,sBAAuB,CACtB,MACA,MAED,sBAAuB,CACtB,MACA,MAED,sBAAuB,CACtB,GACA,MAED,sBAAuB,CACtB,MACA,MAED,wBAAyB,CACxB,OAED,oBAAqB,CACpB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,mBAAoB,CACnB,MACA,MAED,kBAAmB,CAClB,MACA,MAED,mBAAoB,CACnB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,MACA,MAED,mBAAoB,CACnB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,mBAAoB,CACnB,MACA,MAED,mBAAoB,CACnB,MACA,MAED,mBAAoB,CACnB,MACA,MAED,mBAAoB,CACnB,MACA,MAED,mBAAoB,CACnB,MACA,MAED,mBAAoB,CACnB,MACA,MAED,mBAAoB,CACnB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,oBAAqB,CACpB,MACA,MAED,uBAAwB,CACvB,MACA,KAED,uBAAwB,CACvB,KACA,MAED,uBAAwB,CACvB,MACA,MAED,2BAA4B,CAC3B,MACA,MAED,2BAA4B,CAC3B,MACA,MAED,2BAA4B,CAC3B,IACA,MAED,2BAA4B,CAC3B,MACA,MAED,2BAA4B,CAC3B,MACA,MAED,2BAA4B,CAC3B,MACA,MAED,8BAA+B,CAC9B,MACA,KAED,6BAA8B,CAC7B,MACA,MAED,iCAAkC,CACjC,MACA,MAED,kCAAmC,CAClC,MACA,MAED,6BAA8B,CAC7B,MACA,MAED,mBAAoB,CACnB,KACA,MAED,iBAAkB,CACjB,MACA,MAED,iBAAkB,CACjB,MACA,MAED,iBAAkB,CACjB,MACA,MAED,iBAAkB,CACjB,KACA,MAED,iBAAkB,CACjB,KACA,MAED,kBAAmB,CAClB,MACA,MAED,iBAAkB,CACjB,MACA,KAED,iBAAkB,CACjB,MACA,MAED,iBAAkB,CACjB,MACA,MAED,iBAAkB,CACjB,MACA,KAED,qBAAsB,CACrB,MACA,KAED,sBAAuB,CACtB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,sBAAuB,CACtB,MACA,MAED,sBAAuB,CACtB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,2BAA4B,CAC3B,KACA,MAED,4BAA6B,CAC5B,MACA,MAED,4BAA6B,CAC5B,MACA,MAED,4BAA6B,CAC5B,MACA,KAED,4BAA6B,CAC5B,MACA,MAED,4BAA6B,CAC5B,MACA,KAED,2BAA4B,CAC3B,MACA,MAED,2BAA4B,CAC3B,MACA,MAED,2BAA4B,CAC3B,MACA,MAED,2BAA4B,CAC3B,MACA,MAED,2BAA4B,CAC3B,MACA,KAED,2BAA4B,CAC3B,MACA,MAED,2BAA4B,CAC3B,MACA,KAED,qBAAsB,CACrB,MACA,MAED,sBAAuB,CACtB,MACA,MAED,sBAAuB,CACtB,MACA,MAED,sBAAuB,CACtB,MACA,KAED,sBAAuB,CACtB,MACA,MAED,sBAAuB,CACtB,MACA,MAED,sBAAuB,CACtB,MACA,MAED,sBAAuB,CACtB,MACA,MAED,sBAAuB,CACtB,KACA,IAED,sBAAuB,CACtB,MACA,MAED,qBAAsB,CACrB,KACA,MAED,uBAAwB,CACvB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,0BAA2B,CAC1B,OAED,4BAA6B,CAC5B,MACA,MAED,4BAA6B,CAC5B,MACA,MAED,4BAA6B,CAC5B,MACA,MAED,4BAA6B,CAC5B,MACA,MAED,qBAAsB,CACrB,MACA,MAED,sBAAuB,CACtB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,qBAAsB,CACrB,MACA,MAED,qBAAsB,CACrB,MACA,MAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,CACP,IAGD,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B,OAAON,QAAQa,IAAIP,EAAIQ,MAAM,GAAGnB,IAAIG,EAAoBK,IAAID,MAAK,WAChE,OAAOJ,EAAoBU,EAAED,EAAI,GAClC,GACD,CACAX,EAAoBa,KAAO,WAAa,OAAOC,OAAOD,KAAKd,EAAM,EACjEC,EAAoBW,GAAK,MACzBI,EAAOC,QAAUhB,C,uJC9fF,SAASmB,EAAWC,GAAyB,IAAD,EAC/CC,EAAmED,EAAnEC,KAAMC,EAA6DF,EAA7DE,MAAOC,EAAsDH,EAAtDG,SAAUC,EAA4CJ,EAA5CI,UAAWC,EAAiCL,EAAjCK,YAAaC,EAAoBN,EAApBM,MAAOC,EAAaP,EAAbO,SAU9D,OARAC,EAAAA,EAAAA,YAAU,WAGN,OAFCC,SAASC,eAAe,OAAST,GAA0BU,KACxDC,OAAA,kBAAoCX,EAApC,YAA4CC,EAA5C,QACG,WACFO,SAASC,eAAe,OAAST,GAA0BU,KAAO,EACtE,CACJ,GAAE,CAACT,KAGA,iBACIX,GAAIU,EACJY,MAAM,6BACNC,WAAW,+BACXC,OAAQX,EAAYC,EACpBW,QAAO,cAASb,EAAT,YAAqBC,GAC5Ba,0BAA0B,OAC1Bf,OAAK,eACA,kBAA2BC,EAAW,OADtC,SAEA,mBAA4BC,EAAY,OAFxC,SAGA,qBAA8BE,EAAM,KAHpC,SAIA,iBAA0BA,EAAM,IAJhC,GAPT,WAcI,iBACIf,GAAG,YACH2B,KAAK,QACLhB,MAAO,CAAEa,OAAQ,wBAAyBI,MAAO,2BAErD,SAAC,EAAAC,SAAD,CAAUC,UAAU,SAAC,IAAD,IAApB,SAAyCd,KACzC,iBACIhB,GAAG,gBACH2B,KAAK,OACLI,YAAa,EACbC,OAAO,OACPrB,MAAO,CAAEa,OAAQ,wBAAyBI,MAAO,4BAIhE,C,mEC7CKjB,EAAQ,CACVsB,cAAe,MACfC,UAAW,OACX,sBAAuB,CACnBC,QAAS,KACTC,OAAQ,QAEZ,UAAW,CACPC,KAAM,WACNC,OAAQ,oBAID,SAASC,IACpB,IAAMC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MAEjB,GAAsCC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMC,GAAV,IAAnDC,EAAR,EAAQA,aAAcnC,EAAtB,EAAsBA,YACtB,GAKIgC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,KAAV,IAJXC,EADd,EACIvC,SACYC,EAFhB,EAEIuC,WACOC,EAHX,EAGI1C,MACAI,EAJJ,EAIIA,MAGJ,GAAIyB,EAASc,WAAa,IAAMD,GAAYb,EAASc,WAAa,OAASD,EAAU,CACjF,IAAME,EAAYf,EAASc,SAASE,MAAM,KAAKjD,OAAO,GAAG,GACrDJ,OAAOsD,OAAOC,EAAAA,IAAUC,SAASJ,GAEjCX,GAASgB,EAAAA,EAAAA,IAASL,IAGlBb,EAASW,EAEhB,EAEDpC,EAAAA,EAAAA,YAAU,WACLC,SAASC,eAAe,aAAiCC,KACtDC,OAAA,wBAA0CgC,EAA1C,OACP,GAAE,CAACA,IAEJ,IAAMQ,EAAkB1D,OAAOD,KAAK4D,EAAWT,IAA4BU,QAAO,SAAAC,GAAM,MACnE,QAAjBf,GAAgCA,IAAiBe,CADmC,IAIxF,OACI,SAAC,KAAD,CAAMC,GAAItD,EAAV,SACKkD,EAAezE,KAAI,SAAA4E,GAAM,OACtB,SAAC,IAAD,CAEIrD,MAAO,CAAEuD,SAAU,IAAK1C,OAAQX,EAAYC,EAAaqD,UAAW,QAFxE,UAII,SAAC3D,EAAD,CACIE,KAAMsD,EACNrD,MAAO0C,EACPzC,SAAUuC,EAAUa,GACpBnD,UAAWA,EACXC,YAAaA,EACbC,MAAOA,EANX,SAQK+C,EAAWT,GAAUW,MAXrBA,EAASX,EAFI,KAmBrC,CAID,IAAMe,GAAaC,EAAAA,EAAAA,OAAK,kBAAM,+BAAN,IAClBC,GAAeD,EAAAA,EAAAA,OAAK,kBAAM,+BAAN,IAEpBE,GAAiBF,EAAAA,EAAAA,OAAK,kBAAM,+BAAN,IACtBG,GAAaH,EAAAA,EAAAA,OAAK,kBAAM,+BAAN,IAElBI,GAAqBJ,EAAAA,EAAAA,OACvB,kBAAM,+BAAN,IAEEK,GAAeL,EAAAA,EAAAA,OAAK,kBAAM,+BAAN,IACpBM,GAAiBN,EAAAA,EAAAA,OAAK,kBAAM,wDAAN,IACtBO,GAAgBP,EAAAA,EAAAA,OAAK,kBAAM,wDAAN,IAKrBP,GAA+D,eAChEJ,EAAAA,GAAAA,OADgE,eAE5DmB,EAAAA,GAAAA,OAAmB,SAACT,EAAD,MAFyC,SAG5DS,EAAAA,GAAAA,SAAqB,SAACP,EAAD,KAHuC,cAKhEZ,EAAAA,GAAAA,KALgE,eAM5DmB,EAAAA,GAAAA,aAAyB,SAACN,EAAD,MANmC,SAO5DM,EAAAA,GAAAA,SAAqB,SAACL,EAAD,KAPuC,cAShEd,EAAAA,GAAAA,SATgE,eAU5DmB,EAAAA,GAAAA,aAAyB,SAACJ,EAAD,MAVmC,SAW5DI,EAAAA,GAAAA,OAAmB,SAACH,EAAD,MAXyC,SAY5DG,EAAAA,GAAAA,SAAqB,SAACF,EAAD,MAZuC,SAa5DE,EAAAA,GAAAA,QAAoB,SAACD,EAAD,KAbwC,O,iCCzFtD,SAASE,IACpB,IAAQ7E,GAAM8E,EAAAA,EAAAA,KAAN9E,EACF2C,GAAWoC,EAAAA,EAAAA,MAEXC,GAAkBnC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMC,IAAIiC,eAAd,IAC7CC,QAAQC,IAAI,8BAA+BF,GAC3C,IAAMtE,GAAQmC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,MAAMvC,KAAhB,IACnC,GAAqCmC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,MAAMkC,SAASH,EAAzB,IAAlDI,EAAR,EAAQA,IAAKC,EAAb,EAAaA,KAAMC,EAAnB,EAAmBA,cAEbC,EAA2B,CAC7B,CACI9E,KAAM,QACN+E,MAAOxF,EAAE,6BACTyF,MAAOL,EACPM,YAAa,KACbC,SAAU,SAACF,GAAD,OAAmB9C,GAASiD,EAAAA,EAAAA,IAAiBZ,EAAiBS,GAA9D,EACVI,QAAS,CAACpC,EAAAA,GAAAA,OAAgBC,SAAShD,IAEvC,CACID,KAAM,QACN+E,MAAOxF,EAAE,gBACTyF,MAAOJ,EAAK,GACZM,SAAU,SAACF,GAAD,OAAmB9C,GAASmD,EAAAA,EAAAA,IAAkBd,EAAiB,CAACS,EAAOJ,EAAK,KAA5E,GAEd,CACI5E,KAAM,QACN+E,MAAOxF,EAAE,gBACTyF,MAAOJ,EAAK,GACZM,SAAU,SAACF,GAAD,OAAmB9C,GAASmD,EAAAA,EAAAA,IAAkBd,EAAiB,CAACK,EAAK,GAAII,IAAzE,GAEd,CACIhF,KAAM,QACN+E,MAAOxF,EAAE,qCACTyF,MAAOH,EAAgBA,EAAc,GAAK,GAC1CI,YAAa,4BACbC,SAAU,SAACF,GAAD,OACN9C,GAASoD,EAAAA,EAAAA,IAA2Bf,EAAiB,CAACS,EAAOH,EAAgBA,EAAc,GAAK,KAD1F,EAEVO,QAAS,CAACpC,EAAAA,GAAAA,OAAgBC,SAAShD,IAEvC,CACID,KAAM,QACN+E,MAAOxF,EAAE,qCACTyF,MAAOH,EAAgBA,EAAc,GAAK,GAC1CI,YAAa,aACbC,SAAU,SAACF,GAAD,OACN9C,GAASoD,EAAAA,EAAAA,IAA2Bf,EAAiB,CAACM,EAAgBA,EAAc,GAAK,GAAIG,IADvF,EAEVI,QAAS,CAACpC,EAAAA,GAAAA,OAAgBC,SAAShD,KAI3C,OACI,UAAC,KAAD,CAAKsF,EAAG,EAAR,WACI,SAAC,KAAD,CAASC,GAAG,KAAKC,KAAK,KAAtB,SACKlG,EAAE,kCAGP,SAAC,KAAD,CAAWuF,OAAQA,EAAQY,KAAM,QAG5C,C,uGC3Dc,SAASC,EAAa5F,GACjC,IAAQ6F,EAA6B7F,EAA7B6F,YAAaC,EAAgB9F,EAAhB8F,YAErB,GAAsBC,EAAAA,EAAAA,eAA6BC,GAAnD,eAAOC,EAAP,KAAYC,EAAZ,KAWA,OATA1F,EAAAA,EAAAA,YAAU,WACFsF,GACA,SAAO,KAA6CA,GAC/C5G,MAAK,SAAAS,GAAM,OAAIA,EAAOwG,OAAX,IACXjH,KAAKgH,GACLE,OAAM,SAAAC,GAAG,OAAI5B,QAAQ6B,MAAR,kCAAyCR,EAAzC,sBAA2DO,QAA3D,IAA2DA,OAA3D,EAA2DA,EAAKE,SAApE,GAErB,GAAE,CAACT,IAEGG,GAAM,SAAC,KAAD,CAAOA,IAAKA,EAAKO,IAAG,kBAAaX,GAAeY,EAAG,GAAIC,GAAI,KAAQ,uBACnF,CCXc,SAASC,EAAW3G,GAC/B,IAAQ4G,EAA6B5G,EAA7B4G,eAAgBzB,EAAanF,EAAbmF,SAEhB0B,GAASvC,EAAAA,EAAAA,KAATuC,KAEFC,EAAcF,EAAiBG,EAAAA,GAAAA,MAAc,SAAAC,GAAI,OAAIA,EAAKzH,KAAOqH,CAAhB,SAAkCZ,EAEnFiB,EAAe,SAACD,GAClB,OAAOH,EAAKK,UAAUvI,KAAI,SAAAwI,GAAG,OAAIH,EAAKnC,KAAKsC,EAAd,IAAoCC,MAAK,SAAAvC,GAAI,YAAamB,IAATnB,CAAJ,GAC7E,EA+BKwC,EAAON,EAAAA,GAAAA,QAAiBO,MAAK,SAACC,EAAGC,GACnC,OAAID,EAAEhI,KAAOkI,EAAAA,GAAAA,MACF,EACAD,EAAEjI,KAAOkI,EAAAA,GAAAA,OACR,EAEDR,EAAaM,GAAGG,cAAcT,EAAaO,GAAIX,EAAKK,UAAU,GAE5E,IAED,OACI,SAAC,KAAD,CACIG,KAAMA,EACNJ,aAAcA,EACdU,eA3Ce,SAACX,GAAqB,IAAD,IAClCY,EACe,OAAjBZ,EAAKa,SACL,CAACC,EAAAA,GAAAA,YAA0BA,EAAAA,GAAAA,WAAwB5E,SAAS2D,EAAKK,UAAU,IACzEa,EAAkB,CAAC,QAAS,SAAS7E,SAAS8E,UAAUC,UAGxDpD,EAAOgC,EAAKK,UAAUvI,KAAI,SAAAwI,GAAG,OAAIH,EAAKnC,KAAKsC,EAAd,IAAoCC,MAAK,SAAAvC,GAAI,YAAamB,IAATnB,CAAJ,IAC1EqD,EAAO,UAAGC,EAAAA,GAAAA,MAAiB,SAAAN,GAAO,OAAIA,EAAQtI,KAAOyH,EAAKa,OAAxB,WAA3B,aAAG,EAA0DK,QACpEE,EAAS,UAAGD,EAAAA,GAAAA,MAAiB,SAAAN,GAAO,OAAIA,EAAQtI,KAAOyH,EAAKa,OAAxB,WAA3B,aAAG,EAA0DO,UAE5E,OACI,gCACKR,GACG,+CACAG,GACA,SAACnC,EAAD,CAAcC,YAAamB,EAAKa,QAAS/B,YAAaoC,KAEtD,4BAAOE,EAAP,UAEHvD,IAGZ,EAqBOwD,UAnBU,SAACrB,EAAiBsB,GAChC,OAAO5I,OAAOsD,OAAOgE,EAAKnC,MAAM0D,MAAK,SAAA1D,GAAI,OAAIA,EAAK3B,SAASoF,EAAlB,GAC5C,EAkBOE,aAAc1B,EACd3B,SAAU,SAAA6B,GAAI,cAAI7B,QAAJ,IAAIA,OAAJ,EAAIA,EAAW6B,EAAKzH,GAApB,GAGzB,CC/Cc,SAASkJ,EAAazI,GACjC,IAAQ0I,EAAmC1I,EAAnC0I,KAAM9B,EAA6B5G,EAA7B4G,eAAgBzB,EAAanF,EAAbmF,SAEtB0B,GAASvC,EAAAA,EAAAA,KAATuC,KAEF8B,EAvBS,SAACC,GAChB,OAAsC7C,EAAAA,EAAAA,UAAyB,IAA/D,eAAO4C,EAAP,KAAoBE,EAApB,KAQA,OANArI,EAAAA,EAAAA,YAAU,WACN,qBAAwFoI,EAAxF,QACK1J,MAAK,SAAAS,GAAM,OAAIkJ,EAAelJ,EAAOwG,QAA1B,IACXC,OAAM,kBAAMyC,EAAe,GAArB,GACd,GAAE,CAACD,IAEGD,CACV,CAauBG,CAAWJ,GAEzB5B,EAAcF,EAAiB+B,EAAYvB,MAAK,SAAA2B,GAAO,OAAIA,EAAQxJ,KAAOqH,CAAnB,SAAqCZ,EAE5FiB,EAAe,SAACD,GAClB,OAAOH,EAAKK,UAAUvI,KAAI,SAAAwI,GAAG,OAAIH,EAAKnC,KAAKsC,EAAd,IAAoCC,MAAK,SAAAvC,GAAI,YAAamB,IAATnB,CAAJ,GAC7E,EAYD,OACI,SAAC,KAAD,CACIwC,KAAMsB,EACN1B,aAAcA,EACdU,eAde,SAACX,GACpB,IAAMgC,EAAc/B,EAAaD,GAEjC,OAAO,SAAC,KAAD,CAAcnC,KAAMmE,EAAaC,GAAIjC,EAAKiC,IAAMC,EAAAA,GAAAA,MAAkBC,GAAInC,EAAKoC,QACrF,EAWOf,UATU,SAACrB,EAAoBsB,GACnC,OAAO5I,OAAOsD,OAAOgE,EAAKnC,MAAM0D,MAAK,SAAA1D,GAAI,OAAIA,EAAK3B,SAASoF,EAAlB,GAC5C,EAQOE,aAAc1B,EACd3B,SAAU,SAAA6B,GAAI,cAAI7B,QAAJ,IAAIA,OAAJ,EAAIA,EAAW6B,EAAKzH,GAAIyH,EAAKoC,OAAQpC,EAAKiC,IAAMC,EAAAA,GAAAA,MAAhD,GAGzB,CCvBc,SAASG,EAAYrJ,GAA0B,IAAD,EACjDsJ,EAA4CtJ,EAA5CsJ,OAAQC,EAAoCvJ,EAApCuJ,QAASC,EAA2BxJ,EAA3BwJ,aAAcC,EAAazJ,EAAbyJ,SAE/BjK,GAAM8E,EAAAA,EAAAA,KAAN9E,EAER,GAAgCuG,EAAAA,EAAAA,UAAQ,OAACyD,QAAD,IAACA,OAAD,EAACA,EAAe,IAAxD,eAAOZ,EAAP,KAAiBc,EAAjB,KACA,GAAgC3D,EAAAA,EAAAA,UAAQ,OAACyD,QAAD,IAACA,OAAD,EAACA,EAAe,IAAxD,eAAOG,EAAP,KAAiBC,EAAjB,KACA,GAAgC7D,EAAAA,EAAAA,WAAqB,OAAZyD,QAAY,IAAZA,OAAA,EAAAA,EAAe,KAAM,WAA9D,eAAOK,EAAP,KAAiBC,EAAjB,KACA,GAAgC/D,EAAAA,EAAAA,WAAqB,OAAZyD,QAAY,IAAZA,OAAA,EAAAA,EAAe,KAAMN,EAAAA,GAAAA,OAA9D,eAAOa,EAAP,KAAiBC,EAAjB,MAEAxJ,EAAAA,EAAAA,YAAU,WACFgJ,IACAE,EAAYF,EAAa,IACzBI,EAAYJ,EAAa,IACzBM,EAAYN,EAAa,IACzBQ,EAAYR,EAAa,IAEhC,GAAE,CAACF,EAAD,OAASE,QAAT,IAASA,OAAT,EAASA,EAAcS,aAE1B,IAAMC,EAAkC,CACpC,CACIjK,KAAM,SACN+E,MAAOxF,EAAE,oBACT2K,WACI,SAACxD,EAAD,CACIC,eAAgBgC,EAChBzD,SAAU,SAAAF,GACNyE,EAAYzE,GACZ2E,OAAY5D,GACZ8D,EAAY,WACZE,EAAYd,EAAAA,GAAAA,MACf,KAIb,CACIjJ,KAAM,SACN+E,MAAOxF,EAAE,oBACT2K,WACI,SAAC1B,EAAD,CACIC,KAAME,EACNhC,eAAgB+C,EAChBxE,SAAU,SAACiF,EAAMjB,EAAIF,GACjBW,EAAYQ,GACZN,EAAYX,GACZa,EAAYf,EACf,MAMXoB,EAAiC,CACnC,CACIpK,KAAM,QACN+E,MAAOxF,EAAE,kBACT8K,QAAS,QACTrF,MAAO4E,EACP3E,YAAa,UACbC,SAAU,SAAAF,GACNyE,EAAYjC,EAAAA,GAAAA,OACZmC,EAAY,SACZE,EAAY7E,EACf,GAEL,CACIhF,KAAM,SACN+E,MAAOxF,EAAE,kBACTyF,MAAO8E,EACPQ,SAAO,eACFrB,EAAAA,GAAAA,MAAmB1J,EAAE,uBADnB,SAEF0J,EAAAA,GAAAA,MAAmB1J,EAAE,sBAFnB,GAIP2F,SAAU,SAAAF,GACNyE,EAAYjC,EAAAA,GAAAA,OACZmC,EAAY,SACZI,EAAY/E,EACf,IAIHuF,EAAkB5B,GAAYe,GAAYE,GAAYE,EAS5D,OACI,UAAC,KAAD,CAAOT,OAAQA,EAAQC,QAASA,EAAhC,WACI,SAAC,KAAD,KACA,UAAC,KAAD,YACI,SAAC,KAAD,UAAc/J,EAAE,wBAChB,SAAC,KAAD,KAEA,SAAC,KAAD,WACI,UAAC,KAAD,YACI,SAAC,KAAD,CAAcqF,KAAMrF,EAAE,uBAAwByJ,GAAIc,EAAUZ,GAAIU,KAEhE,UAAC,KAAD,CAAMY,UAAQ,EAACC,YAAY,OAAOC,EAAE,OAAOC,aAAchC,IAAanB,EAAAA,GAAAA,MAAiB,EAAI,EAA3F,WACI,UAAC,KAAD,YACI,SAAC,KAAD,UAAMjI,EAAE,0BACR,SAAC,KAAD,UAAMA,EAAE,4BAGZ,UAAC,KAAD,YACI,SAAC,KAAD,WACI,SAAC,KAAD,CAAWuF,OAAQmF,OAEvB,SAAC,KAAD,WACI,SAAC,KAAD,CAAWnF,OAAQsF,kBAOvC,UAAC,KAAD,YACI,UAAC,KAAD,CAAMQ,SAAS,KAAKC,YAAa,EAAjC,UACKtL,EAAE,uBACH,UAAC,KAAD,CAAMuL,MAAM,WAAWpK,KAAK,eAAeqK,YAAY,EAAvD,0BACgB,SAAC,KAAD,CAAMvF,GAAIwF,EAAAA,aAI9B,SAAC,KAAD,CAAQP,YAAY,OAAOQ,QA5CtB,WACbV,IACQ,OAARf,QAAQ,IAARA,GAAAA,EAAW,CAACb,EAAUe,EAAUE,EAAUE,IAC1CR,IAEP,EAuCiE4B,UAAWX,EAA7D,SACKhL,EAAE,gCAM1B,C,0BCtKoB4L,EAAAA,WAAAA,SAAAA,KAAAA,EAAAA,EAAAA,GAAAA,KAAAA,EAAAA,CAahB,OAbgBA,EAAAA,EAAAA,GAAAA,EAAAA,KAAAA,CAAAA,CAAAA,IAAAA,WAAAA,MACjB,SAAwBC,GACpB,MAAO,CAACC,SAASD,EAAIvL,MAAM,EAAG,GAAI,IAAKwL,SAASD,EAAIvL,MAAM,EAAG,GAAI,IAAKwL,SAASD,EAAIvL,MAAM,EAAG,GAAI,IACnG,qBAED,SAAmBuL,EAAgBE,GAC/B,MAAM,QAAN,OAAe,kBAAIC,KAAKC,SAASJ,IAAlB,CAAwBE,IAAOG,KAAK,KAAnD,IACH,kCAED,SAAgCC,EAAiBC,GAA0B,IAAD,OACtE,OAAOJ,KAAKC,SAASE,GAAME,QAAO,SAACC,EAAKC,EAAKC,GACzC,OAAOF,EAAMG,KAAKC,IAAIH,EAAM,EAAKN,SAASG,GAAMI,GAAM,EACzD,GAAE,EACN,OAbgBZ,GCSN,SAASe,EAAYnM,GAChC,IAAQM,EAAmBN,EAAnBM,MAAO4K,EAAYlL,EAAZkL,QAEP1L,GAAM8E,EAAAA,EAAAA,KAAN9E,EAER,OACI,SAAC,KAAD,CACIkG,KAAK,KACL,aAAYlG,EAAE,UACd4M,GAAG,SACHrB,MAAOzK,EAAM,GACb6I,GAAI7I,EAAM,GACV+L,OAAQ,CAAElD,GAAIiC,EAAWkB,KAAKhM,EAAM,GAAI,KACxCiM,MAAM,SAAC,MAAD,IACNrB,QAASA,GAGpB,CCZc,SAASsB,EAAgBxM,GAA8B,IAAD,EACzDyM,EAA+CzM,EAA/CyM,gBAAiBC,EAA8B1M,EAA9B0M,MAAOC,EAAuB3M,EAAvB2M,SAAUlD,EAAazJ,EAAbyJ,SAElCjK,GAAM8E,EAAAA,EAAAA,KAAN9E,EAER,GAAsCuG,EAAAA,EAAAA,WAAS,GAA/C,eAAO6G,EAAP,KAAoBC,EAApB,KACA,GAA0C9G,EAAAA,EAAAA,UAAS,GAAnD,eAAO+G,EAAP,KAAsBC,EAAtB,KAEA,GAAyC1K,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,KAAV,IAAtDnC,EAAR,EAAQA,MAAiB0M,EAAzB,EAAerI,SAETsI,EAAevN,OAAOsD,OAAOgK,GAAanB,QAC5C,SAACC,EAAKC,GACF,cAAuBD,EAAvB,GAAOoB,EAAP,KAAcC,EAAd,KACA,MAAO,EAAC,OACA,IAAIC,IAAIF,EAAMG,OAAOtB,EAAIuB,SAASC,KAAKC,OAAO7O,KAAI,SAAA8O,GAAE,OAAIA,EAAG,EAAP,QADrD,OAEC,IAAIL,IAAID,EAAME,OAAOtB,EAAIuB,SAASC,KAAKC,OAAO7O,KAAI,SAAA8O,GAAE,OAAIA,EAAG,EAAP,OAE/D,GACD,CAAC,GAAI,KAGHC,EAAwCjB,EAAgB9N,KAAI,SAAC8O,EAAIE,GAAL,MAAW,CACzE,CACI1N,KAAM,QACN+E,MAAOxF,EAAE,gBACTyF,MAAOwI,EAAG,GACV9H,KAAM,OACNR,SAAU,SAAAyI,GAAG,cAAInE,QAAJ,IAAIA,OAAJ,EAAIA,EAAWkE,EAAG,CAACF,EAAG,GAAIA,EAAG,GAAIA,EAAG,GAAIA,EAAG,GAAIG,EAAKH,EAAG,IAAvD,EACbI,WAAYZ,EAAa,IAE7B,CACIhN,KAAM,QACN+E,MAAOxF,EAAE,gBACTyF,MAAOwI,EAAG,GACV9H,KAAM,OACNR,SAAU,SAAAyI,GAAG,cAAInE,QAAJ,IAAIA,OAAJ,EAAIA,EAAWkE,EAAG,CAACF,EAAG,GAAIA,EAAG,GAAIA,EAAG,GAAIA,EAAG,GAAIA,EAAG,GAAIG,GAAtD,EACbC,WAAYZ,EAAa,IAfiC,IAmBlE,OACI,UAAC,KAAD,CAASa,UAAU,SAAnB,UACgC,IAA3BrB,EAAgBsB,SACb,UAAC,KAAD,CAAQC,QAAS,GAAK,uCAAtB,WACI,SAAC,KAAD,CAAMvI,GAAG,IAAI7D,KAAM,EAAGqM,MAAM,SAASpD,SAAS,KAAKH,YAAY,OAA/D,SACKlL,EAAE,kDAGP,SAAC,KAAD,CACIkG,KAAK,KACL4E,QAAQ,QACR,aAAY9K,EAAE,oCACd0L,QAAS,yBAAMwB,QAAN,IAAMA,OAAN,EAAMA,EAAQ,CAACpM,EAAM,GAAI,GAAI,UAAW4I,EAAAA,GAAAA,MAAkB,GAAI,IAA9D,EACTqD,MAAM,SAAC,MAAD,SAKjBE,EAAgB9N,KAAI,SAAC8O,EAAIE,GAAL,OACjB,UAAC,KAAD,CAAgBK,QAAS,GAAK,+CAAuCL,GAArE,WACI,SAAC,KAAD,CAAU3I,MAAOxF,EAAE,UAAWmG,KAAK,OAAOuI,QAAe,IAANP,EAAnD,UACI,SAACxB,EAAD,CACI7L,MAAO,CAACmN,EAAG,GAAIA,EAAG,GAAIA,EAAG,GAAIA,EAAG,IAChCvC,QAAS,WACL2B,GAAe,GACfE,EAAiBY,EACpB,OAIT,SAAC,KAAD,CAAW5I,OAAQ2I,EAAkBC,GAAIO,QAAe,IAANP,IAEjDjB,GAASiB,IAAMD,EAAkBK,OAAS,GACvC,SAAC,KAAD,CACIrI,KAAK,KACL4E,QAAQ,QACR,aAAY9K,EAAE,qCACd0L,QAAS,yBAAMwB,QAAN,IAAMA,OAAN,EAAMA,EAAQD,EAAgB3M,OAAO,GAAG,GAAxC,EACTyM,MAAM,SAAC,MAAD,OAGV,SAAC,KAAD,CAAK5G,KAAM,IAGdgH,IACG,SAAC,KAAD,CACIjH,KAAK,KACL4E,QAAQ,QACR,aAAY9K,EAAE,uCACd0L,QAAS,yBAAMyB,QAAN,IAAMA,OAAN,EAAMA,EAAWgB,EAAjB,EACTpB,MAAM,SAAC,MAAD,QA/BLoB,EADI,KAsCrB,SAACtE,EAAD,CACIC,OAAQsD,EACRrD,QAAS,kBAAMsD,GAAe,EAArB,EACTrD,aAAY,UAAEiD,EAAgBK,UAAlB,aAAE,EAAgChN,MAAM,EAAG,GACvD2J,SAAU,SAAAnJ,GAAK,cACXmJ,QADW,IACXA,OADW,EACXA,EAAWqD,EAAH,kBACDxM,GADC,CAEJmM,EAAgBK,GAAe,GAC/BL,EAAgBK,GAAe,KAJxB,MAU9B,CCtGc,SAASqB,EAA2CnO,GAC/D,IAAQoO,EAAoDpO,EAApDoO,WAAY5F,EAAwCxI,EAAxCwI,aAAcrD,EAA0BnF,EAA1BmF,SAAUkJ,EAAgBrO,EAAhBqO,YAE5C,GAA0BtI,EAAAA,EAAAA,UAASyC,GAAnC,eAAOvD,EAAP,KAAcqJ,EAAd,MAEA9N,EAAAA,EAAAA,YAAU,WACNgI,EAAayB,YAAcqE,EAAS9F,EACvC,GAAE,CAACA,EAAayB,aAejB,OACI,SAAC,KAAD,CAAavE,KAAK,KAAK6I,YAAU,EAAC7D,YAAY,OAAOJ,QAAQ,UAA7D,SACK8D,EAAWzP,KAAI,SAAC6P,EAAWb,GACxB,IAAMc,EACgB,kBAAVxJ,GAAsBA,EAAM/B,SAASsL,EAAUvJ,QAAWA,IAAUuJ,EAAUvJ,MAGpFyB,EAAKiH,IAAMS,EAAWL,OAAS,GAAMU,OAAqBzI,EAAR,MAExD,OACI,SAAC,KAAD,CAEI0I,KAAK,WACL,eAAcD,EACdnE,QAASmE,EAAa,QAAU,UAChC/H,GAAIA,EACJiI,WAAYH,EAAUrD,SACtBD,QAAS,kBA9BR,SAAC0C,GAClB,GAAIS,EAAa,CACb,IAAMO,EAAY3J,EACZ4J,EAAYD,EAAU1L,SAAS0K,GAAOgB,EAAUtL,QAAO,SAAAwL,GAAC,OAAIA,IAAMlB,CAAV,IAA5C,kBAAiEgB,GAAjE,CAA4EhB,IAE9FU,EAASO,GACT,OAAC1J,QAAD,IAACA,GAAAA,EAA6D0J,EACjE,MACGP,EAASV,GACT,OAACzI,QAAD,IAACA,GAAAA,EAA8DyI,EAEtE,CAmBkCmB,CAAaP,EAAUvJ,MAA7B,EAPb,SASKuJ,EAAUxJ,OARNwJ,EAAUvJ,MAAMgF,WAWhC,KAGZ,CCtDc,SAAS+E,IACpB,IAAQxP,GAAM8E,EAAAA,EAAAA,KAAN9E,EACF2C,GAAWoC,EAAAA,EAAAA,MAEXC,GAAkBnC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMC,IAAIiC,eAAd,IAC7C,GAAyBnC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,KAAV,IAAtCnC,EAAR,EAAQA,MAAOJ,EAAf,EAAeA,MACPoN,GAAajL,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,MAAMkC,SAASH,EAAzB,IAAlC8I,SAEF2B,EAAmB,SAACC,GAAD,cAAwC,CAC7D,CACIjP,KAAM,QACN+E,MAAOxF,EAAE,wBACTyF,MAAK,UAAEqI,EAAS6B,UAAUD,UAArB,aAAE,EAA+B,GACtC7J,QAAS,CAACpC,EAAAA,GAAAA,KAAcC,SAAShD,GACjCiF,SAAU,SAAAF,GAAK,aACX9C,GAASiN,EAAAA,EAAAA,IAAqB5K,EAAiB0K,EAAU,CAACjK,EAAD,UAAQqI,EAAS6B,UAAUD,UAA3B,aAAQ,EAA+B,KADrF,GAGnB,CACIjP,KAAM,QACN+E,MAAOxF,EAAE,wBACTyF,MAAK,UAAEqI,EAAS6B,UAAUD,UAArB,aAAE,EAA+B,GACtC7J,QAAS,CAACpC,EAAAA,GAAAA,KAAcC,SAAShD,GACjCiF,SAAU,SAAAF,GAAK,aACX9C,GAASiN,EAAAA,EAAAA,IAAqB5K,EAAiB0K,EAAU,WAAC5B,EAAS6B,UAAUD,UAApB,aAAC,EAA+B,GAAIjK,IADlF,GAGnB,CACIhF,KAAM,SACN+E,MAAOxF,EAAE,aACT6P,UAAW/B,EAASgC,UACpBnK,SAAU,SAAAoK,GAAO,OAAIpN,GAASqN,EAAAA,EAAAA,IAAsBhL,EAAiB+K,GAApD,EACjBlK,QAAS,CAACpC,EAAAA,GAAAA,KAAcC,SAAShD,IAAuB,IAAbgP,EAC3CO,SAAS,GAvBQ,EA2BnBC,EAAY,SAAC/B,GAAD,OAAe,SAACJ,GAC9BpL,GAASwN,EAAAA,EAAAA,IAAenL,EAAiBmJ,EAAGJ,GAC/C,CAFiB,EAIZqC,EAAe,SAACjC,GAAD,OAAe,SAACkC,GACjC1N,GAAS2N,EAAAA,EAAAA,IAAkBtL,EAAiBmJ,EAAGkC,GAClD,CAFoB,EAIfE,EAAe,SAACpC,GAAD,OAAe,SAACkC,EAAWtC,GAC5CpL,GAAS6N,EAAAA,EAAAA,IAAkBxL,EAAiBmJ,EAAGkC,EAAGtC,GACrD,CAFoB,EAUrB,OACI,UAAC,KAAD,CAAQU,MAAM,aAAazI,EAAG,EAA9B,WACI,UAAC,KAAD,CAAMmF,EAAE,OAAR,WACI,SAAC,KAAD,CAASlF,GAAG,KAAKC,KAAK,KAAKgB,GAAG,OAA9B,SACKlH,EAAE,wCAGNU,IAAU+C,EAAAA,GAAAA,MACP,SAACkL,EAAD,CACIC,WAAY,CACR,CAAEpJ,MAAOxF,EAAE,oBAAqByF,MAAOgL,EAAAA,GAAAA,MACvC,CAAEjL,MAAOxF,EAAE,qBAAsByF,MAAOgL,EAAAA,GAAAA,QAE5CzH,aAAc8E,EAAS4C,WACvB/K,SAAU,SAAAF,GAAK,OAAI9C,GAASgO,EAAAA,EAAAA,IAA2B3L,EAAiBS,GAAzD,OAK1BqI,EAASC,KAAK5O,KAAI,SAACyR,EAAUzC,GAAX,OACf,UAAC,EAAA0C,SAAD,YACI,SAAC,KAAD,CAAS5K,GAAG,KAAKC,KAAK,KAAtB,SAEUlG,EADC,IAANmO,EACO,sCACI,IAANA,EACE,0CACA,4CAGL,IAANA,IAAW,SAAC,KAAD,CAAW5I,OAAQkK,EAAiBtB,EAAI,MAEpD,SAACnB,EAAD,CACIC,gBAAiB2D,EACjB1D,MAAOgD,EAAU/B,GACjBhB,SAAUiD,EAAajC,GACvBlE,SAAUsG,EAAapC,OAfhBA,EADA,IAqBlBL,EAASC,KAAKQ,OAAS,IACpB,SAAC,KAAD,CACIrI,KAAK,KACL4E,QAAQ,QACRgG,UAAU,WACVC,UAAU,SAAC,MAAD,IACVrF,QApDkB,WAC9B/I,GACIwN,EAAAA,EAAAA,IAAenL,EAAiB8I,EAASC,KAAKQ,OAAQ,CAACzN,EAAM,GAAI,GAAI,UAAW4I,EAAAA,GAAAA,MAAkB,GAAI,KAE7G,EA2CW,SAOK1J,EAAE,6CAKtB,CC5Gc,SAASgR,KAAe,IAAD,IAC1BhR,GAAM8E,EAAAA,EAAAA,KAAN9E,EACF2C,GAAWoC,EAAAA,EAAAA,MAEXC,GAAkBnC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMC,IAAIiC,eAAd,IAC7C,GAAwBnC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,KAAV,IAArCvC,EAAR,EAAQA,MAAOuQ,EAAf,EAAeA,KACf,GAAkEpO,EAAAA,EAAAA,KAC9D,SAAAC,GAAK,OAAIA,EAAMG,MAAMkC,SAASH,EAAzB,IADDkM,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,SAAUC,EAA5B,EAA4BA,WAAYC,EAAxC,EAAwCA,SAAUC,EAAlD,EAAkDA,YAI5CC,EAAoBrR,OAAOsD,OAAOgO,EAAAA,IAAUrS,KAAI,SAAAsS,GAClD,MAAO,CACHjM,MAAOxF,EAAE,yBAA2ByR,GACpChM,MAAOgM,EACP9F,SAAU8F,IAAYD,EAAAA,GAAAA,OAAkB9Q,IAAU+C,EAAAA,GAAAA,QAEzD,IAEKiO,GAAkB,eACnBC,EAAAA,GAAAA,KAAkB3R,EAAE,gCADD,SAEnB2R,EAAAA,GAAAA,QAAqB3R,EAAE,mCAFJ,SAGnB2R,EAAAA,GAAAA,IAAiB3R,EAAE,+BAHA,SAInB2R,EAAAA,GAAAA,OAAoB3R,EAAE,iCAJH,GAOlB4R,GAAsB,eACvBD,EAAAA,GAAAA,KAAkB3R,EAAE,gCADG,SAEvB2R,EAAAA,GAAAA,QAAqB3R,EAAE,mCAFA,SAGvB2R,EAAAA,GAAAA,QAAqB3R,EAAE,mCAHA,SAIvB2R,EAAAA,GAAAA,OAAoB3R,EAAE,iCAJC,GAOtBuF,EAA2B,CAC7B,CACI9E,KAAM,SACN+E,MAAOxF,EAAE,iCACT2K,WACI,SAACgE,EAAD,CACIC,WAAY2C,EACZvI,aAAckI,EACdvL,SAAU,SAAAuL,GAAQ,OAAIvO,GAASkP,EAAAA,EAAAA,IAAsB7M,EAAiBkM,GAApD,EAClBrC,aAAW,IAGnBhJ,QAAS,CAACpC,EAAAA,GAAAA,MAAgBA,EAAAA,GAAAA,SAAkBC,SAAShD,IAEzD,CACID,KAAM,SACN+E,MAAOxF,EAAE,kCACTyF,MAAO0L,EACPpG,QAASrK,IAAU+C,EAAAA,GAAAA,IAAeiO,EAAqBE,EACvDjM,SAAU,SAAAF,GAAK,OAAI9C,GAASmP,EAAAA,EAAAA,IAAsB9M,EAAiBS,GAApD,EACfI,QAAS,CAACpC,EAAAA,GAAAA,IAAcA,EAAAA,GAAAA,SAAkBC,SAAShD,IAEvD,CACID,KAAM,SACN+E,MAAOxF,EAAE,+BACT6P,UAAWuB,EACXzL,SAAU,SAAAoK,GAAO,OAAIpN,GAASoP,EAAAA,EAAAA,IAAuB/M,EAAiB+K,GAArD,EACjBlK,QAAS,CAACpC,EAAAA,GAAAA,SAAkBC,SAAShD,KAAWuQ,EAChD9K,KAAM,OACN8J,SAAS,GAEb,CACIxP,KAAM,SACN+E,MAAOxF,EAAE,iCACT6P,UAAWwB,EACX1L,SAAU,SAAAoK,GAAO,OAAIpN,GAASqP,EAAAA,EAAAA,IAAqBhN,EAAiB+K,GAAnD,EACjBlK,QAAS,CAACpC,EAAAA,GAAAA,SAAkBC,SAAShD,GACrCyF,KAAM,OACN8J,SAAS,GAEb,CACIxP,KAAM,QACN+E,MAAOxF,EAAE,oCACTyF,MAAO6L,EAAY7G,WACnBwH,UAAW,SAAA7D,GAAG,OAAI8D,OAAOC,UAAU/D,EAArB,EACdzI,SAAU,SAAAyI,GAAG,OAAIzL,GAASyP,EAAAA,EAAAA,IAAwBpN,EAAiBkN,OAAO9D,IAA7D,EACbvI,QAAS,CAACpC,EAAAA,GAAAA,SAAkBC,SAAShD,IAEzC,CACID,KAAM,SACN+E,MAAOxF,EAAE,+CACT2K,WACI,SAACgE,EAAD,CACIC,WAAY,CAAC,CAAEpJ,MAAOxF,EAAE,+BAAgCyF,MAAO,GAAIkG,UAAU,IAC7E3C,aAAa,GACbrD,SAAU,SAAA0M,GAAC,OAAI1P,GAAS2P,EAAAA,EAAAA,IAA6BtN,GAA1C,IAGnBiL,SAAS,EACTpK,QAAS,CAACpC,EAAAA,GAAAA,SAAkBC,SAAShD,KAI7C,OACI,UAAC,KAAD,CAAKsF,EAAG,EAAR,WACI,SAAC,KAAD,CAASC,GAAG,KAAKC,KAAK,KAAtB,SACKlG,EAAE,kCAGP,SAAC,KAAD,CAAWuF,OAAQA,MAG9B,C,eC5Gc,SAASgN,KAAiB,IAAD,EAC5BvS,GAAM8E,EAAAA,EAAAA,KAAN9E,EACF2C,GAAWoC,EAAAA,EAAAA,MAEXC,GAAkBnC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMC,IAAIiC,eAAd,IACvCwI,GAAc3K,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,MAAMkC,QAAhB,IACzC,EAAsCqI,EAAYxI,GAA1CwN,EAAR,EAAQA,QAASzR,EAAjB,EAAiBA,SAAU0R,EAA3B,EAA2BA,OAErBC,GAAa,eACdC,EAAAA,GAAAA,QAAsB3S,EAAE,qCADV,SAEd2S,EAAAA,GAAAA,WAAyB3S,EAAE,uCAFb,GAKb4S,EAAyB,SAACtE,GAC5B,OAAQA,IAAcuE,EAAAA,GAAAA,KAAiBL,EAAUzR,GAAUsL,QACvD,SAACC,EAAKC,GAAN,gBAAC,WAAmBD,GAApB,cAA0BC,EAAMiB,EAAYjB,GAAKlH,KAAK6G,KAAK,MAA3D,GACA,CAAC,EAER,EAEK4G,EAAkB,CACpBC,MAAO/S,EAAE,iCACTgT,MAAOhT,EAAE,kCAGPiT,EAAY,SAAC3E,GACf,OAAImE,EAAOnE,GAAWC,OACX,CACH,CACI9N,KAAM,SACN+E,MAAOxF,EAAE,gCACT+K,QAAS2H,EACTjN,MAAOgN,EAAOnE,GAAW,GACzB3I,SAAU,SAAAF,GAAK,OACX9C,GAASuQ,EAAAA,EAAAA,IAAwBlO,EAAiBsJ,EAAW7I,GADlD,GAGnB,CACIhF,KAAM,SACN+E,MAAOxF,EAAE,wCACT+K,QAAS6H,EAAuBtE,GAChC7I,MAAOgN,EAAOnE,GAAW,GACzB3I,SAAU,SAAAF,GAAK,OACX9C,GAASwQ,EAAAA,EAAAA,IAAgCnO,EAAiBsJ,EAAW7I,GAD1D,GAGnB,CACIhF,KAAM,SACN+E,MAAOxF,EAAE,oCACT+K,QAAS+H,EACTrN,MAC2F,KAAtF6I,IAAcuE,EAAAA,GAAAA,KAAiBL,EAAUzR,GAAUqS,QAAQX,EAAOnE,GAAW,IACxE,QACA,QACV3I,SAAU,kBAAMhD,GAAS0Q,EAAAA,EAAAA,IAA0BrO,EAAiBsJ,GAA1D,IAIX,EAEd,EAED,OACI,UAAC,KAAD,CAAKtI,EAAG,EAAR,WACI,SAAC,KAAD,CAASC,GAAG,KAAKC,KAAK,KAAtB,SACKlG,EAAE,eAGP,SAAC,KAAD,CAASiG,GAAG,KAAKC,KAAK,KAAtB,SACKlG,EAAE,yBAGP,SAAC,KAAD,CAASsO,UAAU,SAAnB,SACwB,IAAnBkE,EAAQjE,QACL,SAAC,KAAD,CAAWhJ,OAAQ0N,EAAUJ,EAAAA,GAAAA,SAE7B,SAAC,KAAD,CAAM5M,GAAG,IAAI7D,KAAM,EAAGqM,MAAM,SAASpD,SAAS,KAAKH,YAAY,OAA/D,SACKlL,EAAE,0BAKf,SAAC,KAAD,CAASiG,GAAG,KAAKC,KAAK,KAAtB,SACKlG,EAAE,0BAGP,SAAC,KAAD,CAASsO,UAAU,SAAnB,SACyB,IAApBvN,EAASwN,QACN,SAAC,KAAD,CAAWhJ,OAAQ0N,EAAUJ,EAAAA,GAAAA,UAE7B,SAAC,KAAD,CAAM5M,GAAG,IAAI7D,KAAM,EAAGqM,MAAM,SAASpD,SAAS,KAAKH,YAAY,OAA/D,SACKlL,EAAE,2BAM1B,CCnGc,SAASsT,KACpB,OACI,UAAC,KAAD,YACI,SAACzO,EAAD,KAEA,SAAC,KAAD,KAEA,SAAC2K,EAAD,KAEA,SAAC,KAAD,KAEA,SAAC+C,GAAD,KAEA,SAAC,KAAD,KAEA,SAACvB,GAAD,MAGX,CCTc,SAASuC,KACpB,IAAQvT,GAAM8E,EAAAA,EAAAA,KAAN9E,EACF2C,GAAWC,EAAAA,EAAAA,MAEjB,GAUIC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,KAAV,IATdG,EADX,EACI1C,MACAC,EAFJ,EAEIA,SACAwC,EAHJ,EAGIA,WACAqQ,EAJJ,EAIIA,KACAC,EALJ,EAKIA,iBACAC,EANJ,EAMIA,QACAC,EAPJ,EAOIA,eACAC,EARJ,EAQIA,eACA3C,EATJ,EASIA,KAGE1L,EAAwB,kBACvBsO,EAAAA,GAAazQ,GAAUjE,KAAoB,SAAA4E,GAAM,MAAK,CACrDtD,KAAM,QACN+E,MAAOxF,EAAE,yBAAD,OAA0B+D,EAA1B,UACR0B,MAAO9E,EAASoD,GAAQ0G,WACxB9E,SAAU,SAAAyI,GAAG,OAAIzL,GAASmR,EAAAA,EAAAA,IAAY5B,OAAO9D,GAAMrK,GAAtC,EAJmC,KAD1B,CAO1B,CACItD,KAAM,QACN+E,MAAOxF,EAAE,sCACTyF,MAAOtC,EAAWsH,WAClB9E,SAAU,SAAAyI,GAAG,OAAIzL,GAASoR,EAAAA,EAAAA,IAAa7B,OAAO9D,IAAjC,GAEjB,CACI3N,KAAM,SACN+E,MAAOxF,EAAE,0CACTyF,MAAO+N,EACPQ,IAAK,EACLC,IAAK,IACLtO,SAAU,SAAAyI,GAAG,OAAIzL,GAASuR,EAAAA,EAAAA,IAAe9F,GAA5B,EACbvI,QAAS,CAACpC,EAAAA,GAAAA,IAAcA,EAAAA,GAAAA,OAAgBC,SAASN,IAErD,CACI3C,KAAM,SACN+E,MAAqCxF,EAA7BiR,EAA+B,0CAAtB,kBACjBxL,MAAOgO,EACPO,IAAK,EACLC,IAAKhD,EAAO,GAAK,IACjBtL,SAAU,SAAAyI,GAAG,OAAIzL,GAASwR,EAAAA,EAAAA,IAAoB/F,GAAjC,GAEjB,CACI3N,KAAM,SACN+E,MAAOxF,EAAE,iCACTyF,MAAOiO,EACPM,IAAK,EACLC,IAAK,GACLtO,SAAU,SAAAyI,GAAG,OAAIzL,GAASyR,EAAAA,EAAAA,IAAqBhG,GAAlC,GAEjB,CACI3N,KAAM,SACN+E,MAAOxF,EAAE,sCACTyF,MAAOkO,EACPK,IAAK,EACLC,IAAK,IACLtO,SAAU,SAAAyI,GAAG,OAAIzL,GAAS0R,EAAAA,EAAAA,IAAuBjG,GAApC,EACbvI,QAAS,CAACpC,EAAAA,GAAAA,OAAgBC,SAASN,IAEvC,CACI3C,KAAM,SACN+E,MAAOxF,EAAE,sCACTyF,MAAOmO,EACPI,IAAK,EACLC,IAAK,IACLtO,SAAU,SAAAyI,GAAG,OAAIzL,GAAS2R,EAAAA,EAAAA,IAAuBlG,GAApC,EACbvI,QAAS,CAACpC,EAAAA,GAAAA,OAAgBC,SAASN,MAI3C,OACI,UAAC,KAAD,CAAK4C,EAAG,EAAR,WACI,SAAC,KAAD,CAASC,GAAG,KAAKC,KAAK,KAAtB,SACKlG,EAAE,kCAGP,SAAC,KAAD,CAAWuF,OAAQA,EAAQY,KAAM,QAG5C,CC5Ec,SAASoO,KACpB,IAAQvU,GAAM8E,EAAAA,EAAAA,KAAN9E,EACF2C,GAAWoC,EAAAA,EAAAA,MAEjB,GAWIlC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,KAAV,IAVrBvC,EADJ,EACIA,MACAI,EAFJ,EAEIA,MACW0T,EAHf,EAGIC,UACUC,EAJd,EAIIC,SACArG,EALJ,EAKIA,UACcsG,EANlB,EAMIC,aACSC,EAPb,EAOIC,QACAC,EARJ,EAQIA,WACAC,EATJ,EASIA,iBACAC,EAVJ,EAUIA,gBAGJ,GAAsC3O,EAAAA,EAAAA,WAAS,GAA/C,eAAO6G,EAAP,KAAoBC,EAApB,KAEM8H,EAAsB,CACxB,CACI3P,MAAOxF,EAAE,8BACTyF,MAAOgL,EAAAA,GAAAA,MAEX,CACIjL,MAAOxF,EAAE,+BACTyF,MAAOgL,EAAAA,GAAAA,QAIT2E,EAAwBlV,OAAOsD,OAAO6R,EAAAA,GAAgBhJ,QACxD,SAACC,EAAKC,GAAN,gBAAC,WACMD,GADP,cAEKC,EAAMvM,EAAE,yBAA2BuM,IAFxC,GAIA,CAAC,GAGC+I,EAA0BpV,OAAOsD,OAAO+R,EAAAA,IAAkBlJ,QAC5D,SAACC,EAAKC,GAAN,gBAAC,WACMD,GADP,cAEKC,EAAMvM,EAAE,yBAA2BuM,IAFxC,GAIA,CAAC,GAGChH,EAA2B,CAC7B,CACI9E,KAAM,SACN+E,MAAOxF,EAAE,UACT2K,WAAW,SAACgC,EAAD,CAAa7L,MAAOA,EAAO4K,QAAS,kBAAM2B,GAAe,EAArB,IAC/ClH,KAAM,QAEV,CACI1F,KAAM,QACN+E,MAAOxF,EAAE,oCACTyF,MAAO+O,EAAS,GAChB7O,SAAU,SAAAF,GAAK,OAAI9C,GAAS6S,EAAAA,EAAAA,IAAY,CAAC/P,EAAO+O,EAAS,KAA1C,EACfrO,KAAM,KAEV,CACI1F,KAAM,QACN+E,MAAOxF,EAAE,oCACTyF,MAAO+O,EAAS,GAChB7O,SAAU,SAAAF,GAAK,OAAI9C,GAAS6S,EAAAA,EAAAA,IAAY,CAAChB,EAAS,GAAI/O,IAAvC,EACfU,KAAM,KAEV,CACI1F,KAAM,QACN+E,MAAOxF,EAAE,iCACTyF,MAAOiP,EACP/O,SAAU,SAAAF,GAAK,OAAI9C,GAAS8S,EAAAA,EAAAA,IAAWhQ,GAAxB,EACfI,QAAS,CAACpC,EAAAA,GAAAA,OAAgBC,SAAShD,IAEvC,CACID,KAAM,QACN+E,MAAOxF,EAAE,qCACTyF,MAAOmP,GAAe,GACtBjP,SAAU,SAAAF,GAAK,OAAI9C,GAAS+S,EAAAA,EAAAA,IAAYjQ,GAAzB,GAEnB,CACIhF,KAAM,QACN+E,MAAOxF,EAAE,gCACTyF,MAAOqP,EACPnP,SAAU,SAAAF,GAAK,OAAI9C,GAASgT,EAAAA,EAAAA,IAAUlQ,GAAvB,EACfI,QAAS,CAACpC,EAAAA,GAAAA,OAAgBC,SAAShD,IAEvC,CACID,KAAM,SACN+E,MAAOxF,EAAE,mCACTyF,MAAOyP,EACPnK,QAASrK,IAAU+C,EAAAA,GAAAA,MAAiB2R,EAAwBE,EAC5D3P,SAAU,SAAAF,GAAK,OAAI9C,GAASiT,EAAAA,EAAAA,IAAanQ,GAA1B,EACfI,QAAS,CAACpC,EAAAA,GAAAA,MAAgBA,EAAAA,GAAAA,SAAkBC,SAAShD,IAEzD,CACID,KAAM,SACN+E,MAAOxF,EAAE,mCACT2K,WACI,SAACgE,EAAD,CACIC,WAAYuG,EACZnM,aAAcsF,EACd3I,SAAU,SAAAkQ,GAAa,OAAIlT,GAASmT,EAAAA,EAAAA,IAAaD,GAA1B,IAG/B1P,KAAM,OACN8J,SAAS,IAIX8F,EAAwB,CAC1B,CACIvQ,MAAOxF,EAAE,uCACTyF,OAAO,GAEX,CACID,MAAOxF,EAAE,mCACTyF,OAAO,IAITuQ,EAAuC,CACzC,CACIvV,KAAM,SACN+E,MAAOxF,EAAE,qCACT2K,WACI,UAAC,KAAD,YACI,SAACgE,EAAD,CACIC,WAAYmH,EACZ/M,aAAcgM,EAAWiB,UACzBtQ,SAAU,SAAAF,GAAK,OAAI9C,GAASuT,EAAAA,EAAAA,IAAoBzQ,GAAjC,KAEnB,SAAC,KAAD,CACIS,KAAK,KACL4E,QAAQ,QACRiG,UAAU,SAAC,MAAD,IACVrF,QAAS,kBAAM/I,GAASwT,EAAAA,EAAAA,MAAf,EAJb,SAMKnW,EAAE,mCAIfmG,KAAM,OACN8J,SAAS,EACTpK,QAAS,CAACpC,EAAAA,GAAAA,KAAcC,SAAShD,IAErC,CACID,KAAM,SACN+E,MAAOxF,EAAE,2CACT6P,UAAWoF,EAAiBmB,SAC5BzQ,SAAU,SAAAoK,GAAO,OAAIpN,GAAS0T,EAAAA,EAAAA,IAAgCtG,GAA7C,EACjBlK,QAAS,CAACpC,EAAAA,GAAAA,KAAcC,SAAShD,GACjCyF,KAAM,OACN8J,SAAS,GAEb,CACIxP,KAAM,SACN+E,MAAOxF,EAAE,0CACT6P,WAAyC,IAA9BoF,EAAiBqB,SAC5B3Q,SAAU,SAAAoK,GAAO,OAAIpN,GAAS4T,EAAAA,EAAAA,MAAyBxG,GAAU,CAAC,GAAI,KAArD,EACjBlK,QAAS,CAACpC,EAAAA,GAAAA,KAAcC,SAAShD,GACjCyF,KAAM,OACN8J,SAAS,GAEb,CACIxP,KAAM,QACN+E,MAAOxF,EAAE,wCACTyF,MAAOwP,EAAiBqB,SAAWrB,EAAiBqB,SAAS,GAAK,GAClE5Q,YAAa,uCACbC,SAAU,SAAAF,GAAK,OACX9C,GACI4T,EAAAA,EAAAA,IAAyB,CAAC9Q,EAAOwP,EAAiBqB,SAAWrB,EAAiBqB,SAAS,GAAK,KAFrF,EAIfzQ,QAAS,CAACpC,EAAAA,GAAAA,KAAcC,SAAShD,KAAwC,IAA9BuU,EAAiBqB,UAEhE,CACI7V,KAAM,QACN+E,MAAOxF,EAAE,wCACTyF,MAAOwP,EAAiBqB,SAAWrB,EAAiBqB,SAAS,GAAK,GAClE5Q,YAAa,6BACbC,SAAU,SAAAF,GAAK,OACX9C,GACI4T,EAAAA,EAAAA,IAAyB,CAACtB,EAAiBqB,SAAWrB,EAAiBqB,SAAS,GAAK,GAAI7Q,IAFlF,EAIfI,QAAS,CAACpC,EAAAA,GAAAA,KAAcC,SAAShD,KAAwC,IAA9BuU,EAAiBqB,WAIpE,OACI,UAAC,KAAD,CAAKtQ,EAAG,EAAR,WACI,SAAC,KAAD,CAASC,GAAG,KAAKC,KAAK,KAAtB,SACKlG,EAAE,kCAGP,SAAC,KAAD,CAAWuF,OAAM,UAAMA,EAAWyQ,GAAqB7P,KAAM,OAE7D,SAAC0D,EAAD,CACIC,OAAQsD,EACRrD,QAAS,kBAAMsD,GAAe,EAArB,EACTrD,aAAclJ,EACdmJ,SAAU,SAAAuM,GAAS,OAAI7T,GAAS8T,EAAAA,EAAAA,IAASD,GAAtB,MAIlC,CC7Nc,SAASE,KACpB,IAaYnX,EAbJS,GAAM8E,EAAAA,EAAAA,KAAN9E,EACF2C,GAAWoC,EAAAA,EAAAA,MAET4R,GAAa9T,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAM8T,MAAV,IAAlCD,SACR,GAA4B9T,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,KAAV,IAAzCgO,EAAR,EAAQA,KAAM4F,EAAd,EAAcA,UACNC,EAA+CD,EAA/CC,KAAMC,EAAyCF,EAAzCE,sBAAuBC,EAAkBH,EAAlBG,cAI/BC,EAAiBN,EAClB3I,OACAlK,QAEOvE,EAEF,CAAC,EAFM,SAAA+P,GAAC,OAC2B,KAA5B/P,EAAE+P,IAAM/P,EAAE+P,IAAM,GAAK,EADpB,IAIbxL,QAAO,SAAAoT,GAAM,OAAK,CAAC,YAAa,WAAWxT,SAASwT,EAAvC,IACZ7E,EAAI5F,KAAK0K,IAAIR,EAAS,GAAGvD,QAAQ6D,EAAe,IAAMN,EAAS,GAAGvD,QAAQ6D,EAAe,KACzFG,EACFT,EAASpI,QAAU,GAEb,EAAmB9B,KAAKuH,KAAgB2C,EAAS,GAAGpI,OAAS,EAAI8D,EAAGA,GACpE5F,KAAK4K,OAAOV,EAAS,GAAGpI,OAAS,EAAoB,EAAhByI,GAAqB,GAE9DzR,EAA2B,CAC7B,CACI9E,KAAM,SACN+E,MAAOxF,EAAE,8BACT6P,UAAWoB,EACXtL,SAAU,SAAAoK,GAAO,OAAIpN,GAAS2U,EAAAA,EAAAA,IAAQvH,GAArB,EACjB5J,KAAM,OACN8J,SAAS,GAEb,CACIxP,KAAM,SACN+E,MAAOxF,EAAE,8BACT6P,UAAWiH,EACXnR,SAAU,SAAAoK,GAAO,OAAIpN,GAAS4U,EAAAA,EAAAA,IAAYxH,GAAzB,EACjB5J,KAAM,OACN8J,SAAS,EACTpK,QAASoL,GAEb,CACIxQ,KAAM,SACN+E,MAAOxF,EAAE,uCACTyF,MAAOsR,EACP/C,IAAK,EACLC,IAAKmD,EACLzR,SAAU,SAAAyI,GAAG,OAAIzL,GAAS6U,EAAAA,EAAAA,IAA0B/K,KAAK4K,MAAMjJ,IAAlD,EACbvI,QAASoL,GAEb,CACIxQ,KAAM,SACN+E,MAAOxF,EAAE,oCACTyF,MAAOuR,EACPhD,IAAK,EACLC,IAAKxH,KAAK4K,OAAOV,EAAS,GAAGpI,OAAS,EAA4B,EAAxBwI,GAA6B,GACvEpR,SAAU,SAAAyI,GAAG,OAAIzL,GAAS8U,EAAAA,EAAAA,IAAoBhL,KAAK4K,MAAMjJ,IAA5C,EACbvI,QAASoL,GAASA,GAAQ0F,EAASpI,OAAS,IAIpD,OACI,UAAC,KAAD,CAAKvI,EAAG,EAAR,WACI,SAAC,KAAD,CAASC,GAAG,KAAKC,KAAK,KAAtB,SACKlG,EAAE,gCAGP,SAAC,KAAD,CAAWuF,OAAQA,MAG9B,CCnEc,SAASmS,GAAclX,GAClC,IAAQmX,EAA6BnX,EAA7BmX,KAAM1N,EAAuBzJ,EAAvByJ,SAAUkD,EAAa3M,EAAb2M,SAChBnN,GAAM8E,EAAAA,EAAAA,KAAN9E,EAEF4X,EAA4B,CAC9B,CACInX,KAAM,WACN+E,MAAOxF,EAAE,8BACTyF,MAAOkS,EAAK,GACZhS,SAAU,SAAAF,GAAK,cAAIwE,QAAJ,IAAIA,OAAJ,EAAIA,EAAW,CAACxE,EAAOkS,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAAvD,GAEnB,CACIlX,KAAM,WACN+E,MAAOxF,EAAE,8BACTyF,MAAOkS,EAAK,GACZhS,SAAU,SAAAF,GAAK,cAAIwE,QAAJ,IAAIA,OAAJ,EAAIA,EAAW,CAAC0N,EAAK,GAAIlS,EAAOkS,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAAvD,GAEnB,CACIlX,KAAM,SACN+E,MAAOxF,EAAE,8BACT6P,UAAW8H,EAAK,GAChBhS,SAAU,SAAAF,GAAK,cAAIwE,QAAJ,IAAIA,OAAJ,EAAIA,EAAW,CAAC0N,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIlS,GAApD,EACfwK,SAAS,IAIX4H,EAA4B,CAC9B,CACIpX,KAAM,SACN+E,MAAOxF,EAAE,iCACTyF,MAAOkS,EAAK,GACZ3D,IAAK,EACLC,IAAK,IACLtO,SAAU,SAAAF,GAAK,cAAIwE,QAAJ,IAAIA,OAAJ,EAAIA,EAAW,CAAC0N,EAAK,GAAIA,EAAK,GAAIlS,EAAOkS,EAAK,GAAIA,EAAK,IAAvD,GAEnB,CACIlX,KAAM,SACN+E,MAAOxF,EAAE,iCACTyF,MAAOkS,EAAK,GACZ3D,IAAK,EACLC,IAAK,IACLtO,SAAU,SAAAF,GAAK,cAAIwE,QAAJ,IAAIA,OAAJ,EAAIA,EAAW,CAAC0N,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIlS,EAAOkS,EAAK,IAAvD,IAIvB,OACI,UAAC,KAAD,CAASrJ,UAAU,SAAnB,WACI,SAAC,KAAD,CAAW/I,OAAQqS,EAASzR,KAAK,UACjC,UAAC,KAAD,CAAQqI,QAAS,GAAjB,WACI,SAAC,KAAD,CAAWjJ,OAAQsS,KAEnB,SAAC,KAAD,CACI3R,KAAK,KACL4E,QAAQ,QACR,aAAY9K,EAAE,8BACd0L,QAAS,yBAAMyB,QAAN,IAAMA,OAAN,EAAMA,GAAN,EACTJ,MAAM,SAAC,MAAD,WAKzB,CClEc,SAAS+K,KACpB,IAAQ9X,GAAM8E,EAAAA,EAAAA,KAAN9E,EACF2C,GAAWoC,EAAAA,EAAAA,MAEXgT,GAAalV,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,MAAM8U,UAAhB,IAExC,OACI,UAAC,KAAD,CAAK/R,EAAG,EAAR,WACI,SAAC,KAAD,CAASC,GAAG,KAAKC,KAAK,KAAtB,SACKlG,EAAE,gCAGP,UAAC,KAAD,CAAQwO,QAAS,GAAjB,UACKuJ,EAAW5Y,KAAI,SAACwY,EAAMxJ,GAAP,OACZ,SAACuJ,GAAD,CAEIC,KAAMA,EACN1N,SAAU,SAAAxE,GAAK,OAAI9C,GAASqV,EAAAA,EAAAA,IAAW7J,EAAG1I,GAA3B,EACf0H,SAAU,kBAAMxK,GAASsV,EAAAA,EAAAA,IAAW9J,GAA1B,GAHLA,EAFG,KAShB,SAAC,KAAD,CACIjI,KAAK,KACL4E,QAAQ,QACRiG,UAAU,SAAC,MAAD,IACVD,UAAU,WACVpF,QAAS,kBAAM/I,GAASuV,EAAAA,EAAAA,MAAf,EALb,SAOKlY,EAAE,kCAKtB,CChCc,SAASmY,KACpB,IAAQzX,GAAUmC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,KAAV,IAA/BvC,MAER,OACI,UAAC,KAAD,YACI,SAAC6S,GAAD,KAEA,SAAC,KAAD,KAEA,SAACgB,GAAD,IAEC7T,IAAU+C,EAAAA,GAAAA,QACP,iCACI,SAAC,KAAD,KAEA,SAACqU,GAAD,OAIPpX,IAAU+C,EAAAA,GAAAA,UACP,iCACI,SAAC,KAAD,KAEA,SAACiT,GAAD,SAKnB,C,gBCjCY0B,GAAe,SAAfA,EAAgBC,EAAeC,GACxC,GACI,CAAC,YAAa,WAAW5U,SAAS2U,IAClCC,EAAQD,GAAO7F,QAAQjE,OAAS,GAChC+J,EAAQD,GAAOtX,SAASwN,OAAS,EAEjC,OAAO,EAEX,IAAIgK,EAAUD,EAAQD,GAAO7F,QAAQ,GACrC,OAAI+F,EAEyC,IAArCD,EAAQC,GAASxX,SAASwN,OAEnB6J,EAAaG,EAASD,GAGuB,IAA7CA,EAAQC,GAASxX,SAASqS,QAAQiF,GAAe,GAAK,EAI1D,CAEd,ECRc,SAASG,GAAmBhY,GACvC,IAAQsJ,EAA0CtJ,EAA1CsJ,OAAQC,EAAkCvJ,EAAlCuJ,QAAS0O,EAAyBjY,EAAzBiY,UAAWC,EAAclY,EAAdkY,UAC5B1Y,GAAM8E,EAAAA,EAAAA,KAAN9E,EAER,OACI,SAAC,KAAD,CAAa8J,OAAQA,EAAQ6O,oBAAqBF,EAAW1O,QAASA,EAAtE,UACI,SAAC,KAAD,WACI,UAAC,KAAD,YACI,SAAC,KAAD,CAAmBsB,SAAS,KAAKuN,WAAW,OAA5C,SACK5Y,EAAE,+BAGP,SAAC,KAAD,4EAEA,UAAC,KAAD,YACI,SAAC,KAAD,CAAQ6Y,IAAKJ,EAAW/M,QAAS3B,EAAjC,SACK/J,EAAE,gCAEP,SAAC,KAAD,CAAQkL,YAAY,OAAOQ,QAASgN,EAAWI,GAAI,EAAnD,SACK9Y,EAAE,yCAO9B,CCjCc,SAAS+Y,KACpB,IAAQ/Y,GAAM8E,EAAAA,EAAAA,KAAN9E,EACF2C,GAAWoC,EAAAA,EAAAA,MAEXC,GAAkBnC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMC,IAAIiC,eAAd,IAE7C,GAAkDuB,EAAAA,EAAAA,WAAS,GAA3D,eAAOyS,EAAP,KAA0BC,EAA1B,KAEMR,GAAYS,EAAAA,EAAAA,QAA0B,MAkB5C,OACI,UAAC,KAAD,YACI,UAAC,KAAD,YACI,SAAC,KAAD,CAAQhT,KAAK,KAAK4E,QAAQ,UAAUY,QAAS,kBAAM/I,GAASwW,EAAAA,EAAAA,IAAkBnU,GAAjC,EAA7C,SACKhF,EAAE,sCAEP,SAAC,KAAD,CAAQkG,KAAK,KAAK4E,QAAQ,UAAUY,QAAS,kBAAMuN,GAAqB,EAA3B,EAA7C,SACKjZ,EAAE,wCAIX,SAACwY,GAAD,CACI1O,OAAQkP,EACRP,UAAWA,EACX1O,QAAS,kBAAMkP,GAAqB,EAA3B,EACTP,UA/BS,WCbiB,IAACU,EDc/BzW,GCd+ByW,EDcKpU,ECbrC,SAACrC,EAAwB0W,GAC5B,IAAM7L,EAAc6L,IAAWpW,MAAMkC,SAErC,EAA8BqI,EAAY4L,GAAlC5G,EAAR,EAAQA,QAASzR,EAAjB,EAAiBA,SAEjB,OAAwC,IAApCb,OAAOD,KAAKuN,GAAae,QACzBtJ,QAAQC,IAAI,0DACL,GACmB,IAAnBsN,EAAQjE,QAAoC,IAApBxN,EAASwN,QAExCtJ,QAAQC,IAAI,0EACL,KAIoBhF,OAAOD,KAAKuN,GAAazE,MACpD,SAAAhJ,GAAE,OAAK,CAACqZ,EAAW,YAAa,WAAW1V,SAAS3D,IAAyC,IAAlCqY,GAAarY,EAAIyN,EAA1E,MAGFvI,QAAQC,IAAI,sFACL,EAId,KDTOvC,GAAS2W,EAAAA,EAAAA,IAAiBC,EAAAA,GAAAA,QAG1B5W,GAAS6W,EAAAA,EAAAA,IAAmB,cAE5B7W,GAAS8W,EAAAA,GAAAA,IAAmCzU,IAC5CrC,ECMiB,SAACyW,GAE1B,OAAO,SAACzW,EAAwB0W,GAC5B,IAAM7L,EAAc6L,IAAWpW,MAAMkC,SACrC,EAA8BqI,EAAY4L,GAAlC5G,EAAR,EAAQA,QAASzR,EAAjB,EAAiBA,SAEb2Y,EAAaC,KAAKC,MAAMD,KAAKE,UAAUrM,IAE3C,GAAuB,IAAnBgF,EAAQjE,QAAoC,IAApBxN,EAASwN,OAMjCiE,EAAQsH,SAAQ,SAAAC,GACZL,EAAWK,GAAOhZ,SAAWA,CAChC,IACDA,EAAS+Y,SAAQ,SAAAE,GACbN,EAAWM,GAASxH,QAAUA,CACjC,IACsB,IAAnBA,EAAQjE,SACRmL,EAAWlH,EAAQ,IAAIC,OAAOwH,MAAQP,EAAWN,GAAW3G,OAAOwH,OAE/C,IAApBlZ,EAASwN,SACTmL,EAAW3Y,EAAS,IAAI0R,OAAOyH,KAAOR,EAAWN,GAAW3G,OAAOyH,WAEpE,GAAgD,IAA5C1M,EAAYgF,EAAQ,IAAIzR,SAASwN,QAA4D,IAA5Cf,EAAYzM,EAAS,IAAIyR,QAAQjE,OAAc,CAAC,IAAD,EAMvGmL,GAAU,oBACHlM,GADG,mBAELgF,EAAQ,IAFH,oBAGChF,EAAYgF,EAAQ,KAHrB,IAIFzR,SAAUyM,EAAYgF,EAAQ,IAAIzR,SAAS+C,QAAO,SAAA/D,GAAE,OAAIA,IAAOqZ,CAAX,IACpD3G,QAAO,oBACAjF,EAAYgF,EAAQ,IAAIC,QADzB,IAEFwH,MAAO,SAPT,SAULlZ,EAAS,IAVJ,oBAWCyM,EAAYzM,EAAS,KAXtB,IAYFyR,QAAShF,EAAYzM,EAAS,IAAIyR,QAAQ1O,QAAO,SAAA/D,GAAE,OAAIA,IAAOqZ,CAAX,IACnD3G,QAAO,oBACAjF,EAAYzM,EAAS,IAAI0R,QAD1B,IAEFyH,KAAM,QAfR,GAmBb,MASG1H,EAAQsH,SAAQ,SAAAC,GACZ,IAAIvN,EAAMkN,EAAWK,GAAOhZ,SAASqS,QAAQgG,GACzCrY,EAASwN,OACTmL,EAAWK,GAAOhZ,SAASyL,GAAOzL,EAAS,GAG3C2Y,EAAWK,GAAOhZ,SAASoZ,OAAO3N,EAAK,GAGvCkN,EAAWK,GAAOtH,OAAOwH,MAAM,KAAOb,IACtCM,EAAWK,GAAOtH,OAAOwH,MAAM,GAAKlZ,EAAS,GAEpD,IAGDA,EAAS+Y,SAAQ,SAAAE,GACb,IAAIxN,EAAMkN,EAAWM,GAASxH,QAAQY,QAAQgG,GAC1C5G,EAAQjE,OACRmL,EAAWM,GAASxH,QAAQhG,GAAOgG,EAAQ,GAG3CkH,EAAWM,GAASxH,QAAQ2H,OAAO3N,EAAK,GAGxCkN,EAAWM,GAASvH,OAAOyH,KAAK,KAAOd,IACvCM,EAAWM,GAASvH,OAAOyH,KAAK,GAAK1H,EAAQ,GAEpD,WAGEkH,EAAWN,GAClBzW,GAASyX,EAAAA,EAAAA,IAAgBV,GAC5B,CACJ,CDnGoBW,CAAcrV,IACvBiU,GAAqB,IAErBtW,GAAS2X,EAAAA,EAAAA,IAAe,CAAEC,OAAQ,QAASxT,QAAS/G,EAAE,2CAE7D,MAqBJ,CExCc,SAASwa,GAAWha,GAC/B,IAAQia,EAA0Eja,EAA1Eia,WAAYC,EAA8Dla,EAA9Dka,aAAcC,EAAgDna,EAAhDma,cAAeC,EAAiCpa,EAAjCoa,mBAAoBzN,EAAa3M,EAAb2M,SAC7DnN,GAAM8E,EAAAA,EAAAA,KAAN9E,EAER,GAAsCuG,EAAAA,EAAAA,WAAS,GAA/C,eAAO6G,EAAP,KAAoBC,EAApB,KAEMuK,EAA4B,CAC9B,CACInX,KAAM,SACN+E,MAAO,QACPC,MAAO,CAACgV,EAAWI,KAAMJ,EAAWK,IAAI5O,KAAK,KAC7CnB,QAAS2P,EACT/U,SAAU,SAAAF,GAAK,cAAIkV,QAAJ,IAAIA,OAAJ,EAAIA,EAAgBlV,EAApB,IAIjBoS,EAA4B,CAC9B,CACIpX,KAAM,SACN+E,MAAOxF,EAAE,UACT2K,WACI,SAACgC,EAAD,CACI7L,MAAO,CACH2Z,EAAWM,OAAO,GAAG,GACrBN,EAAWM,OAAO,GAAG,GACrBN,EAAWM,OAAO,GAAG,GACrBN,EAAWM,OAAO,GAAG,IAEzBrP,QAAS,kBAAM2B,GAAe,EAArB,KAIrB,CACI5M,KAAM,QACN+E,MAAOxF,EAAE,gBACTyF,MAAOgV,EAAWM,OAAO,GAAG,GAC5B5U,KAAM,IACNR,SAAU,SAAAF,GAAK,cACXmV,QADW,IACXA,OADW,EACXA,EAAqB,CACjBH,EAAWM,OAAO,GAAG,GACrBN,EAAWM,OAAO,GAAG,GACrBN,EAAWM,OAAO,GAAG,GACrBN,EAAWM,OAAO,GAAG,GACrBtV,EACAgV,EAAWM,OAAO,GAAG,IAPd,GAUnB,CACIta,KAAM,QACN+E,MAAOxF,EAAE,gBACTyF,MAAOgV,EAAWM,OAAO,GAAG,GAC5B5U,KAAM,IACNR,SAAU,SAAAF,GAAK,cACXmV,QADW,IACXA,OADW,EACXA,EAAqB,CACjBH,EAAWM,OAAO,GAAG,GACrBN,EAAWM,OAAO,GAAG,GACrBN,EAAWM,OAAO,GAAG,GACrBN,EAAWM,OAAO,GAAG,GACrBN,EAAWM,OAAO,GAAG,GACrBtV,GAPO,IAYvB,OACI,UAAC,KAAD,CAAS6I,UAAU,SAAnB,WACI,SAAC,KAAD,CAAW/I,OAAQqS,EAASzR,KAAK,UACjC,UAAC,KAAD,CAAQqI,QAAS,GAAjB,WACI,SAAC,KAAD,CAAWjJ,OAAQsS,KAEnB,SAAC,KAAD,CACI3R,KAAK,KACL4E,QAAQ,QACR,aAAW,0BACXY,QAAS,yBAAMyB,QAAN,IAAMA,OAAN,EAAMA,EAAW,EAAjB,EACTJ,MAAM,SAAC,MAAD,UAId,SAAClD,EAAD,CACIC,OAAQsD,EACRrD,QAAS,kBAAMsD,GAAe,EAArB,EACTrD,aAAcyQ,EAAWM,OAAO,GAAGza,MAAM,EAAG,GAC5C2J,SAAU,SAAAnJ,GAAK,cAAI8Z,QAAJ,IAAIA,OAAJ,EAAIA,EAAkB,kBAAO9Z,GAAP,CAAc2Z,EAAWM,OAAO,GAAG,GAAIN,EAAWM,OAAO,GAAG,KAAlF,MAI9B,CCvFc,SAASC,KACpB,IAAQhb,GAAM8E,EAAAA,EAAAA,KAAN9E,EACF2C,GAAWoC,EAAAA,EAAAA,MAEXkW,GAAiBpY,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMC,IAAIkY,cAAd,IAC5C,GAAyCpY,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,KAAV,IAAtDnC,EAAR,EAAQA,MAAiB0M,EAAzB,EAAerI,SAET+V,EAAiBvY,GAASwY,EAAAA,GAAAA,IAAuBF,IACjDG,EAAuBzY,GAAS0Y,EAAAA,GAAAA,IAAwBJ,IAMxDP,EAAeU,EAAqB/O,QACtC,SAACC,EAAKC,GAAN,gBAAC,WACMD,GADP,cAEKC,EAAIL,KAAK,KAAiCK,EANnCpN,KAAI,SAAAY,GAAE,OAAIyN,EAAYzN,GAAIsF,KAAK6G,KAAK,MAA9B,IAAsCA,KAAK,QAI7D,GAIA,CAAC,GA8BL,OACI,UAAC,KAAD,CAAQuC,MAAM,aAAazI,EAAG,EAA9B,WACI,SAAC,KAAD,CAASC,GAAG,KAAKC,KAAK,KAAtB,SACKlG,EAAE,kCAGNE,OAAOob,QAAQJ,GAAgB/b,KAAI,gBArBjBoc,EAqBiB,eAAExb,EAAF,KAAM0a,EAAN,YAChC,SAACD,GAAD,CAEIC,WAAYA,EACZC,aAAcA,EACdC,eA1BWY,EA0BsBxb,EA1BD,SAACyb,GAC7C,MAAmBA,EAAMjY,MAAM,KAA/B,eAAOsX,EAAP,KAAaC,EAAb,KACA7V,QAAQC,IAAR,uEAA4EqW,EAA5E,kBAA8FV,EAA9F,gBAA0GC,IAE1G,IACInY,GAAS8Y,EAAAA,GAAAA,IAAaF,EAAUV,EAAMC,GAGzC,CAFC,SACEnY,GAAS2X,EAAAA,EAAAA,IAAe,CAAEC,OAAQ,QAASxT,QAAS,qCACvD,CACJ,GAkBe6T,mBAAoB,SAAAc,GAAU,OAAI/Y,GAASgZ,EAAAA,GAAAA,IAAkB5b,EAAI,EAAG2b,GAAtC,EAC9BvO,SAAU,SAAAyO,GAAW,OAjBV,SAACL,EAAkBK,GAC1CjZ,GAASkZ,EAAAA,GAAAA,IAAkBN,EAAUK,GACxC,CAewCE,CAAmB/b,EAAI6b,EAA3B,GALhB7b,EAFuB,KAWf,IAAnBkb,GAA+D,IAAvC/a,OAAOD,KAAKib,GAAgB3M,UAClD,SAAC,KAAD,CACIrI,KAAK,KACL4E,QAAQ,QACRgG,UAAU,WACVC,UAAU,SAAC,MAAD,IACVrF,QAlDc,WAC1BzG,QAAQC,IAAR,iFAC8E+V,EAD9E,6BAEIG,EAAqB,IAEzBzY,GACIoZ,EAAAA,GAAAA,IAAUX,EAAqB,GAAG,GAAIA,EAAqB,GAAG,GAAI,CAC9D,CAACta,EAAM,GAAI,GAAI,UAAW4I,EAAAA,GAAAA,MAAkB,GAAI,MAG3D,EAmCW,SAOK1J,EAAE,kCAKtB,CCzEc,SAASgc,GAAaxb,GACjC,IAAQsJ,EAAoBtJ,EAApBsJ,OAAQC,EAAYvJ,EAAZuJ,QACR/J,GAAM8E,EAAAA,EAAAA,KAAN9E,EACF2C,GAAWoC,EAAAA,EAAAA,MAEXkW,GAAiBpY,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMC,IAAIkY,cAAd,IAC5C,GAAyCpY,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,KAAV,IAAtDvC,EAAR,EAAQA,MAAiB8M,EAAzB,EAAerI,SACTwR,GAAW9T,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAM8T,OAAOD,QAAjB,IAEtC,GAA0BpQ,EAAAA,EAAAA,UAAS0U,GAAnC,eAAOgB,EAAP,KAAcC,EAAd,KACA,GAAwB3V,EAAAA,EAAAA,UAAS,KAAjC,eAAOsU,EAAP,KAAasB,EAAb,KACA,GAAkC5V,EAAAA,EAAAA,UAAS,KAA3C,eAAO6V,EAAP,KAAkBC,EAAlB,KACA,GAAwB9V,EAAAA,EAAAA,UAAyB,OAAjD,eAAOuB,EAAP,KAAawU,EAAb,MAEAtb,EAAAA,EAAAA,YAAU,WACNkb,EAASjB,EACZ,GAAE,CAACA,IAEJ,IAAM1V,EAA2B,CAC7B,CACI9E,KAAM,SACN+E,MAAOxF,EAAE,sBACTyF,MAAOwW,EACPlR,SAAQ,WACD4L,EAAStK,QACR,SAACC,EAAKC,EAAKC,GAAX,gBAAC,WACMF,GADP,cAEKE,EACW,IAARA,EACMxM,EAAE,qBACFU,IAAU+C,EAAAA,GAAAA,UAAqB8Y,EAAAA,GAAAA,IAAehQ,EAAKiB,GAEnDxN,EAAE,yBAA2B,IAAMwM,EADnCxM,EAAE,uBAAyB,IAAMwM,GAN/C,GASA,CAAC,IAGT7G,SAAU,SAAAF,GAAK,OAAIyW,EAASzW,EAAb,GAEnB,CACIhF,KAAM,QACN+E,MAAOxF,EAAE,qBACTyF,MAAOoV,EACP5I,UAAW,SAAAxM,GAAK,OAAK+W,MAAMtK,OAAOzM,GAAlB,EAChBE,SAAUwW,EACVM,eAAgB,GAEpB,CACIhc,KAAM,QACN+E,MAAOxF,EAAE,0BACTiS,UAAW,SAAAxM,GAAK,OAAK+W,MAAMtK,OAAOzM,GAAlB,EAChBA,MAAO2W,EACPzW,SAAU0W,EACVI,eAAgB,GAEpB,CACIhc,KAAM,SACN+E,MAAOxF,EAAE,qBACTyF,MAAOqC,EACPiD,QAAS,CACL2R,IAAK1c,EAAE,oBACP2c,KAAM3c,EAAE,sBAEZ2F,SAAU,SAAAF,GAAK,OAAI6W,EAAQ7W,EAAZ,IASjBmX,GAAoB/B,IAASuB,GAAaI,MAAMtK,OAAO2I,KAAU2B,MAAMtK,OAAOkK,IAEpF,OACI,UAAC,KAAD,CAAOtS,OAAQA,EAAQC,QAASA,EAAhC,WACI,SAAC,KAAD,KACA,UAAC,KAAD,YACI,SAAC,KAAD,UAAc/J,EAAE,yBAChB,SAAC,KAAD,KAEA,SAAC,KAAD,WACI,SAAC,KAAD,CAAWuF,OAAQA,OAGvB,SAAC,KAAD,WACI,SAAC,KAAD,CAAQ2F,YAAY,OAAOiE,WAAYyN,EAAkBlR,QAnBpD,WACjB/I,GAASka,EAAAA,EAAAA,IAAcZ,EAAO/J,OAAO2I,GAAO3I,OAAOkK,GAAYtU,IAC/DiC,GACH,EAgBe,SACK/J,EAAE,gCAM1B,CC3Gc,SAAS8c,KACpB,IAAQ9c,GAAM8E,EAAAA,EAAAA,KAAN9E,EACF2C,GAAWoC,EAAAA,EAAAA,MAEXrE,GAAQmC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,MAAMvC,KAAhB,IAEnC,GAAoD6F,EAAAA,EAAAA,WAAS,GAA7D,eAAOwW,EAAP,KAA2BC,EAA3B,KAEA,OACI,UAAC,KAAD,CAAKhX,EAAG,EAAR,WACI,SAAC,KAAD,CAASC,GAAG,KAAKC,KAAK,KAAtB,SACKlG,EAAE,mCAGP,UAAC,KAAD,CACIid,KAAK,OACLjZ,GAAI,CACAgC,EAAG,EAEH,OAAQ,CACJkX,WAAY,EACZC,UAAW,OAEX,sBAAuB,CACnBC,UAAW,KAV3B,UAeK1c,IAAU+C,EAAAA,GAAAA,QACP,SAAC,KAAD,CACIyC,KAAK,KACL4E,QAAQ,UACRiG,UAAU,SAAC,MAAD,IACVD,UAAU,WACVpF,QAAS,kBAAMsR,GAAsB,EAA5B,EALb,SAOKhd,EAAE,qCAIX,SAAC,KAAD,CACIkG,KAAK,KACL4E,QAAQ,UACRiG,UAAU,SAAC,MAAD,IACVD,UAAU,WACVpF,QAAS,kBAAM/I,GAAS0a,EAAAA,EAAAA,IAAgB3c,IAAU+C,EAAAA,GAAAA,SAAzC,EALb,SAOK/C,IAAU+C,EAAAA,GAAAA,QACLzD,EAAE,+BACFA,EAAE,wCAIhB,SAACgc,GAAD,CAAclS,OAAQiT,EAAoBhT,QAAS,kBAAMiT,GAAsB,EAA5B,MAG9D,CCzDc,SAASM,KACpB,IAAMrC,GAAiBpY,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMC,IAAIkY,cAAd,IAC5C,GAAyCpY,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,KAAV,IAAtDvC,EAAR,EAAQA,MAAiB8M,EAAzB,EAAerI,SACTwR,GAAW9T,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAM8T,OAAOD,QAAjB,IAEtC,OACI,UAAC,KAAD,WACKjW,IAAU+C,EAAAA,GAAAA,UACa,IAAnBwX,IAAwBsB,EAAAA,GAAAA,IAAe5F,EAASsE,GAAiBzN,MAC9D,iCACI,SAACwN,GAAD,KACA,SAAC,KAAD,QAIZ,SAAC8B,GAAD,MAGX,CCbc,SAASS,KAAa,IAAD,IACxBvd,GAAM8E,EAAAA,EAAAA,KAAN9E,EACF2C,GAAWC,EAAAA,EAAAA,MAEjB,GAA2CC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMC,GAAV,IAAxDya,EAAR,EAAQA,cAAexY,EAAvB,EAAuBA,gBACjBK,GAAOxC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,uBAAIA,EAAMG,MAAMkC,SAASH,UAAzB,aAAI,EAAuCK,IAA3C,IAE5BoY,EAA2F,CAC7FC,QAAS,CACLC,QAAQ,SAAC,KAAD,CAAoBC,MAAU,OAAJvY,QAAI,IAAJA,OAAA,EAAAA,EAAM6G,KAAK,SAAU,KACvD2R,MAAM,SAACvK,GAAD,IACNwK,QAAQ,SAAC/E,GAAD,KAEZgF,MAAO,CAAEJ,OAAQ3d,EAAE,yBAA0B6d,MAAM,SAAC1F,GAAD,KACnD6F,OAAQ,CAAEL,OAAQ3d,EAAE,0BAA2B6d,MAAM,SAACP,GAAD,KACrDW,MAAO,CAAEN,OAAQ,UAOrB,OACI,UAAC,KAAD,CAAc7T,OAAQ0T,IAAkBjE,EAAAA,GAAAA,MAAqB5X,MAzB5C,IAyBqEgc,OAAO,eAA7F,WACI,SAAC,KAAD,CAAoB5T,QANR,WAChBpH,GAAS2W,EAAAA,EAAAA,IAAiBC,EAAAA,GAAAA,OAC7B,EAIO,SAA2CkE,EAAKD,GAAeG,SADnE,UAEKF,EAAKD,UAFV,aAEK,EAAqBK,KAF1B,UAGKJ,EAAKD,UAHV,aAGK,EAAqBM,SAGjC,C,gBC3CYI,GAAa,SAACC,EAAkB1d,EAAcoH,GACvD,IAAMuW,EAAO,IAAIC,KAAK,CAACxW,GAAO,CAAEpH,KAAAA,IAChC6d,GAAeH,EAAUC,EAC5B,EAEYE,GAAiB,SAACH,EAAkBC,GAC7C,IAAMG,EAAMC,OAAOC,IAAIC,gBAAgBN,GAEjCrW,EAAI9G,SAAS0d,cAAc,KACjC5W,EAAE5G,KAAOod,EACTxW,EAAE6W,SAAWT,EACbld,SAAS4c,KAAKgB,YAAY9W,GAC1BA,EAAE+W,QAEF7d,SAAS4c,KAAKkB,YAAYhX,GAC1ByW,OAAOC,IAAIO,gBAAgBT,EAC9B,EAEYU,GAAiB,SAACC,GAC3B,OAAO,IAAI1f,SAAQ,SAACC,GAChB,IAAM0f,EAAS,IAAIC,WACnBD,EAAOE,UAAY,kBAAM5f,EAAQ0f,EAAOG,OAArB,EACnBH,EAAOI,WAAWL,EACrB,GACJ,EAEYM,GAAW,WACpB,OAAOhX,UAAUiX,UAAU/b,SAAS,YAAc8E,UAAUiX,UAAU/b,SAAS,SAClF,E,0DCzBYgc,GAAc,qCAAG,WAC1B3b,EACAX,EACAuc,EACAC,EACAC,GAL0B,2FAOF,CAAC,kBAAmB,oBACvC1gB,KACG,SAAA2gB,GAAG,OACE7e,SAAS8e,cAAT,cAA8Bhc,IAA4BrD,MAAMsf,iBAAiBF,GAAKG,MAAM,QAAS,EADvG,IAGN9gB,IAAI+S,QAZiB,eAOnBgO,EAPmB,MAcpBC,EAAOlf,SAAS8e,cAAT,cAA8Bhc,IAAWqc,WAAU,IAE3DC,aAAa,UAAYH,GAAiBL,GAAS,KAAQ,KAAKpV,YACrE0V,EAAKzf,MAAM4f,YAAY,MAAO,WAE9B,CAAC,QAASvc,GACL5E,KAAI,SAAAohB,GAAG,aACJ,QACO,WACC,OAAItf,SAASuf,iBAAiB,SAAS1c,QAAO,SAAA2c,GAAC,OAAIA,EAAE1gB,KAAO,OAASwgB,CAAtB,IAA2B,UAD3E,aACC,EAA8EG,OAChFC,UAEDxhB,KAAI,SAAAyhB,GAAI,OAAIA,EAAKC,OAAT,IACR3U,KAAK,IAPN,IASP4N,SAAQ,SAAAgH,GACL,IAAIC,EAAI9f,SAAS0d,cAAc,SAC/BoC,EAAEC,YAAcF,EAChBX,EAAKc,QAAQF,EAChB,IAEL,UAAAZ,EAAKJ,cAAc,6BAAnB,SAA0CM,aAAa,SAAUT,EAAe,QAAU,QAC1F,UAAAO,EAAKJ,cAAc,yBAAnB,SAAsCM,aAAa,OAAQV,EAAgB,OAAS,SAEhFvc,IAAaK,EAAAA,GAAAA,IAtCS,2CAwCCyd,GAAkBf,GAxCnB,QAwCZgB,EAxCY,QAyCZJ,EAAI9f,SAAS0d,cAAc,UAC/BqC,YAAcG,EAAKjV,KAAK,MAC1BiU,EAAKc,QAAQF,GA3CK,kDA6ClBK,MAAM,+DACNnc,QAAQ6B,MAAR,MA9CkB,iCAkDnBqZ,GAlDmB,0DAAH,8DAyDrBkB,GAAoB,SAACjD,GACvB,OAAO,IAAI5e,SAAQ,SAACC,GAChB,IAAM0f,EAAS,IAAIC,WACnBD,EAAOE,UAAY,kBAAM5f,EAAQ0f,EAAOG,OAArB,EACnBH,EAAOmC,cAAclD,EACxB,GACJ,EAWY8C,GAAiB,qCAAG,WAAOK,GAAP,qFACvBC,EAAmBC,MAAM5G,KAC3B,IAAIjN,IACA,kBACO2T,EAAMf,iBAA6B,mBAD1C,OAEOe,EAAMf,iBAA6B,mBAErCrhB,KAAI,SAAAuiB,GAAE,OAAIA,EAAGC,SAAP,IACNzV,KAAK,IACL0V,QAAQ,QAAS,MAE5B1V,KAAK,IAXsB,SAaFjL,SAAS4gB,MAAMC,KAAK,0BAA2BN,GAb7C,cAavBO,EAbuB,OAcvBpB,EAAWc,MAAM5G,KAClB5Z,SAAS8e,cAA+B,kBAAmBW,MAAOC,SAAS,GAAqBqB,WAC5FrB,UAEHsB,EAAmBF,EAAa1V,QAA0B,SAACC,EAAKC,GAClE,IA5BkD2V,EA4B5CC,GA5B4CD,EA4BG3V,EAAVoU,EA3BlC/Y,MAAK,SAAAgZ,GACd,IAAMwB,EAAWxB,EAAKlgB,MACtB,OACI0hB,EAASC,WAAWT,QAAQ,WAAY,QAAUM,EAAKI,QAAUF,EAASG,eAAiBL,EAAKK,YAEvG,KAuBG,OAAIJ,EACkB7V,EAAI1E,MAAK,SAAAgZ,GACvB,IAAM4B,EAAY5B,EAAKlgB,MACjB+hB,EAAeN,EAAYzhB,MACjC,OACI8hB,EAAUH,aAAeI,EAAaJ,YACtCG,EAAUD,eAAiBE,EAAaF,YAE/C,IACkBjW,EAAMA,EAAIuB,OAAOsU,GAE7B7V,CAEd,GAAE,IAjC0B,SAmChB9M,QAAQa,IACjB4hB,EAAiB9iB,IAAjB,qCAAqB,WAAMujB,GAAN,mGAEUC,MAAMC,GAAeF,IAF/B,cAEPG,EAFO,YAGaxB,GAHb,SAGqCwB,EAASzE,OAH9C,kEAGP0E,EAHO,yBAINJ,EAAQ7B,QAAQe,QAAQ,yBAAxB,oBAA+DkB,EAA/D,UAJM,yCAMb7d,QAAQ6B,MAAR,MANa,kBAON,IAPM,0DAArB,wDApCyB,mFAAH,sDAiDjB8b,GAAiB,SAACF,GAA8B,IAAD,EAClDK,EAAgBL,EAAQhiB,MAAc+F,IAC5C,OAAO+Y,KACDuD,EAAanB,QAAQ,uBAAwB,MAC7CxgB,gBAAA,UAAsC2hB,EAAa9C,MAAM,6BAAzD,aAAsC,EAA2C,GAC1F,EAEY+C,GAAI,qCAAG,WAAOzB,EAAsB1B,EAAeoD,GAA5C,qFACZC,EAAO3B,EAAM/f,QAAQ2hB,QAAQxhB,MAC7ByhB,EAAO7B,EAAM/f,QAAQ2hB,QAAQ5hB,QAI7BwC,EAAS9C,SAASuf,iBAAiB,UAAU,IAC1C7e,MAAQuQ,OAAOgR,GAAQ1E,OAAO6E,iBAAmBxD,EACxD9b,EAAOxC,OAAS2Q,OAAOkR,GAAQ5E,OAAO6E,iBAAmBxD,EAEzD0B,EAAMlB,aAAa,QAAStc,EAAOpC,MAAM8I,YACzC8W,EAAMlB,aAAa,SAAUtc,EAAOxC,OAAOkJ,aAEvC6Y,EAAMvf,EAAOwf,WAAW,OACxBC,UAAU,EAAG,EAAGzf,EAAOpC,MAAOoC,EAAOxC,QAIzCggB,EAAMf,iBAAiB,wCAAwC1G,SAAQ,SAAA4H,GAAE,OAAIA,EAAGrB,aAAa,YAAa,OAAjC,IAEzEkB,EACKf,iBAAiB,6CACjB1G,SAAQ,SAAA4H,GAAE,OAAIA,EAAGrB,aAAa,YAAa,QAAjC,IAMfkB,EAAMf,iBAAiB,eAAe1G,SAAQ,SAAA4H,GAC1C,IAAI+B,EAAUjF,OAAOkF,iBAAiBhC,GACtCA,EAAGrB,aAAa,cAAeoD,EAAQpB,YACvCX,EAAGrB,aAAa,OAAQoD,EAAQ/hB,MAChCggB,EAAGrB,aAAa,oBAAqBoD,EAAQE,kBAC7CjC,EAAGrB,aAAa,cAAeoD,EAAQG,YAAc,GAExD,IAnCe,kBAsCT,IAAIpkB,SAAQ,SAACC,EAASokB,GACzB,IAAMC,EAAM,IAAIC,MAChBD,EAAIE,OAAS,WACTC,YACI,WACIX,EAAIY,UAAUJ,EAAK,EAAG,EAAG/f,EAAOpC,MAAOoC,EAAOxC,QAC9CwC,EAAOogB,QAAO,SAAA/F,GAAI,OAAI3e,EAAQ2e,EAAZ,GAAoB,YACzC,GACD6E,EAAS,IAAO,EAEvB,EACDa,EAAIM,QAAUP,EACdC,EAAIrd,IAAM,6BAA+B4d,KAAKC,SAASC,mBAAmBhD,EAAMiD,YACnF,KAnDe,4CAAH,0D,YCzGF,SAASC,GAAcjkB,GAClC,IAAQsJ,EAAoBtJ,EAApBsJ,OAAQC,EAAYvJ,EAAZuJ,QACR/J,GAAM8E,EAAAA,EAAAA,KAAN9E,EAEF2C,GAAWoC,EAAAA,EAAAA,MAEjB,GAAgDwB,EAAAA,EAAAA,UAAS,IAAzD,eAAOme,EAAP,KAAyBC,EAAzB,KACA,GAA0Cpe,EAAAA,EAAAA,WAAS,GAAnD,eAAOoZ,EAAP,KAAsBiF,EAAtB,KACA,GAAwCre,EAAAA,EAAAA,WAAS,GAAjD,eAAOqZ,EAAP,KAAqBiF,EAArB,KACA,GAA0Bte,EAAAA,EAAAA,UAAS,KAAnC,eAAOsZ,EAAP,KAAciF,EAAd,KACA,GAA4Bve,EAAAA,EAAAA,UAAS,OAArC,eAAOwe,EAAP,KAAeC,EAAf,KAEMhiB,GAAeH,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMC,IAAIC,YAAd,IAC1C,GAKIH,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,KAAV,IAJrBvC,EADJ,EACIA,MACU8M,EAFd,EAEIrI,SACiB8f,EAHrB,EAGIC,gBACW1Q,EAJf,EAIIC,WAGJzT,EAAAA,EAAAA,YAAU,WAEe,QAAjBgC,GAA+C,KAArB0hB,GAA2B1hB,IAAiB0hB,GACtEC,EAAoB,GAE3B,GAAE,CAAC3hB,IAEJ,IAAMmiB,EAAgBtR,EAAAA,GAAanT,GAAO2L,QACtC,SAACC,EAAKC,GACF,MAAqB,QAAjBvJ,GAA0BuJ,IAAQvJ,GAC3B,oBAAKsJ,GAAZ,cAAkBC,EAAMvM,EAAE,cAAgBuM,MAEnC,WAAKD,EAEnB,GACD,CAAE,GAAItM,EAAE,gCAGNolB,EAAe,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAK/Y,QAGhG,SAACC,EAAKC,GAAN,gBAAC,WACMD,GADP,cAEKC,EAFL,UAEcA,EAFd,SAIA,CAAC,GAGC8Y,EAAgB,CAClBC,IAAKtlB,EAAE,qBACPulB,IAAKvlB,EAAE,sBAGLuF,EAA2B,CAC7B,CACI9E,KAAM,SACN+E,MAAOxF,EAAE,wBACTyF,MAAOif,EACP3Z,QAASoa,EACTK,gBAAiB,CAAC,IAClB7f,SAAU,SAAAF,GAAK,OAAIkf,EAAoBlf,EAAxB,EACfU,KAAM,QAEV,CACI1F,KAAM,SACN+E,MAAOxF,EAAE,6BACT6P,UAAW8P,EACXha,SAAUif,EACV3U,SAAS,EACT9J,KAAM,QAEV,CACI1F,KAAM,SACN+E,MAAOxF,EAAE,4BACT6P,UAAW+P,EACXja,SAAUkf,EACV5U,SAAS,EACT9J,KAAM,QAEV,CACI1F,KAAM,SACN+E,MAAOxF,EAAE,uBACTyF,MAAOoa,EACP9U,QAASqa,EACTzf,SAAU,SAAAF,GAAK,OAAIqf,EAASrf,EAAb,GAEnB,CACIhF,KAAM,SACN+E,MAAOxF,EAAE,wBACTyF,MAAOsf,EACPha,QAASsa,EACT1f,SAAU,SAAAF,GAAK,OAAIuf,EAAUvf,EAAd,IAIjBggB,EAAc,qCAAG,WAAOC,GAAP,4FACnB/iB,GAASgjB,EAAAA,EAAAA,IAAmB,IACtBC,EACS,YAAXF,EACM,CAACT,GACD/kB,OAAOD,KAAKuN,GAAa1J,QAAO,SAAA/D,GAAE,OAAK,CAAC,YAAa,WAAW2D,SAAS3D,EAAvC,IAEtC8lB,EAAM,IAAIC,MAPG,eASDF,GATC,qDASVG,EATU,WAUfpjB,GAASgjB,EAAAA,EAAAA,KAAqBzT,OAAO6T,GAAS,GAAKH,EAAwBrX,OAAU,MAE/E8J,EAAQuN,EAAwBG,GAEtCpjB,GAASwW,EAAAA,EAAAA,IAAkBd,IAdZ,WAeT2N,EAAAA,GAAAA,IAAU,KAfD,yBAiBItG,GACfgF,EACAhkB,EACAif,EACAC,EACAC,GAtBW,WAiBTM,EAjBS,OA2Bflf,SAAS4c,KAAKgB,YAAYsB,GAEpBhC,EAAW,cAAO9F,EAAP,YAAgB7K,EAAY6K,GAAOhT,KAAK,GAAxC,YAA8CmI,EAAY6K,GAAOhT,KAAK,IAAK4gB,WACxF,IACA,KAEW,QAAXlB,EAjCW,wBAkCL9B,EAASzD,MAAwB,MAAVuG,EAlClB,UAmCQ/C,GAAK7C,EAAMN,EAAQ,IAAKoD,GAnChC,QAmCL7E,EAnCK,OAqCPwH,EAAwBrX,OAAS,EAGjCsX,EAAI3G,KAAJ,UAAYf,EAAZ,QAA4BC,GAE5BE,GAAe,GAAD,OAAIH,EAAJ,QAAoBC,GA1C3B,wBA4CO,QAAX2G,IACP5E,EAAK+F,gBAAgB,UACfre,EAAO,6BAA+Bwc,KAAKC,SAASC,mBAAmBpE,EAAKqE,aAE9EoB,EAAwBrX,OAAS,EACjCsX,EAAI3G,KAAJ,UAAYf,EAAZ,QAA4BtW,EAAKtE,MAAM,WAAW,GAAI,CAAE4iB,QAAQ,IAEhEjI,GAAWC,EAAW,OAAQ,gBAAiBgC,EAAKqE,YAnD7C,QAwDfvjB,SAAS4c,KAAKkB,YAAYoB,GAxDX,4BA4DfyF,EAAwBrX,OAAS,GA5DlB,kCA6DOsX,EAAIO,cAAc,CAAE3lB,KAAM,SA7DjC,QA6DT4lB,EA7DS,OA8DTlI,EAAW,cAAO3J,EAAS,GAAhB,YAAsBA,EAAS,GAA/B,QAAwCyR,WAAW,IAAK,KACzE3H,GAAeH,EAAUkI,GA/DV,QAmEnB1jB,GAASwW,EAAAA,EAAAA,IAAkB8L,IAC3BtiB,GAAS2jB,EAAAA,EAAAA,OACTvc,IArEmB,4CAAH,sDAwEpB,OACI,UAAC,KAAD,CAAOD,OAAQA,EAAQC,QAASA,EAAhC,WACI,SAAC,KAAD,KACA,UAAC,KAAD,YACI,SAAC,KAAD,UAAc/J,EAAE,0BAChB,SAAC,KAAD,KAEA,SAAC,KAAD,WACI,SAAC,KAAD,CAAWuF,OAAQA,OAGvB,SAAC,KAAD,WACI,UAAC,KAAD,YACI,SAAC,KAAD,CACI2F,YAAY,OACZJ,QAAQ,UACR5E,KAAK,KACLwF,QAAS,kBAAM+Z,EAAe,UAArB,EACT9Z,UAAW+Y,EALf,SAOK1kB,EAAE,+BAENU,IAAU+C,EAAAA,GAAAA,QACP,SAAC,KAAD,CACIyH,YAAY,OACZJ,QAAQ,UACR5E,KAAK,KACLwF,QAAS,kBAAM+Z,EAAe,MAArB,EACT9Z,UAAW+Y,EALf,SAOK1kB,EAAE,yCAQlC,CCjOc,SAASumB,KACpB,IAAQvmB,GAAM8E,EAAAA,EAAAA,KAAN9E,EAER,GAAsDuG,EAAAA,EAAAA,WAAS,GAA/D,eAAOigB,EAAP,KAA4BC,EAA5B,KAEMxjB,GAAQJ,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,KAAV,IAMnC,OACI,UAAC,MAAD,YACI,SAAC,MAAD,CAAYgD,GAAIygB,EAAAA,GAAQ5b,QAAQ,QAAQ5E,KAAK,KAAKygB,WAAW,SAAC,MAAD,IAA7D,SACK3mB,EAAE,gCAEP,UAAC,MAAD,YACI,SAAC,MAAD,CAAU0L,QAVK,WACvBwS,GAAW,OAAD,QAAQ,IAAI0I,MAAOC,UAAnB,SAAqC,mBAAoBlN,KAAKE,UAAU5W,GACrF,EAQW,SAAwCjD,EAAE,iCAC1C,SAAC,MAAD,CAAU0L,QAAS,kBAAM+a,GAAuB,EAA7B,EAAnB,SAAwDzmB,EAAE,gCAG9D,SAACykB,GAAD,CAAe3a,OAAQ0c,EAAqBzc,QAAS,kBAAM0c,GAAuB,EAA7B,MAGhE,CCVc,SAASK,GAAmBtmB,GAAiC,IAAD,MAC/DsJ,EAA2DtJ,EAA3DsJ,OAAQC,EAAmDvJ,EAAnDuJ,QAAS0O,EAA0CjY,EAA1CiY,UAAWsO,EAA+BvmB,EAA/BumB,cAAeC,EAAgBxmB,EAAhBwmB,YAC3ChnB,GAAM8E,EAAAA,EAAAA,KAAN9E,EASR,OACI,SAAC,KAAD,CAAa8J,OAAQA,EAAQ6O,oBAAqBF,EAAW1O,QAASA,EAAtE,UACI,SAAC,KAAD,WACI,UAAC,KAAD,YACI,SAAC,KAAD,CAAmBsB,SAAS,KAAKuN,WAAW,OAA5C,SACK5Y,EAAE,+BAGP,UAAC,KAAD,WACKA,EAAE,gCACH,SAAC,KAAD,CACIqF,MAAmB,OAAb0hB,QAAa,IAAbA,GAAA,UAAAA,EAAetS,iBAAf,eAA0BvI,KAAK,OAAQ,GAC7CzC,IAAiB,OAAbsd,QAAa,IAAbA,GAAA,UAAAA,EAAejmB,aAAf,eAAuB,KAAM4I,EAAAA,GAAAA,MACjCC,IAAiB,OAAbod,QAAa,IAAbA,GAAA,UAAAA,EAAejmB,aAAf,eAAuB,KAAM,YAEpCd,EAAE,gCACE+mB,EAAgB7mB,OAAOD,KAAK8mB,EAAc5hB,UAAUoJ,OAAS,EAAI,GAClEvO,EAAE,mCAGV,UAAC,KAAD,YACI,SAAC,KAAD,CAAQ6Y,IAAKJ,EAAW/M,QAAS3B,EAAjC,SACK/J,EAAE,gCAEP,SAAC,KAAD,CAAQkL,YAAY,OAAOQ,QA/BzB,WACdqb,GACAC,EAAYD,GAEhBhd,GACH,EA0BsE+O,GAAI,EAAvD,SACK9Y,EAAE,yCAO9B,C,4BCrCc,SAASinB,GAAczmB,GAClC,IAAQsJ,EAAiCtJ,EAAjCsJ,OAAQC,EAAyBvJ,EAAzBuJ,QAASid,EAAgBxmB,EAAhBwmB,YAEjBhnB,GAAM8E,EAAAA,EAAAA,KAAN9E,EACF2C,GAAWoC,EAAAA,EAAAA,MAEXmiB,EAAY,qCAAG,WAAOC,EAAiBhJ,GAAxB,+EACjBxb,GAASykB,EAAAA,EAAAA,OADQ,SAEI,qBACoED,EADpE,YAC+EhJ,EAD/E,UAFJ,OAEXhe,EAFW,OAKjB6mB,EAAY7mB,EAAOwG,SALF,2CAAH,wDAQlB,OACI,UAAC,KAAD,CAAOmD,OAAQA,EAAQC,QAASA,EAAhC,WACI,SAAC,KAAD,KACA,UAAC,KAAD,YACI,SAAC,KAAD,UAAc/J,EAAE,0BAChB,SAAC,KAAD,KAEA,SAAC,KAAD,WACI,UAAC,KAAD,CAAMqnB,QAAM,EAACnhB,KAAK,KAAKohB,YAAY,WAAnC,WACI,SAAC,KAAD,CAASC,KAAM,IAAf,SACKC,GAAAA,EAAAA,KAAkB,SAAAL,GAAO,OACtB,SAAC,KAAD,WAAuBM,EAAAA,GAAAA,GAAcN,EAAQ9hB,OAAnC8hB,EAAQpnB,GADI,OAK9B,SAAC,KAAD,CAAWwnB,KAAM,IAAjB,SACKrnB,OAAOob,QAAQoM,GAAAA,GACX5f,MACG,SAACC,EAAGC,GAAJ,OACIwf,GAAAA,EAAAA,WAAwB,SAAAG,GAAC,OAAIA,EAAE5nB,KAAOgI,EAAE,EAAf,IACzByf,GAAAA,EAAAA,WAAwB,SAAAG,GAAC,OAAIA,EAAE5nB,KAAOiI,EAAE,EAAf,GAF7B,IAIH7I,KAAI,+BAAEgoB,EAAF,KAAWS,EAAX,YACD,SAAC,KAAD,CAAwB3hB,GAAI4hB,EAAAA,GAAM7lB,cAAc,SAAS8lB,GAAI,EAAGC,GAAI,EAApE,SACKH,EAAUzoB,KAAI,SAAA6oB,GAAQ,OACnB,SAAC,KAAD,CAEIld,QAAQ,QACR5E,KAAK,KACL+hB,eAAe,aACfC,SAAS,SACTxc,QAAS,kBAAMwb,EAAaC,EAASa,EAAS7J,SAArC,EANb,UAQKsJ,EAAAA,GAAAA,GAAcO,EAAS3iB,OAPnB2iB,EAAS7J,SAFC,KADZgJ,EADd,gBAsBpC,C,4BCxEc,SAASgB,KACpB,OAAoBrjB,EAAAA,EAAAA,KAAZ9E,EAAR,EAAQA,EAAGqH,EAAX,EAAWA,KACL1E,GAAWoC,EAAAA,EAAAA,MAEXrE,GAAQmC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,MAAMvC,KAAhB,IAEnC,GAAkD6F,EAAAA,EAAAA,WAAS,GAA3D,eAAO6hB,EAAP,KAA0BC,EAA1B,KACA,GAAsD9hB,EAAAA,EAAAA,WAAS,GAA/D,eAAO+hB,EAAP,KAA4BC,EAA5B,KACA,GAA0ChiB,EAAAA,EAAAA,eAA+BC,GAAzE,eAAOugB,EAAP,KAAsByB,EAAtB,KAEMC,GAAsBvP,EAAAA,EAAAA,QAAiC,MACvDwP,GAAexP,EAAAA,EAAAA,QAAgC,MAE/CyP,EAAY,qCAAG,WAAOC,GAAP,iFACX1J,EADW,UACJ0J,EAAMC,OAAOC,aADT,aACJ,EAAqB,GAClC7jB,QAAQC,IAAI,6CAA8Cga,GAEvC,sBAAX,OAAJA,QAAI,IAAJA,OAAA,EAAAA,EAAMze,MAJO,gBAKbkC,GAAS2X,EAAAA,EAAAA,IAAe,CAAEC,OAAQ,QAASxT,QAAS/G,EAAE,8BALzC,gDAQcif,GAAeC,GAR7B,OAQH6J,EARG,OASHC,GAAeC,EAAAA,GAAAA,IAAYtP,KAAKC,MAAMmP,IAC5CP,EAAiBQ,GACjBX,GAAqB,GAXZ,kDAaT1lB,GAAS2X,EAAAA,EAAAA,IAAe,CAAEC,OAAQ,QAASxT,QAAS/G,EAAE,+BACtDiF,QAAQ6B,MACJ,sFADJ,MAdS,QAsBjB8hB,EAAMC,OAAOpjB,MAAQ,GAtBJ,0DAAH,sDAyBZyjB,EAAkB,SAACjmB,GACrBN,EC/CwB,SAACM,GAC7B,4CAAO,WAAON,EAAwB0W,GAA/B,mFACG2P,GAAeC,EAAAA,GAAAA,IAAYhmB,GAD9B,SAEGub,OAAO2K,WAAWC,UAAU,WAAYzP,KAAKE,UAAUmP,IAF1D,cAKHrmB,GAAS2W,EAAAA,EAAAA,IAAiBC,EAAAA,GAAAA,QAC1B5W,GAAS6W,EAAAA,EAAAA,IAAmB,cAGtBxW,EAAeqW,IAAWtW,IAAIC,aAC9Be,EAAS8P,EAAAA,GAAamV,EAAatoB,OAAOqI,MAAK,SAAA4e,GAAC,OAAIA,IAAM3kB,CAAV,IAA0BA,EAAeqmB,EAAAA,GAV5F,SAWG1mB,GAAS2mB,EAAAA,EAAAA,IAAavlB,IAXzB,QAYHwlB,EAAAA,GAAAA,GAAYP,GACZrmB,GAAS2jB,EAAAA,EAAAA,OAbN,4CAAP,uDAeH,CD+BgBkD,CAAiBvmB,GAC7B,EAED,OACI,UAAC,MAAD,YACI,SAAC,MAAD,CAAYgD,GAAIygB,EAAAA,GAAQ5b,QAAQ,QAAQ5E,KAAK,KAAKygB,WAAW,SAAC,MAAD,IAA7D,SACK3mB,EAAE,2BAEP,UAAC,MAAD,YACI,SAAC,MAAD,CACI+M,MAAM,SAAC,MAAD,IACNrB,QAAS,kBAAMwd,GAAgBO,EAAAA,GAAAA,GAAU/oB,EAAO2G,EAAKqiB,UAA5C,EAFb,SAIK1pB,EAAE,qBAGP,kBACI6Y,IAAK6P,EACLjoB,KAAK,OACLkpB,OAAO,QACP9jB,QAAQ,EACRF,SAAUgjB,EACV,cAAY,iBAEhB,SAAC,MAAD,CAAU5b,MAAM,SAAC,MAAD,IAAcrB,QAAS,+BAAMgd,QAAN,IAAMA,GAAN,UAAMA,EAAckB,eAApB,aAAM,EAAuB9K,OAA7B,EAAvC,SACK9e,EAAE,yBAGP,SAAC,MAAD,CAAU+M,MAAM,SAAC,MAAD,IAAuBrB,QAAS,kBAAM6c,GAAuB,EAA7B,EAAhD,SACKvoB,EAAE,+BAIX,SAAC8mB,GAAD,CACIhd,OAAQse,EACRre,QAAS,kBAAMse,GAAqB,EAA3B,EACT5P,UAAWgQ,EACX1B,cAAeA,EACfC,YAAakC,KAGjB,SAACjC,GAAD,CACInd,OAAQwe,EACRve,QAAS,kBAAMwe,GAAuB,EAA7B,EACTvB,YAAakC,MAI5B,CE3Fc,SAASW,KACpB,IAAQ7pB,GAAM8E,EAAAA,EAAAA,KAAN9E,EACF2C,GAAWC,EAAAA,EAAAA,MAEjB,OACI,UAAC,KAAD,CAAQkW,GAAG,OAAX,WACI,SAACyN,GAAD,KAEA,SAAC4B,GAAD,KAEA,SAAC,KAAD,CACIrd,QAAQ,QACR5E,KAAK,KACLgF,YAAY,OACZ6F,UAAU,SAAC,MAAD,IACVrF,QAAS,kBAAM/I,GAAS2W,EAAAA,EAAAA,IAAiBC,EAAAA,GAAAA,OAAhC,EALb,SAOKvZ,EAAE,+BAIlB,CCrBc,SAAS8pB,KACpB,IAAQ9pB,GAAM8E,EAAAA,EAAAA,KAAN9E,EACF2C,GAAWoC,EAAAA,EAAAA,MAEjB,GAAsClC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMC,GAAV,IAAnDC,EAAR,EAAQA,aAAcnC,EAAtB,EAAsBA,YAChBH,GAAQmC,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,MAAMvC,KAAhB,IAE7BqpB,EAAmB,CAACV,EAAAA,IAAD,eAAexV,EAAAA,GAAanT,KAAQvB,KAAI,SAAA4E,GAAM,MAAK,CACxEyB,MAAOxF,EAAE,cAAgB+D,GACzB0B,MAAO1B,EAF4D,IAKjEwB,EAA2B,CAC7B,CACI9E,KAAM,SACN+E,MAAOxF,EAAE,kBACT2K,WACI,SAACgE,EAAD,CACIC,WAAYmb,EACZ/gB,aAAchG,EACd2C,SAAU,SAAA5B,GAAM,OAAIpB,GAAS2mB,EAAAA,EAAAA,IAAavlB,GAA1B,KAI5B,CACItD,KAAM,SACN+E,MAAOxF,EAAE,gBACTyF,MAAO5E,EACPmT,IAAK,GACLC,IAAK,EACL+V,KAAM,GACNrkB,SAAU,SAAAF,GAAK,OAAI9C,GAASsnB,EAAAA,EAAAA,IAAYxkB,GAAzB,EACfsL,UAAU,SAAC,MAAD,IACV4V,WAAW,SAAC,MAAD,IACXxgB,KAAM,MAId,OACI,UAAC,KAAD,YACI,SAAC,KAAD,CAAWZ,OAAQA,KAEnB,SAACskB,GAAD,MAGX,C,ICrDWK,G,aAAZ,SAAYA,GAAAA,EAAAA,IAAAA,MAAAA,EAAAA,IAAAA,MAAAA,EAAAA,IAAAA,KAAAA,CAAZ,CAAYA,KAAAA,GAAAA,CAAAA,IAML,I,gDCiBDC,GAAsB,CAAC,OAAQ,eAC/BC,GAAoB,CACtB,aACA,cACA,cACA,eACA,UACA,qBACA,kBACA,cACA,cACA,YACA,gBAQW,SAASC,GAAU7pB,GAC9B,IAAQsJ,EAAoBtJ,EAApBsJ,OAAQC,EAAYvJ,EAAZuJ,QACR/J,GAAM8E,EAAAA,EAAAA,KAAN9E,EAER,OACI,UAAC,KAAD,CAAO8J,OAAQA,EAAQC,QAASA,EAAS7D,KAAK,KAAKokB,eAAe,SAAlE,WACI,SAAC,KAAD,KACA,UAAC,KAAD,YACI,SAAC,KAAD,UAActqB,EAAE,uBAChB,SAAC,KAAD,KAEA,UAAC,KAAD,YACI,SAAC,KAAD,CAASiG,GAAG,KAAKC,KAAK,KAAKqkB,GAAI,EAA/B,SACKvqB,EAAE,2BAGP,UAAC,KAAD,YACI,UAAC,KAAD,mFAC0E,KACtE,UAAC,KAAD,CAAMuL,MAAM,WAAWpK,KAAK,yBAAyBqK,YAAY,EAAjE,oCAC0B,SAAC,KAAD,CAAMvF,GAAIwF,EAAAA,SAEnC,MACD,UAAC,KAAD,CAAMF,MAAM,WAAWpK,KAAK,0BAA0BqK,YAAY,EAAlE,8BACoB,SAAC,KAAD,CAAMvF,GAAIwF,EAAAA,SAE7B,QACD,UAAC,KAAD,CAAMF,MAAM,WAAWpK,KAAK,2BAA2BqK,YAAY,EAAnE,4CACkC,SAAC,KAAD,CAAMvF,GAAIwF,EAAAA,SAXhD,uMAgBI,kBAhBJ,0JAkBI,UAAC,KAAD,CAAMF,MAAM,WAAWpK,KAAK,yBAAyBqK,YAAY,EAAjE,+DACa,SAAC,KAAD,CAAMvF,GAAIwF,EAAAA,SAnB3B,UAsBI,UAAC,KAAD,CAAMF,MAAM,WAAWpK,KAAK,0BAA0BqK,YAAY,EAAlE,uCACS,SAAC,KAAD,CAAMvF,GAAIwF,EAAAA,SAvBvB,UA0BI,UAAC,KAAD,CAAMF,MAAM,WAAWpK,KAAK,2BAA2BqK,YAAY,EAAnE,+DACa,SAAC,KAAD,CAAMvF,GAAIwF,EAAAA,SA3B3B,qOA+BA,UAAC,KAAD,+EACsE,KAClE,UAAC,KAAD,CAAMF,MAAM,WAAWpK,KAAK,mCAAmCqK,YAAY,EAA3E,yBACe,SAAC,KAAD,CAAMvF,GAAIwF,EAAAA,SAExB,SACD,UAAC,KAAD,CAAMF,MAAM,WAAWpK,KAAK,uCAAuCqK,YAAY,EAA/E,4BACkB,SAAC,KAAD,CAAMvF,GAAIwF,EAAAA,SAPhC,0LAWI,kBAXJ,oGAaI,UAAC,KAAD,CAAMF,MAAM,WAAWpK,KAAK,mCAAmCqK,YAAY,EAA3E,yBACe,SAAC,KAAD,CAAMvF,GAAIwF,EAAAA,SAd7B,UAiBI,UAAC,KAAD,CAAMF,MAAM,WAAWpK,KAAK,uCAAuCqK,YAAY,EAA/E,4BACkB,SAAC,KAAD,CAAMvF,GAAIwF,EAAAA,SAlBhC,iVAsBA,UAAC,KAAD,+FACsF,KAClF,UAAC,KAAD,CAAMF,MAAM,WAAWpK,KAAK,0CAA0CqK,YAAY,EAAlF,6CACmC,SAAC,KAAD,CAAMvF,GAAIwF,EAAAA,SAHjD,2OAQI,kBARJ,8IAUI,UAAC,KAAD,CAAMF,MAAM,WAAWpK,KAAK,0CAA0CqK,YAAY,EAAlF,wEACsB,SAAC,KAAD,CAAMvF,GAAIwF,EAAAA,SAXpC,kXAgBA,UAAC,KAAD,2IAGI,kBAHJ,iMAMA,UAAC,KAAD,wEAC+D,KAC3D,UAAC,KAAD,CAAMF,MAAM,WAAWpK,KAAK,wBAAwBqK,YAAY,EAAhE,uBACa,SAAC,KAAD,CAAMvF,GAAIwF,EAAAA,SACf,IAJZ,2DAMI,UAAC,KAAD,CACIF,MAAM,WACNpK,KAAK,kDACLqK,YAAY,EAHhB,2BAKiB,SAAC,KAAD,CAAMvF,GAAIwF,EAAAA,UAE3B,kBAbJ,wFAeI,UAAC,KAAD,CAAMF,MAAM,WAAWpK,KAAK,wBAAwBqK,YAAY,EAAhE,uBACa,SAAC,KAAD,CAAMvF,GAAIwF,EAAAA,SAhB3B,oDAmBI,UAAC,KAAD,CACIF,MAAM,WACNpK,KAAK,kDACLqK,YAAY,EAHhB,2BAKiB,SAAC,KAAD,CAAMvF,GAAIwF,EAAAA,aAG/B,UAAC,KAAD,oQAII,kBAJJ,oVASJ,SAAC,KAAD,CAASxF,GAAG,KAAKC,KAAK,KAAK0G,GAAI,EAAG2d,GAAI,EAAtC,SACKvqB,EAAE,mBAGP,SAAC,KAAD,CAASiG,GAAG,KAAKC,KAAK,KAAKskB,GAAI,EAA/B,SACKxqB,EAAE,wBAGP,UAAC,KAAD,YACI,UAAC,MAAD,CACIkG,KAAK,KACLC,KAAK,MACLuF,QAAS,kBAAM8S,OAAOiM,KAAK,+BAAgC,SAAlD,EACTC,OAAO,UAJX,WAMI,SAAC,MAAD,CAAQjkB,IAAI,mCAAmCP,KAAK,KAAKskB,GAAI,EAAG1R,IAAK,EAAG5R,GAAI,KAC5E,UAAC,MAAD,YACI,SAAC,KAAD,CAAMmE,SAAS,KAAKuN,WAAW,OAAO2R,GAAI,EAA1C,yBAGA,SAAC,KAAD,CAAMlf,SAAS,KAAf,gCACA,SAAC,KAAD,CAAMA,SAAS,KAAf,6DAGR,UAAC,MAAD,CACInF,KAAK,KACLC,KAAK,MACLuF,QAAS,kBAAM8S,OAAOiM,KAAK,mCAAoC,SAAtD,EACTC,OAAO,UAJX,WAMI,SAAC,MAAD,CAAQjkB,IAAI,uCAAuCP,KAAK,KAAKskB,GAAI,EAAG1R,IAAK,EAAG5R,GAAI,KAChF,UAAC,MAAD,YACI,SAAC,KAAD,CAAMmE,SAAS,KAAKuN,WAAW,OAAO2R,GAAI,EAA1C,4BAGA,SAAC,KAAD,CAAMlf,SAAS,KAAf,6CACA,SAAC,KAAD,CAAMA,SAAS,KAAf,6DAKZ,SAAC,KAAD,CAASpF,GAAG,KAAKC,KAAK,KAAKskB,GAAI,EAA/B,SACKxqB,EAAE,4BAGP,UAAC,KAAD,CAAMid,KAAK,OAAX,UACKkN,GAAoBhrB,KAAI,SAAAwrB,GAAW,OAChC,UAAC,MAAD,CAEIzkB,KAAK,KACLqkB,GAAI,EACJrjB,GAAI,EACJ9E,KAAK,OACLsJ,QAAS,kBACL8S,OAAOiM,KAAP,qEACkEE,GAC9D,SAHC,EAMTD,OAAO,UAZX,WAcI,SAAC,MAAD,CAAQjkB,IAAG,6BAAwBkkB,EAAxB,QAA2CzkB,KAAK,KAAK4S,IAAK,EAAG5R,GAAI,KAC5E,SAAC,MAAD,UAAWyjB,KACX,SAAC,MAAD,CAAUC,SAAU,KACpB,SAAC,MAAD,WACI,SAAC,KAAD,CAAMvf,SAAS,KAAf,SAAqBrL,EAAE,gCAjBtB2qB,EAFuB,IAuBnCP,GAAkBjrB,KAAI,SAAAwrB,GAAW,OAC9B,UAAC,MAAD,CAEIzkB,KAAK,KACLqkB,GAAI,EACJrjB,GAAI,EACJwE,QAAS,kBACL8S,OAAOiM,KAAP,qEACkEE,GAC9D,SAHC,EAMTD,OAAO,UAXX,WAaI,SAAC,MAAD,CAAQjkB,IAAG,6BAAwBkkB,EAAxB,QAA2CzkB,KAAK,KAAK4S,IAAK,EAAG5R,GAAI,KAC5E,SAAC,MAAD,UAAWyjB,MAbNA,EAFqB,QAoBtC,UAAC,KAAD,WACK3qB,EAAE,SAAU,KACb,UAAC,KAAD,CACIuL,MAAM,WACNpK,KAAK,qFACLqK,YAAY,EAHhB,UAKKxL,EAAE,qBALP,KAK6B,SAAC,KAAD,CAAMiG,GAAIwF,EAAAA,SAEtCzL,EAAE,6CAIX,SAAC,KAAD,WACI,SAAC,KAAD,CACIkL,YAAY,OACZQ,QAAS,kBAAM8S,OAAOiM,KAAK,oCAAqC,SAAvD,EAFb,SAIKzqB,EAAE,yBAM1B,CClRc,SAAS6qB,KACpB,OAAoB/lB,EAAAA,EAAAA,KAAZ9E,EAAR,EAAQA,EAAGqH,EAAX,EAAWA,KACL1E,GAAWC,EAAAA,EAAAA,MAEjB,GAA8C2D,EAAAA,EAAAA,WAAS,GAAvD,eAAOukB,EAAP,KAAwBC,EAAxB,KAEMC,EFT2B,cAA7BxM,OAAOjc,SAAS0oB,SACTf,GAAagB,IACb1M,OAAOjc,SAAS0oB,SAASvnB,SAAS,OAClCwmB,GAAaiB,IAEbjB,GAAakB,IEMlBC,EAAoB,qCAAG,WAAO3B,GAAP,wFACTriB,EAAKikB,eAAe5B,GADX,OACnB1pB,EADmB,OAEzBiB,SAASsqB,gBAAgBC,KAAO9B,EAChCzoB,SAASwqB,MAAQzrB,EAAE,wBAHM,2CAAH,sDAM1B,OACI,UAAC,KAAD,YACI,SAAC,KAAD,CAASiG,GAAG,KAAKC,KAAK,KAAtB,SACKlG,EAAE,2BAEP,SAAC,KAAD,CACIgrB,YAAaA,EACbU,QFdLC,GEeKC,eACI,UAACC,GAAA,EAAD,CAAOC,QAAQ,6BAA6Bd,YAAaA,EAAzD,uBACe,CAAEA,YAAAA,GADjB,mBAIJe,aACI,UAACF,GAAA,EAAD,CAAOC,QAAQ,2BAAf,0HAEmB,KACf,UAAC,KAAD,CACIvgB,MAAM,WACNpK,KAAM,+BAAiCqd,OAAOjc,SAASc,SACvDmI,YAAY,EAHhB,qCAK2B,SAAC,KAAD,CAAMvF,GAAIwF,EAAAA,SARzC,UAeR,UAAC,KAAD,CAAQqN,GAAG,OAAX,WACI,UAAC,MAAD,YACI,SAAC,MAAD,CAAY7S,GAAI+lB,EAAAA,GAAYjf,MAAM,SAAC,MAAD,IAAoBjC,QAAQ,QAAQ5E,KAAK,QAC3E,SAAC,MAAD,UACKhG,OAAOsD,OAAOC,EAAAA,IAAUtE,KAAI,SAAAuB,GAAK,OAC9B,SAAC,MAAD,CAAiCoa,GAAIpa,EAArC,UACI,SAAC,MAAD,CAAUgL,QAAS,kBAAM/I,GAASgB,EAAAA,EAAAA,IAASjD,GAAxB,EAAnB,SACKV,EAAE,gBAAkBU,MAFHA,EADI,UAU1C,UAAC,MAAD,YACI,SAAC,MAAD,CAAYuF,GAAI+lB,EAAAA,GAAYjf,MAAM,SAAC,MAAD,IAAiBjC,QAAQ,QAAQ5E,KAAK,QACxE,UAAC,MAAD,YACI,SAAC,MAAD,CAAUwF,QAAS,kBAAM2f,EAAqB/iB,EAAAA,GAAAA,QAA3B,EAAnB,sBACA,SAAC,MAAD,CAAUoD,QAAS,kBAAM2f,EAAqB/iB,EAAAA,GAAAA,YAA3B,EAAnB,uCACA,SAAC,MAAD,CAAUoD,QAAS,kBAAM2f,EAAqB/iB,EAAAA,GAAAA,YAA3B,EAAnB,6CAIR,SAAC,KAAD,CACIpC,KAAK,KACL4E,QAAQ,QACR,aAAW,OACXiC,MAAM,SAAC,MAAD,IACNrB,QAAS,kBAAMqf,GAAmB,EAAzB,QAIjB,SAACV,GAAD,CAAWvgB,OAAQghB,EAAiB/gB,QAAS,kBAAMghB,GAAmB,EAAzB,MAGxD,C,wCCnFYkB,GAAa,SAAChQ,EAA4BpB,EAAcC,EAAYoR,GAC7E,OAAO,SAACvpB,EAAwB0W,GAK5B,IAJA,IAAM7L,EAAc6L,IAAWpW,MAAMkC,SAGjCgnB,GAAQC,EAAAA,GAAAA,IAAO,GACZD,KAAS3e,GACZ2e,GAAQC,EAAAA,GAAAA,IAAO,GAEnB,IAmCO,EAnCDC,GAAiBC,EAAAA,GAAAA,GAAgBH,GAEvC,GAAc,QAAVlQ,EAAiB,CAAC,IAAD,EACXsQ,GAAe,oBACd/e,GADc,mBAEhBqN,GAFgB,oBAGVrN,EAAYqN,IAHF,IAIb9Z,SAAUyM,EAAYqN,GAAM9Z,SAAS5B,KAAI,SAAAY,GAAE,OAAKA,IAAO+a,EAAKqR,EAAQpsB,CAAzB,IAC3C0S,OAAQ,CACJyH,KAAM1M,EAAYqN,GAAMpI,OAAOyH,KAC/BD,MACIzM,EAAYqN,GAAMpI,OAAOwH,MAAM1L,QAAUf,EAAYqN,GAAMpI,OAAOwH,MAAM,KAAOa,EACxE,CAACtN,EAAYqN,GAAMpI,OAAOwH,MAAM,GAAIkS,GACrC3e,EAAYqN,GAAMpI,OAAOwH,WAV1B,SAahBa,GAbgB,oBAcVtN,EAAYsN,IAdF,IAebtI,QAAShF,EAAYsN,GAAItI,QAAQrT,KAAI,SAAAY,GAAE,OAAKA,IAAO8a,EAAOsR,EAAQpsB,CAA3B,IACvC0S,OAAQ,CACJyH,KACI1M,EAAYsN,GAAIrI,OAAOyH,KAAK3L,QAAUf,EAAYsN,GAAIrI,OAAOyH,KAAK,KAAOW,EAClE,CAACrN,EAAYsN,GAAIrI,OAAOyH,KAAK,GAAIiS,GAClC3e,EAAYsN,GAAIrI,OAAOyH,KACjCD,MAAOzM,EAAYsN,GAAIrI,OAAOwH,WArBrB,SAwBhBkS,GAxBgB,oBAyBVE,GAzBU,IA0Bb7Z,QAAS,CAACqI,GACV9Z,SAAU,CAAC+Z,MA3BE,IA+BrB,OADAnY,GAASyX,EAAAA,EAAAA,IAAgBmS,IAClBJ,CACV,CACG,IAAKD,EACD,OAAO,EAGX,IAAMK,GAAe,oBACd/e,GADc,mBAEhBqN,GAFgB,oBAGVrN,EAAYqN,IAHF,IAIb9Z,SACiB,UAAbmrB,EACM,CAACC,EAAO3e,EAAYqN,GAAM9Z,SAAS,IACnC,CAACyM,EAAYqN,GAAM9Z,SAAS,GAAIorB,GAC1C1Z,OAAQ,CACJyH,KAAM1M,EAAYqN,GAAMpI,OAAOyH,KAC/BD,MAAO,CAACtH,EAAAA,GAAAA,QAAqBwZ,QAVpB,SAahBrR,GAbgB,oBAcVtN,EAAYsN,IAdF,IAebtI,QACiB,UAAb0Z,EACM,CAACC,EAAO3e,EAAYsN,GAAItI,QAAQ,IAChC,CAAChF,EAAYsN,GAAItI,QAAQ,GAAI2Z,GACvC1Z,OAAQ,CACJyH,KAAM,CAACvH,EAAAA,GAAAA,QAAqBwZ,GAC5BlS,MAAOzM,EAAYsN,GAAIrI,OAAOwH,WArBrB,SAwBhBkS,GAxBgB,oBAyBVE,GAzBU,IA0Bb7Z,QAAS,CAACqI,GACV9Z,SAAU,CAAC+Z,MA3BE,IA+BrB,OADAnY,GAASyX,EAAAA,EAAAA,IAAgBmS,IAClBJ,CAEd,CACJ,EAmCYK,GAAsB,SAAC3R,EAAcC,GAC9C,OAAO,SAACnY,EAAwB0W,GAC5B,IAAM7L,EAAc6L,IAAWpW,MAAMkC,SAC/BwR,EAAW0C,IAAWzC,OAAOD,SAGnC,OAAKA,EAAS,GAAGjT,SAASmX,IAAUlE,EAAS,GAAGjT,SAASoX,GAKrDnE,EAAS,GAAGvD,QAAQyH,IAASlE,EAAS,GAAGvD,QAAQ0H,GAC1C,0BAIE,cAATD,GAA+B,YAAPC,EACjB,sCAIE,cAATD,GAAoD,IAA5BlE,EAAS,GAAGvD,QAAQ0H,GACrC,uDAIA,YAAPA,GAAoBnE,EAAS,GAAGvD,QAAQyH,KAAUlE,EAAS,GAAGpI,OAAS,EAChE,sDAIPf,EAAYqN,GAAM9Z,SAASwN,OAAS,GAAKf,EAAYsN,GAAItI,QAAQjE,OAAS,EACnE,uBAI6BoI,EACnCrW,MAAM,GACNyI,MAAK,SAAA0J,GAAM,OAAIA,EAAOnS,MAAM,GAAI,GAAGoD,SAASmX,IAASpI,EAAOnS,MAAM,GAAI,GAAGoD,SAASoX,EAAvE,IAEL,yCAI2BnE,EAAS,GAC1CrW,MAAMqW,EAAS,GAAGvD,QAAQyH,GAAQ,EAAGlE,EAAS,GAAGvD,QAAQ0H,IACzD2R,OAAM,SAAA1sB,GAAE,OAAuC,IAAnCyN,EAAYzN,GAAIyS,QAAQjE,QAAoD,IAApCf,EAAYzN,GAAIgB,SAASwN,MAArE,IAKN,GAHI,2DAzCA,gCA6Cd,CACJ,ECvJc,SAASme,GAAgBlsB,GAA8B,IAAD,IACzDsJ,EAAoBtJ,EAApBsJ,OAAQC,EAAYvJ,EAAZuJ,QACR/J,GAAM8E,EAAAA,EAAAA,KAAN9E,EACF2C,GAAWoC,EAAAA,EAAAA,MAEXkW,GAAiBpY,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMC,IAAIkY,cAAd,IAC5C,GAAyCpY,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,KAAV,IAAtDvC,EAAR,EAAQA,MAAiB8M,EAAzB,EAAerI,SACTwR,GAAW9T,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAM8T,OAAOD,QAAjB,IAEtC,GAA0BpQ,EAAAA,EAAAA,UAAS0U,GAAnC,eAAOgB,EAAP,KAAcC,EAAd,KACA,GAAsC3V,EAAAA,EAAAA,UAA6B,UAAnE,eAAOomB,EAAP,KAAoBC,EAApB,KACA,GAA0BrmB,EAAAA,EAAAA,UAAS,IAAnC,eAAOsmB,EAAP,KAAcC,EAAd,KACA,GAA0BvmB,EAAAA,EAAAA,WAAS,GAAnC,eAAOO,EAAP,KAAcimB,EAAd,MAEA/rB,EAAAA,EAAAA,YAAU,WACNkb,EAASjB,EACZ,GAAE,CAACA,KAEJja,EAAAA,EAAAA,YAAU,WACD8I,GACDijB,GAAS,EAEhB,GAAE,CAACjjB,IAEJ,IAE2BkjB,EAFrBC,EAAkB,oBAAGtW,EAASzE,OAAO+J,WAAnB,aAAG,EAAyB3b,MAAM,GAAI,UAAtC,QAA4C,GAY9DiF,EAA2B,CAC7B,CACI9E,KAAM,SACN+E,MAAOxF,EAAE,yBACTyF,MAAOwW,EACPlR,SAAQ,WACD4L,EAAStK,QACR,SAACC,EAAKC,EAAKC,GAAX,gBAAC,WACMF,GADP,cAEKE,EACW,IAARA,EACMxM,EAAE,wBACFU,IAAU+C,EAAAA,GAAAA,UAAqB8Y,EAAAA,GAAAA,IAAehQ,EAAKiB,GAEnDxN,EAAE,4BAA8B,IAAMwM,EADtCxM,EAAE,0BAA4B,IAAMwM,GANlD,GASA,CAAC,IAGT7G,SAAU,SAAAF,GAAK,OAAIynB,EAAkBznB,EAAtB,EACfU,KAAM,QAEV,CACI1F,KAAM,SACN+E,MAAOxF,EAAE,+BACTyF,MAAOknB,EACP5hB,QAAS,CACLoiB,OAAQntB,EAAE,0BACVotB,MAAOptB,EAAE,0BAEb2F,SAAU,SAAAF,GAAK,OAAImnB,EAAennB,EAAnB,GAEnB,CACIhF,KAAM,SACN+E,MAAOxF,EAAE,yBACTyF,MAAOonB,EACP9hB,SA9CmBiiB,EA8CQC,EA7CxBD,EAAc3gB,QACjB,SAACC,EAAKC,GAAN,sBAAC,WACMD,GADP,cAEKC,EAFL,UAEWiB,EAAYjB,UAFvB,aAEW,EAAkBlH,KAAK6G,KAAK,QAFvC,GAIA,CAAE,GAAIlM,EAAE,mCAyCRwlB,gBAAiB,CAAC,IAClB7f,SAAU,SAAAF,GAAK,OAAIqnB,EAASrnB,EAAb,IAIjBynB,EAAoB,SAACznB,GACvByW,EAASzW,GACTqnB,EAAS,GACZ,EAeD,OACI,UAAC,KAAD,CAAOhjB,OAAQA,EAAQC,QAASA,EAAhC,WACI,SAAC,KAAD,KACA,UAAC,KAAD,WACKjD,IACG,UAAC,MAAD,CAAOyT,OAAO,QAAQzP,QAAQ,QAAQ5E,KAAK,KAA3C,WACI,SAAC,MAAD,IACClG,EAAE,6BAGX,UAAC,KAAD,CAAKksB,SAAS,WAAd,WACI,SAAC,KAAD,UAAclsB,EAAE,4BAChB,SAAC,KAAD,QAGJ,SAAC,KAAD,WACI,SAAC,KAAD,CAAWuF,OAAQA,OAGvB,SAAC,KAAD,WACI,SAAC,KAAD,CAAQ2F,YAAY,OAAOQ,QAjCtB,WACjB,IAAM4T,EAAS3c,EDnBmB,SAACsZ,EAAe0Q,EAAiCE,GACvF,OAAO,SAAClqB,EAAwB0W,GAC5B,IACM5G,EADW4G,IAAWzC,OAAOD,SACXsF,GAExB,UAAIxJ,QAAJ,IAAIA,GAAAA,EAAQlE,OAAQ,CAChB,GAAoB,WAAhBoe,EAA0B,CAC1B,IAAM9R,EAAOpI,EAAOA,EAAOW,QAAQyZ,GAAS,GAC5C,OAAOlqB,EAASspB,GAAWhQ,EAAMxR,WAA2BoQ,EAAMgS,GACrE,CACG,IAAM/R,EAAKrI,EAAOA,EAAOW,QAAQyZ,GAAS,GAC1C,OAAOlqB,EAASspB,GAAWhQ,EAAMxR,WAA2BoiB,EAAO/R,GAE1E,CACG,OAAO,CAEd,CACJ,CCE+BuS,CAA2BpR,EAAO0Q,EAAaE,IACnEvN,GACAvV,IAEApH,GAAS6W,EAAAA,EAAAA,IAAmB8F,IAC5B3c,GAAS2W,EAAAA,EAAAA,IAAiBC,EAAAA,GAAAA,YAE1BtU,QAAQC,IAAI,cACZ6nB,GAAS,GAEhB,EAsBiEphB,UAAWkhB,EAA7D,SACK7sB,EAAE,mCAM1B,CChIc,SAASstB,GAAe9sB,GACnC,IAAQsJ,EAAoBtJ,EAApBsJ,OAAQC,EAAYvJ,EAAZuJ,QACR/J,GAAM8E,EAAAA,EAAAA,KAAN9E,EACF2C,GAAWoC,EAAAA,EAAAA,MAEjB,GAA0BwB,EAAAA,EAAAA,UAAwB,OAAlD,eAAO0V,EAAP,KAAcC,EAAd,KACA,GAAwB3V,EAAAA,EAAAA,UAAS,IAAjC,eAAOsU,EAAP,KAAasB,EAAb,KACA,GAAoB5V,EAAAA,EAAAA,UAAS,IAA7B,eAAOuU,EAAP,KAAWyS,EAAX,KACA,GAAgChnB,EAAAA,EAAAA,UAA4B,SAA5D,eAAO2lB,EAAP,KAAiBsB,EAAjB,KAEA,GAAkCjnB,EAAAA,EAAAA,UAAS,IAA3C,eAAOknB,EAAP,KAAkBC,EAAlB,KACA,GAA8BnnB,EAAAA,EAAAA,UAAS,IAAvC,eAAOonB,EAAP,KAAgBC,EAAhB,KAEA,GAAyC/qB,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,KAAV,IAAtDvC,EAAR,EAAQA,MAAiB8M,EAAzB,EAAerI,UAEfnE,EAAAA,EAAAA,YAAU,WAED8I,IACDoS,EAAS,OACTC,EAAQ,IACRoR,EAAM,IAEb,GAAE,CAACzjB,IAEJ,IAA2BkjB,EAUrBa,GAVqBb,EAU0BrqB,GFwD9C,SAACA,EAAwB0W,GAC5B,IAAM7L,EAAc6L,IAAWpW,MAAMkC,SAGrC,OAFiBkU,IAAWzC,OAAOD,SAEnB,GAAG7S,QAAO,SAAA/D,GACtB,IAAM+tB,EAAsBtgB,EAAYzN,GAAIyS,QAAQjE,OAASf,EAAYzN,GAAIgB,SAASwN,SAAW,EAC3Fwf,EAA8C,IAAlC3V,GAAarY,EAAIyN,GAEnC,OAAQsgB,GAAuBC,CAClC,GACJ,IE3EUf,EAAc3gB,QACjB,SAACC,EAAKC,GAAN,sBAAC,WACMD,GADP,cAEKC,EAFL,UAEWiB,EAAYjB,UAFvB,aAEW,EAAkBlH,KAAK6G,KAAK,QAFvC,GAIA,CAAE,GAAIlM,EAAE,kCAMVuF,EAA2B,CAC7B,CACI9E,KAAM,SACN+E,MAAOxF,EAAE,wBACTyF,MAAOwW,EACPlR,QAAS,CACLijB,IAAKhuB,EAAE,sBACPiuB,IAAKjuB,EAAE,uBAEXwlB,gBAAiB9kB,IAAU+C,EAAAA,GAAAA,QAAmB,GAAK,CAAC,OACpDkC,SAAU,SAAAF,GAAK,OAAIynB,EAAkBznB,EAAtB,EACfU,KAAM,QAEV,CACI1F,KAAM,SACN+E,MAAOxF,EAAE,uBACTyF,MAAOoV,EACP9P,QAAS8iB,EACTrI,gBAAiB,CAAC,IAClB7f,SAAU,SAAAF,GAAK,OAAIyoB,EAAiBzoB,EAArB,EACf0oB,UAAWC,QAAQX,IAEvB,CACIhtB,KAAM,SACN+E,MAAOxF,EAAE,qBACTyF,MAAOqV,EACP/P,QAAS8iB,EACTrI,gBAAiB,CAAC,IAClB7f,SAAU,SAAAF,GAAK,OAAI4oB,EAAe5oB,EAAnB,EACf0oB,UAAWC,QAAQT,IAEvB,CACIltB,KAAM,SACN+E,MAAOxF,EAAE,2BACTyF,MAAOymB,EACPnhB,QAAS,CACLgI,MAAO/S,EAAE,wBACTgT,MAAOhT,EAAE,yBAEb2F,SAAU,SAAAF,GAAK,OAAI+nB,EAAY/nB,EAAhB,EACfU,KAAM,OACNN,OAAkB,QAAVoW,GAAmBvb,IAAU+C,EAAAA,GAAAA,UAIvCypB,EAAoB,SAACznB,GACvByW,EAASzW,GACT0W,EAAQ,IACRoR,EAAM,IACNG,EAAa,IACbE,EAAW,GACd,EAEKM,EAAmB,SAACzoB,GACtB0W,EAAQ1W,GACRioB,EAAa,IAETjoB,GAASqV,GACT8S,EAAWjrB,EAAS6pB,GAAoB/mB,EAAOqV,IAEtD,EAEKuT,EAAiB,SAAC5oB,GACpB8nB,EAAM9nB,GACNmoB,EAAW,IAEP/S,GAAQpV,GACRioB,EAAa/qB,EAAS6pB,GAAoB3R,EAAMpV,IAEvD,EAoBKmX,EAAmBwR,SAASvT,IAASC,GAAM2S,GAAaE,GAE9D,OACI,UAAC,KAAD,CAAO7jB,OAAQA,EAAQC,QAASA,EAAhC,WACI,SAAC,KAAD,KACA,UAAC,KAAD,YACI,SAAC,KAAD,UAAc/J,EAAE,2BAChB,SAAC,KAAD,KAEA,SAAC,KAAD,WACI,SAAC,KAAD,CAAWuF,OAAQA,OAGvB,SAAC,KAAD,WACI,SAAC,KAAD,CACI2F,YAAY,OACZugB,MAAO7O,EAAmB6Q,GAAaE,EAAU3tB,EAAE,yBACnD0L,QAnCC,YAEH,QAAVuQ,EAEStZ,EAASspB,GAAW,MAAOpR,EAAMC,EAAI,UAE1Cpa,IAAU+C,EAAAA,GAAAA,QACDd,EAASspB,GAAW,MAAOpR,EAAMC,EAAI,UAErCnY,EAASspB,GAAW,MAAOpR,EAAMC,EAAIoR,MAKlDniB,GAEP,EAoBmB4B,SAAUiR,EAJd,SAMK5c,EAAE,kCAM1B,CCjKD,IAAMsuB,IAAgBlqB,EAAAA,EAAAA,OAAK,kBAAM,wDAAN,IAEZ,SAASmqB,KACpB,IAAQvuB,GAAM8E,EAAAA,EAAAA,KAAN9E,EACF2C,GAAWoC,EAAAA,EAAAA,MAEjB,GAA0DwB,EAAAA,EAAAA,WAAS,GAAnE,eAAOioB,EAAP,KAA8BC,EAA9B,KACA,GAAwDloB,EAAAA,EAAAA,WAAS,GAAjE,eAAOmoB,EAAP,KAA6BC,EAA7B,KAEM1T,GAAiBpY,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMC,IAAIkY,cAAd,IAC5C,GAAyCpY,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,KAAV,IAAtDvC,EAAR,EAAQA,MAAiB8M,EAAzB,EAAerI,SACTwR,GAAW9T,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAM8T,OAAOD,QAAjB,IAMtC,OACI,UAAC,KAAD,CAAKvU,KAAM,EAAG8lB,SAAS,SAAvB,WACI,UAAC,KAAD,CACI3mB,OAAO,OACPqtB,QAAQ,OACR5sB,cAAc,SACdkmB,SAAS,SACTnC,MAAO9K,EACPtV,SAAU,SAAAogB,GAAK,OAAIpjB,GAASksB,EAAAA,EAAAA,IAAkB9I,GAA/B,EANnB,WAQI,UAAC,KAAD,WACKpP,EAASxX,KAAI,SAACsT,EAAQtE,GACnB,OAAU,IAANA,GACO,SAAC,KAAD,UAAcnO,EAAE,kBAANmO,GAEbzN,IAAU+C,EAAAA,GAAAA,UAAqB8Y,EAAAA,GAAAA,IAAe9J,EAAQjF,IAG/C,SAAC,KAAD,UAAcxN,EAAE,qBAAuB,IAAMmO,GAAnCA,IAFV,SAAC,KAAD,UAAcnO,EAAE,mBAAqB,IAAMmO,GAAjCA,EAK5B,KACD,SAAC,KAAD,CACIjI,KAAK,KACL4E,QAAQ,QACRgG,UAAU,SACV,aAAW,aACXpF,QAAS,kBAAMijB,GAAwB,EAA9B,EACT5hB,MAAM,SAAC,MAAD,OAGV,UAAC,KAAD,CAAQ+hB,WAAW,OAAOxjB,YAAa,EAAvC,WACI,SAAC,KAAD,CACIR,QAAQ,UACR5E,KAAK,KACL6K,UAAU,SAAC,MAAD,IACVrF,QAAS,kBAAM+iB,GAAyB,EAA/B,EAJb,SAMKzuB,EAAE,0BAEP,SAAC,KAAD,CAAQkG,KAAK,KAAKgF,YAAY,OAAOQ,QA5C3B,WAC1B/I,GAAS2W,EAAAA,EAAAA,IAAiBC,EAAAA,GAAAA,QAC7B,EA0CmB,SACKvZ,EAAE,8BAKf,SAAC,KAAD,CAAWoC,KAAM,EAAG8B,UAAU,OAA9B,SACKyS,EAASxX,KAAI,SAACkT,EAAGlE,GAAJ,OACV,SAAC,KAAD,CAAkBuF,QAAS,EAAGzM,EAAE,OAAhC,UACI,SAAC,EAAArF,SAAD,CAAUC,UAAU,SAAC,MAAD,CAAUktB,iBAAe,IAA7C,UACI,SAAC,IAAD,WACI,SAACT,GAAD,CAAeU,YAAa7gB,SAHzBA,EADL,UAYtB,SAACue,GAAD,CAAiB5iB,OAAQ0kB,EAAuBzkB,QAAS,kBAAM0kB,GAAyB,EAA/B,KACzD,SAACnB,GAAD,CAAgBxjB,OAAQ4kB,EAAsB3kB,QAAS,kBAAM4kB,GAAwB,EAA9B,MAGlE,CCxFc,SAASM,KACpB,IAAMC,GAAYrsB,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMC,IAAImsB,SAAd,IAEvC,OACI,UAAC,KAAD,CAAOplB,YAAsBtD,IAAd0oB,EAAyBnlB,QAAS,WAAQ,EAAzD,WACI,SAAC,KAAD,KACA,SAAC,KAAD,CACImiB,SAAS,WACTiD,IAAK,EACLjV,KAAM,EACNjT,EAAE,OACFkE,EAAE,OACF8c,eAAe,SACfmH,WAAW,SACXC,OAAQ,KARZ,UAUI,SAAC,MAAD,CACIN,iBAAgC,IAAfG,EACjBzpB,MAAOypB,GAAaA,GAAa,EAAIA,OAAY1oB,EACjD+E,MAAM,aAKzB,C,eCvBc,SAAS+jB,KACpB,IAAM3sB,GAAWoC,EAAAA,EAAAA,MAEXwqB,GAAe1sB,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMC,IAAIwsB,YAAd,IAE1C,OACI,8BACKrvB,OAAOob,QAAQiU,GAAcpwB,KAAI,+BAAEob,EAAF,YAAYxT,EAAZ,EAAYA,QAASwX,EAArB,EAAqBA,IAArB,OAC9B,UAAC,MAAD,CAAoBhE,OAAQA,EAAuBzP,QAAQ,QAAQ5E,KAAK,KAAKspB,GAAI,EAAGC,GAAI,EAAG3H,GAAI,EAA/F,WACI,SAAC,MAAD,IACCvJ,GACG,SAAC,KAAD,CAAMpd,KAAMod,EAAKsK,OAAO,SAAxB,SACK9hB,IAGLA,GAEJ,SAAC,KAAD,CAAa+R,GAAG,OAAOpN,QAAS,kBAAM/I,GAAS+sB,EAAAA,EAAAA,IAAiBnV,GAAhC,MATxBA,EADkB,KAe7C,CCfc,SAASoV,KACpB,IAAM1sB,GAAQJ,EAAAA,EAAAA,KAAgB,SAAAC,GAAK,OAAIA,EAAMG,KAAV,IAC7B2sB,EAAcjW,KAAKE,UAAU5W,GAMnC,OAJAjC,EAAAA,EAAAA,YAAU,WACNwd,OAAO2K,WAAWC,UAAU,WAAYwG,GAAalwB,MACxD,GAAE,CAACkwB,KAGA,UAAC,KAAD,YACI,SAACX,GAAD,KACA,SAACpE,GAAD,KACA,UAAC,KAAD,YACI,SAACf,GAAD,KACA,SAACwF,GAAD,KACA,UAAC,KAAD,CAAMltB,KAAM,EAAG8lB,SAAS,SAASgE,SAAS,WAA1C,WACI,UAAC,KAAD,CAAMjmB,GAAG,UAAUqI,UAAU,SAASlM,KAAM,EAAG0W,GAAI,EAAG5R,GAAI,EAAGghB,SAAS,SAAtE,WACI,SAAC,KAAD,WACI,SAAC5lB,EAAD,OAEJ,SAACisB,GAAD,QAGJ,SAAChR,GAAD,WAIR,mBAAQ7c,MAAO,CAAEkuB,QAAS,YAGrC,C,gWCpBM,IAAMrS,EAAiB,SAAC9J,EAAkB6F,GAAnB,QAC1BA,EAAQ7F,EAAO,IAAI1R,SAASqS,QAAQX,EAAO,GADjB,EAGjBod,EAAgC,SAAClZ,EAAsB2B,GAAvB,OACzC3B,EAAS,GAAG,GACZA,EAAS,GAAGA,EAAS,GAAGpI,OAAS,IAFQ,eAGtCoI,EAAS,GAAG7S,QAAO,SAAAuU,GAAK,OAEvB1B,EACKrW,MAAM,GACNwD,QAAO,SAAA2O,GAAM,OAAI8J,EAAe9J,EAAQ6F,EAA3B,IAEbnZ,KAAI,SAAAsT,GAAM,OAAIA,EAAO3O,QAAO,SAAAuU,GAAK,OAAK,CAAC,YAAa,WAAW3U,SAAS2U,EAAvC,GAAvB,IAEVlZ,KAAI,SAAAsT,GAAM,MAAI,CAACA,EAAO,GAAIA,EAAOA,EAAOlE,OAAS,GAAvC,IACVP,OACAtK,SAAS2U,EAVS,KAHc,EAwBhCgD,EAA0B,SAAC2T,GACpC,OAAO,SAACrsB,EAAwB0W,GAC5B,IAAM1C,EAAW0C,IAAWzC,OAAOD,SAEnC,GAAoB,IAAhBqY,EAAmB,CACnB,IAAM1W,EAAUe,IAAWpW,MAAMkC,SAC3B2qB,EAA6BD,EAA8BlZ,EAAU2B,GAC3E,OA/CZ,WAAoD,IAAD,uBAA1ByX,EAA0B,yBAA1BA,EAA0B,gBAC/C,OAAOA,EAAW1jB,QACd,SAAC2jB,EAAS1U,GAAV,OACI0U,EACK7wB,KAAI,SAAAmgB,GAAM,OAAIhE,EAAQnc,KAAI,SAAA8wB,GAAK,OAAI3Q,EAAOzR,OAAO,CAACoiB,GAAnB,GAArB,IACV5jB,QAAO,SAAC6jB,EAAY5Q,GAAb,OAAwB4Q,EAAWriB,OAAOyR,EAA1C,GAAmD,GAHnE,GAIA,CAAC,IAER,CAuCkB6Q,CAAUL,EAA4BA,GAA4BhsB,QACrE,SAAAsK,GAAG,OAAIA,EAAI,KAAOA,EAAI,EAAnB,GAEV,CACG,IAAMqE,EAASkE,EAASqY,GACxB,GAAIvc,EAAQ,CACR,IAAMzK,EAAIyK,EAAO3O,QAAO,SAAA/D,GAAE,OAAK,CAAC,YAAa,WAAW2D,SAAS3D,EAAvC,IAC1B,MAAO,CAAC,CAACiI,EAAE,GAAIA,EAAE1H,OAAO,GAAG,IAC9B,CACG,MAAO,EAGlB,CACJ,EAOY8vB,EAAsB,SAAChX,EAAmB4V,GACnD,OAAO,SAACrsB,EAAwB0W,GAI5B,IAHA,IAAMgX,EAAShX,IAAWpW,MAAMotB,OAC1B5d,EAAS4G,IAAWzC,OAAOD,SAASqY,GAE1C,MAAuB9uB,OAAOob,QAAQ+U,GAAtC,eAA+C,CAA1C,sBAAKC,EAAL,KAAWC,EAAX,KACD,GAAIA,EAAG1V,OAASzB,GAAa3G,EAAO/O,SAAS6sB,EAAGzV,IAAK,CACjD,IAAM0V,EAAY/d,EAAOW,QAAQgG,GAC3BqX,EAAYhe,EAAOW,QAAQmd,EAAGzV,IACpC,GAAI2V,EAAYD,EACZ,MAAO,CAACC,EAAYD,EAAY,EAAGF,EAE1C,MAAM,GAAIC,EAAGzV,KAAO1B,GAAa3G,EAAO/O,SAAS6sB,EAAGzV,IAAK,CACtD,IAAM0V,EAAY/d,EAAOW,QAAQgG,GAC3BqX,EAAYhe,EAAOW,QAAQmd,EAAG1V,MACpC,GAAI4V,EAAYD,EACZ,MAAO,CAACC,EAAYD,EAAY,EAAGF,EAE1C,CACJ,CACD,MAAO,CAAC,OAAG9pB,EACd,CACJ,EAmCYkqB,EAAsB,SAAC7V,EAAcC,GAC9C,OAAO,SAACnY,EAAwB0W,GAC5B,IAAMf,EAAUe,IAAWpW,MAAMkC,SAC3BwR,EAAW0C,IAAWzC,OAAOD,SAEnC,GAAIkE,IAASC,EACT,MAAM,IAAIlb,MAAM,uCAGpB,IAAM+wB,EAAmBd,EAA8BlZ,EAAU2B,GAASxU,QAAO,SAAAuU,GAAK,MAClF,CAACwC,EAAMC,GAAIpX,SAAS2U,EAD8D,IAIhFuY,EAxGiC,SAACja,EAAsB2B,GAAvB,OAC3C3B,EACKrW,MAAM,GACNwD,QAAO,SAAA2O,GAAM,OAAI8J,EAAe9J,EAAQ6F,EAA3B,IACbnZ,KAAI,SAAAsT,GAAM,OAAIA,EAAO3O,QAAO,SAAAuU,GAAK,OAAK,CAAC,YAAa,WAAW3U,SAAS2U,EAAvC,GAAvB,IACVlZ,KAAI,SAAAsT,GAAM,MAAI,CAACA,EAAO,GAAIA,EAAOA,EAAOlE,OAAS,GAAvC,GAL4B,CAwGdsiB,CAAgCla,EAAU2B,GAASxU,QAAO,SAAAgtB,GAAS,MACxF,CAACjW,EAAMC,GAAI2R,OAAM,SAAApU,GAAK,OAAIyY,EAAUptB,SAAS2U,EAAvB,GADkE,IAI5F,GAAgC,IAA5BsY,EAAiBpiB,QAAgBqiB,EAAiBriB,OAAS,EAC3D,MAAM,IAAI3O,MAAJ,8CAAiDib,EAAjD,aAA0DC,IAGpE,GAAgC,IAA5B6V,EAAiBpiB,QAA4C,IAA5BqiB,EAAiBriB,OAClD,MAAM,IAAI3O,MAAJ,gDAAmDib,EAAnD,aAA4DC,GAEzE,CACJ,EAEYK,EAAyB,SAAC6T,GACnC,OAAO,SAACrsB,EAAwB0W,GAC5B,IAAMgX,EAAShX,IAAWpW,MAAMotB,OAE1B5d,EADW4G,IAAWzC,OAAOD,SACXqY,GAExB,OAAIvc,EACOvS,OAAOob,QAAQ+U,GAAQhkB,QAAmC,SAACC,EAAKC,GACnE,OAAIkG,EAAO/O,SAAS6I,EAAI,GAAGsO,OAASpI,EAAO/O,SAAS6I,EAAI,GAAGuO,KAChD,kBAAKxO,GAAZ,cAAkBC,EAAI,GAAKA,EAAI,MAExB,UAAKD,EAEnB,GAAE,CAAC,GAEG,CAAC,CAEf,CACJ,EAKYmN,EAAqC,SAACsX,GAC/C,OAAO,SAACpuB,EAAwB0W,GAC5B,IAAMoB,EAAapB,IAAWpW,MAAMotB,OAEpC,GAAuC,IAAnCnwB,OAAOD,KAAKwa,GAAYlM,OAA5B,CAEA,IAAMyiB,EAAa9wB,OAAOob,QAAQb,GAAYpO,QAAmC,SAACC,EAAKC,GACnF,OAAIA,EAAI,GAAGsO,OAASkW,GAAexkB,EAAI,GAAGuO,KAAOiW,GACtC,kBAAKzkB,GAAZ,cAAkBC,EAAI,GAAKA,EAAI,MAExB,UAAKD,EAEnB,GAAE,CAAC,GAEJ3J,GAASsuB,EAAAA,EAAAA,IAAcD,GAVyB,CAWnD,CACJ,EAEYjV,EAAY,SAAClB,EAAcC,EAAYC,GAAwD,IAA7B6T,IAA4B,yDACvG,OAAO,SAACjsB,EAAwB0W,GAC5B,IAAMoB,EAAapB,IAAWpW,MAAMotB,OAEpC1tB,EAAS+tB,EAAoB7V,EAAMC,IACnCnY,GACIsuB,EAAAA,EAAAA,KAAc,kBACPxW,GADM,eAER2R,EAAAA,EAAAA,IAAO,GAAK,CAAEvR,KAAMA,EAAMC,GAAIA,EAAIC,OAAQA,EAAQ6T,QAASA,MAGvE,CACJ,EAEYnT,EAAe,SAACF,EAAkBV,EAAcC,GAAgC,IAApB8T,IAAmB,yDACxF,OAAO,SAACjsB,EAAwB0W,GAC5B,IAAMoB,EAAapB,IAAWpW,MAAMotB,OAEpC,GAAI9U,KAAYd,EAAY,CACxB9X,EAAS+tB,EAAoB7V,EAAMC,IAEnC,IAAMoW,GAAa,kBACZzW,GADY,cAEdc,GAFc,kBAEEd,EAAWc,IAFb,IAEwBV,KAAAA,EAAMC,GAAAA,EAAI8T,QAAAA,MAGrDjsB,GAASsuB,EAAAA,EAAAA,IAAcC,GAC1B,CACJ,CACJ,EA4BYrV,EAAoB,SAACN,EAAkB4V,GAChD,OAAO,SAACxuB,EAAwB0W,GAC5B,IAAMoB,EAAapB,IAAWpW,MAAMotB,OAEpC,GAAI9U,KAAYd,GAAcA,EAAWc,GAAUR,OAAOxM,OAAS4iB,EAAkB,CACjF,IAAMC,EAAc3W,EAAWc,GAAUR,OAAOjX,QAAO,SAACuO,EAAGgf,GAAJ,OAAkBA,IAAcF,CAAhC,IACvD,GAA2B,IAAvBC,EAAY7iB,OAAc,CAEekM,EAAhCc,GAAT,IAA0ByV,GAA1B,OAAyCvW,EAAzC,CAASc,GAAT,UACA5Y,GAASsuB,EAAAA,EAAAA,IAAcD,GAC1B,KAAM,CAEH,IAAMA,GAAU,kBACTvW,GADS,cAEXc,GAFW,kBAEKd,EAAWc,IAFhB,IAE2BR,OAAQqW,MAEnDzuB,GAASsuB,EAAAA,EAAAA,IAAcD,GAC1B,CACJ,CACJ,CACJ,EAEYrV,EAAoB,SAACJ,EAAkB4V,EAA0BG,GAC1E,OAAO,SAAC3uB,EAAwB0W,GAC5B,IAAMoB,EAAapB,IAAWpW,MAAMotB,OAEhC9U,KAAYd,GAAcA,EAAWc,GAAUR,OAAOxM,OAAS4iB,IAC/D1W,EAAWc,GAAUR,OAASN,EAAWc,GAAUR,OAAO5b,KAAI,SAACoyB,EAAKF,GAAN,OAC1DA,IAAcF,EACP,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAGhyB,KAAI,SAAAgP,GAAC,YACE3H,IAAvB8qB,EAAgBnjB,GAAmBojB,EAAIpjB,GAAKmjB,EAAgBnjB,EADvC,IAGzBojB,CALoD,IAQ9D5uB,GAASsuB,EAAAA,EAAAA,IAAcxW,IAE9B,CACJ,C","sources":["../node_modules/@railmapgen/rmg-palette-resources/flags|lazy|/^/.//.*$/|groupOptions: {}|namespace object","../node_modules/@railmapgen/rmg-palette-resources/palettes|lazy|/^/.//.*/.js$/|chunkName: palettes|groupOptions: {}|namespace object","../node_modules/@railmapgen/rmg-templates-resources/templates|lazy|/^/.//.*/.json$/|chunkName: templates|groupOptions: {}|namespace object","svgs/svg-wrapper.tsx","svgs/svg-router.tsx","components/side-panel/station-side-panel/info-section.tsx","components/modal/colour-modal/flag-svg-emoji.tsx","components/modal/colour-modal/city-picker.tsx","components/modal/colour-modal/colour-picker.tsx","components/modal/colour-modal/colour-modal.tsx","theme/colour-util.ts","components/side-panel/theme-button.tsx","components/side-panel/station-side-panel/interchange-card.tsx","components/common/rmg-button-group.tsx","components/side-panel/station-side-panel/interchange-section.tsx","components/side-panel/station-side-panel/more-section.tsx","components/side-panel/station-side-panel/branch-section.tsx","components/side-panel/station-side-panel/station-side-panel.tsx","components/side-panel/style-side-panel/layout-section.tsx","components/side-panel/style-side-panel/design-section.tsx","components/side-panel/style-side-panel/loop-section.tsx","components/side-panel/style-side-panel/gzmtr-note-card.tsx","components/side-panel/style-side-panel/gzmtr-note-section.tsx","components/side-panel/style-side-panel/style-side-panel.tsx","methods.ts","components/modal/remove-confirm-modal.tsx","components/side-panel/station-side-panel/station-side-panel-footer.tsx","redux/param/remove-station-action.ts","components/side-panel/branch-side-panel/coline-card.tsx","components/side-panel/branch-side-panel/coline-section.tsx","components/modal/auto-num-modal.tsx","components/side-panel/branch-side-panel/action-section.tsx","components/side-panel/branch-side-panel/branch-side-panel.tsx","components/side-panel/side-panel.tsx","util/utils.ts","util/export-utils.ts","components/modal/download-modal.tsx","components/page-header/download-actions.tsx","components/modal/upload-confirm-modal.tsx","components/modal/template-modal.tsx","components/page-header/open-actions.tsx","redux/param/open-new-action.ts","components/page-header/header-actions.tsx","components/page-header/page-header.tsx","util/config.ts","components/modal/help-modal.tsx","components/root/window-header.tsx","redux/param/add-station-action.ts","components/modal/add-station-modal.tsx","components/modal/new-branch-modal.tsx","components/ag-grid/grid-tabs.tsx","components/modal/loading-modal.tsx","components/root/global-alerts.tsx","components/app-root.tsx","redux/param/coline-action.ts"],"sourcesContent":["var map = {\n\t\"./1F1E6-1F1F9.svg\": [\n\t\t89121,\n\t\t9121\n\t],\n\t\"./1F1E6-1F1FF.svg\": [\n\t\t89427,\n\t\t9427\n\t],\n\t\"./1F1E7-1F1F7.svg\": [\n\t\t97304,\n\t\t7304\n\t],\n\t\"./1F1E8-1F1E6.svg\": [\n\t\t80056,\n\t\t56\n\t],\n\t\"./1F1E8-1F1F1.svg\": [\n\t\t43450,\n\t\t3450\n\t],\n\t\"./1F1E8-1F1F3.svg\": [\n\t\t52537,\n\t\t2537\n\t],\n\t\"./1F1E9-1F1EA.svg\": [\n\t\t36311,\n\t\t6311\n\t],\n\t\"./1F1EA-1F1EC.svg\": [\n\t\t57365,\n\t\t7365\n\t],\n\t\"./1F1EA-1F1F8.svg\": [\n\t\t98721,\n\t\t8721\n\t],\n\t\"./1F1EB-1F1F7.svg\": [\n\t\t48514,\n\t\t8514\n\t],\n\t\"./1F1EC-1F1F7.svg\": [\n\t\t99515,\n\t\t9515\n\t],\n\t\"./1F1ED-1F1F0.svg\": [\n\t\t62248,\n\t\t2248\n\t],\n\t\"./1F1ED-1F1FA.svg\": [\n\t\t268,\n\t\t268\n\t],\n\t\"./1F1EE-1F1F3.svg\": [\n\t\t66236,\n\t\t6236\n\t],\n\t\"./1F1EE-1F1F7.svg\": [\n\t\t22617,\n\t\t2617\n\t],\n\t\"./1F1EE-1F1F9.svg\": [\n\t\t53541,\n\t\t3541\n\t],\n\t\"./1F1EF-1F1F5.svg\": [\n\t\t42741,\n\t\t2741\n\t],\n\t\"./1F1F0-1F1F7.svg\": [\n\t\t22255,\n\t\t2255\n\t],\n\t\"./1F1F2-1F1F4.svg\": [\n\t\t86435,\n\t\t6435\n\t],\n\t\"./1F1F2-1F1FD.svg\": [\n\t\t43086,\n\t\t3086\n\t],\n\t\"./1F1F2-1F1FE.svg\": [\n\t\t76082,\n\t\t6082\n\t],\n\t\"./1F1F3-1F1F4.svg\": [\n\t\t16095,\n\t\t6095\n\t],\n\t\"./1F1F5-1F1EA.svg\": [\n\t\t52955,\n\t\t2955\n\t],\n\t\"./1F1F5-1F1F1.svg\": [\n\t\t54700,\n\t\t4700\n\t],\n\t\"./1F1F5-1F1F9.svg\": [\n\t\t77791,\n\t\t7791\n\t],\n\t\"./1F1F7-1F1F4.svg\": [\n\t\t7224,\n\t\t7224\n\t],\n\t\"./1F1F7-1F1FA.svg\": [\n\t\t6031,\n\t\t6031\n\t],\n\t\"./1F1F8-1F1E6.svg\": [\n\t\t68600,\n\t\t8600\n\t],\n\t\"./1F1F8-1F1EA.svg\": [\n\t\t71550,\n\t\t1550\n\t],\n\t\"./1F1F8-1F1EC.svg\": [\n\t\t91229,\n\t\t1229\n\t],\n\t\"./1F1F9-1F1F7.svg\": [\n\t\t92237,\n\t\t2237\n\t],\n\t\"./1F1F9-1F1FC.svg\": [\n\t\t64252,\n\t\t4252\n\t],\n\t\"./1F1FA-1F1F3.svg\": [\n\t\t23353,\n\t\t3353\n\t],\n\t\"./1F1FA-1F1F8.svg\": [\n\t\t65439,\n\t\t5439\n\t],\n\t\"./1F1FB-1F1F3.svg\": [\n\t\t90419,\n\t\t3886\n\t],\n\t\"./1F3F4-E0067-E0062-E0065-E006E-E0067-E007F.svg\": [\n\t\t16129,\n\t\t6129\n\t],\n\t\"./1F3F4-E0067-E0062-E0073-E0063-E0074-E007F.svg\": [\n\t\t60138,\n\t\t138\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 1 | 16);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 74018;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./Changchun.js\": [\n\t\t87837,\n\t\t6869\n\t],\n\t\"./athens.js\": [\n\t\t46128,\n\t\t6810\n\t],\n\t\"./baku.js\": [\n\t\t92481,\n\t\t5792\n\t],\n\t\"./barcelona.js\": [\n\t\t36340,\n\t\t2358\n\t],\n\t\"./beijing.js\": [\n\t\t32145,\n\t\t436\n\t],\n\t\"./berlin.js\": [\n\t\t37976,\n\t\t5520\n\t],\n\t\"./boston.js\": [\n\t\t68835,\n\t\t1321\n\t],\n\t\"./bucharest.js\": [\n\t\t35249,\n\t\t5189\n\t],\n\t\"./budapest.js\": [\n\t\t68895,\n\t\t6739\n\t],\n\t\"./cairo.js\": [\n\t\t36509,\n\t\t7599\n\t],\n\t\"./changsha.js\": [\n\t\t40574,\n\t\t7081\n\t],\n\t\"./chengdu.js\": [\n\t\t16312,\n\t\t4874\n\t],\n\t\"./chongqing.js\": [\n\t\t40300,\n\t\t9186\n\t],\n\t\"./daegu.js\": [\n\t\t96995,\n\t\t8719\n\t],\n\t\"./dalian.js\": [\n\t\t65169,\n\t\t7206\n\t],\n\t\"./delhi.js\": [\n\t\t53707,\n\t\t134\n\t],\n\t\"./dongguan.js\": [\n\t\t63280,\n\t\t9770\n\t],\n\t\"./dortmund.js\": [\n\t\t86079,\n\t\t8189\n\t],\n\t\"./edinburgh.js\": [\n\t\t70285,\n\t\t9898\n\t],\n\t\"./eskisehir.js\": [\n\t\t51686,\n\t\t4447\n\t],\n\t\"./foshan.js\": [\n\t\t73204,\n\t\t1847\n\t],\n\t\"./frankfurt.js\": [\n\t\t12040,\n\t\t6951\n\t],\n\t\"./glasgow.js\": [\n\t\t34476,\n\t\t1392\n\t],\n\t\"./gothenburg.js\": [\n\t\t66801,\n\t\t5449\n\t],\n\t\"./guadalajara.js\": [\n\t\t39399,\n\t\t17\n\t],\n\t\"./guangzhou.js\": [\n\t\t65841,\n\t\t8237\n\t],\n\t\"./hangzhou.js\": [\n\t\t33427,\n\t\t886\n\t],\n\t\"./hanoi.js\": [\n\t\t30507,\n\t\t4788\n\t],\n\t\"./harbin.js\": [\n\t\t4826,\n\t\t3106\n\t],\n\t\"./hochiminh.js\": [\n\t\t46770,\n\t\t4073\n\t],\n\t\"./hongkong.js\": [\n\t\t54243,\n\t\t5303\n\t],\n\t\"./istanbul.js\": [\n\t\t73107,\n\t\t310\n\t],\n\t\"./jinan.js\": [\n\t\t5719,\n\t\t5081\n\t],\n\t\"./kansai.js\": [\n\t\t70382,\n\t\t1951\n\t],\n\t\"./kaohsiung.js\": [\n\t\t33037,\n\t\t8183\n\t],\n\t\"./klangvalley.js\": [\n\t\t20137,\n\t\t8140\n\t],\n\t\"./kunming.js\": [\n\t\t28852,\n\t\t3417\n\t],\n\t\"./lima.js\": [\n\t\t39118,\n\t\t3875\n\t],\n\t\"./lisbon.js\": [\n\t\t88814,\n\t\t425\n\t],\n\t\"./london.js\": [\n\t\t38087,\n\t\t7826\n\t],\n\t\"./macao.js\": [\n\t\t18015,\n\t\t2028\n\t],\n\t\"./madrid.js\": [\n\t\t68020,\n\t\t9890\n\t],\n\t\"./milan.js\": [\n\t\t94410,\n\t\t5944\n\t],\n\t\"./montreal.js\": [\n\t\t53678,\n\t\t4737\n\t],\n\t\"./munich.js\": [\n\t\t87368,\n\t\t3579\n\t],\n\t\"./nanjing.js\": [\n\t\t1664,\n\t\t8975\n\t],\n\t\"./naples.js\": [\n\t\t73738,\n\t\t1614\n\t],\n\t\"./newtaipei.js\": [\n\t\t99114,\n\t\t5066\n\t],\n\t\"./osaka.js\": [\n\t\t11064,\n\t\t2168\n\t],\n\t\"./oslo.js\": [\n\t\t8057,\n\t\t743\n\t],\n\t\"./other.js\": [\n\t\t77642,\n\t\t8291\n\t],\n\t\"./ottawa.js\": [\n\t\t40254,\n\t\t8413\n\t],\n\t\"./paris.js\": [\n\t\t22720,\n\t\t6195\n\t],\n\t\"./qingdao.js\": [\n\t\t57994,\n\t\t441\n\t],\n\t\"./rheinruhr.js\": [\n\t\t86870,\n\t\t6546\n\t],\n\t\"./riyadh.js\": [\n\t\t81000,\n\t\t5288\n\t],\n\t\"./sanfrancisco.js\": [\n\t\t64747,\n\t\t3658\n\t],\n\t\"./sanktpeterburg.js\": [\n\t\t21832,\n\t\t2194\n\t],\n\t\"./santiago.js\": [\n\t\t12568,\n\t\t1342\n\t],\n\t\"./saopaulo.js\": [\n\t\t56956,\n\t\t7153\n\t],\n\t\"./seoul.js\": [\n\t\t23266,\n\t\t5885\n\t],\n\t\"./shanghai.js\": [\n\t\t89656,\n\t\t6977\n\t],\n\t\"./shaoxing.js\": [\n\t\t84891,\n\t\t7719\n\t],\n\t\"./shenyang.js\": [\n\t\t22266,\n\t\t9\n\t],\n\t\"./shenzhen.js\": [\n\t\t44691,\n\t\t9450\n\t],\n\t\"./singapore.js\": [\n\t\t32459,\n\t\t1608\n\t],\n\t\"./stockholm.js\": [\n\t\t14606,\n\t\t2871\n\t],\n\t\"./suzhou.js\": [\n\t\t99819,\n\t\t2832\n\t],\n\t\"./taichung.js\": [\n\t\t65230,\n\t\t1902\n\t],\n\t\"./taipei.js\": [\n\t\t89489,\n\t\t530\n\t],\n\t\"./tehran.js\": [\n\t\t52573,\n\t\t7101\n\t],\n\t\"./tianjin.js\": [\n\t\t47942,\n\t\t4111\n\t],\n\t\"./tokyo.js\": [\n\t\t23762,\n\t\t5418\n\t],\n\t\"./toronto.js\": [\n\t\t18148,\n\t\t2338\n\t],\n\t\"./tyneandwear.js\": [\n\t\t9314,\n\t\t4760\n\t],\n\t\"./vienna.js\": [\n\t\t55252,\n\t\t8759\n\t],\n\t\"./warsaw.js\": [\n\t\t9727,\n\t\t1568\n\t],\n\t\"./wuhan.js\": [\n\t\t93742,\n\t\t5562\n\t],\n\t\"./wuxi.js\": [\n\t\t4099,\n\t\t5436\n\t],\n\t\"./xiamen.js\": [\n\t\t54610,\n\t\t4688\n\t],\n\t\"./xian.js\": [\n\t\t72591,\n\t\t5028\n\t],\n\t\"./yokohama.js\": [\n\t\t695,\n\t\t9989\n\t],\n\t\"./zhengzhou.js\": [\n\t\t27357,\n\t\t1134\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 37827;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./basic/coline.json\": [\n\t\t32401,\n\t\t8014\n\t],\n\t\"./basic/default.json\": [\n\t\t8453,\n\t\t8241\n\t],\n\t\"./basic/loop.json\": [\n\t\t8909,\n\t\t9410\n\t],\n\t\"./bjsubway/bj1.json\": [\n\t\t48741,\n\t\t6729\n\t],\n\t\"./bjsubway/bj10.json\": [\n\t\t48461,\n\t\t6230\n\t],\n\t\"./bjsubway/bj11.json\": [\n\t\t3279,\n\t\t7646\n\t],\n\t\"./bjsubway/bj13.json\": [\n\t\t67443,\n\t\t1188\n\t],\n\t\"./bjsubway/bj14.json\": [\n\t\t92906,\n\t\t9523\n\t],\n\t\"./bjsubway/bj16.json\": [\n\t\t47062,\n\t\t6698\n\t],\n\t\"./bjsubway/bj17.json\": [\n\t\t58241,\n\t\t8760\n\t],\n\t\"./bjsubway/bj2.json\": [\n\t\t75176,\n\t\t2773\n\t],\n\t\"./bjsubway/bj4.json\": [\n\t\t56450,\n\t\t6552\n\t],\n\t\"./bjsubway/bj5.json\": [\n\t\t81834,\n\t\t7680\n\t],\n\t\"./bjsubway/bj6.json\": [\n\t\t12022,\n\t\t5653\n\t],\n\t\"./bjsubway/bj7.json\": [\n\t\t26061,\n\t\t9259\n\t],\n\t\"./bjsubway/bj8.json\": [\n\t\t69846,\n\t\t5482\n\t],\n\t\"./bjsubway/bj9.json\": [\n\t\t39422,\n\t\t9797\n\t],\n\t\"./bjsubway/dae.json\": [\n\t\t34852,\n\t\t4269\n\t],\n\t\"./bjsubway/s1l.json\": [\n\t\t42830,\n\t\t3981\n\t],\n\t\"./bjsubway/t1l.json\": [\n\t\t41057,\n\t\t2381\n\t],\n\t\"./bjsubway/xjl.json\": [\n\t\t14,\n\t\t7200\n\t],\n\t\"./bjsubway/yzl.json\": [\n\t\t56315,\n\t\t1095\n\t],\n\t\"./company-config.json\": [\n\t\t76605\n\t],\n\t\"./fmetro/fs2.json\": [\n\t\t61139,\n\t\t9447\n\t],\n\t\"./fmetro/tgm1.json\": [\n\t\t81558,\n\t\t7149\n\t],\n\t\"./fmetro/tnh1.json\": [\n\t\t17249,\n\t\t7160\n\t],\n\t\"./gzmtr/apm.json\": [\n\t\t45098,\n\t\t6452\n\t],\n\t\"./gzmtr/gf.json\": [\n\t\t30571,\n\t\t6354\n\t],\n\t\"./gzmtr/gz1.json\": [\n\t\t28161,\n\t\t2200\n\t],\n\t\"./gzmtr/gz13.json\": [\n\t\t14745,\n\t\t3082\n\t],\n\t\"./gzmtr/gz14.json\": [\n\t\t9447,\n\t\t9950\n\t],\n\t\"./gzmtr/gz18.json\": [\n\t\t79361,\n\t\t7877\n\t],\n\t\"./gzmtr/gz2.json\": [\n\t\t87119,\n\t\t6583\n\t],\n\t\"./gzmtr/gz21.json\": [\n\t\t24695,\n\t\t7724\n\t],\n\t\"./gzmtr/gz22.json\": [\n\t\t92671,\n\t\t4015\n\t],\n\t\"./gzmtr/gz3.json\": [\n\t\t20622,\n\t\t9826\n\t],\n\t\"./gzmtr/gz4.json\": [\n\t\t25440,\n\t\t3084\n\t],\n\t\"./gzmtr/gz5.json\": [\n\t\t93880,\n\t\t3109\n\t],\n\t\"./gzmtr/gz6.json\": [\n\t\t27426,\n\t\t2846\n\t],\n\t\"./gzmtr/gz7.json\": [\n\t\t73290,\n\t\t9925\n\t],\n\t\"./gzmtr/gz8.json\": [\n\t\t69045,\n\t\t8924\n\t],\n\t\"./gzmtr/gz9.json\": [\n\t\t78481,\n\t\t7332\n\t],\n\t\"./gzmtr/thp1.json\": [\n\t\t65227,\n\t\t2100\n\t],\n\t\"./gzmtr/thz1.json\": [\n\t\t82887,\n\t\t9416\n\t],\n\t\"./hrbmetro/hrb1.json\": [\n\t\t13002,\n\t\t199\n\t],\n\t\"./hrbmetro/hrb2.json\": [\n\t\t6635,\n\t\t4557\n\t],\n\t\"./hrbmetro/hrb3.json\": [\n\t\t20555,\n\t\t8512\n\t],\n\t\"./kmrailtransit/km1.json\": [\n\t\t43285,\n\t\t2658\n\t],\n\t\"./kmrailtransit/km2.json\": [\n\t\t84760,\n\t\t9655\n\t],\n\t\"./kmrailtransit/km3.json\": [\n\t\t327,\n\t\t4250\n\t],\n\t\"./kmrailtransit/km4.json\": [\n\t\t41302,\n\t\t6555\n\t],\n\t\"./kmrailtransit/km5.json\": [\n\t\t21672,\n\t\t9675\n\t],\n\t\"./kmrailtransit/km6.json\": [\n\t\t35903,\n\t\t2663\n\t],\n\t\"./kvtransit/klMonorail.json\": [\n\t\t57749,\n\t\t113\n\t],\n\t\"./kvtransit/lrtAmpang.json\": [\n\t\t81534,\n\t\t6080\n\t],\n\t\"./kvtransit/lrtKelanaJaya.json\": [\n\t\t94219,\n\t\t8766\n\t],\n\t\"./kvtransit/lrtSriPataling.json\": [\n\t\t38174,\n\t\t8724\n\t],\n\t\"./kvtransit/mrtKajang.json\": [\n\t\t49512,\n\t\t6862\n\t],\n\t\"./mlm/taipa.json\": [\n\t\t4435,\n\t\t4694\n\t],\n\t\"./mtr/ael.json\": [\n\t\t16215,\n\t\t5945\n\t],\n\t\"./mtr/drl.json\": [\n\t\t86083,\n\t\t5074\n\t],\n\t\"./mtr/eal.json\": [\n\t\t19800,\n\t\t5958\n\t],\n\t\"./mtr/isl.json\": [\n\t\t7314,\n\t\t4754\n\t],\n\t\"./mtr/ktl.json\": [\n\t\t1400,\n\t\t6533\n\t],\n\t\"./mtr/sile.json\": [\n\t\t37438,\n\t\t2490\n\t],\n\t\"./mtr/tcl.json\": [\n\t\t74512,\n\t\t169\n\t],\n\t\"./mtr/tkl.json\": [\n\t\t91257,\n\t\t5910\n\t],\n\t\"./mtr/tml.json\": [\n\t\t45339,\n\t\t4991\n\t],\n\t\"./mtr/twl.json\": [\n\t\t15030,\n\t\t403\n\t],\n\t\"./njmetro/nj1.json\": [\n\t\t72868,\n\t\t564\n\t],\n\t\"./njmetro/nj10.json\": [\n\t\t28421,\n\t\t1180\n\t],\n\t\"./njmetro/nj2.json\": [\n\t\t74583,\n\t\t7792\n\t],\n\t\"./njmetro/nj3.json\": [\n\t\t33347,\n\t\t1899\n\t],\n\t\"./njmetro/nj4.json\": [\n\t\t57811,\n\t\t3497\n\t],\n\t\"./qdmetro/qd11.json\": [\n\t\t80186,\n\t\t6899\n\t],\n\t\"./qdmetro/qd13.json\": [\n\t\t99736,\n\t\t4092\n\t],\n\t\"./qdmetro/qd2.json\": [\n\t\t35582,\n\t\t1471\n\t],\n\t\"./qdmetro/qd3.json\": [\n\t\t23457,\n\t\t4138\n\t],\n\t\"./qdmetro/qd8.json\": [\n\t\t67703,\n\t\t6293\n\t],\n\t\"./saopaulometro/sp1.json\": [\n\t\t2702,\n\t\t4402\n\t],\n\t\"./saopaulometro/sp10.json\": [\n\t\t81443,\n\t\t5680\n\t],\n\t\"./saopaulometro/sp11.json\": [\n\t\t48362,\n\t\t5325\n\t],\n\t\"./saopaulometro/sp12.json\": [\n\t\t57393,\n\t\t852\n\t],\n\t\"./saopaulometro/sp13.json\": [\n\t\t12794,\n\t\t6288\n\t],\n\t\"./saopaulometro/sp15.json\": [\n\t\t56267,\n\t\t758\n\t],\n\t\"./saopaulometro/sp2.json\": [\n\t\t67182,\n\t\t9619\n\t],\n\t\"./saopaulometro/sp3.json\": [\n\t\t91102,\n\t\t7855\n\t],\n\t\"./saopaulometro/sp4.json\": [\n\t\t42489,\n\t\t2750\n\t],\n\t\"./saopaulometro/sp5.json\": [\n\t\t62103,\n\t\t4387\n\t],\n\t\"./saopaulometro/sp7.json\": [\n\t\t99021,\n\t\t153\n\t],\n\t\"./saopaulometro/sp8.json\": [\n\t\t21280,\n\t\t4996\n\t],\n\t\"./saopaulometro/sp9.json\": [\n\t\t74337,\n\t\t911\n\t],\n\t\"./shmetro/sh1.json\": [\n\t\t55562,\n\t\t6569\n\t],\n\t\"./shmetro/sh10.json\": [\n\t\t26438,\n\t\t6890\n\t],\n\t\"./shmetro/sh11.json\": [\n\t\t96485,\n\t\t3692\n\t],\n\t\"./shmetro/sh12.json\": [\n\t\t67048,\n\t\t856\n\t],\n\t\"./shmetro/sh13.json\": [\n\t\t49155,\n\t\t2791\n\t],\n\t\"./shmetro/sh14.json\": [\n\t\t42243,\n\t\t5941\n\t],\n\t\"./shmetro/sh15.json\": [\n\t\t86484,\n\t\t4254\n\t],\n\t\"./shmetro/sh16.json\": [\n\t\t71465,\n\t\t4605\n\t],\n\t\"./shmetro/sh17.json\": [\n\t\t7079,\n\t\t74\n\t],\n\t\"./shmetro/sh18.json\": [\n\t\t94120,\n\t\t2632\n\t],\n\t\"./shmetro/sh2.json\": [\n\t\t4580,\n\t\t3456\n\t],\n\t\"./shmetro/sh3&4.json\": [\n\t\t57225,\n\t\t5294\n\t],\n\t\"./shmetro/sh3.json\": [\n\t\t17439,\n\t\t7211\n\t],\n\t\"./shmetro/sh4.json\": [\n\t\t21088,\n\t\t6745\n\t],\n\t\"./shmetro/sh5.json\": [\n\t\t47346,\n\t\t7769\n\t],\n\t\"./shmetro/sh6.json\": [\n\t\t48358,\n\t\t3263\n\t],\n\t\"./shmetro/sh7.json\": [\n\t\t13095,\n\t\t1475\n\t],\n\t\"./shmetro/sh8.json\": [\n\t\t64409,\n\t\t8781\n\t],\n\t\"./shmetro/sh9.json\": [\n\t\t57345,\n\t\t7321\n\t],\n\t\"./szmetro/sz1.json\": [\n\t\t47109,\n\t\t5993\n\t],\n\t\"./szmetro/sz3.json\": [\n\t\t51862,\n\t\t7910\n\t],\n\t\"./szmetro/sz4.json\": [\n\t\t47789,\n\t\t6632\n\t],\n\t\"./template-configs.json\": [\n\t\t72722\n\t],\n\t\"./torontosubway/ttc1.json\": [\n\t\t12966,\n\t\t5925\n\t],\n\t\"./torontosubway/ttc2.json\": [\n\t\t33298,\n\t\t6568\n\t],\n\t\"./torontosubway/ttc3.json\": [\n\t\t78973,\n\t\t9477\n\t],\n\t\"./torontosubway/ttc4.json\": [\n\t\t76730,\n\t\t8476\n\t],\n\t\"./zzmetro/zz1.json\": [\n\t\t44557,\n\t\t2023\n\t],\n\t\"./zzmetro/zz14.json\": [\n\t\t52049,\n\t\t8330\n\t],\n\t\"./zzmetro/zz2.json\": [\n\t\t36226,\n\t\t7522\n\t],\n\t\"./zzmetro/zz3.json\": [\n\t\t45090,\n\t\t8615\n\t],\n\t\"./zzmetro/zz4.json\": [\n\t\t92332,\n\t\t5515\n\t],\n\t\"./zzmetro/zz5.json\": [\n\t\t53790,\n\t\t5797\n\t],\n\t\"./zzmetro/zz6.json\": [\n\t\t55444,\n\t\t1325\n\t],\n\t\"./zzmetro/zz9.json\": [\n\t\t81393,\n\t\t388\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__.t(id, 3 | 16);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 91427;\nmodule.exports = webpackAsyncContext;","import { CanvasType, RmgStyle, Theme } from '../constants/constants';\nimport React, { ReactNode, Suspense, useEffect } from 'react';\nimport FallbackLoader from '../components/fallback-loader';\n\ninterface SvgWrapperProps {\n    type: CanvasType;\n    style: RmgStyle;\n    svgWidth: number;\n    svgHeight: number;\n    canvasScale: number;\n    theme: Theme;\n    children: ReactNode;\n}\n\nexport default function SvgWrapper(props: SvgWrapperProps) {\n    const { type, style, svgWidth, svgHeight, canvasScale, theme, children } = props;\n\n    useEffect(() => {\n        (document.getElementById('css_' + type) as HTMLLinkElement).href =\n            process.env.PUBLIC_URL + `/styles/${type}_${style}.css`;\n        return () => {\n            (document.getElementById('css_' + type) as HTMLLinkElement).href = '';\n        };\n    }, [style]);\n\n    return (\n        <svg\n            id={type}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n            height={svgHeight * canvasScale}\n            viewBox={`0 0 ${svgWidth} ${svgHeight}`}\n            colorInterpolationFilters=\"sRGB\"\n            style={{\n                ['--rmg-svg-width' as any]: svgWidth + 'px',\n                ['--rmg-svg-height' as any]: svgHeight + 'px',\n                ['--rmg-theme-colour' as any]: theme[2],\n                ['--rmg-theme-fg' as any]: theme[3],\n            }}\n        >\n            <rect\n                id=\"canvas-bg\"\n                fill=\"white\"\n                style={{ height: 'var(--rmg-svg-height)', width: 'var(--rmg-svg-width)' }}\n            />\n            <Suspense fallback={<FallbackLoader />}>{children}</Suspense>\n            <rect\n                id=\"canvas-border\"\n                fill=\"none\"\n                strokeWidth={3}\n                stroke=\"none\"\n                style={{ height: 'var(--rmg-svg-height)', width: 'var(--rmg-svg-width)' }}\n            />\n        </svg>\n    );\n}\n","import React, { lazy, ReactNode, useEffect } from 'react';\nimport { CanvasType, RmgStyle } from '../constants/constants';\nimport { useRootSelector } from '../redux';\nimport SvgWrapper from './svg-wrapper';\nimport { useDispatch } from 'react-redux';\nimport { setStyle } from '../redux/param/action';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { Flex } from '@chakra-ui/react';\nimport ErrorBoundary from '../error-boundary';\n\nconst style = {\n    flexDirection: 'row',\n    overflowX: 'auto',\n    '&::before, &::after': {\n        content: '\"\"',\n        margin: 'auto',\n    },\n    '& > svg': {\n        flex: '0 0 auto',\n        border: '1px solid black',\n    },\n};\n\nexport default function SvgRouter() {\n    const location = useLocation();\n    const navigate = useNavigate();\n    const dispatch = useDispatch();\n\n    const { canvasToShow, canvasScale } = useRootSelector(state => state.app);\n    const {\n        svgWidth: svgWidths,\n        svg_height: svgHeight,\n        style: rmgStyle,\n        theme,\n    } = useRootSelector(state => state.param);\n\n    if (location.pathname !== '/' + rmgStyle && location.pathname !== '/v3/' + rmgStyle) {\n        const nextStyle = location.pathname.split('/').slice(-1)[0] as RmgStyle;\n        if (Object.values(RmgStyle).includes(nextStyle)) {\n            // set style in param\n            dispatch(setStyle(nextStyle));\n        } else {\n            // push route to match param's style\n            navigate(rmgStyle);\n        }\n    }\n\n    useEffect(() => {\n        (document.getElementById('css_share') as HTMLLinkElement).href =\n            process.env.PUBLIC_URL + `/styles/share_${rmgStyle}.css`;\n    }, [rmgStyle]);\n\n    const filteredCanvas = (Object.keys(canvasList[rmgStyle]) as CanvasType[]).filter(canvas =>\n        canvasToShow === 'all' ? true : canvasToShow === canvas\n    );\n\n    return (\n        <Flex sx={style}>\n            {filteredCanvas.map(canvas => (\n                <ErrorBoundary\n                    key={canvas + rmgStyle}\n                    style={{ minWidth: 750, height: svgHeight * canvasScale, overflowY: 'auto' }}\n                >\n                    <SvgWrapper\n                        type={canvas}\n                        style={rmgStyle}\n                        svgWidth={svgWidths[canvas]}\n                        svgHeight={svgHeight}\n                        canvasScale={canvasScale}\n                        theme={theme}\n                    >\n                        {canvasList[rmgStyle][canvas]}\n                    </SvgWrapper>\n                </ErrorBoundary>\n            ))}\n        </Flex>\n    );\n}\n\n// Canvas available\n\nconst RunInGZMTR = lazy(() => import(/* webpackChunkName: \"runinGZMTR\" */ './runin/runin-gzmtr'));\nconst RailMapGZMTR = lazy(() => import(/* webpackChunkName: \"railmapGZMTR\" */ './railmap/railmap-gzmtr'));\n\nconst DestinationMTR = lazy(() => import(/* webpackChunkName: \"destinationMTR\" */ './destination/destination-mtr'));\nconst RailMapMTR = lazy(() => import(/* webpackChunkName: \"railmapMTR\" */ './railmap/railmap-mtr'));\n\nconst DestinationSHMetro = lazy(\n    () => import(/* webpackChunkName: \"destinationSHMetro\" */ './destination/destination-shmetro')\n);\nconst RunInSHMetro = lazy(() => import(/* webpackChunkName: \"runinSHMetro\" */ './runin/runin-shmetro'));\nconst RailMapSHMetro = lazy(() => import(/* webpackChunkName: \"railmapSHMetro\" */ './railmap/railmap-shmetro'));\nconst IndoorSHMetro = lazy(() => import(/* webpackChunkName: \"indoorSHMetro\" */ './indoor/indoor-shmetro'));\n\n/**\n * Each value of this object is an object of ORDERED key-value pairs\n */\nconst canvasList: Record<RmgStyle, { [c in CanvasType]?: ReactNode }> = {\n    [RmgStyle.GZMTR]: {\n        [CanvasType.RunIn]: <RunInGZMTR />,\n        [CanvasType.RailMap]: <RailMapGZMTR />,\n    },\n    [RmgStyle.MTR]: {\n        [CanvasType.Destination]: <DestinationMTR />,\n        [CanvasType.RailMap]: <RailMapMTR />,\n    },\n    [RmgStyle.SHMetro]: {\n        [CanvasType.Destination]: <DestinationSHMetro />,\n        [CanvasType.RunIn]: <RunInSHMetro />,\n        [CanvasType.RailMap]: <RailMapSHMetro />,\n        [CanvasType.Indoor]: <IndoorSHMetro />,\n    },\n};\n","import React from 'react';\nimport { Box, Heading } from '@chakra-ui/react';\nimport { updateStationName, updateStationNum, updateStationSecondaryName } from '../../../redux/param/action';\nimport { useRootDispatch, useRootSelector } from '../../../redux';\nimport { RmgStyle } from '../../../constants/constants';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useTranslation } from 'react-i18next';\n\nexport default function InfoSection() {\n    const { t } = useTranslation();\n    const dispatch = useRootDispatch();\n\n    const selectedStation = useRootSelector(state => state.app.selectedStation);\n    console.log('InfoSection:: Rendering for', selectedStation);\n    const style = useRootSelector(state => state.param.style);\n    const { num, name, secondaryName } = useRootSelector(state => state.param.stn_list[selectedStation]);\n\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'input',\n            label: t('StationSidePanel.info.num'),\n            value: num,\n            placeholder: '01',\n            onChange: (value: string) => dispatch(updateStationNum(selectedStation, value)),\n            hidden: ![RmgStyle.GZMTR].includes(style),\n        },\n        {\n            type: 'input',\n            label: t('Chinese name'),\n            value: name[0],\n            onChange: (value: string) => dispatch(updateStationName(selectedStation, [value, name[1]])),\n        },\n        {\n            type: 'input',\n            label: t('English name'),\n            value: name[1],\n            onChange: (value: string) => dispatch(updateStationName(selectedStation, [name[0], value])),\n        },\n        {\n            type: 'input',\n            label: t('StationSidePanel.info.zhSecondary'),\n            value: secondaryName ? secondaryName[0] : '',\n            placeholder: '1号航站楼',\n            onChange: (value: string) =>\n                dispatch(updateStationSecondaryName(selectedStation, [value, secondaryName ? secondaryName[1] : ''])),\n            hidden: ![RmgStyle.GZMTR].includes(style),\n        },\n        {\n            type: 'input',\n            label: t('StationSidePanel.info.enSecondary'),\n            value: secondaryName ? secondaryName[1] : '',\n            placeholder: 'Terminal 1',\n            onChange: (value: string) =>\n                dispatch(updateStationSecondaryName(selectedStation, [secondaryName ? secondaryName[0] : '', value])),\n            hidden: ![RmgStyle.GZMTR].includes(style),\n        },\n    ];\n\n    return (\n        <Box p={1}>\n            <Heading as=\"h5\" size=\"sm\">\n                {t('StationSidePanel.info.title')}\n            </Heading>\n\n            <RmgFields fields={fields} minW={130} />\n        </Box>\n    );\n}\n","import React, { useEffect, useState } from 'react';\nimport { Image } from '@chakra-ui/react';\n\ninterface FlagSvgEmojiProps {\n    countryCode: string;\n    svgFilename?: string;\n}\n\nexport default function FlagSvgEmoji(props: FlagSvgEmojiProps) {\n    const { countryCode, svgFilename } = props;\n\n    const [src, setSrc] = useState<string | undefined>(undefined);\n\n    useEffect(() => {\n        if (svgFilename) {\n            import('@railmapgen/rmg-palette-resources/flags/' + svgFilename)\n                .then(module => module.default)\n                .then(setSrc)\n                .catch(err => console.error(`Failed to find SVG file ${svgFilename} as ${err?.message}`));\n        }\n    }, [svgFilename]);\n\n    return src ? <Image src={src} alt={`Flag of ${countryCode}`} h={17} mr={1} /> : <></>;\n}\n","import React from 'react';\nimport { RmgAutoComplete } from '@railmapgen/rmg-components';\nimport { CityCode, CityEntry, cityList, countryList } from '@railmapgen/rmg-palette-resources';\nimport { LanguageCode } from '../../../constants/constants';\nimport { useTranslation } from 'react-i18next';\nimport FlagSvgEmoji from './flag-svg-emoji';\n\ninterface CityPickerProps {\n    defaultValueId?: CityCode;\n    onChange?: (val: CityCode) => void;\n}\n\nexport default function CityPicker(props: CityPickerProps) {\n    const { defaultValueId, onChange } = props;\n\n    const { i18n } = useTranslation();\n\n    const currentItem = defaultValueId ? cityList.find(item => item.id === defaultValueId) : undefined;\n\n    const displayValue = (item: CityEntry): string => {\n        return i18n.languages.map(lng => item.name[lng as LanguageCode]).find(name => name !== undefined)!!;\n    };\n\n    const displayHandler = (item: CityEntry) => {\n        const isCensorTWFlag =\n            item.country === 'TW' &&\n            [LanguageCode.ChineseSimp, LanguageCode.ChineseCN].includes(i18n.languages[0] as LanguageCode);\n        const isWindowsClient = ['Win32', 'Win64'].includes(navigator.platform);\n        // const isWindowsClient = true; // uncomment this line for Windows testing\n\n        const name = i18n.languages.map(lng => item.name[lng as LanguageCode]).find(name => name !== undefined);\n        const flagSvg = countryList.find(country => country.id === item.country)?.flagSvg;\n        const flagEmoji = countryList.find(country => country.id === item.country)?.flagEmoji;\n\n        return (\n            <>\n                {isCensorTWFlag ? (\n                    <span>🏴&nbsp;</span>\n                ) : isWindowsClient ? (\n                    <FlagSvgEmoji countryCode={item.country} svgFilename={flagSvg} />\n                ) : (\n                    <span>{flagEmoji}&nbsp;</span>\n                )}\n                {name}\n            </>\n        );\n    };\n\n    const predicate = (item: CityEntry, input: string): boolean => {\n        return Object.values(item.name).some(name => name.includes(input));\n    };\n\n    const data = cityList.slice().sort((a, b) => {\n        if (a.id === CityCode.Other) {\n            return 1;\n        } else if (b.id === CityCode.Other) {\n            return -1;\n        } else {\n            return displayValue(a).localeCompare(displayValue(b), i18n.languages[0]);\n        }\n    });\n\n    return (\n        <RmgAutoComplete\n            data={data}\n            displayValue={displayValue}\n            displayHandler={displayHandler}\n            predicate={predicate}\n            defaultValue={currentItem}\n            onChange={item => onChange?.(item.id)}\n        />\n    );\n}\n","import React, { useEffect, useState } from 'react';\nimport { ColourHex, LanguageCode, MonoColour, PaletteEntry } from '../../../constants/constants';\nimport { RmgAutoComplete } from '@railmapgen/rmg-components';\nimport { CityCode } from '@railmapgen/rmg-palette-resources';\nimport { useTranslation } from 'react-i18next';\nimport { RmgLineBadge } from '@railmapgen/rmg-components';\n\nconst usePalette = (cityCode?: CityCode) => {\n    const [paletteList, setPaletteList] = useState<PaletteEntry[]>([]);\n\n    useEffect(() => {\n        import(/* webpackChunkName: \"palettes\" */ `@railmapgen/rmg-palette-resources/palettes/${cityCode}.js`)\n            .then(module => setPaletteList(module.default))\n            .catch(() => setPaletteList([]));\n    }, [cityCode]);\n\n    return paletteList;\n};\n\ninterface ColourPickerProps {\n    city?: CityCode;\n    defaultValueId?: string;\n    onChange?: (lineCode: string, bg: ColourHex, fg: MonoColour) => void;\n}\n\nexport default function ColourPicker(props: ColourPickerProps) {\n    const { city, defaultValueId, onChange } = props;\n\n    const { i18n } = useTranslation();\n\n    const paletteList = usePalette(city);\n\n    const currentItem = defaultValueId ? paletteList.find(palette => palette.id === defaultValueId) : undefined;\n\n    const displayValue = (item: PaletteEntry): string => {\n        return i18n.languages.map(lng => item.name[lng as LanguageCode]).find(name => name !== undefined)!!;\n    };\n\n    const displayHandler = (item: PaletteEntry) => {\n        const displayName = displayValue(item);\n\n        return <RmgLineBadge name={displayName} fg={item.fg || MonoColour.white} bg={item.colour} />;\n    };\n\n    const predicate = (item: PaletteEntry, input: string): boolean => {\n        return Object.values(item.name).some(name => name.includes(input));\n    };\n\n    return (\n        <RmgAutoComplete\n            data={paletteList}\n            displayValue={displayValue}\n            displayHandler={displayHandler}\n            predicate={predicate}\n            defaultValue={currentItem}\n            onChange={item => onChange?.(item.id, item.colour, item.fg || MonoColour.white)}\n        />\n    );\n}\n","import {\n    Button,\n    Icon,\n    Link,\n    Modal,\n    ModalBody,\n    ModalCloseButton,\n    ModalContent,\n    ModalFooter,\n    ModalHeader,\n    ModalOverlay,\n    Tab,\n    TabList,\n    TabPanel,\n    TabPanels,\n    Tabs,\n    Text,\n    VStack,\n} from '@chakra-ui/react';\nimport React, { useEffect, useState } from 'react';\nimport { ColourHex, MonoColour, Theme } from '../../../constants/constants';\nimport CityPicker from './city-picker';\nimport ColourPicker from './colour-picker';\nimport { CityCode } from '@railmapgen/rmg-palette-resources';\nimport { useTranslation } from 'react-i18next';\nimport { RmgFields, RmgFieldsField, RmgLineBadge } from '@railmapgen/rmg-components';\nimport { MdOpenInNew } from 'react-icons/md';\n\ninterface ColourModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    defaultTheme?: Theme;\n    onUpdate?: (theme: Theme) => void;\n}\n\nexport default function ColourModal(props: ColourModalProps) {\n    const { isOpen, onClose, defaultTheme, onUpdate } = props;\n\n    const { t } = useTranslation();\n\n    const [cityCode, setCityCode] = useState(defaultTheme?.[0]);\n    const [lineCode, setLineCode] = useState(defaultTheme?.[1]);\n    const [bgColour, setBgColour] = useState(defaultTheme?.[2] || '#AAAAAA');\n    const [fgColour, setFgColour] = useState(defaultTheme?.[3] || MonoColour.white);\n\n    useEffect(() => {\n        if (defaultTheme) {\n            setCityCode(defaultTheme[0]);\n            setLineCode(defaultTheme[1]);\n            setBgColour(defaultTheme[2]);\n            setFgColour(defaultTheme[3]);\n        }\n    }, [isOpen, defaultTheme?.toString()]);\n\n    const paletteFields: RmgFieldsField[] = [\n        {\n            type: 'custom',\n            label: t('ColourModal.city'),\n            component: (\n                <CityPicker\n                    defaultValueId={cityCode}\n                    onChange={value => {\n                        setCityCode(value);\n                        setLineCode(undefined);\n                        setBgColour('#AAAAAA');\n                        setFgColour(MonoColour.white);\n                    }}\n                />\n            ),\n        },\n        {\n            type: 'custom',\n            label: t('ColourModal.line'),\n            component: (\n                <ColourPicker\n                    city={cityCode}\n                    defaultValueId={lineCode}\n                    onChange={(line, bg, fg) => {\n                        setLineCode(line);\n                        setBgColour(bg);\n                        setFgColour(fg);\n                    }}\n                />\n            ),\n        },\n    ];\n\n    const customFields: RmgFieldsField[] = [\n        {\n            type: 'input',\n            label: t('ColourModal.bg'),\n            variant: 'color',\n            value: bgColour,\n            placeholder: '#F3D03E',\n            onChange: value => {\n                setCityCode(CityCode.Other);\n                setLineCode('other');\n                setBgColour(value as ColourHex);\n            },\n        },\n        {\n            type: 'select',\n            label: t('ColourModal.fg'),\n            value: fgColour,\n            options: {\n                [MonoColour.white]: t('ColourModal.white'),\n                [MonoColour.black]: t('ColourModal.black'),\n            },\n            onChange: value => {\n                setCityCode(CityCode.Other);\n                setLineCode('other');\n                setFgColour(value as MonoColour);\n            },\n        },\n    ];\n\n    const isSubmitEnabled = cityCode && lineCode && bgColour && fgColour;\n\n    const handleSubmit = () => {\n        if (isSubmitEnabled) {\n            onUpdate?.([cityCode, lineCode, bgColour, fgColour]);\n            onClose();\n        }\n    };\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose}>\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>{t('ColourModal.title')}</ModalHeader>\n                <ModalCloseButton />\n\n                <ModalBody>\n                    <VStack>\n                        <RmgLineBadge name={t('ColourModal.example')} fg={fgColour} bg={bgColour} />\n\n                        <Tabs isFitted colorScheme=\"teal\" w=\"100%\" defaultIndex={cityCode === CityCode.Other ? 1 : 0}>\n                            <TabList>\n                                <Tab>{t('ColourModal.palette')}</Tab>\n                                <Tab>{t('ColourModal.custom')}</Tab>\n                            </TabList>\n\n                            <TabPanels>\n                                <TabPanel>\n                                    <RmgFields fields={paletteFields} />\n                                </TabPanel>\n                                <TabPanel>\n                                    <RmgFields fields={customFields} />\n                                </TabPanel>\n                            </TabPanels>\n                        </Tabs>\n                    </VStack>\n                </ModalBody>\n\n                <ModalFooter>\n                    <Text fontSize=\"sm\" marginRight={2}>\n                        {t('ColourModal.seeAll')}\n                        <Link color=\"teal.500\" href=\"/rmg-palette\" isExternal={true}>\n                            RMG Palette <Icon as={MdOpenInNew} />\n                        </Link>\n                    </Text>\n\n                    <Button colorScheme=\"teal\" onClick={handleSubmit} disabled={!isSubmitEnabled}>\n                        {t('ColourModal.submit')}\n                    </Button>\n                </ModalFooter>\n            </ModalContent>\n        </Modal>\n    );\n}\n","import { ColourHex } from '../constants/constants';\nimport { rmgChakraTheme } from '@railmapgen/rmg-components';\n\nexport default class ColourUtil {\n    private static hexToRgb(hex: ColourHex): [number, number, number] {\n        return [parseInt(hex.slice(1, 3), 16), parseInt(hex.slice(3, 5), 16), parseInt(hex.slice(5, 7), 16)];\n    }\n\n    public static fade(hex: ColourHex, alpha: number): `rgba(${string})` {\n        return `rgba(${[...this.hexToRgb(hex), alpha].join(',')})`;\n    }\n\n    public static euclideanDistance(hex1: ColourHex, hex2: ColourHex): number {\n        return this.hexToRgb(hex1).reduce((acc, cur, idx) => {\n            return acc + Math.pow(cur - this.hexToRgb(hex2)[idx], 2);\n        }, 0);\n    }\n}\n\nexport const findNearestColour = (hex: ColourHex): string => {\n    const colourDb: Record<string, Record<string, ColourHex> | ColourHex> = rmgChakraTheme.colors;\n\n    const [nearestColour] = Object.entries(colourDb).reduce(\n        (acc, cur) => {\n            if (cur[0].includes('Alpha') || cur[0] === 'current') {\n                return acc;\n            } else if (typeof cur[1] === 'string') {\n                const dist = ColourUtil.euclideanDistance(hex, cur[1]);\n                return dist < acc[1] ? [cur[0], dist] : acc;\n            } else {\n                const dist = ColourUtil.euclideanDistance(hex, cur[1]['600']);\n                return dist < acc[1] ? [cur[0], dist] : acc;\n            }\n        },\n        ['brand', Infinity]\n    );\n    return nearestColour;\n};\n","import React from 'react';\nimport ColourUtil from '../../theme/colour-util';\nimport { MdCircle } from 'react-icons/md';\nimport { IconButton } from '@chakra-ui/react';\nimport { Theme } from '../../constants/constants';\nimport { useTranslation } from 'react-i18next';\n\ninterface ThemeButtonProps {\n    theme: Theme;\n    onClick?: () => void;\n}\n\nexport default function ThemeButton(props: ThemeButtonProps) {\n    const { theme, onClick } = props;\n\n    const { t } = useTranslation();\n\n    return (\n        <IconButton\n            size=\"xs\"\n            aria-label={t('Colour')}\n            mt=\"0.45px\"\n            color={theme[3]}\n            bg={theme[2]}\n            _hover={{ bg: ColourUtil.fade(theme[2], 0.7) }}\n            icon={<MdCircle />}\n            onClick={onClick}\n        />\n    );\n}\n","import React, { useState } from 'react';\nimport { Box, HStack, IconButton, Text } from '@chakra-ui/react';\nimport { InterchangeInfo, MonoColour, Theme } from '../../../constants/constants';\nimport { MdAdd, MdContentCopy, MdDelete } from 'react-icons/md';\nimport ColourModal from '../../modal/colour-modal/colour-modal';\nimport { useTranslation } from 'react-i18next';\nimport { useRootSelector } from '../../../redux';\nimport ThemeButton from '../theme-button';\nimport { RmgCard, RmgFields, RmgFieldsField, RmgLabel } from '@railmapgen/rmg-components';\n\ninterface InterchangeCardProps {\n    interchangeList: InterchangeInfo[];\n    onAdd?: (info: InterchangeInfo) => void;\n    onDelete?: (index: number) => void;\n    onUpdate?: (index: number, info: InterchangeInfo) => void;\n}\n\nexport default function InterchangeCard(props: InterchangeCardProps) {\n    const { interchangeList, onAdd, onDelete, onUpdate } = props;\n\n    const { t } = useTranslation();\n\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [selectedIndex, setSelectedIndex] = useState(0);\n\n    const { theme, stn_list: stationList } = useRootSelector(state => state.param);\n\n    const usedNameList = Object.values(stationList).reduce<[string[], string[]]>(\n        (acc, cur) => {\n            const [zhAcc, enAcc] = acc;\n            return [\n                [...new Set(zhAcc.concat(cur.transfer.info.flat().map(it => it[4])))],\n                [...new Set(enAcc.concat(cur.transfer.info.flat().map(it => it[5])))],\n            ];\n        },\n        [[], []]\n    );\n\n    const interchangeFields: RmgFieldsField[][] = interchangeList.map((it, i) => [\n        {\n            type: 'input',\n            label: t('Chinese name'),\n            value: it[4],\n            minW: '80px',\n            onChange: val => onUpdate?.(i, [it[0], it[1], it[2], it[3], val, it[5]]),\n            optionList: usedNameList[0],\n        },\n        {\n            type: 'input',\n            label: t('English name'),\n            value: it[5],\n            minW: '80px',\n            onChange: val => onUpdate?.(i, [it[0], it[1], it[2], it[3], it[4], val]),\n            optionList: usedNameList[1],\n        },\n    ]);\n\n    return (\n        <RmgCard direction=\"column\">\n            {interchangeList.length === 0 && (\n                <HStack spacing={0.5} data-testid={`interchange-card-stack`}>\n                    <Text as=\"i\" flex={1} align=\"center\" fontSize=\"md\" colorScheme=\"gray\">\n                        {t('StationSidePanel.interchange.noInterchanges')}\n                    </Text>\n\n                    <IconButton\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        aria-label={t('StationSidePanel.interchange.add')}\n                        onClick={() => onAdd?.([theme[0], '', '#aaaaaa', MonoColour.white, '', ''])}\n                        icon={<MdAdd />}\n                    />\n                </HStack>\n            )}\n\n            {interchangeList.map((it, i) => (\n                <HStack key={i} spacing={0.5} data-testid={`interchange-card-stack-${i}`}>\n                    <RmgLabel label={t('Colour')} minW=\"40px\" noLabel={i !== 0}>\n                        <ThemeButton\n                            theme={[it[0], it[1], it[2], it[3]]}\n                            onClick={() => {\n                                setIsModalOpen(true);\n                                setSelectedIndex(i);\n                            }}\n                        />\n                    </RmgLabel>\n\n                    <RmgFields fields={interchangeFields[i]} noLabel={i !== 0} />\n\n                    {onAdd && i === interchangeFields.length - 1 ? (\n                        <IconButton\n                            size=\"sm\"\n                            variant=\"ghost\"\n                            aria-label={t('StationSidePanel.interchange.copy')}\n                            onClick={() => onAdd?.(interchangeList.slice(-1)[0])} // duplicate last leg\n                            icon={<MdContentCopy />}\n                        />\n                    ) : (\n                        <Box minW={8} />\n                    )}\n\n                    {onDelete && (\n                        <IconButton\n                            size=\"sm\"\n                            variant=\"ghost\"\n                            aria-label={t('StationSidePanel.interchange.remove')}\n                            onClick={() => onDelete?.(i)}\n                            icon={<MdDelete />}\n                        />\n                    )}\n                </HStack>\n            ))}\n\n            <ColourModal\n                isOpen={isModalOpen}\n                onClose={() => setIsModalOpen(false)}\n                defaultTheme={interchangeList[selectedIndex]?.slice(0, 4) as Theme}\n                onUpdate={theme =>\n                    onUpdate?.(selectedIndex, [\n                        ...theme,\n                        interchangeList[selectedIndex][4],\n                        interchangeList[selectedIndex][5],\n                    ])\n                }\n            />\n        </RmgCard>\n    );\n}\n","import React, { useEffect, useState } from 'react';\nimport { Button, ButtonGroup } from '@chakra-ui/react';\n\ntype ButtonGroupSelection<T> = {\n    label: string;\n    value: T;\n    disabled?: boolean;\n};\n\ntype RmgButtonGroupSingleSelectProps<T> = {\n    selections: ButtonGroupSelection<T>[];\n    defaultValue: T;\n    onChange?: (value: T) => void;\n    multiSelect?: false;\n};\n\ntype RmgButtonGroupMultiSelectProps<T> = {\n    selections: ButtonGroupSelection<T>[];\n    defaultValue: T[];\n    onChange?: (value: T[]) => void;\n    multiSelect: true;\n};\n\ntype RmgButtonGroupProps<T> = RmgButtonGroupSingleSelectProps<T> | RmgButtonGroupMultiSelectProps<T>;\n\nexport default function RmgButtonGroup<T extends string | boolean>(props: RmgButtonGroupProps<T>) {\n    const { selections, defaultValue, onChange, multiSelect } = props;\n\n    const [value, setValue] = useState(defaultValue);\n\n    useEffect(() => {\n        defaultValue.toString() && setValue(defaultValue);\n    }, [defaultValue.toString()]);\n\n    const handleToggle = (val: T) => {\n        if (multiSelect) {\n            const prevValue = value as T[];\n            const nextValue = prevValue.includes(val) ? prevValue.filter(v => v !== val) : [...prevValue, val];\n\n            setValue(nextValue);\n            (onChange as RmgButtonGroupMultiSelectProps<T>['onChange'])?.(nextValue);\n        } else {\n            setValue(val);\n            (onChange as RmgButtonGroupSingleSelectProps<T>['onChange'])?.(val);\n        }\n    };\n\n    return (\n        <ButtonGroup size=\"xs\" isAttached colorScheme=\"teal\" variant=\"outline\">\n            {selections.map((selection, i) => {\n                const isSelected =\n                    (typeof value === 'object' && value.includes(selection.value)) || value === selection.value;\n\n                // TODO: fix overlapped/missing border\n                const mr = i !== selections.length - 1 && !isSelected ? '-px' : undefined;\n\n                return (\n                    <Button\n                        key={selection.value.toString()}\n                        role=\"checkbox\"\n                        aria-checked={isSelected}\n                        variant={isSelected ? 'solid' : 'outline'}\n                        mr={mr}\n                        isDisabled={selection.disabled}\n                        onClick={() => handleToggle(selection.value)}\n                    >\n                        {selection.label}\n                    </Button>\n                );\n            })}\n        </ButtonGroup>\n    );\n}\n\ninterface RmgBooleanButtonGroupProps {\n    defaultValue: boolean;\n    onChange?: (value: boolean) => void;\n}\n\nexport const RmgBooleanButtonGroup = (props: RmgBooleanButtonGroupProps) => {\n    const selections = [\n        {\n            label: 'Yes',\n            value: true,\n        },\n        {\n            label: 'No',\n            value: false,\n        },\n    ];\n\n    return <RmgButtonGroup selections={selections} {...props} />;\n};\n","import React, { Fragment } from 'react';\nimport { Button, Flex, Heading, VStack } from '@chakra-ui/react';\nimport { useRootDispatch, useRootSelector } from '../../../redux';\nimport InterchangeCard from './interchange-card';\nimport {\n    addInterchange,\n    removeInterchange,\n    updateInterchange,\n    updateStationOsiName,\n    updateStationPaidArea,\n    updateStationTickDirection,\n} from '../../../redux/param/action';\nimport { InterchangeInfo, MonoColour, RmgStyle, ShortDirection } from '../../../constants/constants';\nimport { MdAdd } from 'react-icons/md';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useTranslation } from 'react-i18next';\nimport RmgButtonGroup from '../../common/rmg-button-group';\n\nexport default function InterchangeSection() {\n    const { t } = useTranslation();\n    const dispatch = useRootDispatch();\n\n    const selectedStation = useRootSelector(state => state.app.selectedStation);\n    const { theme, style } = useRootSelector(state => state.param);\n    const { transfer } = useRootSelector(state => state.param.stn_list[selectedStation]);\n\n    const getOSINameFields = (setIndex: number): RmgFieldsField[] => [\n        {\n            type: 'input',\n            label: t('Station Chinese name'),\n            value: transfer.osi_names[setIndex]?.[0],\n            hidden: ![RmgStyle.MTR].includes(style),\n            onChange: value =>\n                dispatch(updateStationOsiName(selectedStation, setIndex, [value, transfer.osi_names[setIndex]?.[1]])),\n        },\n        {\n            type: 'input',\n            label: t('Station English name'),\n            value: transfer.osi_names[setIndex]?.[1],\n            hidden: ![RmgStyle.MTR].includes(style),\n            onChange: value =>\n                dispatch(updateStationOsiName(selectedStation, setIndex, [transfer.osi_names[setIndex]?.[0], value])),\n        },\n        {\n            type: 'switch',\n            label: t('Paid area'),\n            isChecked: transfer.paid_area,\n            onChange: checked => dispatch(updateStationPaidArea(selectedStation, checked)),\n            hidden: ![RmgStyle.MTR].includes(style) || setIndex !== 0,\n            oneLine: true,\n        },\n    ];\n\n    const handleAdd = (i: number) => (info: InterchangeInfo) => {\n        dispatch(addInterchange(selectedStation, i, info));\n    };\n\n    const handleDelete = (i: number) => (j: number) => {\n        dispatch(removeInterchange(selectedStation, i, j));\n    };\n\n    const handleUpdate = (i: number) => (j: number, info: InterchangeInfo) => {\n        dispatch(updateInterchange(selectedStation, i, j, info));\n    };\n\n    const handleAddInterchangeGroup = () => {\n        dispatch(\n            addInterchange(selectedStation, transfer.info.length, [theme[0], '', '#AAAAAA', MonoColour.white, '', ''])\n        );\n    };\n\n    return (\n        <VStack align=\"flex-start\" p={1}>\n            <Flex w=\"100%\">\n                <Heading as=\"h5\" size=\"sm\" mr=\"auto\">\n                    {t('StationSidePanel.interchange.title')}\n                </Heading>\n\n                {style === RmgStyle.MTR && (\n                    <RmgButtonGroup\n                        selections={[\n                            { label: t('Text on the left'), value: ShortDirection.left },\n                            { label: t('Text on the right'), value: ShortDirection.right },\n                        ]}\n                        defaultValue={transfer.tick_direc}\n                        onChange={value => dispatch(updateStationTickDirection(selectedStation, value))}\n                    />\n                )}\n            </Flex>\n\n            {transfer.info.map((infoList, i) => (\n                <Fragment key={i}>\n                    <Heading as=\"h6\" size=\"xs\">\n                        {i === 0\n                            ? t('StationSidePanel.interchange.within')\n                            : i === 1\n                            ? t('StationSidePanel.interchange.outStation')\n                            : t('StationSidePanel.interchange.outSystem')}\n                    </Heading>\n\n                    {i !== 0 && <RmgFields fields={getOSINameFields(i - 1)} />}\n\n                    <InterchangeCard\n                        interchangeList={infoList}\n                        onAdd={handleAdd(i)}\n                        onDelete={handleDelete(i)}\n                        onUpdate={handleUpdate(i)}\n                    />\n                </Fragment>\n            ))}\n\n            {transfer.info.length < 3 && (\n                <Button\n                    size=\"xs\"\n                    variant=\"ghost\"\n                    alignSelf=\"flex-end\"\n                    leftIcon={<MdAdd />}\n                    onClick={handleAddInterchangeGroup}\n                >\n                    {t('StationSidePanel.interchange.addGroup')}\n                </Button>\n            )}\n        </VStack>\n    );\n}\n","import { Box, Heading } from '@chakra-ui/react';\nimport React from 'react';\nimport RmgButtonGroup from '../../common/rmg-button-group';\nimport { useRootDispatch, useRootSelector } from '../../../redux';\nimport { Facilities, RmgStyle, Services } from '../../../constants/constants';\nimport {\n    updateStationFacility,\n    updateStationLoopPivot,\n    updateStationServices,\n    updateStationOneLine,\n    updateStationIntPadding,\n    updateStationIntPaddingToAll,\n} from '../../../redux/param/action';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useTranslation } from 'react-i18next';\n\nexport default function MoreSection() {\n    const { t } = useTranslation();\n    const dispatch = useRootDispatch();\n\n    const selectedStation = useRootSelector(state => state.app.selectedStation);\n    const { style, loop } = useRootSelector(state => state.param);\n    const { services, facility, loop_pivot, one_line, int_padding } = useRootSelector(\n        state => state.param.stn_list[selectedStation]\n    );\n\n    const serviceSelections = Object.values(Services).map(service => {\n        return {\n            label: t('StationSidePanel.more.' + service),\n            value: service,\n            disabled: service === Services.local && style !== RmgStyle.SHMetro,\n        };\n    });\n\n    const mtrFacilityOptions = {\n        [Facilities.none]: t('StationSidePanel.more.none'),\n        [Facilities.airport]: t('StationSidePanel.more.airport'),\n        [Facilities.hsr]: t('StationSidePanel.more.hsr'),\n        [Facilities.disney]: t('StationSidePanel.more.disney'),\n    };\n\n    const shmetroFacilityOptions = {\n        [Facilities.none]: t('StationSidePanel.more.none'),\n        [Facilities.airport]: t('StationSidePanel.more.airport'),\n        [Facilities.railway]: t('StationSidePanel.more.railway'),\n        [Facilities.disney]: t('StationSidePanel.more.disney'),\n    };\n\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'custom',\n            label: t('StationSidePanel.more.service'),\n            component: (\n                <RmgButtonGroup\n                    selections={serviceSelections}\n                    defaultValue={services}\n                    onChange={services => dispatch(updateStationServices(selectedStation, services))}\n                    multiSelect\n                />\n            ),\n            hidden: ![RmgStyle.GZMTR, RmgStyle.SHMetro].includes(style),\n        },\n        {\n            type: 'select',\n            label: t('StationSidePanel.more.facility'),\n            value: facility,\n            options: style === RmgStyle.MTR ? mtrFacilityOptions : shmetroFacilityOptions,\n            onChange: value => dispatch(updateStationFacility(selectedStation, value as Facilities)),\n            hidden: ![RmgStyle.MTR, RmgStyle.SHMetro].includes(style),\n        },\n        {\n            type: 'switch',\n            label: t('StationSidePanel.more.pivot'),\n            isChecked: loop_pivot,\n            onChange: checked => dispatch(updateStationLoopPivot(selectedStation, checked)),\n            hidden: ![RmgStyle.SHMetro].includes(style) || !loop,\n            minW: 'full',\n            oneLine: true,\n        },\n        {\n            type: 'switch',\n            label: t('StationSidePanel.more.oneLine'),\n            isChecked: one_line,\n            onChange: checked => dispatch(updateStationOneLine(selectedStation, checked)),\n            hidden: ![RmgStyle.SHMetro].includes(style),\n            minW: 'full',\n            oneLine: true,\n        },\n        {\n            type: 'input',\n            label: t('StationSidePanel.more.intPadding'),\n            value: int_padding.toString(),\n            validator: val => Number.isInteger(val),\n            onChange: val => dispatch(updateStationIntPadding(selectedStation, Number(val))),\n            hidden: ![RmgStyle.SHMetro].includes(style),\n        },\n        {\n            type: 'custom',\n            label: t('StationSidePanel.more.intPaddingApplyGlobal'),\n            component: (\n                <RmgButtonGroup\n                    selections={[{ label: t('StationSidePanel.more.apply'), value: '', disabled: false }]}\n                    defaultValue=\"\"\n                    onChange={_ => dispatch(updateStationIntPaddingToAll(selectedStation))}\n                />\n            ),\n            oneLine: true,\n            hidden: ![RmgStyle.SHMetro].includes(style),\n        },\n    ];\n\n    return (\n        <Box p={1}>\n            <Heading as=\"h5\" size=\"sm\">\n                {t('StationSidePanel.more.title')}\n            </Heading>\n\n            <RmgFields fields={fields} />\n        </Box>\n    );\n}\n","import { Box, Heading, Text } from '@chakra-ui/react';\nimport React from 'react';\nimport { BranchStyle, Direction } from '../../../constants/constants';\nimport { useRootDispatch, useRootSelector } from '../../../redux';\nimport {\n    flipStationBranchPosition,\n    updateStationBranchFirstStation,\n    updateStationBranchType,\n} from '../../../redux/param/action';\nimport { RmgCard, RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useTranslation } from 'react-i18next';\n\nexport default function BranchSection() {\n    const { t } = useTranslation();\n    const dispatch = useRootDispatch();\n\n    const selectedStation = useRootSelector(state => state.app.selectedStation);\n    const stationList = useRootSelector(state => state.param.stn_list);\n    const { parents, children, branch } = stationList[selectedStation];\n\n    const branchOptions = {\n        [BranchStyle.through]: t('StationSidePanel.branch.through'),\n        [BranchStyle.nonThrough]: t('StationSidePanel.branch.nonThrough'),\n    };\n\n    const getFirstStationOptions = (direction: Direction) => {\n        return (direction === Direction.left ? parents : children).reduce<Record<string, string>>(\n            (acc, cur) => ({ ...acc, [cur]: stationList[cur].name.join(' ') }),\n            {}\n        );\n    };\n\n    const positionOptions = {\n        upper: t('StationSidePanel.branch.upper'),\n        lower: t('StationSidePanel.branch.lower'),\n    };\n\n    const getFields = (direction: Direction): RmgFieldsField[] => {\n        if (branch[direction].length) {\n            return [\n                {\n                    type: 'select',\n                    label: t('StationSidePanel.branch.type'),\n                    options: branchOptions,\n                    value: branch[direction][0],\n                    onChange: value =>\n                        dispatch(updateStationBranchType(selectedStation, direction, value as BranchStyle)),\n                },\n                {\n                    type: 'select',\n                    label: t('StationSidePanel.branch.firstStation'),\n                    options: getFirstStationOptions(direction),\n                    value: branch[direction][1],\n                    onChange: value =>\n                        dispatch(updateStationBranchFirstStation(selectedStation, direction, value as string)),\n                },\n                {\n                    type: 'select',\n                    label: t('StationSidePanel.branch.position'),\n                    options: positionOptions,\n                    value:\n                        (direction === Direction.left ? parents : children).indexOf(branch[direction][1]!) === 0\n                            ? 'upper'\n                            : 'lower',\n                    onChange: () => dispatch(flipStationBranchPosition(selectedStation, direction)),\n                },\n            ];\n        } else {\n            return [];\n        }\n    };\n\n    return (\n        <Box p={1}>\n            <Heading as=\"h5\" size=\"sm\">\n                {t('Branches')}\n            </Heading>\n\n            <Heading as=\"h6\" size=\"xs\">\n                {t('Branch on the left')}\n            </Heading>\n\n            <RmgCard direction=\"column\">\n                {parents.length === 2 ? (\n                    <RmgFields fields={getFields(Direction.left)} />\n                ) : (\n                    <Text as=\"i\" flex={1} align=\"center\" fontSize=\"md\" colorScheme=\"gray\">\n                        {t('No branches found')}\n                    </Text>\n                )}\n            </RmgCard>\n\n            <Heading as=\"h6\" size=\"xs\">\n                {t('Branch on the right')}\n            </Heading>\n\n            <RmgCard direction=\"column\">\n                {children.length === 2 ? (\n                    <RmgFields fields={getFields(Direction.right)} />\n                ) : (\n                    <Text as=\"i\" flex={1} align=\"center\" fontSize=\"md\" colorScheme=\"gray\">\n                        {t('No branches found')}\n                    </Text>\n                )}\n            </RmgCard>\n        </Box>\n    );\n}\n","import { Divider } from '@chakra-ui/react';\nimport React from 'react';\nimport InfoSection from './info-section';\nimport InterchangeSection from './interchange-section';\nimport MoreSection from './more-section';\nimport BranchSection from './branch-section';\nimport { RmgSidePanelBody } from '@railmapgen/rmg-components';\n\nexport default function StationSidePanel() {\n    return (\n        <RmgSidePanelBody>\n            <InfoSection />\n\n            <Divider />\n\n            <InterchangeSection />\n\n            <Divider />\n\n            <BranchSection />\n\n            <Divider />\n\n            <MoreSection />\n        </RmgSidePanelBody>\n    );\n}\n","import React from 'react';\nimport { Box, Heading } from '@chakra-ui/react';\nimport { useTranslation } from 'react-i18next';\nimport { useDispatch } from 'react-redux';\nimport { useRootSelector } from '../../../redux';\nimport { canvasConfig, RmgStyle } from '../../../constants/constants';\nimport {\n    setBranchSpacingPct,\n    setDirectionIndicatorX,\n    setDirectionIndicatorY,\n    setPaddingPercentage,\n    setSvgHeight,\n    setSvgWidth,\n    setYPercentage,\n} from '../../../redux/param/action';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\n\nexport default function LayoutSection() {\n    const { t } = useTranslation();\n    const dispatch = useDispatch();\n\n    const {\n        style: rmgStyle,\n        svgWidth,\n        svg_height,\n        y_pc,\n        branchSpacingPct,\n        padding,\n        direction_gz_x,\n        direction_gz_y,\n        loop,\n    } = useRootSelector(state => state.param);\n\n    const fields: RmgFieldsField[] = [\n        ...canvasConfig[rmgStyle].map<RmgFieldsField>(canvas => ({\n            type: 'input',\n            label: t(`StyleSidePanel.layout.${canvas}Width`),\n            value: svgWidth[canvas].toString(),\n            onChange: val => dispatch(setSvgWidth(Number(val), canvas)),\n        })),\n        {\n            type: 'input',\n            label: t('StyleSidePanel.layout.canvasHeight'),\n            value: svg_height.toString(),\n            onChange: val => dispatch(setSvgHeight(Number(val))),\n        },\n        {\n            type: 'slider',\n            label: t('StyleSidePanel.layout.verticalPosition'),\n            value: y_pc,\n            min: 0,\n            max: 100,\n            onChange: val => dispatch(setYPercentage(val)),\n            hidden: ![RmgStyle.MTR, RmgStyle.GZMTR].includes(rmgStyle),\n        },\n        {\n            type: 'slider',\n            label: !loop ? t('Branch spacing') : t('StyleSidePanel.layout.branchSpacingLoop'),\n            value: branchSpacingPct,\n            min: 0,\n            max: loop ? 50 : 100,\n            onChange: val => dispatch(setBranchSpacingPct(val)),\n        },\n        {\n            type: 'slider',\n            label: t('StyleSidePanel.layout.padding'),\n            value: padding,\n            min: 0,\n            max: 50,\n            onChange: val => dispatch(setPaddingPercentage(val)),\n        },\n        {\n            type: 'slider',\n            label: t('StyleSidePanel.layout.directionGzX'),\n            value: direction_gz_x,\n            min: 0,\n            max: 100,\n            onChange: val => dispatch(setDirectionIndicatorX(val)),\n            hidden: ![RmgStyle.GZMTR].includes(rmgStyle),\n        },\n        {\n            type: 'slider',\n            label: t('StyleSidePanel.layout.directionGzY'),\n            value: direction_gz_y,\n            min: 0,\n            max: 100,\n            onChange: val => dispatch(setDirectionIndicatorY(val)),\n            hidden: ![RmgStyle.GZMTR].includes(rmgStyle),\n        },\n    ];\n\n    return (\n        <Box p={1}>\n            <Heading as=\"h5\" size=\"sm\">\n                {t('StyleSidePanel.layout.title')}\n            </Heading>\n\n            <RmgFields fields={fields} minW={130} />\n        </Box>\n    );\n}\n","import React, { useState } from 'react';\nimport { Box, Button, Heading, HStack } from '@chakra-ui/react';\nimport { useRootDispatch, useRootSelector } from '../../../redux';\nimport ThemeButton from '../theme-button';\nimport ColourModal from '../../modal/colour-modal/colour-modal';\nimport {\n    customiseDestinationName,\n    flipStationNames,\n    setDirection,\n    setLineName,\n    setLineNum,\n    setPanelType,\n    setPlatform,\n    setPsdNum,\n    setTheme,\n    staggerStationNames,\n    toggleLineNameBeforeDestination,\n} from '../../../redux/param/action';\nimport RmgButtonGroup from '../../common/rmg-button-group';\nimport { PanelTypeGZMTR, PanelTypeShmetro, RmgStyle, ShortDirection } from '../../../constants/constants';\nimport { MdSwapVert } from 'react-icons/md';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useTranslation } from 'react-i18next';\n\nexport default function DesignSection() {\n    const { t } = useTranslation();\n    const dispatch = useRootDispatch();\n\n    const {\n        style,\n        theme,\n        line_name: lineName,\n        line_num: lineNum,\n        direction,\n        platform_num: platformNum,\n        psd_num: psdNum,\n        namePosMTR,\n        customiseMTRDest,\n        info_panel_type,\n    } = useRootSelector(state => state.param);\n\n    const [isModalOpen, setIsModalOpen] = useState(false);\n\n    const directionSelections = [\n        {\n            label: t('StyleSidePanel.design.left'),\n            value: ShortDirection.left,\n        },\n        {\n            label: t('StyleSidePanel.design.right'),\n            value: ShortDirection.right,\n        },\n    ];\n\n    const panelTypeGZMTROptions = Object.values(PanelTypeGZMTR).reduce<Record<string, string>>(\n        (acc, cur) => ({\n            ...acc,\n            [cur]: t('StyleSidePanel.design.' + cur),\n        }),\n        {}\n    );\n\n    const panelTypeSHMetroOptions = Object.values(PanelTypeShmetro).reduce<Record<string, string>>(\n        (acc, cur) => ({\n            ...acc,\n            [cur]: t('StyleSidePanel.design.' + cur),\n        }),\n        {}\n    );\n\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'custom',\n            label: t('Colour'),\n            component: <ThemeButton theme={theme} onClick={() => setIsModalOpen(true)} />,\n            minW: '40px',\n        },\n        {\n            type: 'input',\n            label: t('StyleSidePanel.design.zhLineName'),\n            value: lineName[0],\n            onChange: value => dispatch(setLineName([value, lineName[1]])),\n            minW: 130,\n        },\n        {\n            type: 'input',\n            label: t('StyleSidePanel.design.enLineName'),\n            value: lineName[1],\n            onChange: value => dispatch(setLineName([lineName[0], value])),\n            minW: 130,\n        },\n        {\n            type: 'input',\n            label: t('StyleSidePanel.design.lineNum'),\n            value: lineNum,\n            onChange: value => dispatch(setLineNum(value)),\n            hidden: ![RmgStyle.GZMTR].includes(style),\n        },\n        {\n            type: 'input',\n            label: t('StyleSidePanel.design.platformNum'),\n            value: platformNum || '',\n            onChange: value => dispatch(setPlatform(value)),\n        },\n        {\n            type: 'input',\n            label: t('StyleSidePanel.design.psdNum'),\n            value: psdNum,\n            onChange: value => dispatch(setPsdNum(value)),\n            hidden: ![RmgStyle.GZMTR].includes(style),\n        },\n        {\n            type: 'select',\n            label: t('StyleSidePanel.design.panelType'),\n            value: info_panel_type,\n            options: style === RmgStyle.GZMTR ? panelTypeGZMTROptions : panelTypeSHMetroOptions,\n            onChange: value => dispatch(setPanelType(value as PanelTypeGZMTR | PanelTypeShmetro)),\n            hidden: ![RmgStyle.GZMTR, RmgStyle.SHMetro].includes(style),\n        },\n        {\n            type: 'custom',\n            label: t('StyleSidePanel.design.direction'),\n            component: (\n                <RmgButtonGroup\n                    selections={directionSelections}\n                    defaultValue={direction}\n                    onChange={nextDirection => dispatch(setDirection(nextDirection))}\n                />\n            ),\n            minW: 'full',\n            oneLine: true,\n        },\n    ];\n\n    const staggerNameSelections = [\n        {\n            label: t('StyleSidePanel.design.alternatively'),\n            value: true,\n        },\n        {\n            label: t('StyleSidePanel.design.onOneSide'),\n            value: false,\n        },\n    ];\n\n    const mtrSpecifiedFields: RmgFieldsField[] = [\n        {\n            type: 'custom',\n            label: t('StyleSidePanel.design.nameDisplay'),\n            component: (\n                <HStack>\n                    <RmgButtonGroup\n                        selections={staggerNameSelections}\n                        defaultValue={namePosMTR.isStagger}\n                        onChange={value => dispatch(staggerStationNames(value))}\n                    />\n                    <Button\n                        size=\"xs\"\n                        variant=\"ghost\"\n                        leftIcon={<MdSwapVert />}\n                        onClick={() => dispatch(flipStationNames())}\n                    >\n                        {t('StyleSidePanel.design.flip')}\n                    </Button>\n                </HStack>\n            ),\n            minW: 'full',\n            oneLine: true,\n            hidden: ![RmgStyle.MTR].includes(style),\n        },\n        {\n            type: 'switch',\n            label: t('StyleSidePanel.design.legacyDestination'),\n            isChecked: customiseMTRDest.isLegacy,\n            onChange: checked => dispatch(toggleLineNameBeforeDestination(checked)),\n            hidden: ![RmgStyle.MTR].includes(style),\n            minW: 'full',\n            oneLine: true,\n        },\n        {\n            type: 'switch',\n            label: t('StyleSidePanel.design.overrideTerminal'),\n            isChecked: customiseMTRDest.terminal !== false,\n            onChange: checked => dispatch(customiseDestinationName(checked ? ['', ''] : false)),\n            hidden: ![RmgStyle.MTR].includes(style),\n            minW: 'full',\n            oneLine: true,\n        },\n        {\n            type: 'input',\n            label: t('StyleSidePanel.design.terminalZhName'),\n            value: customiseMTRDest.terminal ? customiseMTRDest.terminal[0] : '',\n            placeholder: '機場及博覽館',\n            onChange: value =>\n                dispatch(\n                    customiseDestinationName([value, customiseMTRDest.terminal ? customiseMTRDest.terminal[1] : ''])\n                ),\n            hidden: ![RmgStyle.MTR].includes(style) || customiseMTRDest.terminal === false,\n        },\n        {\n            type: 'input',\n            label: t('StyleSidePanel.design.terminalEnName'),\n            value: customiseMTRDest.terminal ? customiseMTRDest.terminal[1] : '',\n            placeholder: 'Airport and AsiaWorld-Expo',\n            onChange: value =>\n                dispatch(\n                    customiseDestinationName([customiseMTRDest.terminal ? customiseMTRDest.terminal[0] : '', value])\n                ),\n            hidden: ![RmgStyle.MTR].includes(style) || customiseMTRDest.terminal === false,\n        },\n    ];\n\n    return (\n        <Box p={1}>\n            <Heading as=\"h5\" size=\"sm\">\n                {t('StyleSidePanel.design.title')}\n            </Heading>\n\n            <RmgFields fields={[...fields, ...mtrSpecifiedFields]} minW={130} />\n\n            <ColourModal\n                isOpen={isModalOpen}\n                onClose={() => setIsModalOpen(false)}\n                defaultTheme={theme}\n                onUpdate={nextTheme => dispatch(setTheme(nextTheme))}\n            />\n        </Box>\n    );\n}\n","import React from 'react';\nimport { Box, Heading } from '@chakra-ui/react';\nimport { useRootDispatch, useRootSelector } from '../../../redux';\nimport { setLoop, setLoopBank, setLoopBottomFactor, setLoopLeftAndRightFactor } from '../../../redux/param/action';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useTranslation } from 'react-i18next';\n\nexport default function LoopSection() {\n    const { t } = useTranslation();\n    const dispatch = useRootDispatch();\n\n    const { branches } = useRootSelector(state => state.helper);\n    const { loop, loop_info } = useRootSelector(state => state.param);\n    const { bank, left_and_right_factor, bottom_factor } = loop_info;\n\n    // loop line with 2 branches has no bottom_factor and a specialized left_and_right_factor_max\n    const arc: 'major' | 'minor' = 'minor';\n    const branch_stn_ids = branches\n        .flat()\n        .filter(\n            (\n                o => v =>\n                    (o[v] = (o[v] || 0) + 1) === 2\n            )({} as { [stn_id: string]: number })\n        ) // count each occurrence\n        .filter(stn_id => !['linestart', 'lineend'].includes(stn_id)); // find branch stations\n    const _ = Math.abs(branches[0].indexOf(branch_stn_ids[0]) - branches[0].indexOf(branch_stn_ids[1]));\n    const left_and_right_factor_max =\n        branches.length >= 2\n            ? // top length is fixed, change left_and_right_factor only\n              (arc === 'minor' ? Math.min : Math.max)(branches[0].length - 2 - _, _)\n            : Math.floor((branches[0].length - 2 - bottom_factor * 2) / 2);\n\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'switch',\n            label: t('StyleSidePanel.loop.isLoop'),\n            isChecked: loop,\n            onChange: checked => dispatch(setLoop(checked)),\n            minW: 'full',\n            oneLine: true,\n        },\n        {\n            type: 'switch',\n            label: t('StyleSidePanel.loop.isBank'),\n            isChecked: bank,\n            onChange: checked => dispatch(setLoopBank(checked)),\n            minW: 'full',\n            oneLine: true,\n            hidden: !loop,\n        },\n        {\n            type: 'slider',\n            label: t('StyleSidePanel.loop.leftRightFactor'),\n            value: left_and_right_factor,\n            min: 0,\n            max: left_and_right_factor_max,\n            onChange: val => dispatch(setLoopLeftAndRightFactor(Math.floor(val))),\n            hidden: !loop,\n        },\n        {\n            type: 'slider',\n            label: t('StyleSidePanel.loop.bottomFactor'),\n            value: bottom_factor,\n            min: 0,\n            max: Math.floor((branches[0].length - 2 - left_and_right_factor * 2) / 2),\n            onChange: val => dispatch(setLoopBottomFactor(Math.floor(val))),\n            hidden: !loop || (loop && branches.length > 2),\n        },\n    ];\n\n    return (\n        <Box p={1}>\n            <Heading as=\"h5\" size=\"sm\">\n                {t('StyleSidePanel.loop.title')}\n            </Heading>\n\n            <RmgFields fields={fields} />\n        </Box>\n    );\n}\n","import React from 'react';\nimport { HStack, IconButton } from '@chakra-ui/react';\nimport { Note } from '../../../constants/constants';\nimport { MdDelete } from 'react-icons/md';\nimport { RmgCard, RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useTranslation } from 'react-i18next';\n\ninterface GZMTRNoteCardProps {\n    note: Note;\n    onUpdate?: (value: Note) => void;\n    onDelete?: () => void;\n}\n\nexport default function GZMTRNoteCard(props: GZMTRNoteCardProps) {\n    const { note, onUpdate, onDelete } = props;\n    const { t } = useTranslation();\n\n    const fields1: RmgFieldsField[] = [\n        {\n            type: 'textarea',\n            label: t('StyleSidePanel.note.zhNote'),\n            value: note[0],\n            onChange: value => onUpdate?.([value, note[1], note[2], note[3], note[4]]),\n        },\n        {\n            type: 'textarea',\n            label: t('StyleSidePanel.note.enNote'),\n            value: note[1],\n            onChange: value => onUpdate?.([note[0], value, note[2], note[3], note[4]]),\n        },\n        {\n            type: 'switch',\n            label: t('StyleSidePanel.note.border'),\n            isChecked: note[4],\n            onChange: value => onUpdate?.([note[0], note[1], note[2], note[3], value]),\n            oneLine: true,\n        },\n    ];\n\n    const fields2: RmgFieldsField[] = [\n        {\n            type: 'slider',\n            label: t('StyleSidePanel.note.positionX'),\n            value: note[2],\n            min: 0,\n            max: 100,\n            onChange: value => onUpdate?.([note[0], note[1], value, note[3], note[4]]),\n        },\n        {\n            type: 'slider',\n            label: t('StyleSidePanel.note.positionY'),\n            value: note[3],\n            min: 0,\n            max: 100,\n            onChange: value => onUpdate?.([note[0], note[1], note[2], value, note[4]]),\n        },\n    ];\n\n    return (\n        <RmgCard direction=\"column\">\n            <RmgFields fields={fields1} minW=\"full\" />\n            <HStack spacing={0.5}>\n                <RmgFields fields={fields2} />\n\n                <IconButton\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    aria-label={t('StyleSidePanel.note.remove')}\n                    onClick={() => onDelete?.()}\n                    icon={<MdDelete />}\n                />\n            </HStack>\n        </RmgCard>\n    );\n}\n","import React from 'react';\nimport { Box, Button, Heading, VStack } from '@chakra-ui/react';\nimport GZMTRNoteCard from './gzmtr-note-card';\nimport { addNote, removeNote, updateNote } from '../../../redux/param/action';\nimport { MdAdd } from 'react-icons/md';\nimport { useRootDispatch, useRootSelector } from '../../../redux';\nimport { useTranslation } from 'react-i18next';\n\nexport default function GZMTRNoteSection() {\n    const { t } = useTranslation();\n    const dispatch = useRootDispatch();\n\n    const notesGZMTR = useRootSelector(state => state.param.notesGZMTR);\n\n    return (\n        <Box p={1}>\n            <Heading as=\"h5\" size=\"sm\">\n                {t('StyleSidePanel.note.title')}\n            </Heading>\n\n            <VStack spacing={0.5}>\n                {notesGZMTR.map((note, i) => (\n                    <GZMTRNoteCard\n                        key={i}\n                        note={note}\n                        onUpdate={value => dispatch(updateNote(i, value))}\n                        onDelete={() => dispatch(removeNote(i))}\n                    />\n                ))}\n\n                <Button\n                    size=\"xs\"\n                    variant=\"ghost\"\n                    leftIcon={<MdAdd />}\n                    alignSelf=\"flex-end\"\n                    onClick={() => dispatch(addNote())}\n                >\n                    {t('StyleSidePanel.note.add')}\n                </Button>\n            </VStack>\n        </Box>\n    );\n}\n","import { Divider } from '@chakra-ui/react';\nimport React from 'react';\nimport { useRootSelector } from '../../../redux';\nimport { RmgStyle } from '../../../constants/constants';\nimport LayoutSection from './layout-section';\nimport DesignSection from './design-section';\nimport LoopSection from './loop-section';\nimport { RmgSidePanelBody } from '@railmapgen/rmg-components';\nimport GZMTRNoteSection from './gzmtr-note-section';\n\nexport default function StyleSidePanel() {\n    const { style } = useRootSelector(state => state.param);\n\n    return (\n        <RmgSidePanelBody>\n            <LayoutSection />\n\n            <Divider />\n\n            <DesignSection />\n\n            {style === RmgStyle.GZMTR && (\n                <>\n                    <Divider />\n\n                    <GZMTRNoteSection />\n                </>\n            )}\n\n            {style === RmgStyle.SHMetro && (\n                <>\n                    <Divider />\n\n                    <LoopSection />\n                </>\n            )}\n        </RmgSidePanelBody>\n    );\n}\n","import { StationDict } from './constants/constants';\n\n/**\n * Vertical position (in shares) of station icon if using MTR style (for consistency of method `RMGLine.newStnPossibleLoc()`).\n */\nexport const getYShareMTR = (stnId: string, stnList: StationDict): -1 | 0 | 1 => {\n    if (\n        ['linestart', 'lineend'].includes(stnId) ||\n        stnList[stnId].parents.length > 1 ||\n        stnList[stnId].children.length > 1\n    ) {\n        return 0;\n    }\n    var stnPred = stnList[stnId].parents[0];\n    if (stnPred) {\n        // parent exist\n        if (stnList[stnPred].children.length === 1) {\n            // no sibling, then y same as parent\n            return getYShareMTR(stnPred, stnList);\n        } else {\n            // sibling exists, then y depends on its idx of being children\n            return stnList[stnPred].children.indexOf(stnId) === 0 ? 1 : -1;\n        }\n    } else {\n        // no parent, must be linestart\n        return 0;\n    }\n};\n","import React, { RefObject } from 'react';\nimport {\n    AlertDialog,\n    AlertDialogBody,\n    AlertDialogContent,\n    AlertDialogFooter,\n    AlertDialogHeader,\n    AlertDialogOverlay,\n    Button,\n} from '@chakra-ui/react';\nimport { useTranslation } from 'react-i18next';\n\ninterface RemoveConfirmModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    cancelRef: RefObject<HTMLButtonElement>;\n    onConfirm: () => void;\n}\n\nexport default function RemoveConfirmModal(props: RemoveConfirmModalProps) {\n    const { isOpen, onClose, cancelRef, onConfirm } = props;\n    const { t } = useTranslation();\n\n    return (\n        <AlertDialog isOpen={isOpen} leastDestructiveRef={cancelRef} onClose={onClose}>\n            <AlertDialogOverlay>\n                <AlertDialogContent>\n                    <AlertDialogHeader fontSize=\"lg\" fontWeight=\"bold\">\n                        {t('RemoveConfirmModal.title')}\n                    </AlertDialogHeader>\n\n                    <AlertDialogBody>Are you sure to remove station? You cannot undo this action.</AlertDialogBody>\n\n                    <AlertDialogFooter>\n                        <Button ref={cancelRef} onClick={onClose}>\n                            {t('RemoveConfirmModal.cancel')}\n                        </Button>\n                        <Button colorScheme=\"teal\" onClick={onConfirm} ml={3}>\n                            {t('RemoveConfirmModal.confirm')}\n                        </Button>\n                    </AlertDialogFooter>\n                </AlertDialogContent>\n            </AlertDialogOverlay>\n        </AlertDialog>\n    );\n}\n","import { Button, HStack } from '@chakra-ui/react';\nimport { RmgSidePanelFooter } from '@railmapgen/rmg-components';\nimport React, { useRef, useState } from 'react';\nimport { removeInvalidColineOnRemoveStation } from '../../../redux/param/coline-action';\nimport { checkStationCouldBeRemoved, removeStation } from '../../../redux/param/remove-station-action';\nimport { useRootDispatch, useRootSelector } from '../../../redux';\nimport { setGlobalAlert, setSelectedStation, setSidePanelMode } from '../../../redux/app/app-slice';\nimport RemoveConfirmModal from '../../modal/remove-confirm-modal';\nimport { setCurrentStation } from '../../../redux/param/action';\nimport { SidePanelMode } from '../../../constants/constants';\nimport { useTranslation } from 'react-i18next';\n\nexport default function StationSidePanelFooter() {\n    const { t } = useTranslation();\n    const dispatch = useRootDispatch();\n\n    const selectedStation = useRootSelector(state => state.app.selectedStation);\n\n    const [isRemoveModalOpen, setIsRemoveModalOpen] = useState(false);\n\n    const cancelRef = useRef<HTMLButtonElement>(null);\n\n    const handleDelete = () => {\n        if (dispatch(checkStationCouldBeRemoved(selectedStation))) {\n            // close side panel\n            dispatch(setSidePanelMode(SidePanelMode.CLOSE));\n\n            // reset selected station\n            dispatch(setSelectedStation('linestart'));\n\n            dispatch(removeInvalidColineOnRemoveStation(selectedStation));\n            dispatch(removeStation(selectedStation));\n            setIsRemoveModalOpen(false);\n        } else {\n            dispatch(setGlobalAlert({ status: 'error', message: t('StationSidePanel.footer.errorOnRemove') }));\n        }\n    };\n\n    return (\n        <RmgSidePanelFooter>\n            <HStack>\n                <Button size=\"sm\" variant=\"outline\" onClick={() => dispatch(setCurrentStation(selectedStation))}>\n                    {t('StationSidePanel.footer.current')}\n                </Button>\n                <Button size=\"sm\" variant=\"outline\" onClick={() => setIsRemoveModalOpen(true)}>\n                    {t('StationSidePanel.footer.remove')}\n                </Button>\n            </HStack>\n\n            <RemoveConfirmModal\n                isOpen={isRemoveModalOpen}\n                cancelRef={cancelRef}\n                onClose={() => setIsRemoveModalOpen(false)}\n                onConfirm={handleDelete}\n            />\n        </RmgSidePanelFooter>\n    );\n}\n","import { RootDispatch, RootState } from '../index';\nimport { getYShareMTR } from '../../methods';\nimport { StationDict } from '../../constants/constants';\nimport { setStationsBulk } from './action';\n\n/**\n * Return false when current algo can not handle this kind of station removal.\n * MUST BE CALLED AND CHECKED BEFORE removeStation!!!\n */\nexport const checkStationCouldBeRemoved = (stationId: string) => {\n    return (dispatch: RootDispatch, getState: () => RootState): boolean => {\n        const stationList = getState().param.stn_list;\n\n        const { parents, children } = stationList[stationId];\n\n        if (Object.keys(stationList).length === 4) {\n            console.log('removeStation():: failed as only 2 stations remaining');\n            return false;\n        } else if (parents.length === 2 && children.length === 2) {\n            // Todo: rewrite, join two branches rather than reject?\n            console.log('removeStation():: failed as branches on both sides cannot be combined');\n            return false;\n        }\n\n        // reject if station is the last one on main branch\n        const isNotLastMainBranchStn = Object.keys(stationList).some(\n            id => ![stationId, 'linestart', 'lineend'].includes(id) && getYShareMTR(id, stationList) === 0\n        );\n        if (!isNotLastMainBranchStn) {\n            console.log('removeStation():: failed as selected station is the only station without siblings');\n            return false;\n        }\n\n        return true;\n    };\n};\n\nexport const removeStation = (stationId: string) => {\n    // checkStationCouldBeRemoved BEFORE removeStation!!!\n    return (dispatch: RootDispatch, getState: () => RootState) => {\n        const stationList = getState().param.stn_list;\n        const { parents, children } = stationList[stationId];\n\n        let newStnList = JSON.parse(JSON.stringify(stationList)) as StationDict;\n\n        if (parents.length === 2 || children.length === 2) {\n            /**\n             * stn1 - stn2 - stn3\n             *         ^   \\\n             *               stn4\n             */\n            parents.forEach(parId => {\n                newStnList[parId].children = children;\n            });\n            children.forEach(childId => {\n                newStnList[childId].parents = parents;\n            });\n            if (parents.length === 1) {\n                newStnList[parents[0]].branch.right = newStnList[stationId].branch.right;\n            }\n            if (children.length === 1) {\n                newStnList[children[0]].branch.left = newStnList[stationId].branch.left;\n            }\n        } else if (stationList[parents[0]].children.length === 2 && stationList[children[0]].parents.length === 2) {\n            /**\n             * stn1 -     stn2    - stn3\n             *      \\      ^      /\n             *        stn4 - stn5\n             */\n            newStnList = {\n                ...stationList,\n                [parents[0]]: {\n                    ...stationList[parents[0]],\n                    children: stationList[parents[0]].children.filter(id => id !== stationId),\n                    branch: {\n                        ...stationList[parents[0]].branch,\n                        right: [],\n                    },\n                },\n                [children[0]]: {\n                    ...stationList[children[0]],\n                    parents: stationList[children[0]].parents.filter(id => id !== stationId),\n                    branch: {\n                        ...stationList[children[0]].branch,\n                        left: [],\n                    },\n                },\n            };\n        } else {\n            /**\n             * stn1 - stn2\n             *      \\\n             *        stn3 - stn4\n             *         ^\n             */\n\n            // parents have length 1\n            parents.forEach(parId => {\n                var idx = newStnList[parId].children.indexOf(stationId);\n                if (children.length) {\n                    newStnList[parId].children[idx] = children[0];\n                } else {\n                    // Right dest\n                    newStnList[parId].children.splice(idx, 1);\n                }\n\n                if (newStnList[parId].branch.right[1] === stationId) {\n                    newStnList[parId].branch.right[1] = children[0];\n                }\n            });\n\n            // children have length 1\n            children.forEach(childId => {\n                var idx = newStnList[childId].parents.indexOf(stationId);\n                if (parents.length) {\n                    newStnList[childId].parents[idx] = parents[0];\n                } else {\n                    // Left dest\n                    newStnList[childId].parents.splice(idx, 1);\n                }\n\n                if (newStnList[childId].branch.left[1] === stationId) {\n                    newStnList[childId].branch.left[1] = parents[0];\n                }\n            });\n        }\n\n        delete newStnList[stationId];\n        dispatch(setStationsBulk(newStnList));\n    };\n};\n","import { RmgCard, RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport React, { useState } from 'react';\nimport { ColineInfo, InterchangeInfo, Theme } from '../../../constants/constants';\nimport ThemeButton from '../theme-button';\nimport ColourModal from '../../modal/colour-modal/colour-modal';\nimport { HStack, IconButton } from '@chakra-ui/react';\nimport { MdDelete } from 'react-icons/md';\nimport { useTranslation } from 'react-i18next';\n\ninterface ColineCardProps {\n    colineInfo: ColineInfo;\n    routeOptions: Record<string, string>;\n    onUpdateRoute?: (route: string) => void;\n    onUpdateColourInfo?: (colourInfo: InterchangeInfo) => void;\n    onDelete?: (colourIndex: number) => void;\n}\n\nexport default function ColineCard(props: ColineCardProps) {\n    const { colineInfo, routeOptions, onUpdateRoute, onUpdateColourInfo, onDelete } = props;\n    const { t } = useTranslation();\n\n    const [isModalOpen, setIsModalOpen] = useState(false);\n\n    const fields1: RmgFieldsField[] = [\n        {\n            type: 'select',\n            label: 'Route',\n            value: [colineInfo.from, colineInfo.to].join(','),\n            options: routeOptions,\n            onChange: value => onUpdateRoute?.(value as string),\n        },\n    ];\n\n    const fields2: RmgFieldsField[] = [\n        {\n            type: 'custom',\n            label: t('Colour'),\n            component: (\n                <ThemeButton\n                    theme={[\n                        colineInfo.colors[0][0],\n                        colineInfo.colors[0][1],\n                        colineInfo.colors[0][2],\n                        colineInfo.colors[0][3],\n                    ]}\n                    onClick={() => setIsModalOpen(true)}\n                />\n            ),\n        },\n        {\n            type: 'input',\n            label: t('Chinese name'),\n            value: colineInfo.colors[0][4],\n            minW: 120,\n            onChange: value =>\n                onUpdateColourInfo?.([\n                    colineInfo.colors[0][0],\n                    colineInfo.colors[0][1],\n                    colineInfo.colors[0][2],\n                    colineInfo.colors[0][3],\n                    value,\n                    colineInfo.colors[0][5],\n                ]),\n        },\n        {\n            type: 'input',\n            label: t('English name'),\n            value: colineInfo.colors[0][5],\n            minW: 120,\n            onChange: value =>\n                onUpdateColourInfo?.([\n                    colineInfo.colors[0][0],\n                    colineInfo.colors[0][1],\n                    colineInfo.colors[0][2],\n                    colineInfo.colors[0][3],\n                    colineInfo.colors[0][4],\n                    value,\n                ]),\n        },\n    ];\n\n    return (\n        <RmgCard direction=\"column\">\n            <RmgFields fields={fields1} minW=\"full\" />\n            <HStack spacing={0.5}>\n                <RmgFields fields={fields2} />\n\n                <IconButton\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    aria-label=\"Delete colour for route\"\n                    onClick={() => onDelete?.(0)}\n                    icon={<MdDelete />}\n                />\n            </HStack>\n\n            <ColourModal\n                isOpen={isModalOpen}\n                onClose={() => setIsModalOpen(false)}\n                defaultTheme={colineInfo.colors[0].slice(0, 4) as Theme}\n                onUpdate={theme => onUpdateColourInfo?.([...theme, colineInfo.colors[0][4], colineInfo.colors[0][5]])}\n            />\n        </RmgCard>\n    );\n}\n","import React from 'react';\nimport { Button, Heading, VStack } from '@chakra-ui/react';\nimport { useRootDispatch, useRootSelector } from '../../../redux';\nimport {\n    addColine,\n    findAllColinesInBranch,\n    getPossibleCombinations,\n    removeColineColor,\n    updateColine,\n    updateColineColor,\n} from '../../../redux/param/coline-action';\nimport ColineCard from './coline-card';\nimport { MdAdd } from 'react-icons/md';\nimport { MonoColour } from '../../../constants/constants';\nimport { setGlobalAlert } from '../../../redux/app/app-slice';\nimport { useTranslation } from 'react-i18next';\n\nexport default function ColineSection() {\n    const { t } = useTranslation();\n    const dispatch = useRootDispatch();\n\n    const selectedBranch = useRootSelector(state => state.app.selectedBranch);\n    const { theme, stn_list: stationList } = useRootSelector(state => state.param);\n\n    const colineInfoList = dispatch(findAllColinesInBranch(selectedBranch));\n    const possibleCombinations = dispatch(getPossibleCombinations(selectedBranch));\n\n    const getStationPairDisplayName = (pair: [string, string]) => {\n        return pair.map(id => stationList[id].name.join(' - ')).join(' ~ ');\n    };\n\n    const routeOptions = possibleCombinations.reduce<Record<string, string>>(\n        (acc, cur) => ({\n            ...acc,\n            [cur.join(',')]: getStationPairDisplayName(cur),\n        }),\n        {}\n    );\n\n    const handleAddTrackSharing = () => {\n        console.log(\n            `ColineSection.handleAddTrackSharing():: Adding track sharing to branch ${selectedBranch} with default combination`,\n            possibleCombinations[0]\n        );\n        dispatch(\n            addColine(possibleCombinations[0][0], possibleCombinations[0][1], [\n                [theme[0], '', '#AAAAAA', MonoColour.white, '', ''],\n            ])\n        );\n    };\n\n    const handleUpdateRoute = (colineId: string) => (route: string) => {\n        const [from, to] = route.split(',');\n        console.log(`ColineSection.handleUpdateRoute():: Updating route, colineId=${colineId}, from=${from}, to=${to}`);\n\n        try {\n            dispatch(updateColine(colineId, from, to));\n        } catch {\n            dispatch(setGlobalAlert({ status: 'error', message: 'Unable to draw this share track.' }));\n        }\n    };\n\n    const handleDeleteColour = (colineId: string, colourIndex: number) => {\n        dispatch(removeColineColor(colineId, colourIndex));\n    };\n\n    return (\n        <VStack align=\"flex-start\" p={1}>\n            <Heading as=\"h5\" size=\"sm\">\n                {t('BranchSidePanel.coline.title')}\n            </Heading>\n\n            {Object.entries(colineInfoList).map(([id, colineInfo]) => (\n                <ColineCard\n                    key={id}\n                    colineInfo={colineInfo}\n                    routeOptions={routeOptions}\n                    onUpdateRoute={handleUpdateRoute(id)}\n                    onUpdateColourInfo={colourInfo => dispatch(updateColineColor(id, 0, colourInfo))}\n                    onDelete={colourIndex => handleDeleteColour(id, colourIndex)}\n                />\n            ))}\n\n            {(selectedBranch === 0 || Object.keys(colineInfoList).length === 0) && (\n                <Button\n                    size=\"xs\"\n                    variant=\"ghost\"\n                    alignSelf=\"flex-end\"\n                    leftIcon={<MdAdd />}\n                    onClick={handleAddTrackSharing}\n                >\n                    {t('BranchSidePanel.coline.add')}\n                </Button>\n            )}\n        </VStack>\n    );\n}\n","import React, { useEffect, useState } from 'react';\nimport {\n    Button,\n    Modal,\n    ModalBody,\n    ModalCloseButton,\n    ModalContent,\n    ModalFooter,\n    ModalHeader,\n    ModalOverlay,\n} from '@chakra-ui/react';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useTranslation } from 'react-i18next';\nimport { useRootDispatch, useRootSelector } from '../../redux';\nimport { RmgStyle } from '../../constants/constants';\nimport { isColineBranch } from '../../redux/param/coline-action';\nimport { autoNumbering } from '../../redux/param/action';\n\ninterface AutoNumModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nexport default function AutoNumModal(props: AutoNumModalProps) {\n    const { isOpen, onClose } = props;\n    const { t } = useTranslation();\n    const dispatch = useRootDispatch();\n\n    const selectedBranch = useRootSelector(state => state.app.selectedBranch);\n    const { style, stn_list: stationList } = useRootSelector(state => state.param);\n    const branches = useRootSelector(state => state.helper.branches);\n\n    const [where, setWhere] = useState(selectedBranch);\n    const [from, setFrom] = useState('1');\n    const [maxLength, setMaxLength] = useState('2');\n    const [sort, setSort] = useState<'asc' | 'desc'>('asc');\n\n    useEffect(() => {\n        setWhere(selectedBranch);\n    }, [selectedBranch]);\n\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'select',\n            label: t('AutoNumModal.where'),\n            value: where,\n            options: {\n                ...branches.reduce(\n                    (acc, cur, idx) => ({\n                        ...acc,\n                        [idx]:\n                            idx === 0\n                                ? t('AutoNumModal.main')\n                                : style !== RmgStyle.SHMetro || !isColineBranch(cur, stationList)\n                                ? t('AutoNumModal.branch') + ' ' + idx\n                                : t('AutoNumModal.external') + ' ' + idx,\n                    }),\n                    {}\n                ),\n            },\n            onChange: value => setWhere(value as number),\n        },\n        {\n            type: 'input',\n            label: t('AutoNumModal.from'),\n            value: from,\n            validator: value => !isNaN(Number(value)),\n            onChange: setFrom,\n            debouncedDelay: 0,\n        },\n        {\n            type: 'input',\n            label: t('AutoNumModal.maxLength'),\n            validator: value => !isNaN(Number(value)),\n            value: maxLength,\n            onChange: setMaxLength,\n            debouncedDelay: 0,\n        },\n        {\n            type: 'select',\n            label: t('AutoNumModal.sort'),\n            value: sort,\n            options: {\n                asc: t('AutoNumModal.asc'),\n                desc: t('AutoNumModal.desc'),\n            },\n            onChange: value => setSort(value as 'asc' | 'desc'),\n        },\n    ];\n\n    const handleSubmit = () => {\n        dispatch(autoNumbering(where, Number(from), Number(maxLength), sort));\n        onClose();\n    };\n\n    const isSubmitDisabled = !from || !maxLength || isNaN(Number(from)) || isNaN(Number(maxLength));\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose}>\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>{t('AutoNumModal.title')}</ModalHeader>\n                <ModalCloseButton />\n\n                <ModalBody>\n                    <RmgFields fields={fields} />\n                </ModalBody>\n\n                <ModalFooter>\n                    <Button colorScheme=\"teal\" isDisabled={isSubmitDisabled} onClick={handleSubmit}>\n                        {t('AutoNumModal.submit')}\n                    </Button>\n                </ModalFooter>\n            </ModalContent>\n        </Modal>\n    );\n}\n","import React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Box, Button, Flex, Heading } from '@chakra-ui/react';\nimport { MdCached, MdFilter1 } from 'react-icons/md';\nimport AutoNumModal from '../../modal/auto-num-modal';\nimport { useRootDispatch, useRootSelector } from '../../../redux';\nimport { RmgStyle } from '../../../constants/constants';\nimport { reverseStations } from '../../../redux/param/action';\n\nexport default function ActionSection() {\n    const { t } = useTranslation();\n    const dispatch = useRootDispatch();\n\n    const style = useRootSelector(state => state.param.style);\n\n    const [isAutoNumModalOpen, setIsAutoNumModalOpen] = useState(false);\n\n    return (\n        <Box p={1}>\n            <Heading as=\"h5\" size=\"sm\">\n                {t('BranchSidePanel.action.title')}\n            </Heading>\n\n            <Flex\n                wrap=\"wrap\"\n                sx={{\n                    p: 1,\n\n                    '&> *': {\n                        flexShrink: 0,\n                        flexBasis: '100%',\n\n                        '&:not(:first-child)': {\n                            marginTop: 2,\n                        },\n                    },\n                }}\n            >\n                {style === RmgStyle.GZMTR && (\n                    <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        leftIcon={<MdFilter1 />}\n                        alignSelf=\"flex-end\"\n                        onClick={() => setIsAutoNumModalOpen(true)}\n                    >\n                        {t('BranchSidePanel.action.autoNum')}\n                    </Button>\n                )}\n\n                <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    leftIcon={<MdCached />}\n                    alignSelf=\"flex-end\"\n                    onClick={() => dispatch(reverseStations(style === RmgStyle.SHMetro))}\n                >\n                    {style === RmgStyle.SHMetro\n                        ? t('BranchSidePanel.action.flip')\n                        : t('BranchSidePanel.action.reverse')}\n                </Button>\n            </Flex>\n\n            <AutoNumModal isOpen={isAutoNumModalOpen} onClose={() => setIsAutoNumModalOpen(false)} />\n        </Box>\n    );\n}\n","import { RmgSidePanelBody } from '@railmapgen/rmg-components';\nimport React from 'react';\nimport ColineSection from './coline-section';\nimport { Divider } from '@chakra-ui/react';\nimport ActionSection from './action-section';\nimport { useRootSelector } from '../../../redux';\nimport { RmgStyle } from '../../../constants/constants';\nimport { isColineBranch } from '../../../redux/param/coline-action';\n\nexport default function BranchSidePanel() {\n    const selectedBranch = useRootSelector(state => state.app.selectedBranch);\n    const { style, stn_list: stationList } = useRootSelector(state => state.param);\n    const branches = useRootSelector(state => state.helper.branches);\n\n    return (\n        <RmgSidePanelBody>\n            {style === RmgStyle.SHMetro &&\n                (selectedBranch === 0 || isColineBranch(branches[selectedBranch], stationList)) && (\n                    <>\n                        <ColineSection />\n                        <Divider />\n                    </>\n                )}\n\n            <ActionSection />\n        </RmgSidePanelBody>\n    );\n}\n","import React, { ReactNode } from 'react';\nimport { useRootSelector } from '../../redux';\nimport { setSidePanelMode } from '../../redux/app/app-slice';\nimport { useDispatch } from 'react-redux';\nimport { SidePanelMode } from '../../constants/constants';\nimport StationSidePanel from './station-side-panel/station-side-panel';\nimport StyleSidePanel from './style-side-panel/style-side-panel';\nimport { RmgMultiLineString, RmgSidePanel, RmgSidePanelHeader } from '@railmapgen/rmg-components';\nimport StationSidePanelFooter from './station-side-panel/station-side-panel-footer';\nimport BranchSidePanel from './branch-side-panel/branch-side-panel';\nimport { useTranslation } from 'react-i18next';\n\nconst SIDE_PANEL_WIDTH = 375;\n\nexport default function SidePanel() {\n    const { t } = useTranslation();\n    const dispatch = useDispatch();\n\n    const { sidePanelMode, selectedStation } = useRootSelector(state => state.app);\n    const name = useRootSelector(state => state.param.stn_list[selectedStation]?.name);\n\n    const mode: Record<SidePanelMode, { header: ReactNode; body?: ReactNode; footer?: ReactNode }> = {\n        STATION: {\n            header: <RmgMultiLineString text={name?.join(' - ') || ''} />,\n            body: <StationSidePanel />,\n            footer: <StationSidePanelFooter />,\n        },\n        STYLE: { header: t('StyleSidePanel.header'), body: <StyleSidePanel /> },\n        BRANCH: { header: t('BranchSidePanel.header'), body: <BranchSidePanel /> },\n        CLOSE: { header: 'Close' },\n    };\n\n    const handleClose = () => {\n        dispatch(setSidePanelMode(SidePanelMode.CLOSE));\n    };\n\n    return (\n        <RmgSidePanel isOpen={sidePanelMode !== SidePanelMode.CLOSE} width={SIDE_PANEL_WIDTH} header=\"Dummy header\">\n            <RmgSidePanelHeader onClose={handleClose}>{mode[sidePanelMode].header}</RmgSidePanelHeader>\n            {mode[sidePanelMode]?.body}\n            {mode[sidePanelMode]?.footer}\n        </RmgSidePanel>\n    );\n}\n","export const downloadAs = (filename: string, type: string, data: any) => {\n    const blob = new Blob([data], { type });\n    downloadBlobAs(filename, blob);\n};\n\nexport const downloadBlobAs = (filename: string, blob: Blob) => {\n    const url = window.URL.createObjectURL(blob);\n\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n\n    document.body.removeChild(a);\n    window.URL.revokeObjectURL(url);\n};\n\nexport const readFileAsText = (file: File) => {\n    return new Promise((resolve: (text: string) => void) => {\n        const reader = new FileReader();\n        reader.onloadend = () => resolve(reader.result as string);\n        reader.readAsText(file);\n    });\n};\n\nexport const isSafari = () => {\n    return navigator.userAgent.includes('Safari') && !navigator.userAgent.includes('Chrome');\n};\n","import { CanvasType, RmgStyle } from '../constants/constants';\nimport { isSafari } from './utils';\n\nexport const cloneSvgCanvas = async (\n    canvas: CanvasType,\n    rmgStyle: RmgStyle,\n    isTransparent?: boolean,\n    isShowBorder?: boolean,\n    scale?: number\n): Promise<SVGSVGElement> => {\n    let [, thisSVGHeight] = ['--rmg-svg-width', '--rmg-svg-height']\n        .map(\n            key =>\n                (document.querySelector(`svg#${canvas}`) as SVGSVGElement).style.getPropertyValue(key).match(/\\d+/g)![0]\n        )\n        .map(Number);\n\n    const elem = document.querySelector(`svg#${canvas}`)!.cloneNode(true) as SVGSVGElement;\n    // elem.setAttribute('width', (thisSVGWidth * scaleFactor).toString());\n    elem.setAttribute('height', ((thisSVGHeight * (scale || 100)) / 100).toString());\n    elem.style.setProperty('all', 'initial');\n\n    ['share', canvas]\n        .map(tag =>\n            [\n                ...(\n                    [...document.querySelectorAll('link')].filter(l => l.id === 'css_' + tag)[0]?.sheet as CSSStyleSheet\n                ).cssRules,\n            ]\n                .map(rule => rule.cssText)\n                .join(' ')\n        )\n        .forEach(txt => {\n            let s = document.createElement('style');\n            s.textContent = txt;\n            elem.prepend(s);\n        });\n\n    elem.querySelector('rect#canvas-border')?.setAttribute('stroke', isShowBorder ? 'black' : 'none');\n    elem.querySelector('rect#canvas-bg')?.setAttribute('fill', isTransparent ? 'none' : 'white');\n\n    if (rmgStyle === RmgStyle.MTR) {\n        try {\n            const uris = await getBase64FontFace(elem);\n            const s = document.createElement('style');\n            s.textContent = uris.join('\\n');\n            elem.prepend(s);\n        } catch (err) {\n            alert('Failed to fonts. Fonts in the exported PNG will be missing.');\n            console.error(err);\n        }\n    }\n\n    return elem;\n};\n\n/**\n * Convert a `Blob` into Base64 data URL.\n * @param blob\n */\nconst readBlobAsDataURL = (blob: Blob): Promise<string> => {\n    return new Promise((resolve: (value: string) => void) => {\n        const reader = new FileReader();\n        reader.onloadend = () => resolve(reader.result as string);\n        reader.readAsDataURL(blob);\n    });\n};\n\nconst matchCssRuleByFontFace = (rules: CSSFontFaceRule[], font: FontFace): CSSFontFaceRule | undefined => {\n    return rules.find(rule => {\n        const cssStyle = rule.style as any;\n        return (\n            cssStyle.fontFamily.replace(/^\"(.+)\"$/, '$1') === font.family && cssStyle.unicodeRange === font.unicodeRange\n        );\n    });\n};\n\nexport const getBase64FontFace = async (svgEl: SVGSVGElement): Promise<string[]> => {\n    const uniqueCharacters = Array.from(\n        new Set(\n            [\n                ...svgEl.querySelectorAll<SVGElement>('.rmg-name__zh'),\n                ...svgEl.querySelectorAll<SVGElement>('.rmg-name__en'),\n            ]\n                .map(el => el.innerHTML)\n                .join('')\n                .replace(/[\\s]/g, '')\n        )\n    ).join('');\n\n    const fontFaceList = await document.fonts.load('80px GenYoMin TW, Vegur', uniqueCharacters);\n    const cssRules = Array.from(\n        (document.querySelector<HTMLLinkElement>('link#css_share')!.sheet!.cssRules[0] as CSSImportRule).styleSheet\n            .cssRules\n    ) as CSSFontFaceRule[];\n    const distinctCssRules = fontFaceList.reduce<CSSFontFaceRule[]>((acc, cur) => {\n        const matchedRule = matchCssRuleByFontFace(cssRules, cur);\n        if (matchedRule) {\n            const existence = acc.find(rule => {\n                const ruleStyle = rule.style as any;\n                const matchedStyle = matchedRule.style as any;\n                return (\n                    ruleStyle.fontFamily === matchedStyle.fontFamily &&\n                    ruleStyle.unicodeRange === matchedStyle.unicodeRange\n                );\n            });\n            return existence ? acc : acc.concat(matchedRule);\n        } else {\n            return acc;\n        }\n    }, []);\n\n    return await Promise.all(\n        distinctCssRules.map(async cssRule => {\n            try {\n                const fontResp = await fetch(getAbsoluteUrl(cssRule));\n                const fontDataUri = await readBlobAsDataURL(await fontResp.blob());\n                return cssRule.cssText.replace(/src:[ \\w('\",\\-:/.)]+;/g, `src: url('${fontDataUri}'); `);\n            } catch (err) {\n                console.error(err);\n                return '';\n            }\n        })\n    );\n};\n\nexport const getAbsoluteUrl = (cssRule: CSSFontFaceRule) => {\n    const ruleStyleSrc = (cssRule.style as any).src;\n    return isSafari()\n        ? ruleStyleSrc.replace(/^url\\(\"([\\S]+)\"\\).*$/, '$1')\n        : process.env.PUBLIC_URL + '/styles/' + ruleStyleSrc.match(/^url\\(\"([\\S*]+)\"\\)/)?.[1];\n};\n\nexport const test = async (svgEl: SVGSVGElement, scale: number, isWait: boolean): Promise<Blob> => {\n    let svgW = svgEl.viewBox.baseVal.width;\n    let svgH = svgEl.viewBox.baseVal.height;\n\n    // svgEl.removeAttribute('height');\n\n    let canvas = document.querySelectorAll('canvas')[0];\n    canvas.width = Number(svgW) * window.devicePixelRatio * scale;\n    canvas.height = Number(svgH) * window.devicePixelRatio * scale;\n\n    svgEl.setAttribute('width', canvas.width.toString());\n    svgEl.setAttribute('height', canvas.height.toString());\n\n    let ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // bypass Chrome min font size (to be improved)\n\n    svgEl.querySelectorAll('.rmg-name__en.rmg-name__mtr--station').forEach(el => el.setAttribute('font-size', '11px'));\n\n    svgEl\n        .querySelectorAll('.rmg-name__en.rmg-name__gzmtr--next2-dest')\n        .forEach(el => el.setAttribute('font-size', '8.5px'));\n\n    // svgEl\n    //     .querySelectorAll('text:not([font-size]), tspan:not([font-size])')\n    //     .forEach((el) => el.setAttribute('font-size', window.getComputedStyle(el).fontSize));\n\n    svgEl.querySelectorAll('text, tspan').forEach(el => {\n        let elStyle = window.getComputedStyle(el);\n        el.setAttribute('font-family', elStyle.fontFamily);\n        el.setAttribute('fill', elStyle.fill);\n        el.setAttribute('dominant-baseline', elStyle.dominantBaseline);\n        el.setAttribute('text-anchor', elStyle.textAnchor || '');\n        // el.removeAttribute('class');\n    });\n\n    // https://stackoverflow.com/questions/46399223/async-await-in-image-loading/52851789\n    return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => {\n            setTimeout(\n                () => {\n                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n                    canvas.toBlob(blob => resolve(blob!), 'image/png');\n                },\n                isWait ? 2000 : 0\n            );\n        };\n        img.onerror = reject;\n        img.src = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svgEl.outerHTML)));\n    });\n};\n","import React, { useEffect, useState } from 'react';\nimport {\n    Button,\n    HStack,\n    Modal,\n    ModalBody,\n    ModalCloseButton,\n    ModalContent,\n    ModalFooter,\n    ModalHeader,\n    ModalOverlay,\n} from '@chakra-ui/react';\nimport { canvasConfig, CanvasType, RmgStyle } from '../../constants/constants';\nimport { useRootDispatch, useRootSelector } from '../../redux';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport JSZip from 'jszip';\nimport { setCurrentStation } from '../../redux/param/action';\nimport { cloneSvgCanvas, test } from '../../util/export-utils';\nimport { downloadAs, downloadBlobAs, isSafari } from '../../util/utils';\nimport { useTranslation } from 'react-i18next';\nimport { waitForMs } from '../../utils';\nimport { setLoadingProgress, stopLoading } from '../../redux/app/app-slice';\n\ninterface DownloadModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nexport default function DownloadModal(props: DownloadModalProps) {\n    const { isOpen, onClose } = props;\n    const { t } = useTranslation();\n\n    const dispatch = useRootDispatch();\n\n    const [canvasToDownload, setCanvasToDownload] = useState('');\n    const [isTransparent, setIsTransparent] = useState(false);\n    const [isShowBorder, setIsShowBorder] = useState(false);\n    const [scale, setScale] = useState(100);\n    const [format, setFormat] = useState('png');\n\n    const canvasToShow = useRootSelector(state => state.app.canvasToShow);\n    const {\n        style,\n        stn_list: stationList,\n        current_stn_idx: currentStationId,\n        line_name: lineName,\n    } = useRootSelector(state => state.param);\n\n    useEffect(() => {\n        // reset canvas to download if on-screen canvas changed\n        if (canvasToShow !== 'all' && canvasToDownload !== '' && canvasToShow !== canvasToDownload) {\n            setCanvasToDownload('');\n        }\n    }, [canvasToShow]);\n\n    const canvasOptions = canvasConfig[style].reduce<Record<string, string>>(\n        (acc, cur) => {\n            if (canvasToShow === 'all' || cur === canvasToShow) {\n                return { ...acc, [cur]: t('CanvasType.' + cur) };\n            } else {\n                return { ...acc };\n            }\n        },\n        { '': t('DownloadModal.pleaseSelect') }\n    );\n\n    const scaleOptions = [25, 33, 50, 67, 75, 80, 90, 100, 110, 125, 150, 175, 200, 250, 300, 400, 500].reduce<\n        Record<number, string>\n    >(\n        (acc, cur) => ({\n            ...acc,\n            [cur]: `${cur}%`,\n        }),\n        {}\n    );\n\n    const formatOptions = {\n        png: t('DownloadModal.png'),\n        svg: t('DownloadModal.svg'),\n    };\n\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'select',\n            label: t('DownloadModal.canvas'),\n            value: canvasToDownload,\n            options: canvasOptions,\n            disabledOptions: [''],\n            onChange: value => setCanvasToDownload(value as CanvasType),\n            minW: 'full',\n        },\n        {\n            type: 'switch',\n            label: t('DownloadModal.transparent'),\n            isChecked: isTransparent,\n            onChange: setIsTransparent,\n            oneLine: true,\n            minW: 'full',\n        },\n        {\n            type: 'switch',\n            label: t('DownloadModal.showBorder'),\n            isChecked: isShowBorder,\n            onChange: setIsShowBorder,\n            oneLine: true,\n            minW: 'full',\n        },\n        {\n            type: 'select',\n            label: t('DownloadModal.scale'),\n            value: scale,\n            options: scaleOptions,\n            onChange: value => setScale(value as number),\n        },\n        {\n            type: 'select',\n            label: t('DownloadModal.format'),\n            value: format,\n            options: formatOptions,\n            onChange: value => setFormat(value as string),\n        },\n    ];\n\n    const handleDownload = async (option: 'current' | 'all') => {\n        dispatch(setLoadingProgress(0));\n        const stationIdListToDownload =\n            option === 'current'\n                ? [currentStationId]\n                : Object.keys(stationList).filter(id => !['linestart', 'lineend'].includes(id));\n\n        const zip = new JSZip();\n\n        for (let index in stationIdListToDownload) {\n            dispatch(setLoadingProgress(((Number(index) + 1) / stationIdListToDownload.length) * 100));\n\n            const stnId = stationIdListToDownload[index];\n            // wait for svg elements updated for station A before we dispatch the current station to B.\n            dispatch(setCurrentStation(stnId));\n            await waitForMs(500);\n\n            const elem = await cloneSvgCanvas(\n                canvasToDownload as CanvasType,\n                style,\n                isTransparent,\n                isShowBorder,\n                scale\n            );\n\n            // append svg to the document so the bbox will be loaded correctly\n            // (but not for gzmtr and have no idea why)\n            document.body.appendChild(elem);\n\n            const filename = `rmg.${stnId}.${stationList[stnId].name[0]}.${stationList[stnId].name[1]}`.replaceAll(\n                ' ',\n                '_'\n            );\n            if (format === 'png') {\n                const isWait = isSafari() && index === '0';\n                const blob = await test(elem, scale / 100, isWait);\n\n                if (stationIdListToDownload.length > 1) {\n                    // batch download and split base64 for this\n                    // https://stackoverflow.com/questions/31305485/export-resized-image-in-canvas-to-new-jszip-package\n                    zip.file(`${filename}.png`, blob);\n                } else {\n                    downloadBlobAs(`${filename}.png`, blob);\n                }\n            } else if (format === 'svg') {\n                elem.removeAttribute('height');\n                const data = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(elem.outerHTML)));\n\n                if (stationIdListToDownload.length > 1) {\n                    zip.file(`${filename}.svg`, data.split('base64,')[1], { base64: true });\n                } else {\n                    downloadAs(filename + '.svg', 'image/svg+xml', elem.outerHTML);\n                }\n            }\n\n            // don't forget to release it after use\n            document.body.removeChild(elem);\n        }\n\n        // generate the zip for batch download\n        if (stationIdListToDownload.length > 1) {\n            const zipData = await zip.generateAsync({ type: 'blob' });\n            const filename = `rmg.${lineName[0]}.${lineName[1]}.zip`.replaceAll(' ', '_');\n            downloadBlobAs(filename, zipData);\n        }\n\n        // revert to original station\n        dispatch(setCurrentStation(currentStationId));\n        dispatch(stopLoading());\n        onClose();\n    };\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose}>\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>{t('DownloadModal.title')}</ModalHeader>\n                <ModalCloseButton />\n\n                <ModalBody>\n                    <RmgFields fields={fields} />\n                </ModalBody>\n\n                <ModalFooter>\n                    <HStack>\n                        <Button\n                            colorScheme=\"teal\"\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => handleDownload('current')}\n                            disabled={!canvasToDownload}\n                        >\n                            {t('DownloadModal.downloadOne')}\n                        </Button>\n                        {style !== RmgStyle.GZMTR && (\n                            <Button\n                                colorScheme=\"teal\"\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() => handleDownload('all')}\n                                disabled={!canvasToDownload}\n                            >\n                                {t('DownloadModal.downloadAll')}\n                            </Button>\n                        )}\n                    </HStack>\n                </ModalFooter>\n            </ModalContent>\n        </Modal>\n    );\n}\n","import React, { useState } from 'react';\nimport { Button, Menu, MenuButton, MenuList, MenuItem } from '@chakra-ui/react';\nimport { MdExpandMore } from 'react-icons/md';\nimport { downloadAs } from '../../util/utils';\nimport { useRootSelector } from '../../redux';\nimport { useTranslation } from 'react-i18next';\nimport DownloadModal from '../modal/download-modal';\n\nexport default function DownloadActions() {\n    const { t } = useTranslation();\n\n    const [isDownloadModalOpen, setIsDownloadModalOpen] = useState(false);\n\n    const param = useRootSelector(state => state.param);\n\n    const handleDownloadJson = () => {\n        downloadAs(`RMG_${new Date().valueOf()}.json`, 'application/json', JSON.stringify(param));\n    };\n\n    return (\n        <Menu>\n            <MenuButton as={Button} variant=\"ghost\" size=\"sm\" rightIcon={<MdExpandMore />}>\n                {t('DownloadActions.downloads')}\n            </MenuButton>\n            <MenuList>\n                <MenuItem onClick={handleDownloadJson}>{t('DownloadActions.configFile')}</MenuItem>\n                <MenuItem onClick={() => setIsDownloadModalOpen(true)}>{t('DownloadActions.images')}</MenuItem>\n            </MenuList>\n\n            <DownloadModal isOpen={isDownloadModalOpen} onClose={() => setIsDownloadModalOpen(false)} />\n        </Menu>\n    );\n}\n","import React, { RefObject } from 'react';\nimport {\n    AlertDialog,\n    AlertDialogBody,\n    AlertDialogContent,\n    AlertDialogFooter,\n    AlertDialogHeader,\n    AlertDialogOverlay,\n    Button,\n} from '@chakra-ui/react';\nimport { MonoColour, RMGParam } from '../../constants/constants';\nimport { RmgLineBadge } from '@railmapgen/rmg-components';\nimport { useTranslation } from 'react-i18next';\n\ninterface UploadConfirmModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    cancelRef: RefObject<HTMLButtonElement>;\n    uploadedParam?: RMGParam;\n    onOpenParam: (param: Record<string, any>) => void;\n}\n\nexport default function UploadConfirmModal(props: UploadConfirmModalProps) {\n    const { isOpen, onClose, cancelRef, uploadedParam, onOpenParam } = props;\n    const { t } = useTranslation();\n\n    const handleConfirm = () => {\n        if (uploadedParam) {\n            onOpenParam(uploadedParam);\n        }\n        onClose();\n    };\n\n    return (\n        <AlertDialog isOpen={isOpen} leastDestructiveRef={cancelRef} onClose={onClose}>\n            <AlertDialogOverlay>\n                <AlertDialogContent>\n                    <AlertDialogHeader fontSize=\"lg\" fontWeight=\"bold\">\n                        {t('UploadConfirmModal.title')}\n                    </AlertDialogHeader>\n\n                    <AlertDialogBody>\n                        {t('UploadConfirmModal.message1')}\n                        <RmgLineBadge\n                            name={uploadedParam?.line_name?.join(' ') || ''}\n                            fg={uploadedParam?.theme?.[3] || MonoColour.white}\n                            bg={uploadedParam?.theme?.[2] || '#AAAAAA'}\n                        />\n                        {t('UploadConfirmModal.message2') +\n                            (uploadedParam ? Object.keys(uploadedParam.stn_list).length - 2 : 0) +\n                            t('UploadConfirmModal.message3')}\n                    </AlertDialogBody>\n\n                    <AlertDialogFooter>\n                        <Button ref={cancelRef} onClick={onClose}>\n                            {t('UploadConfirmModal.cancel')}\n                        </Button>\n                        <Button colorScheme=\"teal\" onClick={handleConfirm} ml={3}>\n                            {t('UploadConfirmModal.confirm')}\n                        </Button>\n                    </AlertDialogFooter>\n                </AlertDialogContent>\n            </AlertDialogOverlay>\n        </AlertDialog>\n    );\n}\n","import React from 'react';\nimport {\n    Button,\n    Flex,\n    Modal,\n    ModalBody,\n    ModalCloseButton,\n    ModalContent,\n    ModalHeader,\n    ModalOverlay,\n    Tab,\n    TabList,\n    TabPanel,\n    TabPanels,\n    Tabs,\n} from '@chakra-ui/react';\nimport { useTranslation } from 'react-i18next';\nimport { translateText } from '../../i18n/config';\nimport { useRootDispatch } from '../../redux';\nimport { companyConfig, templateList } from '@railmapgen/rmg-templates-resources';\nimport { startLoading } from '../../redux/app/app-slice';\n\ninterface TemplateModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onOpenParam: (param: Record<string, any>) => void;\n}\n\nexport default function TemplateModal(props: TemplateModalProps) {\n    const { isOpen, onClose, onOpenParam } = props;\n\n    const { t } = useTranslation();\n    const dispatch = useRootDispatch();\n\n    const handleSelect = async (company: string, filename: string) => {\n        dispatch(startLoading());\n        const module = await import(\n            /* webpackChunkName: \"templates\" */ `@railmapgen/rmg-templates-resources/templates/${company}/${filename}.json`\n        );\n        onOpenParam(module.default);\n    };\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose}>\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>{t('TemplateModal.title')}</ModalHeader>\n                <ModalCloseButton />\n\n                <ModalBody>\n                    <Tabs isLazy size=\"sm\" orientation=\"vertical\">\n                        <TabList maxW={150}>\n                            {companyConfig.map(company => (\n                                <Tab key={company.id}>{translateText(company.name)}</Tab>\n                            ))}\n                        </TabList>\n\n                        <TabPanels maxW={250}>\n                            {Object.entries(templateList)\n                                .sort(\n                                    (a, b) =>\n                                        companyConfig.findIndex(c => c.id === a[0]) -\n                                        companyConfig.findIndex(c => c.id === b[0])\n                                )\n                                .map(([company, templates]) => (\n                                    <TabPanel key={company} as={Flex} flexDirection=\"column\" py={0} px={1}>\n                                        {templates.map(template => (\n                                            <Button\n                                                key={template.filename}\n                                                variant=\"ghost\"\n                                                size=\"sm\"\n                                                justifyContent=\"flex-start\"\n                                                overflow=\"hidden\"\n                                                onClick={() => handleSelect(company, template.filename)}\n                                            >\n                                                {translateText(template.name)}\n                                            </Button>\n                                        ))}\n                                    </TabPanel>\n                                ))}\n                        </TabPanels>\n                    </Tabs>\n                </ModalBody>\n            </ModalContent>\n        </Modal>\n    );\n}\n","import React, { ChangeEvent, useRef, useState } from 'react';\nimport { Button, Menu, MenuButton, MenuItem, MenuList } from '@chakra-ui/react';\nimport { MdExpandMore, MdInsertDriveFile, MdNoteAdd, MdUpload } from 'react-icons/md';\nimport { useTranslation } from 'react-i18next';\nimport { updateParam } from '../../utils';\nimport { readFileAsText } from '../../util/utils';\nimport UploadConfirmModal from '../modal/upload-confirm-modal';\nimport { setGlobalAlert } from '../../redux/app/app-slice';\nimport { LanguageCode, RMGParam } from '../../constants/constants';\nimport TemplateModal from '../modal/template-modal';\nimport { openFromNewParam } from '../../redux/param/open-new-action';\nimport { initParam } from '../../redux/param/util';\nimport { useRootDispatch, useRootSelector } from '../../redux';\n\nexport default function OpenActions() {\n    const { t, i18n } = useTranslation();\n    const dispatch = useRootDispatch();\n\n    const style = useRootSelector(state => state.param.style);\n\n    const [isUploadModalOpen, setIsUploadModalOpen] = useState(false);\n    const [isTemplateModalOpen, setIsTemplateModalOpen] = useState(false);\n    const [uploadedParam, setUploadedParam] = useState<RMGParam | undefined>(undefined);\n\n    const uploadModalCloseRef = useRef<HTMLButtonElement | null>(null);\n    const fileInputRef = useRef<HTMLInputElement | null>(null);\n\n    const handleUpload = async (event: ChangeEvent<HTMLInputElement>) => {\n        const file = event.target.files?.[0];\n        console.log('OpenActions.handleUpload():: received file', file);\n\n        if (file?.type !== 'application/json') {\n            dispatch(setGlobalAlert({ status: 'error', message: t('OpenActions.invalidType') }));\n        } else {\n            try {\n                const paramStr = await readFileAsText(file);\n                const updatedParam = updateParam(JSON.parse(paramStr));\n                setUploadedParam(updatedParam as RMGParam);\n                setIsUploadModalOpen(true);\n            } catch (err) {\n                dispatch(setGlobalAlert({ status: 'error', message: t('OpenActions.unknownError') }));\n                console.error(\n                    'OpenActions.handleUpload():: Unknown error occurred while parsing the uploaded file',\n                    err\n                );\n            }\n        }\n\n        // clear field for next upload\n        event.target.value = '';\n    };\n\n    const handleOpenParam = (param: Record<string, any>) => {\n        dispatch(openFromNewParam(param));\n    };\n\n    return (\n        <Menu>\n            <MenuButton as={Button} variant=\"ghost\" size=\"sm\" rightIcon={<MdExpandMore />}>\n                {t('OpenActions.openFrom')}\n            </MenuButton>\n            <MenuList>\n                <MenuItem\n                    icon={<MdNoteAdd />}\n                    onClick={() => handleOpenParam(initParam(style, i18n.language as LanguageCode))}\n                >\n                    {t('Empty template')}\n                </MenuItem>\n\n                <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    accept=\".json\"\n                    hidden={true}\n                    onChange={handleUpload}\n                    data-testid=\"file-upload\"\n                />\n                <MenuItem icon={<MdUpload />} onClick={() => fileInputRef?.current?.click()}>\n                    {t('OpenActions.upload')}\n                </MenuItem>\n\n                <MenuItem icon={<MdInsertDriveFile />} onClick={() => setIsTemplateModalOpen(true)}>\n                    {t('OpenActions.templates')}\n                </MenuItem>\n            </MenuList>\n\n            <UploadConfirmModal\n                isOpen={isUploadModalOpen}\n                onClose={() => setIsUploadModalOpen(false)}\n                cancelRef={uploadModalCloseRef}\n                uploadedParam={uploadedParam}\n                onOpenParam={handleOpenParam}\n            />\n\n            <TemplateModal\n                isOpen={isTemplateModalOpen}\n                onClose={() => setIsTemplateModalOpen(false)}\n                onOpenParam={handleOpenParam}\n            />\n        </Menu>\n    );\n}\n","import { RootDispatch, RootState } from '../index';\nimport { updateParam } from '../../utils';\nimport { AllCanvas, canvasConfig, RMGParam, SidePanelMode } from '../../constants/constants';\nimport { selectCanvas, setSelectedStation, setSidePanelMode, stopLoading } from '../app/app-slice';\nimport { reRenderApp } from '../../index';\n\nexport const openFromNewParam = (param: Record<string, any>) => {\n    return async (dispatch: RootDispatch, getState: () => RootState) => {\n        const updatedParam = updateParam(param) as RMGParam;\n        await window.rmgStorage.writeFile('rmgParam', JSON.stringify(updatedParam));\n\n        // close side panel, reset selection\n        dispatch(setSidePanelMode(SidePanelMode.CLOSE));\n        dispatch(setSelectedStation('linestart'));\n\n        // reset to AllCanvas if the current canvas is not supported in the new style\n        const canvasToShow = getState().app.canvasToShow;\n        const canvas = canvasConfig[updatedParam.style].some(c => c === canvasToShow) ? canvasToShow : AllCanvas;\n        await dispatch(selectCanvas(canvas));\n        reRenderApp(updatedParam);\n        dispatch(stopLoading());\n    };\n};\n","import React from 'react';\nimport { HStack, Button } from '@chakra-ui/react';\nimport DownloadActions from './download-actions';\nimport { MdPalette } from 'react-icons/md';\nimport { useDispatch } from 'react-redux';\nimport { SidePanelMode } from '../../constants/constants';\nimport { setSidePanelMode } from '../../redux/app/app-slice';\nimport { useTranslation } from 'react-i18next';\nimport OpenActions from './open-actions';\n\nexport default function HeaderActions() {\n    const { t } = useTranslation();\n    const dispatch = useDispatch();\n\n    return (\n        <HStack ml=\"auto\">\n            <DownloadActions />\n\n            <OpenActions />\n\n            <Button\n                variant=\"solid\"\n                size=\"sm\"\n                colorScheme=\"teal\"\n                leftIcon={<MdPalette />}\n                onClick={() => dispatch(setSidePanelMode(SidePanelMode.STYLE))}\n            >\n                {t('HeaderActions.editStyle')}\n            </Button>\n        </HStack>\n    );\n}\n","import React from 'react';\nimport HeaderActions from './header-actions';\nimport RmgButtonGroup from '../common/rmg-button-group';\nimport { selectCanvas, zoomToScale } from '../../redux/app/app-slice';\nimport { AllCanvas, canvasConfig, CanvasType } from '../../constants/constants';\nimport { useTranslation } from 'react-i18next';\nimport { useRootDispatch, useRootSelector } from '../../redux';\nimport { RmgFields, RmgFieldsField, RmgPageHeader } from '@railmapgen/rmg-components';\nimport { MdZoomIn, MdZoomOut } from 'react-icons/md';\n\nexport default function PageHeader() {\n    const { t } = useTranslation();\n    const dispatch = useRootDispatch();\n\n    const { canvasToShow, canvasScale } = useRootSelector(state => state.app);\n    const style = useRootSelector(state => state.param.style);\n\n    const canvasSelections = [AllCanvas, ...canvasConfig[style]].map(canvas => ({\n        label: t('CanvasType.' + canvas),\n        value: canvas,\n    }));\n\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'custom',\n            label: t('Canvas to show'),\n            component: (\n                <RmgButtonGroup\n                    selections={canvasSelections}\n                    defaultValue={canvasToShow}\n                    onChange={canvas => dispatch(selectCanvas(canvas as CanvasType | typeof AllCanvas))}\n                />\n            ),\n        },\n        {\n            type: 'slider',\n            label: t('Canvas scale'),\n            value: canvasScale,\n            min: 0.1,\n            max: 2,\n            step: 0.1,\n            onChange: value => dispatch(zoomToScale(value)),\n            leftIcon: <MdZoomOut />,\n            rightIcon: <MdZoomIn />,\n            minW: 160,\n        },\n    ];\n\n    return (\n        <RmgPageHeader>\n            <RmgFields fields={fields} />\n\n            <HeaderActions />\n        </RmgPageHeader>\n    );\n}\n","import packageJson from '../../package.json';\n\nexport enum Environments {\n    DEV = 'DEV',\n    UAT = 'UAT',\n    PRD = 'PRD',\n}\n\nexport const getEnvironment = () => {\n    if (window.location.hostname === 'localhost') {\n        return Environments.DEV;\n    } else if (window.location.hostname.includes('uat')) {\n        return Environments.UAT;\n    } else {\n        return Environments.PRD;\n    }\n};\n\nexport const getVersion = () => {\n    return packageJson.version;\n};\n","import React from 'react';\nimport {\n    Avatar,\n    Button,\n    Flex,\n    Heading,\n    Icon,\n    Link,\n    ListItem,\n    Modal,\n    ModalBody,\n    ModalCloseButton,\n    ModalContent,\n    ModalFooter,\n    ModalHeader,\n    ModalOverlay,\n    OrderedList,\n    Tag,\n    TagLabel,\n    Text,\n    VStack,\n} from '@chakra-ui/react';\nimport { useTranslation } from 'react-i18next';\nimport { MdOpenInNew } from 'react-icons/md';\n\nconst CONTRIBUTORS_ADMINS = ['52PD', 'linchen1965'];\nconst CONTRIBUTORS_LIST = [\n    'jealousyge',\n    'Jay20081229',\n    'clearng-kly',\n    'Dingdong2334',\n    'C1P918R',\n    'AnDanJuneUnderline',\n    'GrassRabbit1410',\n    'xiany114514',\n    'Andy1782010',\n    'Thomastzc',\n    'Tianxiu11111',\n];\n\ninterface HelpModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nexport default function HelpModal(props: HelpModalProps) {\n    const { isOpen, onClose } = props;\n    const { t } = useTranslation();\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose} size=\"xl\" scrollBehavior=\"inside\">\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>{t('Help and support')}</ModalHeader>\n                <ModalCloseButton />\n\n                <ModalBody>\n                    <Heading as=\"h5\" size=\"sm\" mb={2}>\n                        {t('Terms and conditions')}\n                    </Heading>\n\n                    <OrderedList>\n                        <ListItem>\n                            The layout of the elements on the signage or rail map, is designed by{' '}\n                            <Link color=\"teal.500\" href=\"https://www.gzmtr.com/\" isExternal={true}>\n                                Guangzhou Metro Group <Icon as={MdOpenInNew} />\n                            </Link>\n                            {', '}\n                            <Link color=\"teal.500\" href=\"https://www.mtr.com.hk/\" isExternal={true}>\n                                MTR Corporation <Icon as={MdOpenInNew} />\n                            </Link>\n                            {' or '}\n                            <Link color=\"teal.500\" href=\"https://www.shmetro.com/\" isExternal={true}>\n                                Shanghai Shentong Metro Group <Icon as={MdOpenInNew} />\n                            </Link>\n                            , depending on your selection. You shall grant appropriate permit or license from the\n                            relevant company above before using the generated images for commercial purposes, if it is\n                            required to do so.\n                            <br />\n                            標誌版或路線圖之元素之佈局，基於你所選擇之風格，為\n                            <Link color=\"teal.500\" href=\"https://www.gzmtr.com/\" isExternal={true}>\n                                廣州地鐵集團公司 <Icon as={MdOpenInNew} />\n                            </Link>\n                            ，\n                            <Link color=\"teal.500\" href=\"https://www.mtr.com.hk/\" isExternal={true}>\n                                港鐵公司 <Icon as={MdOpenInNew} />\n                            </Link>\n                            或\n                            <Link color=\"teal.500\" href=\"https://www.shmetro.com/\" isExternal={true}>\n                                上海申通地鐵集團 <Icon as={MdOpenInNew} />\n                            </Link>\n                            所設計。在產生之圖像用作商業用途前，你應向相關公司取得適當之許可證或授權。\n                        </ListItem>\n                        <ListItem>\n                            The elements including shapes and lines on the image are drawn by{' '}\n                            <Link color=\"teal.500\" href=\"https://www.github.com/wongchito\" isExternal={true}>\n                                Chito Wong <Icon as={MdOpenInNew} />\n                            </Link>\n                            {' and '}\n                            <Link color=\"teal.500\" href=\"https://www.github.com/thekingofcity\" isExternal={true}>\n                                thekingofcity <Icon as={MdOpenInNew} />\n                            </Link>\n                            , based on the design standards or rules of the companies listed above. You may use them for\n                            any purposes, but it is recommended to state the name and the link of software alongside.\n                            <br />\n                            圖像之元素，包括圖形及線條，均由\n                            <Link color=\"teal.500\" href=\"https://www.github.com/wongchito\" isExternal={true}>\n                                Chito Wong <Icon as={MdOpenInNew} />\n                            </Link>\n                            及\n                            <Link color=\"teal.500\" href=\"https://www.github.com/thekingofcity\" isExternal={true}>\n                                thekingofcity <Icon as={MdOpenInNew} />\n                            </Link>\n                            基於上述公司之設計標準或準則繪製。你可將其用於任何目的，但我們建議你於使用同時附以我們之名字以及該軟件之連結。\n                        </ListItem>\n                        <ListItem>\n                            Due to copyright, licensing and other legal restrictions, Rail Map Generator uses{' '}\n                            <Link color=\"teal.500\" href=\"https://github.com/ButTaiwan/genyo-font\" isExternal={true}>\n                                GenYoMin provided by ButTaiwan <Icon as={MdOpenInNew} />\n                            </Link>\n                            , and Vegur instead of MTRSung and Myriad Pro respectively to display and generate MTR-style\n                            signage. You shall grant appropriate permit or license from the manufacturers before using\n                            those generated images for commercial purposes.\n                            <br />\n                            由於著作權及其他法律限制，鐵路路線圖產生器使用\n                            <Link color=\"teal.500\" href=\"https://github.com/ButTaiwan/genyo-font\" isExternal={true}>\n                                由ButTaiwan提供之源樣明體 <Icon as={MdOpenInNew} />\n                            </Link>\n                            ，以及Vegur，以代替港鐵樣式標誌牌所使用之地鐵宋及Myriad\n                            Pro。在產生之圖像用作商業用途前，你應向字型生產廠商取得適當之許可證或授權。\n                        </ListItem>\n                        <ListItem>\n                            The exported images in PNG or SVG format may be modified, published, or used for other\n                            purposes, under the conditions above.\n                            <br />\n                            輸出之PNG或SVG種類之圖像可基於上述條款，用於修改、發行或其他用途。\n                        </ListItem>\n                        <ListItem>\n                            All flag emojis shown on Windows platforms are designed by{' '}\n                            <Link color=\"teal.500\" href=\"https://openmoji.org/\" isExternal={true}>\n                                OpenMoji <Icon as={MdOpenInNew} />\n                            </Link>{' '}\n                            – the open-source emoji and icon project. License:\n                            <Link\n                                color=\"teal.500\"\n                                href=\"https://creativecommons.org/licenses/by-sa/4.0/\"\n                                isExternal={true}\n                            >\n                                CC BY-SA 4.0 <Icon as={MdOpenInNew} />\n                            </Link>\n                            <br />\n                            於Windows作業系統上顯示之旗幟Emoji為\n                            <Link color=\"teal.500\" href=\"https://openmoji.org/\" isExternal={true}>\n                                OpenMoji <Icon as={MdOpenInNew} />\n                            </Link>\n                            所設計。許可證：\n                            <Link\n                                color=\"teal.500\"\n                                href=\"https://creativecommons.org/licenses/by-sa/4.0/\"\n                                isExternal={true}\n                            >\n                                CC BY-SA 4.0 <Icon as={MdOpenInNew} />\n                            </Link>\n                        </ListItem>\n                        <ListItem>\n                            We reserve the rights, without prior notice, to modify, add, or remove these terms. The\n                            Chinese translation is for reference only. In case of any discrepancy between the English\n                            version and the Chinese version, the English version shall prevail.\n                            <br />\n                            我們保留修改、新增或移除上述條款之權利，而無需另行通知。中文譯本僅供參考，文義如與英文有歧異，概以英文本為準。\n                        </ListItem>\n                    </OrderedList>\n\n                    <Heading as=\"h5\" size=\"sm\" mt={3} mb={2}>\n                        {t('Contributors')}\n                    </Heading>\n\n                    <Heading as=\"h6\" size=\"xs\" my={1}>\n                        {t('Core contributors')}\n                    </Heading>\n\n                    <VStack>\n                        <Tag\n                            size=\"lg\"\n                            minW=\"80%\"\n                            onClick={() => window.open('https://github.com/wongchito', '_blank')}\n                            cursor=\"pointer\"\n                        >\n                            <Avatar src=\"https://github.com/wongchito.png\" size=\"lg\" my={2} ml={-1} mr={2} />\n                            <TagLabel>\n                                <Text fontSize=\"lg\" fontWeight=\"bold\" mb={1}>\n                                    Chito Wong\n                                </Text>\n                                <Text fontSize=\"sm\">Project initiator</Text>\n                                <Text fontSize=\"sm\">Author of MTR and Guangzhou Metro styles</Text>\n                            </TagLabel>\n                        </Tag>\n                        <Tag\n                            size=\"lg\"\n                            minW=\"80%\"\n                            onClick={() => window.open('https://github.com/thekingofcity', '_blank')}\n                            cursor=\"pointer\"\n                        >\n                            <Avatar src=\"https://github.com/thekingofcity.png\" size=\"lg\" my={2} ml={-1} mr={2} />\n                            <TagLabel>\n                                <Text fontSize=\"lg\" fontWeight=\"bold\" mb={1}>\n                                    thekingofcity\n                                </Text>\n                                <Text fontSize=\"sm\">Author of Shanghai Metro style</Text>\n                                <Text fontSize=\"sm\">Desktop version (Electron) maintainer</Text>\n                            </TagLabel>\n                        </Tag>\n                    </VStack>\n\n                    <Heading as=\"h6\" size=\"xs\" my={1}>\n                        {t('Resource contributors')}\n                    </Heading>\n\n                    <Flex wrap=\"wrap\">\n                        {CONTRIBUTORS_ADMINS.map(contributor => (\n                            <Tag\n                                key={contributor}\n                                size=\"lg\"\n                                mb={1}\n                                mr={1}\n                                flex=\"100%\"\n                                onClick={() =>\n                                    window.open(\n                                        `https://github.com/railmapgen/rmg/issues?q=is:issue+author:${contributor}`,\n                                        '_blank'\n                                    )\n                                }\n                                cursor=\"pointer\"\n                            >\n                                <Avatar src={`https://github.com/${contributor}.png`} size=\"xs\" ml={-1} mr={2} />\n                                <TagLabel>{contributor}</TagLabel>\n                                <TagLabel flexGrow={1} />\n                                <TagLabel>\n                                    <Text fontSize=\"sm\">{t('Resource Administrator')}</Text>\n                                </TagLabel>\n                            </Tag>\n                        ))}\n                        {CONTRIBUTORS_LIST.map(contributor => (\n                            <Tag\n                                key={contributor}\n                                size=\"lg\"\n                                mb={1}\n                                mr={1}\n                                onClick={() =>\n                                    window.open(\n                                        `https://github.com/railmapgen/rmg/issues?q=is:issue+author:${contributor}`,\n                                        '_blank'\n                                    )\n                                }\n                                cursor=\"pointer\"\n                            >\n                                <Avatar src={`https://github.com/${contributor}.png`} size=\"xs\" ml={-1} mr={2} />\n                                <TagLabel>{contributor}</TagLabel>\n                            </Tag>\n                        ))}\n                    </Flex>\n\n                    <Text>\n                        {t('Visit')}{' '}\n                        <Link\n                            color=\"teal.500\"\n                            href=\"https://github.com/railmapgen/rmg/wiki/How-to-add-color-palette-and-line-templates\"\n                            isExternal={true}\n                        >\n                            {t('Contribution Wiki')} <Icon as={MdOpenInNew} />\n                        </Link>\n                        {t(', open an issue and join us today!')}\n                    </Text>\n                </ModalBody>\n\n                <ModalFooter>\n                    <Button\n                        colorScheme=\"teal\"\n                        onClick={() => window.open('https://github.com/railmapgen/rmg', '_blank')}\n                    >\n                        {t('Visit GitHub')}\n                    </Button>\n                </ModalFooter>\n            </ModalContent>\n        </Modal>\n    );\n}\n","import React, { useState } from 'react';\nimport { Heading, HStack, Icon, IconButton, Link, Menu, MenuButton, MenuItem, MenuList } from '@chakra-ui/react';\nimport { getEnvironment, getVersion } from '../../util/config';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { MdHelp, MdLocationCity, MdOpenInNew, MdTranslate } from 'react-icons/md';\nimport { LanguageCode, RmgStyle } from '../../constants/constants';\nimport { useDispatch } from 'react-redux';\nimport { setStyle } from '../../redux/param/action';\nimport * as ReactRouterDom from 'react-router-dom';\nimport HelpModal from '../modal/help-modal';\nimport { RmgEnvBadge, RmgWindowHeader } from '@railmapgen/rmg-components';\n\nexport default function WindowHeader() {\n    const { t, i18n } = useTranslation();\n    const dispatch = useDispatch();\n\n    const [isHelpModalOpen, setIsHelpModalOpen] = useState(false);\n\n    const environment = getEnvironment();\n\n    const handleChangeLanguage = async (language: LanguageCode) => {\n        const t = await i18n.changeLanguage(language);\n        document.documentElement.lang = language;\n        document.title = t('WindowHeader.heading');\n    };\n\n    return (\n        <RmgWindowHeader>\n            <Heading as=\"h4\" size=\"md\">\n                {t('WindowHeader.heading')}\n            </Heading>\n            <RmgEnvBadge\n                environment={environment}\n                version={getVersion()}\n                popoverHeader={\n                    <Trans i18nKey=\"WindowHeader.popoverHeader\" environment={environment}>\n                        You're on {{ environment }} environment!\n                    </Trans>\n                }\n                popoverBody={\n                    <Trans i18nKey=\"WindowHeader.popoverBody\">\n                        This is a testing environment where we don't guarantee the stability and compatibility. Please\n                        switch back to{' '}\n                        <Link\n                            color=\"teal.500\"\n                            href={'https://railmapgen.github.io' + window.location.pathname}\n                            isExternal={true}\n                        >\n                            Production environment <Icon as={MdOpenInNew} />\n                        </Link>\n                        .\n                    </Trans>\n                }\n            />\n\n            <HStack ml=\"auto\">\n                <Menu>\n                    <MenuButton as={IconButton} icon={<MdLocationCity />} variant=\"ghost\" size=\"sm\" />\n                    <MenuList>\n                        {Object.values(RmgStyle).map(style => (\n                            <ReactRouterDom.Link key={style} to={style}>\n                                <MenuItem onClick={() => dispatch(setStyle(style))}>\n                                    {t('WindowHeader.' + style)}\n                                </MenuItem>\n                            </ReactRouterDom.Link>\n                        ))}\n                    </MenuList>\n                </Menu>\n\n                <Menu>\n                    <MenuButton as={IconButton} icon={<MdTranslate />} variant=\"ghost\" size=\"sm\" />\n                    <MenuList>\n                        <MenuItem onClick={() => handleChangeLanguage(LanguageCode.English)}>English</MenuItem>\n                        <MenuItem onClick={() => handleChangeLanguage(LanguageCode.ChineseSimp)}>简体中文</MenuItem>\n                        <MenuItem onClick={() => handleChangeLanguage(LanguageCode.ChineseTrad)}>繁體中文</MenuItem>\n                    </MenuList>\n                </Menu>\n\n                <IconButton\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    aria-label=\"Help\"\n                    icon={<MdHelp />}\n                    onClick={() => setIsHelpModalOpen(true)}\n                />\n            </HStack>\n\n            <HelpModal isOpen={isHelpModalOpen} onClose={() => setIsHelpModalOpen(false)} />\n        </RmgWindowHeader>\n    );\n}\n","import { nanoid } from 'nanoid';\nimport { RootDispatch, RootState } from '../index';\nimport { BranchStyle } from '../../constants/constants';\nimport { getYShareMTR } from '../../methods';\nimport { setStationsBulk } from './action';\nimport { initStationInfo } from './util';\n\nexport const addStation = (where: `${number}` | 'new', from: string, to: string, position?: 'upper' | 'lower') => {\n    return (dispatch: RootDispatch, getState: () => RootState): string | false => {\n        const stationList = getState().param.stn_list;\n\n        // get new id\n        let newId = nanoid(6);\n        while (newId in stationList) {\n            newId = nanoid(6);\n        }\n        const newStationInfo = initStationInfo(newId);\n\n        if (where !== 'new') {\n            const nextStationList = {\n                ...stationList,\n                [from]: {\n                    ...stationList[from],\n                    children: stationList[from].children.map(id => (id === to ? newId : id)),\n                    branch: {\n                        left: stationList[from].branch.left,\n                        right:\n                            stationList[from].branch.right.length && stationList[from].branch.right[1] === to\n                                ? ([stationList[from].branch.right[0], newId] as [BranchStyle, string])\n                                : stationList[from].branch.right,\n                    },\n                },\n                [to]: {\n                    ...stationList[to],\n                    parents: stationList[to].parents.map(id => (id === from ? newId : id)),\n                    branch: {\n                        left:\n                            stationList[to].branch.left.length && stationList[to].branch.left[1] === from\n                                ? ([stationList[to].branch.left[0], newId] as [BranchStyle, string])\n                                : stationList[to].branch.left,\n                        right: stationList[to].branch.right,\n                    },\n                },\n                [newId]: {\n                    ...newStationInfo,\n                    parents: [from],\n                    children: [to],\n                },\n            };\n            dispatch(setStationsBulk(nextStationList));\n            return newId;\n        } else {\n            if (!position) {\n                return false;\n            }\n\n            const nextStationList = {\n                ...stationList,\n                [from]: {\n                    ...stationList[from],\n                    children:\n                        position === 'upper'\n                            ? [newId, stationList[from].children[0]]\n                            : [stationList[from].children[0], newId],\n                    branch: {\n                        left: stationList[from].branch.left,\n                        right: [BranchStyle.through, newId] as [BranchStyle, string],\n                    },\n                },\n                [to]: {\n                    ...stationList[to],\n                    parents:\n                        position === 'upper'\n                            ? [newId, stationList[to].parents[0]]\n                            : [stationList[to].parents[0], newId],\n                    branch: {\n                        left: [BranchStyle.through, newId] as [BranchStyle, string],\n                        right: stationList[to].branch.right,\n                    },\n                },\n                [newId]: {\n                    ...newStationInfo,\n                    parents: [from],\n                    children: [to],\n                },\n            };\n            dispatch(setStationsBulk(nextStationList));\n            return newId;\n        }\n    };\n};\n\nexport const addStationToExistingBranch = (where: number, preposition: 'before' | 'after', pivot: string) => {\n    return (dispatch: RootDispatch, getState: () => RootState): false | string => {\n        const branches = getState().helper.branches;\n        const branch = branches[where];\n\n        if (branch?.length) {\n            if (preposition === 'before') {\n                const from = branch[branch.indexOf(pivot) - 1];\n                return dispatch(addStation(where.toString() as `${number}`, from, pivot));\n            } else {\n                const to = branch[branch.indexOf(pivot) + 1];\n                return dispatch(addStation(where.toString() as `${number}`, pivot, to));\n            }\n        } else {\n            return false;\n        }\n    };\n};\n\nexport const getNewBranchAllowedEnds = () => {\n    return (dispatch: RootDispatch, getState: () => RootState): string[] => {\n        const stationList = getState().param.stn_list;\n        const branches = getState().helper.branches;\n\n        return branches[0].filter(id => {\n            const isTwoSidedBranchOut = stationList[id].parents.length + stationList[id].children.length === 4;\n            const isYShare0 = getYShareMTR(id, stationList) === 0;\n\n            return !isTwoSidedBranchOut && isYShare0;\n        });\n    };\n};\n\nexport const verifyNewBranchEnds = (from: string, to: string) => {\n    return (dispatch: RootDispatch, getState: () => RootState): string => {\n        const stationList = getState().param.stn_list;\n        const branches = getState().helper.branches;\n\n        // should be included in main line\n        if (!branches[0].includes(from) || !branches[0].includes(to)) {\n            return 'Branch should end at main line';\n        }\n\n        // from should come before to\n        if (branches[0].indexOf(from) >= branches[0].indexOf(to)) {\n            return 'Not in correct ordering';\n        }\n\n        // should not from linestart to lineend\n        if (from === 'linestart' && to === 'lineend') {\n            return 'Should not be parallel to main line';\n        }\n\n        // should not be open jaw from the first station\n        if (from === 'linestart' && branches[0].indexOf(to) === 1) {\n            return 'Branch should not be open jaw from the first station';\n        }\n\n        // should not be open jaw from the last station\n        if (to === 'lineend' && branches[0].indexOf(from) === branches[0].length - 2) {\n            return 'Branch should not be open jaw from the last station';\n        }\n\n        // from has one child, to has one parent\n        if (stationList[from].children.length > 1 || stationList[to].parents.length > 1) {\n            return 'Branch already exist';\n        }\n\n        // end station won't be a middle station of any branch except main line\n        const isExistBranchIncludesEndStation = branches\n            .slice(1)\n            .some(branch => branch.slice(1, -1).includes(from) || branch.slice(1, -1).includes(to));\n        if (isExistBranchIncludesEndStation) {\n            return 'Cannot branch out from existing branch';\n        }\n\n        // stations between both ends should be stations which isn't branching out\n        const isStationsBetweenNotBranchOut = branches[0]\n            .slice(branches[0].indexOf(from) + 1, branches[0].indexOf(to))\n            .every(id => stationList[id].parents.length === 1 && stationList[id].children.length === 1);\n        if (!isStationsBetweenNotBranchOut) {\n            return 'One or more stations between both ends are branching out';\n        }\n\n        return '';\n    };\n};\n","import React, { useEffect, useState } from 'react';\nimport {\n    Alert,\n    AlertIcon,\n    Box,\n    Button,\n    Modal,\n    ModalBody,\n    ModalCloseButton,\n    ModalContent,\n    ModalFooter,\n    ModalHeader,\n    ModalOverlay,\n} from '@chakra-ui/react';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useRootDispatch, useRootSelector } from '../../redux';\nimport { RmgStyle, SidePanelMode } from '../../constants/constants';\nimport { isColineBranch } from '../../redux/param/coline-action';\nimport { useTranslation } from 'react-i18next';\nimport { addStationToExistingBranch } from '../../redux/param/add-station-action';\nimport { setSelectedStation, setSidePanelMode } from '../../redux/app/app-slice';\n\ninterface AddStationModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nexport default function AddStationModal(props: AddStationModalProps) {\n    const { isOpen, onClose } = props;\n    const { t } = useTranslation();\n    const dispatch = useRootDispatch();\n\n    const selectedBranch = useRootSelector(state => state.app.selectedBranch);\n    const { style, stn_list: stationList } = useRootSelector(state => state.param);\n    const branches = useRootSelector(state => state.helper.branches);\n\n    const [where, setWhere] = useState(selectedBranch);\n    const [preposition, setPreposition] = useState<'before' | 'after'>('before');\n    const [pivot, setPivot] = useState('');\n    const [error, setError] = useState(false);\n\n    useEffect(() => {\n        setWhere(selectedBranch);\n    }, [selectedBranch]);\n\n    useEffect(() => {\n        if (!isOpen) {\n            setError(false);\n        }\n    }, [isOpen]);\n\n    const selectableStations = branches[Number(where)]?.slice(1, -1) ?? [];\n\n    const getStationOptions = (stationIdList: string[]): Record<string, string> => {\n        return stationIdList.reduce(\n            (acc, cur) => ({\n                ...acc,\n                [cur]: stationList[cur]?.name.join(' - '),\n            }),\n            { '': t('AddStationModal.pleaseSelect') }\n        );\n    };\n\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'select',\n            label: t('AddStationModal.where'),\n            value: where,\n            options: {\n                ...branches.reduce(\n                    (acc, cur, idx) => ({\n                        ...acc,\n                        [idx]:\n                            idx === 0\n                                ? t('AddStationModal.main')\n                                : style !== RmgStyle.SHMetro || !isColineBranch(cur, stationList)\n                                ? t('AddStationModal.branch') + ' ' + idx\n                                : t('AddStationModal.external') + ' ' + idx,\n                    }),\n                    {}\n                ),\n            },\n            onChange: value => handleSelectWhere(value as number),\n            minW: 'full',\n        },\n        {\n            type: 'select',\n            label: t('AddStationModal.preposition'),\n            value: preposition,\n            options: {\n                before: t('AddStationModal.before'),\n                after: t('AddStationModal.after'),\n            },\n            onChange: value => setPreposition(value as 'before' | 'after'),\n        },\n        {\n            type: 'select',\n            label: t('AddStationModal.pivot'),\n            value: pivot,\n            options: getStationOptions(selectableStations),\n            disabledOptions: [''],\n            onChange: value => setPivot(value as string),\n        },\n    ];\n\n    const handleSelectWhere = (value: number) => {\n        setWhere(value);\n        setPivot('');\n    };\n\n    const handleSubmit = () => {\n        const result = dispatch(addStationToExistingBranch(where, preposition, pivot));\n        if (result) {\n            onClose();\n\n            dispatch(setSelectedStation(result));\n            dispatch(setSidePanelMode(SidePanelMode.STATION));\n        } else {\n            console.log('false here');\n            setError(true);\n        }\n    };\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose}>\n            <ModalOverlay />\n            <ModalContent>\n                {error && (\n                    <Alert status=\"error\" variant=\"solid\" size=\"xs\">\n                        <AlertIcon />\n                        {t('AddStationModal.error')}\n                    </Alert>\n                )}\n                <Box position=\"relative\">\n                    <ModalHeader>{t('AddStationModal.title')}</ModalHeader>\n                    <ModalCloseButton />\n                </Box>\n\n                <ModalBody>\n                    <RmgFields fields={fields} />\n                </ModalBody>\n\n                <ModalFooter>\n                    <Button colorScheme=\"teal\" onClick={handleSubmit} disabled={!pivot}>\n                        {t('AddStationModal.submit')}\n                    </Button>\n                </ModalFooter>\n            </ModalContent>\n        </Modal>\n    );\n}\n","import React, { useEffect, useState } from 'react';\nimport {\n    Button,\n    Modal,\n    ModalBody,\n    ModalCloseButton,\n    ModalContent,\n    ModalFooter,\n    ModalHeader,\n    ModalOverlay,\n} from '@chakra-ui/react';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useRootDispatch, useRootSelector } from '../../redux';\nimport { addStation, getNewBranchAllowedEnds, verifyNewBranchEnds } from '../../redux/param/add-station-action';\nimport { RmgStyle } from '../../constants/constants';\nimport { useTranslation } from 'react-i18next';\n\ninterface NewBranchModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nexport default function NewBranchModal(props: NewBranchModalProps) {\n    const { isOpen, onClose } = props;\n    const { t } = useTranslation();\n    const dispatch = useRootDispatch();\n\n    const [where, setWhere] = useState<'new' | 'ext'>('new');\n    const [from, setFrom] = useState('');\n    const [to, setTo] = useState('');\n    const [position, setPosition] = useState<'upper' | 'lower'>('upper');\n\n    const [fromError, setFromError] = useState('');\n    const [toError, setToError] = useState('');\n\n    const { style, stn_list: stationList } = useRootSelector(state => state.param);\n\n    useEffect(() => {\n        // reset whenever modal is closed\n        if (!isOpen) {\n            setWhere('new');\n            setFrom('');\n            setTo('');\n        }\n    }, [isOpen]);\n\n    const getStationOptions = (stationIdList: string[]): Record<string, string> => {\n        return stationIdList.reduce(\n            (acc, cur) => ({\n                ...acc,\n                [cur]: stationList[cur]?.name.join(' - '),\n            }),\n            { '': t('NewBranchModal.pleaseSelect') }\n        );\n    };\n\n    const newBranchEndStationOptions = getStationOptions(dispatch(getNewBranchAllowedEnds()));\n\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'select',\n            label: t('NewBranchModal.where'),\n            value: where,\n            options: {\n                new: t('NewBranchModal.new'),\n                ext: t('NewBranchModal.ext'),\n            },\n            disabledOptions: style === RmgStyle.SHMetro ? [] : ['ext'],\n            onChange: value => handleSelectWhere(value as 'new' | 'ext'),\n            minW: 'full',\n        },\n        {\n            type: 'select',\n            label: t('NewBranchModal.from'),\n            value: from,\n            options: newBranchEndStationOptions,\n            disabledOptions: [''],\n            onChange: value => handleSelectFrom(value as string),\n            isInvalid: Boolean(fromError),\n        },\n        {\n            type: 'select',\n            label: t('NewBranchModal.to'),\n            value: to,\n            options: newBranchEndStationOptions,\n            disabledOptions: [''],\n            onChange: value => handleSelectTo(value as string),\n            isInvalid: Boolean(toError),\n        },\n        {\n            type: 'select',\n            label: t('NewBranchModal.position'),\n            value: position,\n            options: {\n                upper: t('NewBranchModal.upper'),\n                lower: t('NewBranchModal.lower'),\n            },\n            onChange: value => setPosition(value as 'upper' | 'lower'),\n            minW: 'full',\n            hidden: where !== 'new' || style === RmgStyle.SHMetro,\n        },\n    ];\n\n    const handleSelectWhere = (value: 'new' | 'ext') => {\n        setWhere(value);\n        setFrom('');\n        setTo('');\n        setFromError('');\n        setToError('');\n    };\n\n    const handleSelectFrom = (value: string) => {\n        setFrom(value);\n        setFromError('');\n\n        if (value && to) {\n            setToError(dispatch(verifyNewBranchEnds(value, to)));\n        }\n    };\n\n    const handleSelectTo = (value: string) => {\n        setTo(value);\n        setToError('');\n\n        if (from && value) {\n            setFromError(dispatch(verifyNewBranchEnds(from, value)));\n        }\n    };\n\n    const handleSubmit = () => {\n        let result: false | string;\n        if (where === 'ext') {\n            // SHMetro specific - treat lower branch as external line\n            result = dispatch(addStation('new', from, to, 'lower'));\n        } else {\n            if (style === RmgStyle.SHMetro) {\n                result = dispatch(addStation('new', from, to, 'upper'));\n            } else {\n                result = dispatch(addStation('new', from, to, position));\n            }\n        }\n\n        if (result) {\n            onClose();\n        }\n    };\n\n    const isSubmitDisabled = Boolean(!from || !to || fromError || toError);\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose}>\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>{t('NewBranchModal.title')}</ModalHeader>\n                <ModalCloseButton />\n\n                <ModalBody>\n                    <RmgFields fields={fields} />\n                </ModalBody>\n\n                <ModalFooter>\n                    <Button\n                        colorScheme=\"teal\"\n                        title={isSubmitDisabled ? fromError || toError : t('NewBranchModal.submit')}\n                        onClick={handleSubmit}\n                        disabled={isSubmitDisabled}\n                    >\n                        {t('NewBranchModal.submit')}\n                    </Button>\n                </ModalFooter>\n            </ModalContent>\n        </Modal>\n    );\n}\n","import React, { lazy, Suspense, useState } from 'react';\nimport { Box, Button, HStack, IconButton, Progress, Tab, TabList, TabPanel, TabPanels, Tabs } from '@chakra-ui/react';\nimport { MdAdd } from 'react-icons/md';\nimport AddStationModal from '../modal/add-station-modal';\nimport { useRootDispatch, useRootSelector } from '../../redux';\nimport { RmgStyle, SidePanelMode } from '../../constants/constants';\nimport { isColineBranch } from '../../redux/param/coline-action';\nimport { setSelectedBranch, setSidePanelMode } from '../../redux/app/app-slice';\nimport { useTranslation } from 'react-i18next';\nimport NewBranchModal from '../modal/new-branch-modal';\nimport ErrorBoundary from '../../error-boundary';\n\nconst StationAgGrid = lazy(() => import(/* webpackChunkName: \"StationAgGrid\" */ './station-ag-grid'));\n\nexport default function GridTabs() {\n    const { t } = useTranslation();\n    const dispatch = useRootDispatch();\n\n    const [isAddStationModalOpen, setIsAddStationModalOpen] = useState(false);\n    const [isNewBranchModalOpen, setIsNewBranchModalOpen] = useState(false);\n\n    const selectedBranch = useRootSelector(state => state.app.selectedBranch);\n    const { style, stn_list: stationList } = useRootSelector(state => state.param);\n    const branches = useRootSelector(state => state.helper.branches);\n\n    const handleEditLineSection = () => {\n        dispatch(setSidePanelMode(SidePanelMode.BRANCH));\n    };\n\n    return (\n        <Box flex={1} overflow=\"hidden\">\n            <Tabs\n                height=\"100%\"\n                display=\"flex\"\n                flexDirection=\"column\"\n                overflow=\"hidden\"\n                index={selectedBranch}\n                onChange={index => dispatch(setSelectedBranch(index))}\n            >\n                <TabList>\n                    {branches.map((branch, i) => {\n                        if (i === 0) {\n                            return <Tab key={i}>{t('GridTabs.main')}</Tab>;\n                        } else {\n                            if (style !== RmgStyle.SHMetro || !isColineBranch(branch, stationList)) {\n                                return <Tab key={i}>{t('GridTabs.branch') + ' ' + i}</Tab>;\n                            } else {\n                                return <Tab key={i}>{t('GridTabs.external') + ' ' + i}</Tab>;\n                            }\n                        }\n                    })}\n                    <IconButton\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        alignSelf=\"center\"\n                        aria-label=\"New branch\"\n                        onClick={() => setIsNewBranchModalOpen(true)}\n                        icon={<MdAdd />}\n                    />\n\n                    <HStack marginLeft=\"auto\" marginRight={1}>\n                        <Button\n                            variant=\"outline\"\n                            size=\"xs\"\n                            leftIcon={<MdAdd />}\n                            onClick={() => setIsAddStationModalOpen(true)}\n                        >\n                            {t('GridTabs.addStation')}\n                        </Button>\n                        <Button size=\"xs\" colorScheme=\"teal\" onClick={handleEditLineSection}>\n                            {t('GridTabs.editLine')}\n                        </Button>\n                    </HStack>\n                </TabList>\n\n                <TabPanels flex={1} overflowY=\"auto\">\n                    {branches.map((_, i) => (\n                        <TabPanel key={i} padding={0} h=\"100%\">\n                            <Suspense fallback={<Progress isIndeterminate />}>\n                                <ErrorBoundary>\n                                    <StationAgGrid branchIndex={i} />\n                                </ErrorBoundary>\n                            </Suspense>\n                        </TabPanel>\n                    ))}\n                </TabPanels>\n            </Tabs>\n\n            <AddStationModal isOpen={isAddStationModalOpen} onClose={() => setIsAddStationModalOpen(false)} />\n            <NewBranchModal isOpen={isNewBranchModalOpen} onClose={() => setIsNewBranchModalOpen(false)} />\n        </Box>\n    );\n}\n","import React from 'react';\nimport { CircularProgress, Flex, Modal, ModalOverlay } from '@chakra-ui/react';\nimport { useRootSelector } from '../../redux';\n\nexport default function LoadingModal() {\n    const isLoading = useRootSelector(state => state.app.isLoading);\n\n    return (\n        <Modal isOpen={isLoading !== undefined} onClose={() => {}}>\n            <ModalOverlay />\n            <Flex\n                position=\"absolute\"\n                top={0}\n                left={0}\n                h=\"100%\"\n                w=\"100%\"\n                justifyContent=\"center\"\n                alignItems=\"center\"\n                zIndex={9999}\n            >\n                <CircularProgress\n                    isIndeterminate={isLoading === -1}\n                    value={isLoading && isLoading >= 0 ? isLoading : undefined}\n                    color=\"teal\"\n                />\n            </Flex>\n        </Modal>\n    );\n}\n","import React from 'react';\nimport { useRootDispatch, useRootSelector } from '../../redux';\nimport { Alert, AlertIcon, AlertStatus, CloseButton, Link } from '@chakra-ui/react';\nimport { closeGlobalAlert } from '../../redux/app/app-slice';\n\nexport default function GlobalAlerts() {\n    const dispatch = useRootDispatch();\n\n    const globalAlerts = useRootSelector(state => state.app.globalAlerts);\n\n    return (\n        <>\n            {Object.entries(globalAlerts).map(([status, { message, url }]) => (\n                <Alert key={status} status={status as AlertStatus} variant=\"solid\" size=\"xs\" pl={3} pr={1} py={0}>\n                    <AlertIcon />\n                    {url ? (\n                        <Link href={url} target=\"_blank\">\n                            {message}\n                        </Link>\n                    ) : (\n                        message\n                    )}\n                    <CloseButton ml=\"auto\" onClick={() => dispatch(closeGlobalAlert(status as AlertStatus))} />\n                </Alert>\n            ))}\n        </>\n    );\n}\n","import React, { useEffect } from 'react';\nimport SvgRouter from '../svgs/svg-router';\nimport SidePanel from './side-panel/side-panel';\nimport PageHeader from './page-header/page-header';\nimport WindowHeader from './root/window-header';\nimport { Box, Flex } from '@chakra-ui/react';\nimport { useRootSelector } from '../redux';\nimport GridTabs from './ag-grid/grid-tabs';\nimport LoadingModal from './modal/loading-modal';\nimport GlobalAlerts from './root/global-alerts';\nimport { RmgPage, RmgWindow } from '@railmapgen/rmg-components';\n\nexport default function AppRoot() {\n    const param = useRootSelector(state => state.param);\n    const paramString = JSON.stringify(param);\n\n    useEffect(() => {\n        window.rmgStorage.writeFile('rmgParam', paramString).then();\n    }, [paramString]);\n\n    return (\n        <RmgWindow>\n            <LoadingModal />\n            <WindowHeader />\n            <RmgPage>\n                <PageHeader />\n                <GlobalAlerts />\n                <Flex flex={1} overflow=\"hidden\" position=\"relative\">\n                    <Flex as=\"section\" direction=\"column\" flex={1} ml={1} mr={1} overflow=\"hidden\">\n                        <Box>\n                            <SvgRouter />\n                        </Box>\n                        <GridTabs />\n                    </Flex>\n\n                    <SidePanel />\n                </Flex>\n            </RmgPage>\n\n            <canvas style={{ display: 'none' }} />\n        </RmgWindow>\n    );\n}\n","import { RootDispatch, RootState } from '../index';\nimport { ColineInfo, InterchangeInfo, StationDict } from '../../constants/constants';\nimport { setColineBulk } from './action';\nimport { nanoid } from 'nanoid';\n\n// Cartesian product of multiple arrays in JavaScript\n// https://stackoverflow.com/questions/12303989/cartesian-product-of-multiple-arrays-in-javascript\n// Equivalent typescript version\n// https://gist.github.com/ssippe/1f92625532eef28be6974f898efb23ef?permalink_comment_id=3364149#gistcomment-3364149\nfunction cartesian<T>(...allEntries: T[][]): T[][] {\n    return allEntries.reduce<T[][]>(\n        (results, entries) =>\n            results\n                .map(result => entries.map(entry => result.concat([entry])))\n                .reduce((subResults, result) => subResults.concat(result), []),\n        [[]]\n    );\n}\n\n/**\n * Coline branch is also known as the lower branch.\n */\nexport const isColineBranch = (branch: string[], stnList: StationDict) =>\n    stnList[branch[0]].children.indexOf(branch[1]) ? true : false;\n\nexport const getPossibleStnIdsFromMainLine = (branches: string[][], stnList: StationDict) => [\n    branches[0][1], // skip linestart\n    branches[0][branches[0].length - 2], // skip lineend\n    ...branches[0].filter(stnId =>\n        // for every station in the main line, find if it branches out at this station\n        branches\n            .slice(1)\n            .filter(branch => isColineBranch(branch, stnList))\n            // branches after the first/main line may not have linestart or lineend\n            .map(branch => branch.filter(stnId => !['linestart', 'lineend'].includes(stnId)))\n            // only stations at both ends need to be taken into consideration\n            .map(branch => [branch[0], branch[branch.length - 1]])\n            .flat()\n            .includes(stnId)\n    ),\n];\n\nexport const getPossibleStnIdsFromBranchLine = (branches: string[][], stnList: StationDict) =>\n    branches\n        .slice(1)\n        .filter(branch => isColineBranch(branch, stnList))\n        .map(branch => branch.filter(stnId => !['linestart', 'lineend'].includes(stnId)))\n        .map(branch => [branch[0], branch[branch.length - 1]]);\n\nexport const getPossibleCombinations = (branchIndex: number) => {\n    return (dispatch: RootDispatch, getState: () => RootState): [string, string][] => {\n        const branches = getState().helper.branches;\n\n        if (branchIndex === 0) {\n            const stnList = getState().param.stn_list;\n            const possibleStnIdsFromMainLine = getPossibleStnIdsFromMainLine(branches, stnList);\n            return cartesian(possibleStnIdsFromMainLine, possibleStnIdsFromMainLine).filter(\n                val => val[0] !== val[1]\n            ) as [string, string][];\n        } else {\n            const branch = branches[branchIndex];\n            if (branch) {\n                const b = branch.filter(id => !['linestart', 'lineend'].includes(id));\n                return [[b[0], b.slice(-1)[0]]];\n            } else {\n                return [];\n            }\n        }\n    };\n};\n\n/**\n * Calculate row span for displaying track sharing column in StationAgGrid\n * @param stationId id of station that begins to span rows\n * @param branchIndex index of branch that the grid is displaying\n */\nexport const getRowSpanForColine = (stationId: string, branchIndex: number) => {\n    return (dispatch: RootDispatch, getState: () => RootState): [number, string | undefined] => {\n        const coline = getState().param.coline;\n        const branch = getState().helper.branches[branchIndex];\n\n        for (let [clId, cl] of Object.entries(coline)) {\n            if (cl.from === stationId && branch.includes(cl.to)) {\n                const thisIndex = branch.indexOf(stationId);\n                const thatIndex = branch.indexOf(cl.to);\n                if (thatIndex > thisIndex) {\n                    return [thatIndex - thisIndex + 1, clId];\n                }\n            } else if (cl.to === stationId && branch.includes(cl.to)) {\n                const thisIndex = branch.indexOf(stationId);\n                const thatIndex = branch.indexOf(cl.from);\n                if (thatIndex > thisIndex) {\n                    return [thatIndex - thisIndex + 1, clId];\n                }\n            }\n        }\n        return [0, undefined];\n    };\n};\n\n/**\n * Verify station selections from table are consecutive, which is the prerequisite for track sharing.\n * @param selectedIds IDs of the selected stations (get by gridApi)\n * @param branchIndex\n */\nexport const verifyAreSelectionsConsecutive = (selectedIds: string[], branchIndex: number) => {\n    return (dispatch: RootDispatch, getState: () => RootState): boolean => {\n        const branch = getState().helper.branches[branchIndex];\n\n        const from = selectedIds[0];\n        const to = selectedIds.slice(-1)[0];\n\n        const areConsecutiveSelections =\n            branch.slice(branch.indexOf(from), branch.indexOf(to) + 1).toString() === selectedIds.toString();\n        if (!areConsecutiveSelections) {\n            console.log('verifyAreSelectionsConsecutive():: Selections are NOT consecutive');\n            return false;\n        } else {\n            return true;\n        }\n    };\n};\n\n/**\n *  Checks the validity of from and to. Currently we accept coline if it:\n 1. Start from either ends of the mainline or branch stations and\n terminate at either ends of the mainline or branch stations.\n 2. Start from the one end of the branch line and\n terminate at the other end of the same branch line.\n\n * @param from station id from\n * @param to station id to\n */\nexport const checkColineValidity = (from: string, to: string) => {\n    return (dispatch: RootDispatch, getState: () => RootState) => {\n        const stnList = getState().param.stn_list;\n        const branches = getState().helper.branches;\n\n        if (from === to) {\n            throw new Error('addColine():: failed for same stnId');\n        }\n        // calculate if coline is in the main line\n        const colineInMainLine = getPossibleStnIdsFromMainLine(branches, stnList).filter(stnId =>\n            [from, to].includes(stnId)\n        );\n        // calculate if coline is in one branch line\n        const colineInBranches = getPossibleStnIdsFromBranchLine(branches, stnList).filter(terminals =>\n            [from, to].every(stnId => terminals.includes(stnId))\n        );\n        // see if coline is in the main line\n        if (colineInMainLine.length === 2 && colineInBranches.length > 0) {\n            throw new Error(`addColine():: main check failed for ${from}, ${to}`);\n        }\n        // see if coline is in one branch line\n        if (colineInMainLine.length !== 2 && colineInBranches.length !== 1) {\n            throw new Error(`addColine():: branch check failed for ${from}, ${to}`);\n        }\n    };\n};\n\nexport const findAllColinesInBranch = (branchIndex: number) => {\n    return (dispatch: RootDispatch, getState: () => RootState) => {\n        const coline = getState().param.coline;\n        const branches = getState().helper.branches;\n        const branch = branches[branchIndex];\n\n        if (branch) {\n            return Object.entries(coline).reduce<Record<string, ColineInfo>>((acc, cur) => {\n                if (branch.includes(cur[1].from) && branch.includes(cur[1].to)) {\n                    return { ...acc, [cur[0]]: cur[1] };\n                } else {\n                    return { ...acc };\n                }\n            }, {});\n        } else {\n            return {};\n        }\n    };\n};\n\n/**\n * Remove related coline when the deleteStn is the coline `from` or `to` station.\n */\nexport const removeInvalidColineOnRemoveStation = (deleteStnId: string) => {\n    return (dispatch: RootDispatch, getState: () => RootState) => {\n        const colineInfo = getState().param.coline;\n\n        if (Object.keys(colineInfo).length === 0) return;\n\n        const nextColine = Object.entries(colineInfo).reduce<Record<string, ColineInfo>>((acc, cur) => {\n            if (cur[1].from !== deleteStnId && cur[1].to !== deleteStnId) {\n                return { ...acc, [cur[0]]: cur[1] };\n            } else {\n                return { ...acc };\n            }\n        }, {});\n\n        dispatch(setColineBulk(nextColine));\n    };\n};\n\nexport const addColine = (from: string, to: string, colors: InterchangeInfo[], display: boolean = true) => {\n    return (dispatch: RootDispatch, getState: () => RootState) => {\n        const colineInfo = getState().param.coline;\n\n        dispatch(checkColineValidity(from, to));\n        dispatch(\n            setColineBulk({\n                ...colineInfo,\n                [nanoid(4)]: { from: from, to: to, colors: colors, display: display },\n            })\n        );\n    };\n};\n\nexport const updateColine = (colineId: string, from: string, to: string, display = true) => {\n    return (dispatch: RootDispatch, getState: () => RootState) => {\n        const colineInfo = getState().param.coline;\n\n        if (colineId in colineInfo) {\n            dispatch(checkColineValidity(from, to));\n\n            const newColineInfo = {\n                ...colineInfo,\n                [colineId]: { ...colineInfo[colineId], from, to, display },\n            };\n\n            dispatch(setColineBulk(newColineInfo));\n        }\n    };\n};\n\nexport const removeColine = (colineId: string) => {\n    return (dispatch: RootDispatch, getState: () => RootState) => {\n        const colineInfo = getState().param.coline;\n\n        if (colineId in colineInfo) {\n            const { [colineId]: _, ...nextColine } = colineInfo;\n            dispatch(setColineBulk(nextColine));\n        }\n    };\n};\n\n/**\n *\n * @param colineId\n * @param interchangeInfo\n */\nexport const addColineColor = (colineId: string, interchangeInfo: InterchangeInfo) => {\n    return (dispatch: RootDispatch, getState: () => RootState) => {\n        const colineInfo = getState().param.coline;\n\n        colineInfo[colineId].colors = [...colineInfo[colineId].colors, interchangeInfo];\n\n        dispatch(setColineBulk(colineInfo));\n    };\n};\n\nexport const removeColineColor = (colineId: string, interchangeIndex: number) => {\n    return (dispatch: RootDispatch, getState: () => RootState) => {\n        const colineInfo = getState().param.coline;\n\n        if (colineId in colineInfo && colineInfo[colineId].colors.length > interchangeIndex) {\n            const nextColours = colineInfo[colineId].colors.filter((_, colineIdx) => colineIdx !== interchangeIndex);\n            if (nextColours.length === 0) {\n                // remove entire coline\n                const { [colineId]: _, ...nextColine } = colineInfo;\n                dispatch(setColineBulk(nextColine));\n            } else {\n                // update coline colour list\n                const nextColine = {\n                    ...colineInfo,\n                    [colineId]: { ...colineInfo[colineId], colors: nextColours },\n                };\n                dispatch(setColineBulk(nextColine));\n            }\n        }\n    };\n};\n\nexport const updateColineColor = (colineId: string, interchangeIndex: number, interchangeInfo: InterchangeInfo) => {\n    return (dispatch: RootDispatch, getState: () => RootState) => {\n        const colineInfo = getState().param.coline;\n\n        if (colineId in colineInfo && colineInfo[colineId].colors.length > interchangeIndex) {\n            colineInfo[colineId].colors = colineInfo[colineId].colors.map((int, colineIdx) =>\n                colineIdx === interchangeIndex\n                    ? ([0, 1, 2, 3, 4, 5].map(i =>\n                          interchangeInfo[i] === undefined ? int[i] : interchangeInfo[i]\n                      ) as InterchangeInfo)\n                    : int\n            );\n\n            dispatch(setColineBulk(colineInfo));\n        }\n    };\n};\n\n// DEBUG PROXY\n// declare const window: any;\n// window.addColine = addColine;\n// window.updateColine = updateColine;\n// window.removeColine = removeColine;\n// window.rmgStore.dispatch(window.removeColine(2))\n// let t = ['shanghai', 'sh4', '#5F259F', '#fff', '4号线', 'Line 4']\n// window.rmgStore.dispatch(window.addColine('s9tt', 'l1mz', [t]))\n"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","t","keys","Object","module","exports","all","slice","SvgWrapper","props","type","style","svgWidth","svgHeight","canvasScale","theme","children","useEffect","document","getElementById","href","process","xmlns","xmlnsXlink","height","viewBox","colorInterpolationFilters","fill","width","Suspense","fallback","strokeWidth","stroke","flexDirection","overflowX","content","margin","flex","border","SvgRouter","location","useLocation","navigate","useNavigate","dispatch","useDispatch","useRootSelector","state","app","canvasToShow","param","svgWidths","svg_height","rmgStyle","pathname","nextStyle","split","values","RmgStyle","includes","setStyle","filteredCanvas","canvasList","filter","canvas","sx","minWidth","overflowY","RunInGZMTR","lazy","RailMapGZMTR","DestinationMTR","RailMapMTR","DestinationSHMetro","RunInSHMetro","RailMapSHMetro","IndoorSHMetro","CanvasType","InfoSection","useTranslation","useRootDispatch","selectedStation","console","log","stn_list","num","name","secondaryName","fields","label","value","placeholder","onChange","updateStationNum","hidden","updateStationName","updateStationSecondaryName","p","as","size","minW","FlagSvgEmoji","countryCode","svgFilename","useState","undefined","src","setSrc","default","catch","err","error","message","alt","h","mr","CityPicker","defaultValueId","i18n","currentItem","cityList","item","displayValue","languages","lng","find","data","sort","a","b","CityCode","localeCompare","displayHandler","isCensorTWFlag","country","LanguageCode","isWindowsClient","navigator","platform","flagSvg","countryList","flagEmoji","predicate","input","some","defaultValue","ColourPicker","city","paletteList","cityCode","setPaletteList","usePalette","palette","displayName","fg","MonoColour","bg","colour","ColourModal","isOpen","onClose","defaultTheme","onUpdate","setCityCode","lineCode","setLineCode","bgColour","setBgColour","fgColour","setFgColour","toString","paletteFields","component","line","customFields","variant","options","isSubmitEnabled","isFitted","colorScheme","w","defaultIndex","fontSize","marginRight","color","isExternal","MdOpenInNew","onClick","disabled","ColourUtil","hex","parseInt","alpha","this","hexToRgb","join","hex1","hex2","reduce","acc","cur","idx","Math","pow","ThemeButton","mt","_hover","fade","icon","InterchangeCard","interchangeList","onAdd","onDelete","isModalOpen","setIsModalOpen","selectedIndex","setSelectedIndex","stationList","usedNameList","zhAcc","enAcc","Set","concat","transfer","info","flat","it","interchangeFields","i","val","optionList","direction","length","spacing","align","noLabel","RmgButtonGroup","selections","multiSelect","setValue","isAttached","selection","isSelected","role","isDisabled","prevValue","nextValue","v","handleToggle","InterchangeSection","getOSINameFields","setIndex","osi_names","updateStationOsiName","isChecked","paid_area","checked","updateStationPaidArea","oneLine","handleAdd","addInterchange","handleDelete","j","removeInterchange","handleUpdate","updateInterchange","ShortDirection","tick_direc","updateStationTickDirection","infoList","Fragment","alignSelf","leftIcon","MoreSection","loop","services","facility","loop_pivot","one_line","int_padding","serviceSelections","Services","service","mtrFacilityOptions","Facilities","shmetroFacilityOptions","updateStationServices","updateStationFacility","updateStationLoopPivot","updateStationOneLine","validator","Number","isInteger","updateStationIntPadding","_","updateStationIntPaddingToAll","BranchSection","parents","branch","branchOptions","BranchStyle","getFirstStationOptions","Direction","positionOptions","upper","lower","getFields","updateStationBranchType","updateStationBranchFirstStation","indexOf","flipStationBranchPosition","StationSidePanel","LayoutSection","y_pc","branchSpacingPct","padding","direction_gz_x","direction_gz_y","canvasConfig","setSvgWidth","setSvgHeight","min","max","setYPercentage","setBranchSpacingPct","setPaddingPercentage","setDirectionIndicatorX","setDirectionIndicatorY","DesignSection","lineName","line_name","lineNum","line_num","platformNum","platform_num","psdNum","psd_num","namePosMTR","customiseMTRDest","info_panel_type","directionSelections","panelTypeGZMTROptions","PanelTypeGZMTR","panelTypeSHMetroOptions","PanelTypeShmetro","setLineName","setLineNum","setPlatform","setPsdNum","setPanelType","nextDirection","setDirection","staggerNameSelections","mtrSpecifiedFields","isStagger","staggerStationNames","flipStationNames","isLegacy","toggleLineNameBeforeDestination","terminal","customiseDestinationName","nextTheme","setTheme","LoopSection","branches","helper","loop_info","bank","left_and_right_factor","bottom_factor","branch_stn_ids","stn_id","abs","left_and_right_factor_max","floor","setLoop","setLoopBank","setLoopLeftAndRightFactor","setLoopBottomFactor","GZMTRNoteCard","note","fields1","fields2","GZMTRNoteSection","notesGZMTR","updateNote","removeNote","addNote","StyleSidePanel","getYShareMTR","stnId","stnList","stnPred","RemoveConfirmModal","cancelRef","onConfirm","leastDestructiveRef","fontWeight","ref","ml","StationSidePanelFooter","isRemoveModalOpen","setIsRemoveModalOpen","useRef","setCurrentStation","stationId","getState","setSidePanelMode","SidePanelMode","setSelectedStation","removeInvalidColineOnRemoveStation","newStnList","JSON","parse","stringify","forEach","parId","childId","right","left","splice","setStationsBulk","removeStation","setGlobalAlert","status","ColineCard","colineInfo","routeOptions","onUpdateRoute","onUpdateColourInfo","from","to","colors","ColineSection","selectedBranch","colineInfoList","findAllColinesInBranch","possibleCombinations","getPossibleCombinations","entries","colineId","route","updateColine","colourInfo","updateColineColor","colourIndex","removeColineColor","handleDeleteColour","addColine","AutoNumModal","where","setWhere","setFrom","maxLength","setMaxLength","setSort","isColineBranch","isNaN","debouncedDelay","asc","desc","isSubmitDisabled","autoNumbering","ActionSection","isAutoNumModalOpen","setIsAutoNumModalOpen","wrap","flexShrink","flexBasis","marginTop","reverseStations","BranchSidePanel","SidePanel","sidePanelMode","mode","STATION","header","text","body","footer","STYLE","BRANCH","CLOSE","downloadAs","filename","blob","Blob","downloadBlobAs","url","window","URL","createObjectURL","createElement","download","appendChild","click","removeChild","revokeObjectURL","readFileAsText","file","reader","FileReader","onloadend","result","readAsText","isSafari","userAgent","cloneSvgCanvas","isTransparent","isShowBorder","scale","key","querySelector","getPropertyValue","match","thisSVGHeight","elem","cloneNode","setAttribute","setProperty","tag","querySelectorAll","l","sheet","cssRules","rule","cssText","txt","s","textContent","prepend","getBase64FontFace","uris","alert","readBlobAsDataURL","readAsDataURL","svgEl","uniqueCharacters","Array","el","innerHTML","replace","fonts","load","fontFaceList","styleSheet","distinctCssRules","font","matchedRule","cssStyle","fontFamily","family","unicodeRange","ruleStyle","matchedStyle","cssRule","fetch","getAbsoluteUrl","fontResp","fontDataUri","ruleStyleSrc","test","isWait","svgW","baseVal","svgH","devicePixelRatio","ctx","getContext","clearRect","elStyle","getComputedStyle","dominantBaseline","textAnchor","reject","img","Image","onload","setTimeout","drawImage","toBlob","onerror","btoa","unescape","encodeURIComponent","outerHTML","DownloadModal","canvasToDownload","setCanvasToDownload","setIsTransparent","setIsShowBorder","setScale","format","setFormat","currentStationId","current_stn_idx","canvasOptions","scaleOptions","formatOptions","png","svg","disabledOptions","handleDownload","option","setLoadingProgress","stationIdListToDownload","zip","JSZip","index","waitForMs","replaceAll","removeAttribute","base64","generateAsync","zipData","stopLoading","DownloadActions","isDownloadModalOpen","setIsDownloadModalOpen","Button","rightIcon","Date","valueOf","UploadConfirmModal","uploadedParam","onOpenParam","TemplateModal","handleSelect","company","startLoading","isLazy","orientation","maxW","companyConfig","translateText","templateList","c","templates","Flex","py","px","template","justifyContent","overflow","OpenActions","isUploadModalOpen","setIsUploadModalOpen","isTemplateModalOpen","setIsTemplateModalOpen","setUploadedParam","uploadModalCloseRef","fileInputRef","handleUpload","event","target","files","paramStr","updatedParam","updateParam","handleOpenParam","rmgStorage","writeFile","AllCanvas","selectCanvas","reRenderApp","openFromNewParam","initParam","language","accept","current","HeaderActions","PageHeader","canvasSelections","step","zoomToScale","Environments","CONTRIBUTORS_ADMINS","CONTRIBUTORS_LIST","HelpModal","scrollBehavior","mb","my","open","cursor","contributor","flexGrow","WindowHeader","isHelpModalOpen","setIsHelpModalOpen","environment","hostname","DEV","UAT","PRD","handleChangeLanguage","changeLanguage","documentElement","lang","title","version","packageJson","popoverHeader","Trans","i18nKey","popoverBody","IconButton","addStation","position","newId","nanoid","newStationInfo","initStationInfo","nextStationList","verifyNewBranchEnds","every","AddStationModal","preposition","setPreposition","pivot","setPivot","setError","stationIdList","selectableStations","handleSelectWhere","before","after","addStationToExistingBranch","NewBranchModal","setTo","setPosition","fromError","setFromError","toError","setToError","newBranchEndStationOptions","isTwoSidedBranchOut","isYShare0","new","ext","handleSelectFrom","isInvalid","Boolean","handleSelectTo","StationAgGrid","GridTabs","isAddStationModalOpen","setIsAddStationModalOpen","isNewBranchModalOpen","setIsNewBranchModalOpen","display","setSelectedBranch","marginLeft","isIndeterminate","branchIndex","LoadingModal","isLoading","top","alignItems","zIndex","GlobalAlerts","globalAlerts","pl","pr","closeGlobalAlert","AppRoot","paramString","getPossibleStnIdsFromMainLine","possibleStnIdsFromMainLine","allEntries","results","entry","subResults","cartesian","getRowSpanForColine","coline","clId","cl","thisIndex","thatIndex","checkColineValidity","colineInMainLine","colineInBranches","getPossibleStnIdsFromBranchLine","terminals","deleteStnId","nextColine","setColineBulk","newColineInfo","interchangeIndex","nextColours","colineIdx","interchangeInfo","int"],"sourceRoot":""}