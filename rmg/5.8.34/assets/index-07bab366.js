import{R as He,i as v,a as xe,r as y,L as f,c as We,C as $e,M as Ue,b as Fe,d as Ve,e as Ye,u as je,f as Je,g as K,h as Z,j as c,k as Xe,l as i,m as qe,n as Ke,o as Ze,p as Qe,q as et,H as N,O as tt,s as E,t as u,I as g,v as S,V as nt,T as R,A as O,w as b,x as T,F as ot,y as at,B as rt,z,D as it,E as st,G as $,J as lt,K as L,N as ct,P as dt,Q as ht,S as pt,U as mt,W as D,X as ut,Y as U,Z as gt,_ as St,$ as ft,a0 as _t,a1 as wt,a2 as yt,a3 as F,a4 as Tt,a5 as At,a6 as Et,a7 as k,a8 as bt}from"./vendor-37640421.js";function Lo(){import("data:text/javascript,")}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerpolicy&&(r.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?r.credentials="include":a.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();const Nt={editStyle:"Edit style"},Ct={downloads:"Downloads",configFile:"Configuration file",images:"Images"},vt={invalidType:"Invalid file type! Only file in JSON format is accepted.",unknownError:"Unknown error occurred while parsing the uploaded file! Please try again."},Pt={title:"Download images",canvas:"Canvas",transparent:"Transparent background",showBorder:"Display border",scale:"Scale",format:"Format",pleaseSelect:"Please select...",png:"PNG",svg:"SVG (Web use)",downloadOne:"Download current station",downloadAll:"Download all stations"},Rt={title:"Select a template"},Ot={main:"Main line",branch:"Branch",external:"External line",addStation:"Add station",editLine:"Edit line section"},It={num:"Station code",zhName:"Chinese name",enName:"English name",interchange:"Interchanges",coline:"Tracks sharing"},Mt={header:"Edit style",layout:{title:"Layout",canvasHeight:"Canvas height",destinationWidth:"Destination width",runinWidth:"Running-in width",railmapWidth:"Rail map width",indoorWidth:"Indoor width",verticalPosition:"Vertical position",branchSpacing:"Branch spacing",branchSpacingLoop:"Vertical padding",padding:"Rail map padding",directionGzX:"Direction horizontal position",directionGzY:"Direction vertical position"},design:{title:"Design",zhLineName:"Chinese line name",enLineName:"English line name",lineNum:"Line code",direction:"Train direction",left:"Left",right:"Right",platformNum:"Platform number",psdNum:"Platform door number",panelType:"Panel type",gz1:"Line 1",gz28:"Line 2/8 (Panasonic)",gz2otis:"Line 2/8 (Otis)",gz3:"Line 3",gz1421:"2017 style",gz6:"2010 style",gzgf:"2016 style",gz4:"Line 4",gz5:"Line 5",sh:"Default",sh2020:"2020 (Beta)",nameDisplay:"Display station names",alternatively:"Alternatively",onOneSide:"On on side",flip:"Flip position",legacyDestination:"Display line name on direction sign",overrideTerminal:"Override terminal",terminalZhName:"Terminal Chinese name",terminalEnName:"Terminal English name"},note:{title:"Notes",add:"Add note",zhNote:"Chinese note",enNote:"English note",positionX:"Horizontal position",positionY:"Vertical position",border:"Display border",remove:"Remove note"},loop:{title:"Loop",isLoop:"Treat as loop line",isBank:"Display loop as a parallelogram in Rail map",leftRightFactor:"Left and right factor",bottomFactor:"Bottom factor"}},Lt={header:"Edit line section",branch:{title:"Branch"},coline:{title:"Tracks sharing",add:"Add sharing track"},action:{title:"Actions",autoNum:"Auto numbering stations",reverse:"Rotate entire line",flip:"Flip entire line"}},Dt={info:{title:"Station info",num:"Station code",zhName:"Chinese name",enName:"English name",zhSecondary:"Chinese secondary",enSecondary:"English secondary"},interchange:{title:"Interchanges",within:"Within-station interchange",outStation:"Out-of-station interchange",outSystem:"Out-of-system interchange",addGroup:"Add interchange group",noInterchanges:"No interchanges",zhName:"Chinese name",enName:"English name",add:"Add interchange",copy:"Copy interchange",remove:"Remove interchange"},branch:{type:"Type",through:"Through",nonThrough:"Non-through",firstStation:"First station",position:"Position",upper:"Upper",lower:"Lower"},more:{title:"More settings",service:"Train services",local:"Local",express:"Express",direct:"Direct",facility:"Nearby facility",none:"None",airport:"Airport",hsr:"High speed rail",railway:"National rail",disney:"Disneyland resort",pivot:"Pivot station on loop line",oneLine:"Display Chinese and English in one line",intPadding:"Padding between station name and interchange box",intPaddingApplyGlobal:"Apply current padding to all stations",apply:"Apply"},footer:{current:"Set as current",remove:"Remove"}},Bt={title:"Select a colour",example:"Example",palette:"From palette",custom:"Customise",city:"City theme",line:"Line theme",bg:"Background colour",fg:"Foreground colour",white:"White",black:"Black",seeAll:"See full library in "},zt={title:"Add station",where:"Target location",main:"Main line",branch:"Branch",external:"External line",preposition:"Preposition",before:"Before",after:"After",pivot:"Pivot station",pleaseSelect:"Please select...",error:"Failed to add station. Please check your selections and try again."},kt={title:"Create a new branch or external line",where:"Target location",new:"Create a new branch",ext:"Create an external line",from:"Between",to:"and",pleaseSelect:"Please select...",position:"Position",upper:"Upper",lower:"Lower"},Gt={title:"Station auto numbering",where:"Target location",main:"Main line",branch:"Branch",external:"External line",from:"Starting index",maxLength:"Number of digits",sort:"Sorting",asc:"Ascending",desc:"Descending"},Ht={all:"All",destination:"Destination",runin:"Running-in",railmap:"Rail map",indoor:"Indoor"},xt={mtr:"MTR",gzmtr:"Guangzhou Metro",shmetro:"Shanghai Metro"},Wt={HeaderActions:Nt,DownloadActions:Ct,OpenActions:vt,DownloadModal:Pt,TemplateModal:Rt,GridTabs:Ot,StationAgGrid:It,StyleSidePanel:Mt,BranchSidePanel:Lt,StationSidePanel:Dt,ColourModal:Bt,AddStationModal:zt,NewBranchModal:kt,AutoNumModal:Gt,CanvasType:Ht,RmgStyle:xt},$t={popoverHeader:"你正在浏览<1>{{environment}}</1>环境！",popoverBody:"这是一个测试环境，我们无法保证其稳定性和兼容性。请返回<2>生产环境</2>。"},Ut={editStyle:"风格化设置"},Ft={downloads:"下载",configFile:"配置文件",images:"图像"},Vt={invalidType:"无效的文件种类！只接受JSON种类的文件。",unknownError:"导入上传的文件时发生错误！请重试。"},Yt={title:"下载图像",canvas:"画面",transparent:"透明背景",showBorder:"显示边框",scale:"缩放级别",format:"文件种类",pleaseSelect:"请选择...",png:"PNG图像",svg:"SVG图像（网页用）",downloadOne:"下载当前车站",downloadAll:"下载所有车站"},jt={title:"选择模板"},Jt={main:"主线",branch:"支线",external:"外部路线",addStation:"添加车站",editLine:"路线段设置"},Xt={num:"车站编号",interchange:"换乘",coline:"共线"},qt={header:"风格化设置",layout:{title:"布局",canvasHeight:"画面高度",destinationWidth:"终点站牌宽度",runinWidth:"当前站名牌宽度",railmapWidth:"站台门路线图宽度",indoorWidth:"车內路线图宽度",verticalPosition:"垂直方向位置",branchSpacing:"支线间距",branchSpacingLoop:"垂直边距",padding:"路线图边距",directionGzX:"终点站水平方向位置",directionGzY:"终点站垂直方向位置"},design:{title:"设计",zhLineName:"路线中文名称",enLineName:"路线英文名称",lineNum:"路线编号",direction:"行车方向",left:"向左",right:"向右",platformNum:"站台编号",psdNum:"站台门编号",panelType:"站台门盖板样式",gz1:"1号线",gz28:"2/8号线（松下）",gz2otis:"2/8号线（奥的斯）",gz3:"3号线",gz1421:"2017样式",gz6:"2010样式",gzgf:"2016样式",gz4:"4号线",gz5:"5号线",sh:"默认",sh2020:"2020样式（预览版）",nameDisplay:"显示车站名称",alternatively:"交错显示",onOneSide:"同一侧",flip:"翻转位置",legacyDestination:"在终点站牌显示路线名称",overrideTerminal:"重写终点站",terminalZhName:"终点站中文名称",terminalEnName:"终点站英文名称"},note:{title:"备注",add:"添加备注",zhNote:"中文备注",enNote:"英文备注",positionX:"水平方向位置",positionY:"垂直方向位置",border:"显示边框",remove:"删除备注"},loop:{title:"环线",isLoop:"视为环线",isBank:"在站台门路线图中以平行四边形显示环线",leftRightFactor:"左右参数",bottomFactor:"底部参数"}},Kt={header:"路线段设置",branch:{title:"支线"},coline:{title:"共线",add:"添加共线"},action:{title:"操作",autoNum:"车站自动编号",reverse:"旋转整条路线",flip:"翻转整条路线"}},Zt={info:{title:"车站资讯",num:"车站编号",zhSecondary:"中文第二名称",enSecondary:"英文第二名称"},interchange:{title:"换乘",within:"同站换乘",outStation:"出站换乘",outSystem:"系统外换乘",addGroup:"添加换乘组合",noInterchanges:"非换乘站",add:"添加换乘",copy:"复制换乘",remove:"删除换乘"},branch:{type:"类型",through:"贯通（无需换乘）",nonThrough:"非贯通（需换乘）",firstStation:"首站",position:"位置",upper:"上方",lower:"下方"},more:{title:"更多设置",service:"列车类别",local:"普通车",express:"快车",direct:"直达车",facility:"附近设施",none:"无",airport:"机场",hsr:"高速铁路",railway:"国家铁路",disney:"迪士尼",pivot:"环线上的枢纽车站",oneLine:"在一行内展示中英文站名",intPadding:"车站名与换乘线路间的间距",intPaddingApplyGlobal:"将当前的间距应用到所有车站上",apply:"应用"},footer:{current:"设置为当前车站",remove:"删除"}},Qt={title:"选择颜色",example:"例子",palette:"颜色库",custom:"自定义",city:"城市主题",line:"路线主题",bg:"背景色",fg:"前景色",white:"白",black:"黑",seeAll:"查看完整"},en={title:"添加车站",where:"目标位置",main:"主线",branch:"支线",external:"外部路线",preposition:"相对位置",before:"先于",after:"后于",pivot:"定位车站",pleaseSelect:"请选择...",error:"添加车站失败，请检查您的选项后重试。"},tn={title:"添加支线或外部路线",where:"目标位置",new:"添加一条支线",ext:"添加一条外部路线",from:"介于",to:"和",pleaseSelect:"请选择...",position:"位置",upper:"上方",lower:"下方"},nn={title:"车站自动编号",where:"目标位置",main:"主线",branch:"支线",external:"外部路线",from:"起始编号",maxLength:"编号位数",sort:"排序方式",asc:"升序",desc:"降序"},on="支线",an="来自",rn="颜色",sn="贡献者",ln="项目",cn="风格",dn="未知",hn="查看",pn="访问",mn={all:"全部",destination:"终点站站牌",runin:"当前站名牌",railmap:"站台门路线图",indoor:"车内路线图"},un={mtr:"港铁",gzmtr:"广州地铁",shmetro:"上海地铁"},gn={WindowHeader:$t,HeaderActions:Ut,DownloadActions:Ft,OpenActions:Vt,DownloadModal:Yt,TemplateModal:jt,GridTabs:Jt,StationAgGrid:Xt,StyleSidePanel:qt,BranchSidePanel:Kt,StationSidePanel:Zt,ColourModal:Qt,AddStationModal:en,NewBranchModal:tn,AutoNumModal:nn,"All projects":"所有项目","Are you sure to remove station? You cannot undo this action.":"您确定刪除此车站吗？您不能撤销此操作。","Blank project":"空白项目","Branch left end":"支线左端","Branch on the left":"左侧支线","Branch on the right":"右侧支线","Branch right end":"支线右端","Branch spacing":"支线间距",Branches:on,by:an,"Canvas scale":"画面缩放级别","Chinese name":"中文名称",Colour:rn,"Connect to main line":"连接至主线","Contribution Wiki":"贡献者指南",Contributors:sn,"Core contributors":"核心贡献者","day ago":"天前","days ago":"天前","Disconnect from main line":"从主线断开","Edit project info":"编辑项目信息","Empty template":"空白模板","English name":"英文名称","Help and support":"帮助和支持","hour ago":"小時前","hours ago":"小時前","Import project":"导入项目","Just now":"刚刚","Last modified":"上次编辑","minute ago":"分钟前","minutes ago":"分钟前","No branches found":"未找到支线","Open selected":"打开选中项目","Open template":"打开模板","Paid area":"付费区换乘","Please select...":"请选择...",Project:ln,"Project selected is invalid or corrupted.":"选中的项目无效或已损坏。","Project name":"项目名称","Remove project":"删除项目","Remove station":"删除车站","Resource contributors":"资源贡献者","Resource Administrator":"资源管理者","Saved projects":"保存的项目","Select canvas":"选择画面",Style:cn,"Station Chinese name":"车站中文名称","Station English name":"车站英文名称","Station name":"车站名称","Target station":"目标车站","Terms and conditions":"条款及细则","Text on the left":"换乘文字靠左","Text on the right":"换乘文字靠右","Unable to connect to main line.":"无法连接至主线。","Unable to disconnect from main line.":"无法从主线断开。","Unable to remove this station.":"无法删除此车站。",Unknown:dn,View:hn,Visit:pn,"Visit GitHub":"访问GitHub","You have reached the maximum number of projects.":"您已到达项目数量上限。",", open an issue and join us today!":"，创建一个Issue和加入我们！",CanvasType:mn,RmgStyle:un},Sn={popoverHeader:"你正在瀏覽<1>{{environment}}</1>環境！",popoverBody:"這是一個測試環境，我們無法確保其穩定性及相容性。請返回<2>生產環境</2>。"},fn={editStyle:"風格化設定"},_n={downloads:"下載",configFile:"設定檔",images:"圖像"},wn={invalidType:"無效的檔案種類！只接受JSON種類的檔案。",unknownError:"讀取上載的檔案時發生錯誤！請重試。"},yn={title:"下載圖像",canvas:"畫面",transparent:"透明背景",showBorder:"顯示邊綫",scale:"縮放比例",format:"檔案種類",pleaseSelect:"請選擇...",png:"PNG影像",svg:"SVG影像（網頁用）",downloadOne:"下載當前車站",downloadAll:"下載所有車站"},Tn={title:"選擇範本"},An={main:"主綫",branch:"支綫",external:"外部路綫",addStation:"新增車站",editLine:"路綫段設定"},En={num:"車站編碼",interchange:"轉車",coline:"共綫"},bn={header:"風格化設定",layout:{title:"佈局",canvasHeight:"畫面高度",destinationWidth:"終點站牌闊度",runinWidth:"當前站名牌闊度",railmapWidth:"幕門路綫圖闊度",indoorWidth:"車內路綫圖闊度",verticalPosition:"垂直方向位置",branchSpacing:"支綫間距",branchSpacingLoop:"垂直邊距",padding:"路綫圖邊距",directionGzX:"終點站水平方向位置",directionGzY:"終點站垂直方向位置"},design:{title:"設計",zhLineName:"路綫中文名稱",enLineName:"路綫英文名稱",lineNum:"路綫編碼",direction:"行車方向",left:"向左",right:"向右",platformNum:"月台編號",psdNum:"幕門編號",panelType:"資訊板樣式",gz1:"1號線",gz28:"2/8號線（松下）",gz2otis:"2/8號線（奧的斯）",gz3:"3號線",gz1421:"2017樣式",gz6:"2010樣式",gzgf:"2016樣式",gz4:"4號線",gz5:"5號線",sh:"預設",sh2020:"2020樣式（預覽版）",nameDisplay:"顯示車站名稱",alternatively:"交錯顯示",onOneSide:"同一側",flip:"反轉位置",legacyDestination:"於終點站牌顯示路綫名稱",overrideTerminal:"覆寫終點站",terminalZhName:"終點站中文名稱",terminalEnName:"終點站英文名稱"},note:{title:"備註",add:"新增備註",zhNote:"中文備註",enNote:"英文備註",positionX:"水平方向位置",positionY:"垂直方向位置",border:"顯示邊線",remove:"移除備註"},loop:{title:"環綫",isLoop:"視作環綫",isBank:"在幕門路綫圖中以平行四邊形顯示環綫",leftRightFactor:"左右參數",bottomFactor:"底部參數"}},Nn={header:"路綫段設定",branch:{title:"支綫"},coline:{title:"共綫",add:"新增共綫"},action:{title:"動作",autoNum:"車站自動編碼",reverse:"旋轉整條路綫",flip:"反轉整條路綫"}},Cn={info:{title:"車站資訊",num:"車站編碼",zhSecondary:"中文第二名稱",enSecondary:"英文第二名稱"},interchange:{title:"轉車",within:"同站轉車",outStation:"出站轉車",outSystem:"系統外轉車",addGroup:"新增轉車組合",noInterchanges:"非轉車站",add:"新增轉綫",copy:"製作轉綫副本",remove:"移除轉綫"},branch:{type:"種類",through:"直通（無需轉車）",nonThrough:"非直通（需轉車）",firstStation:"首站",position:"位置",upper:"上方",lower:"下方"},more:{title:"更多設定",service:"列車類別",local:"普通",express:"快速",direct:"直達",facility:"周邊設施",none:"無",airport:"機場",hsr:"高速鐵路",railway:"國家鐵路",disney:"迪士尼",pivot:"環綫上的樞紐車站",oneLine:"在一行內展示中英文站名",intPadding:"車站名與換乘線路間的間距",intPaddingApplyGlobal:"將當前的間距應用到所有車站上",apply:"應用"},footer:{current:"設定為當前車站",remove:"移除"}},vn={title:"選擇顏色",example:"範例",palette:"顏色庫",custom:"自訂",city:"城市主題",line:"路綫主題",bg:"背景色",fg:"前景色",white:"白",black:"黑",seeAll:"檢視完整"},Pn={title:"新增車站",where:"目標位置",main:"主綫",branch:"支綫",external:"外部路綫",preposition:"相對位置",before:"先於",after:"後於",pivot:"定位車站",pleaseSelect:"請選擇...",error:"新增車站失敗，請檢查你的選擇後重試。"},Rn={title:"新增支綫或外部路綫",where:"目標位置",new:"新增一條支綫",ext:"新增一條外部路綫",from:"介乎於",to:"與",pleaseSelect:"請選擇...",position:"位置",upper:"上方",lower:"下方"},On={title:"車站自動編碼",where:"目標位置",main:"主綫",branch:"支綫",external:"外部路綫",from:"起始編碼",maxLength:"編碼位數",sort:"排序方式",asc:"升序",desc:"降序"},In="支綫",Mn="來自",Ln="顏色",Dn="貢獻者",Bn="專案",zn="風格",kn="未知",Gn="檢視",Hn="造訪",xn={all:"全部",destination:"終點站牌",runin:"當前站名牌",railmap:"幕門路綫圖",indoor:"車內路綫圖"},Wn={mtr:"港鐵",gzmtr:"廣州地鐵",shmetro:"上海地鐵"},$n={WindowHeader:Sn,HeaderActions:fn,DownloadActions:_n,OpenActions:wn,DownloadModal:yn,TemplateModal:Tn,GridTabs:An,StationAgGrid:En,StyleSidePanel:bn,BranchSidePanel:Nn,StationSidePanel:Cn,ColourModal:vn,AddStationModal:Pn,NewBranchModal:Rn,AutoNumModal:On,"All projects":"所有專案","Are you sure to remove station? You cannot undo this action.":"確定移除該車站嗎？此動作無法還原。","Blank project":"空白專案","Branch left end":"支綫左端","Branch on the left":"左側支綫","Branch on the right":"右側支綫","Branch right end":"支綫右端","Branch spacing":"支綫間距",Branches:In,by:Mn,"Canvas scale":"畫面縮放比例","Chinese name":"中文名稱",Colour:Ln,"Contribution Wiki":"貢獻者指南","Connect to main line":"連接至主綫",Contributors:Dn,"Core contributors":"核心貢獻者","day ago":"日前","days ago":"日前","Disconnect from main line":"从主綫斷開","Edit project info":"修改專案資訊","Empty template":"空白範本","English name":"英文名稱","Help and support":"幫助及支援","hour ago":"小时前","hours ago":"小时前","Import project":"讀入專案","Just now":"剛才","Last modified":"上次修改","minute ago":"分鐘前","minutes ago":"分鐘前","No branches found":"未找到支綫","Open selected":"開啟所選專案","Open template":"開啟範本","Paid area":"付費區轉車","Please select...":"請選擇...",Project:Bn,"Project selected is invalid or corrupted.":"所選專案無效或者已損壞。","Project name":"專案名稱","Remove project":"移除專案","Remove station":"移除車站","Resource contributors":"資源貢獻者","Resource Administrator":"資源管理者","Saved projects":"儲存的專案","Select canvas":"選擇畫面",Style:zn,"Station Chinese name":"車站中文名稱","Station English name":"車站英文名稱","Station name":"車站名稱","Target station":"目標車站","Terms and conditions":"條款及細則","Text on the left":"轉乘文字置左","Text on the right":"轉乘文字置右","Unable to connect to main line.":"無法連接至主綫。","Unable to disconnect from main line.":"無法從主綫斷開。","Unable to remove this station.":"無法移除該車站。",Unknown:kn,View:Gn,Visit:Hn,"Visit GitHub":"造訪GitHub","You have reached the maximum number of projects.":"你已到達專案數量上限。",", open an issue and join us today!":"，新增一個Issue並且加入我們！",CanvasType:xn,RmgStyle:Wn},Un=new He.Builder().withResource("en",Wt).withResource("zh-Hans",gn).withResource("zh-Hant",$n).build();v.use(xe).init({lng:y.getLanguage(),fallbackLng:{[f.ChineseCN]:[f.ChineseSimp,f.English],[f.ChineseHK]:[f.ChineseTrad,f.English],[f.ChineseTW]:[f.ChineseTrad,f.English],[f.ChineseTrad]:[f.ChineseHK,f.ChineseTW,f.English],default:[f.English]},resources:Un}).then(e=>{document.title=e("Rail Map Generator"),document.documentElement.lang=v.language});const Q=e=>{v.changeLanguage(e).then(),document.title=v.t("Rail Map Generator"),document.documentElement.lang=e};y.onLanguageChange(Q);const Bo=e=>{var t,n;return(n=(t=v.languages.map(o=>e[o]).find(o=>o!==void 0))!=null?t:e[f.English])!=null?n:"(Translation Error)"},Fn="modulepreload",Vn=function(e){return"/rmg/"+e},V={},Yn=function(t,n,o){if(!n||n.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=Vn(r),r in V)return;V[r]=!0;const s=r.endsWith(".css"),l=s?'[rel="stylesheet"]':"";if(!!o)for(let d=a.length-1;d>=0;d--){const _=a[d];if(_.href===r&&(!s||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${l}`))return;const p=document.createElement("link");if(p.rel=s?"stylesheet":Fn,s||(p.as="script",p.crossOrigin=""),p.href=r,document.head.appendChild(p),s)return new Promise((d,_)=>{p.addEventListener("load",d),p.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())};var G=(e=>(e.MTR="mtr",e.GZMTR="gzmtr",e.SHMetro="shmetro",e))(G||{}),I=(e=>(e.Destination="destination",e.RunIn="runin",e.RailMap="railmap",e.Indoor="indoor",e))(I||{});const zo={mtr:["destination","railmap"],gzmtr:["runin","railmap"],shmetro:["destination","runin","railmap","indoor"]};var ee=(e=>(e.CLOSE="CLOSE",e.STATION="STATION",e.STYLE="STYLE",e.BRANCH="BRANCH",e))(ee||{}),C=(e=>(e.left="left",e.right="right",e))(C||{}),te=(e=>(e.left="l",e.right="r",e))(te||{}),jn=(e=>(e.through="through",e.nonThrough="nonthrough",e))(jn||{}),Jn=(e=>(e.local="local",e.express="express",e.direct="direct",e))(Jn||{}),Xn=(e=>(e.airport="airport",e.disney="disney",e.hsr="hsr",e.railway="railway",e.none="",e))(Xn||{}),ne=(e=>(e.gz1="gz1",e.gz28="gz28",e.gz2otis="gz2otis",e.gz3="gz3",e.gz4="gz4",e.gz5="gz5",e.gz1421="gz1421",e.gz6="gz6",e.gzgf="gzgf",e))(ne||{}),qn=(e=>(e.sh="sh",e.sh2020="sh2020",e))(qn||{}),Kn=(e=>(e[e.PASSED=-1]="PASSED",e[e.CURRENT=0]="CURRENT",e[e.FUTURE=1]="FUTURE",e))(Kn||{}),Zn=(e=>(e.UP="UP",e.DOWN="DOWN",e.LEFT="LEFT",e.RIGHT="RIGHT",e))(Zn||{}),m=(e=>(e.CANVAS_TO_SHOW="rmg__canvasToShow",e.CANVAS_SCALE="rmg__canvasScale",e.PARAM="rmg__param",e.PARAM_BY_ID="rmg__param:",e.PARAM_REGISTRY="rmg__paramRegistry",e.PARAM_CONFIG_BY_ID="rmg__paramConfig:",e))(m||{}),oe=(e=>(e.APP_LOAD="APP_LOAD",e.STYLE_CHANGE="STYLE_CHANGE",e.OPEN_PARAM="OPEN_PARAM",e.NEW_PARAM="NEW_PARAM",e.UPLOAD_PARAM="UPLOAD_PARAM",e.OPEN_TEMPLATE="OPEN_TEMPLATE",e.REMOVE_PARAM="REMOVE_PARAM",e.UPDATE_PARAM_CONFIG="UPDATE_PARAM_CONFIG",e.ADD_STATION="ADD_STATION",e.REMOVE_STATION="REMOVE_STATION",e.ADD_BRANCH="ADD_BRANCH",e.AUTO_NUMBERING="AUTO_NUMBERING",e.REVERSE_STATIONS="REVERSE_STATIONS",e.CONNECT_BRANCH="CONNECT_BRANCH",e.DISCONNECT_BRANCH="DISCONNECT_BRANCH",e.SELECT_COLOUR="SELECT_COLOUR",e.DOWNLOAD_PARAM="DOWNLOAD_PARAM",e.DOWNLOAD_IMAGES="DOWNLOAD_IMAGES",e))(oe||{});const Qn={rmgStyle:G.MTR,paramConfig:void 0,canvasScale:1,canvasToShow:Object.values(I),sidePanelMode:ee.CLOSE,selectedStation:"linestart",selectedColine:void 0,selectedBranch:0,isShareTrackEnabled:void 0,globalAlerts:{},isLoading:void 0},ae=We({name:"app",initialState:Qn,reducers:{setParamConfig:(e,t)=>{e.paramConfig=t.payload},updateParamModifiedTime:(e,t)=>{e.paramConfig&&(e.paramConfig.lastModified=t.payload)},setCanvasScale:(e,t)=>{e.canvasScale=t.payload},setCanvasToShow:(e,t)=>{e.canvasToShow=t.payload},setSidePanelMode:(e,t)=>{e.sidePanelMode=t.payload},setSelectedStation:(e,t)=>{e.selectedStation=t.payload},setSelectedColine:(e,t)=>{e.selectedColine=t.payload},setSelectedBranch:(e,t)=>{e.selectedBranch=t.payload},setIsShareTrackEnabled:(e,t)=>{e.isShareTrackEnabled=t.payload},setGlobalAlert:(e,t)=>{const{status:n,message:o,url:a,linkedApp:r}=t.payload;e.globalAlerts[n]={message:o,url:a,linkedApp:r}},closeGlobalAlert:(e,t)=>{delete e.globalAlerts[t.payload]},startLoading:e=>{e.isLoading=-1},setLoadingProgress:(e,t)=>{e.isLoading=t.payload},stopLoading:e=>{e.isLoading=void 0}}}),{setParamConfig:ko,updateParamModifiedTime:eo,setCanvasScale:Y,setCanvasToShow:j,setSidePanelMode:Go,setSelectedStation:Ho,setSelectedColine:xo,setSelectedBranch:Wo,setIsShareTrackEnabled:$o,setGlobalAlert:Uo,closeGlobalAlert:Fo,startLoading:Vo,setLoadingProgress:Yo,stopLoading:jo}=ae.actions,to=ae.reducer,no=e=>{const t=["linestart"],n=[["linestart"]];let o=0;for(;t.length;){let a=t.shift(),r=n[o].slice(-1)[0]||null;for(r&&a!=="linestart"?n[o].push(a):n[o]=[a];a!=="lineend";){r=a;const s=e[r].children;switch(s.length){case 1:a=s[0];break;case 2:{const l=e[r].branch.right[1];e[r].branch.right[0]==="through"?(n.push([a]),t.push(l)):o===0&&(n.push([r]),t.push(l)),a=s.filter(h=>h!==l)[0];break}}if(n[o].push(a),r===e[a].branch.left[1])break}o++}return n},oo=e=>{const t=["linestart"],n=[["linestart"]];let o=0;for(;t.length;){let a=t.shift(),r=n[o].slice(-1)[0]||null;for(r&&a!=="linestart"?n[o].push(a):n[o]=[a];a!=="lineend";){r=a;const s=e[r].children;switch(s.length){case 1:a=s[0];break;case 2:{const l=e[r].branch.right[1];e[r].branch.right[0]==="through"?(n.push(n[o].slice()),t.push(l)):o===0&&(n.push([r]),t.push(l)),a=s.filter(h=>h!==l)[0];break}}if(n[o].push(a),r===e[a].branch.left[1]&&e[a].branch.left[0]==="nonthrough")break}o++}return n},ao=e=>e.length===1?e[0].slice(1,-1):e.reduce((t,n)=>{const o=t.indexOf(n[n.length-1]);return[...t.slice(0,o),...n.slice(1),...t.slice(o+1)]},["lineend"]).slice(0,-1),re="SET_DEPS_STR",ie="SET_BRANCHES",se="SET_ROUTES",le="SET_TPO",ro=e=>({type:re,depsStr:e}),io=e=>({type:ie,branches:e}),so=e=>({type:se,routes:e}),lo=e=>({type:le,tpo:e}),co=()=>(e,t)=>{const n=t().param.stn_list,o=Object.entries(n).map(([a,r])=>a+r.parents.toString()+r.children.toString()+JSON.stringify(r.branch)).join("");return e(ro(o)),o},ho=()=>(e,t)=>{console.log("Re-calculating branches...");const n=t().param.stn_list,o=no(n);return e(io(o)),o},po=()=>(e,t)=>{console.log("Re-calculating routes...");const n=t().param.stn_list;e(so(oo(n)))},H=()=>(e,t)=>{const n=t().helper.depsStr,o=e(co());if(n!==o){e(po());const a=t().helper.branches,r=e(ho());a.toString()!==r.toString()&&(console.log("Re-calculating topology ordering..."),e(lo(ao(r))))}},ce="SET_FULL_PARAM",de="SET_STYLE",he="SET_SVG_HEIGHT",pe="SET_SVG_WIDTH",me="SET_Y_PERCENTAGE",ue="SET_BRANCH_SPACING_PCT",ge="SET_PADDING_PERCENTAGE",Se="SET_DIRECTION_INDICATOR_X",fe="SET_DIRECTION_INDICATOR_Y",_e="SET_THEME",we="SET_LINE_NAME",ye="SET_DIRECTION",Te="SET_PLATFORM",Ae="SET_LINE_NUM",Ee="SET_PSD_NUM",be="SET_PANEL_TYPE",Ne="SET_NOTES",Ce="SET_NAME_POSITION",ve="SET_CUSTOMISED_MTR_DESTINATION",Pe="SET_LOOP",Re="SET_LOOP_INFO",Oe="SET_CURRENT_STATION",Ie="SET_STATION",Me="SET_STATIONS_BULK",Le="SET_COLINE_BULK",Jo=e=>t=>{t({type:ce,fullParam:e}),t(H())},Xo=e=>({type:he,svgHeight:e}),qo=(e,t)=>({type:pe,svgWidth:e,canvas:t}),Ko=e=>({type:de,style:e}),Zo=e=>({type:me,yPercentage:e}),Qo=e=>({type:ue,branchSpacingPct:e}),ea=e=>({type:ge,paddingPercentage:e}),ta=e=>({type:Se,directionIndicatorX:e}),na=e=>({type:fe,directionIndicatorY:e}),oa=e=>({type:_e,theme:e}),aa=e=>({type:we,lineName:e}),ra=e=>({type:ye,direction:e}),ia=e=>({type:Te,platform:e}),sa=e=>({type:Ae,lineNum:e}),la=e=>({type:Ee,psdNum:e}),ca=e=>({type:be,panelType:e}),x=e=>({type:Ne,notes:e}),da=()=>(e,t)=>{const n=t().param.notesGZMTR;e(x(n.concat([["","",10,10,!1]])))},ha=(e,t)=>(n,o)=>{const a=o().param.notesGZMTR;n(x(a.map((r,s)=>s===e?t:r)))},pa=e=>(t,n)=>{const o=n().param.notesGZMTR;t(x(o.filter((a,r)=>r!==e)))},De=e=>({type:Ce,namePosition:e}),ma=e=>(t,n)=>{const o=n().param.namePosMTR;t(De({...o,isStagger:e}))},ua=()=>(e,t)=>{const n=t().param.namePosMTR;e(De({...n,isFlip:!n.isFlip}))},Be=e=>({type:ve,customisedMtrDestination:e}),ga=e=>t=>{t(M({bank:!0,left_and_right_factor:0,bottom_factor:1})),t({type:Pe,loop:e})},M=e=>({type:Re,loop_info:e}),Sa=e=>(t,n)=>{const o=n().param.loop_info;t(M({...o,bank:e}))},fa=e=>(t,n)=>{const o=n().param.loop_info;t(M({...o,left_and_right_factor:e}))},_a=e=>(t,n)=>{const o=n().param.loop_info;t(M({...o,bottom_factor:e}))},wa=e=>(t,n)=>{const o=n().param.customiseMTRDest;t(Be({...o,isLegacy:e}))},ya=e=>(t,n)=>{const o=n().param.customiseMTRDest;t(Be({...o,terminal:e}))},Ta=e=>t=>{t({type:Oe,currentStation:e})},w=(e,t)=>n=>{n({type:Ie,stationId:e,station:t}),n(H())},P=e=>t=>{t({type:Me,stations:e}),t(H())},Aa=e=>({type:Le,coline:e}),Ea=(e=!1)=>(t,n)=>{const{stn_list:o}=n().param,a=Object.keys(o).reduce((r,s)=>({...r,[s]:(l=>{switch(l){case"linestart":return{...o.lineend,parents:[],children:e?o.lineend.parents:o.lineend.parents.slice().reverse(),branch:{left:[],right:o.lineend.branch.left}};case"lineend":return{...o.linestart,parents:e?o.linestart.children:o.linestart.children.slice().reverse(),children:[],branch:{left:o.linestart.branch.right,right:[]}};default:{const h=o[l].children.map(d=>d==="linestart"?"lineend":d==="lineend"?"linestart":d),p=o[l].parents.map(d=>d==="linestart"?"lineend":d==="lineend"?"linestart":d);return{...o[l],parents:e?h:h.reverse(),children:e?p:p.reverse(),branch:{left:o[l].branch.right,right:o[l].branch.left}}}}})(s)}),{});t(P(a))},ba=(e,t)=>(n,o)=>{const a=o().param.stn_list[e];n(w(e,{...a,name:t}))},Na=(e,t)=>(n,o)=>{const a=o().param.stn_list[e];n(w(e,{...a,secondaryName:t}))},Ca=(e,t)=>(n,o)=>{const a=o().param.stn_list[e];n(w(e,{...a,num:t}))},va=(e,t,n)=>(o,a)=>{const r=a().param.stn_list[e],s=r.transfer.info.map(l=>l.slice());if(s.length>t)s[t].push(n);else{for(let l=s.length;l<t;l++)s[l]=[];s[t]=[n]}o(w(e,{...r,transfer:{...r.transfer,info:s}}))},Pa=(e,t,n)=>(o,a)=>{const r=a().param.stn_list[e];if(r.transfer.info.length>t&&r.transfer.info[t].length>n){const s=r.transfer.info.map((l,h)=>h===t?l.filter((p,d)=>d!==n):l);o(w(e,{...r,transfer:{...r.transfer,info:s}}))}},Ra=(e,t,n,o)=>(a,r)=>{const s=r().param.stn_list[e];if(s.transfer.info.length>t&&s.transfer.info[t].length>n){const l=s.transfer.info.map((h,p)=>p===t?h.map((d,_)=>_===n?[0,1,2,3,4,5].map(A=>o[A]===void 0?d[A]:o[A]):d):h);a(w(e,{...s,transfer:{...s.transfer,info:l}}))}},Oa=(e,t,n)=>(o,a)=>{const r=a().param.stn_list[e],s=r.transfer.osi_names.map(l=>l.slice());if(s.length>t)s[t]=n;else{for(let l=s.length;l<t;l++)s[l]=["車站名","Stn Name"];s[t]=n}o(w(e,{...r,transfer:{...r.transfer,osi_names:s}}))},Ia=(e,t)=>(n,o)=>{const a=o().param.stn_list[e];n(w(e,{...a,transfer:{...a.transfer,tick_direc:t}}))},Ma=(e,t)=>(n,o)=>{const a=o().param.stn_list[e];n(w(e,{...a,transfer:{...a.transfer,paid_area:t}}))},La=(e,t,n)=>(o,a)=>{const r=a().param.stn_list[e];o(w(e,{...r,branch:{...r.branch,[t]:[n,r.branch[t][1]]}}))},Da=(e,t,n)=>(o,a)=>{var l,h,p;const r=a().helper.branches,s={stnId:e,direction:t,first:n};if(t===C.left){const d=(l=r.slice(1).find(_=>_.slice(-1)[0]===e))==null?void 0:l[0];if(d){const _=r[0][r[0].indexOf(d)+1];o(J([s,{stnId:d,direction:C.right,first:_}]))}}else{const d=(p=(h=r.slice(1).find(_=>_[0]===e))==null?void 0:h.slice(-1))==null?void 0:p[0];if(d){const _=r[0][r[0].indexOf(d)-1];o(J([s,{stnId:d,direction:C.left,first:_}]))}}},J=e=>(t,n)=>{const{stn_list:o}=n().param;t(P({...o,[e[0].stnId]:{...o[e[0].stnId],branch:{...o[e[0].stnId].branch,[e[0].direction]:[o[e[0].stnId].branch[e[0].direction][0],e[0].first]}},[e[1].stnId]:{...o[e[1].stnId],branch:{...o[e[1].stnId].branch,[e[1].direction]:[o[e[1].stnId].branch[e[1].direction][0],e[1].first]}}}))},Ba=(e,t)=>(n,o)=>{var r,s,l;const a=o().helper.branches;if(t===C.left){const h=(r=a.slice(1).find(p=>p.slice(-1)[0]===e))==null?void 0:r[0];h&&n(X(e,h))}else{const h=(l=(s=a.slice(1).find(p=>p[0]===e))==null?void 0:s.slice(-1))==null?void 0:l[0];h&&n(X(h,e))}},X=(e,t)=>(n,o)=>{const{stn_list:a}=o().param;n(P({...a,[e]:{...a[e],parents:a[e].parents.slice().reverse()},[t]:{...a[t],children:a[t].children.slice().reverse()}}))},za=(e,t)=>(n,o)=>{const a=o().param.stn_list[e];n(w(e,{...a,facility:t}))},ka=(e,t)=>(n,o)=>{const a=o().param.stn_list[e];n(w(e,{...a,services:t}))},Ga=(e,t)=>(n,o)=>{const a=o().param.stn_list[e];n(w(e,{...a,loop_pivot:t}))},Ha=(e,t)=>(n,o)=>{const a=o().param.stn_list[e];n(w(e,{...a,one_line:t}))},xa=(e,t)=>(n,o)=>{const a=o().param.stn_list[e];n(w(e,{...a,int_padding:t}))},Wa=e=>(t,n)=>{const a=n().param.stn_list[e].int_padding,r=JSON.parse(JSON.stringify(n().param.stn_list));Object.values(r).forEach(s=>{s.int_padding=a}),t(P(r))},$a=(e,t,n=2,o="asc")=>(a,r)=>{var p;const s=r().param.stn_list,h=(p=r().helper.branches[e])==null?void 0:p.slice(1,-1);if(h){const d=h.reduce((_,A,Ge)=>({..._,[A]:{...s[A],num:(t+Ge*(o==="desc"?-1:1)).toString().padStart(n,"0")}}),s);a(P(d))}},mo={svgWidth:{destination:100,runin:100,railmap:100,indoor:100},svg_height:100,style:G.MTR,y_pc:50,padding:10,branchSpacingPct:10,direction:te.left,platform_num:"1",theme:[$e.Hongkong,"twl","#E2231A",Ue.white],line_name:["線","line"],current_stn_idx:"",stn_list:{},namePosMTR:{isStagger:!0,isFlip:!0},customiseMTRDest:{isLegacy:!1,terminal:!1},line_num:"1",psd_num:"1",info_panel_type:ne.gz1,notesGZMTR:[],direction_gz_x:0,direction_gz_y:0,coline:{},loop:!1,loop_info:{bank:!0,left_and_right_factor:1,bottom_factor:1}};function uo(e=mo,t){switch(t.type){case ce:return t.fullParam;case de:return{...e,style:t.style};case he:return{...e,svg_height:t.svgHeight};case pe:return{...e,svgWidth:{...e.svgWidth,[t.canvas]:t.svgWidth}};case me:return{...e,y_pc:t.yPercentage};case ue:return{...e,branchSpacingPct:t.branchSpacingPct};case ge:return{...e,padding:t.paddingPercentage};case Se:return{...e,direction_gz_x:t.directionIndicatorX};case fe:return{...e,direction_gz_y:t.directionIndicatorY};case _e:return{...e,theme:t.theme};case we:return{...e,line_name:t.lineName};case ye:return{...e,direction:t.direction};case Te:return{...e,platform_num:t.platform};case Ae:return{...e,line_num:t.lineNum};case Ee:return{...e,psd_num:t.psdNum};case be:return{...e,info_panel_type:t.panelType};case Ne:return{...e,notesGZMTR:t.notes};case Ce:return{...e,namePosMTR:t.namePosition};case ve:return{...e,customiseMTRDest:t.customisedMtrDestination};case Oe:return{...e,current_stn_idx:t.currentStation};case Ie:return{...e,stn_list:{...e.stn_list,[t.stationId]:t.station}};case Me:return{...e,stn_list:t.stations};case Le:return{...e,coline:t.coline};case Pe:return{...e,loop:t.loop};case Re:return{...e,loop_info:t.loop_info};default:return e}}const go={depsStr:"",branches:[],routes:[],tpo:[]};function So(e=go,t){switch(t.type){case re:return{...e,depsStr:t.depsStr};case ie:return{...e,branches:t.branches};case se:return{...e,routes:t.routes};case le:return{...e,tpo:t.tpo};default:return e}}const fo=Fe({app:to,param:uo,helper:So}),ze=Ve(),W=Ye({reducer:fo,middleware:e=>e().prepend(ze.middleware)}),Ua=()=>je(),Fa=Je,B=ze.startListening;window.rmgStore=W;const _o=["52PD","linchen1965"],wo=["jealousyge","Jay20081229","clearng-kly","Dingdong2334","C1P918R","AnDanJuneUnderline","GrassRabbit1410","xiany114514","Andy1782010","Thomastzc","Tianxiu11111"];function yo(e){const{isOpen:t,onClose:n}=e,{t:o}=K(),a=Z("primary.500","primary.300");return c(Xe,{isOpen:t,onClose:n,size:"xl",scrollBehavior:"inside",children:[i(qe,{}),c(Ke,{children:[i(Ze,{children:o("Help and support")}),i(Qe,{}),c(et,{children:[i(N,{as:"h5",size:"sm",mb:2,children:o("Terms and conditions")}),c(tt,{children:[c(E,{children:["The layout of the elements on the signage or rail map, is designed by"," ",c(u,{color:a,href:"https://www.gzmtr.com/",isExternal:!0,children:["Guangzhou Metro Group ",i(g,{as:S})]}),", ",c(u,{color:a,href:"https://www.mtr.com.hk/",isExternal:!0,children:["MTR Corporation ",i(g,{as:S})]})," or ",c(u,{color:a,href:"https://www.shmetro.com/",isExternal:!0,children:["Shanghai Shentong Metro Group ",i(g,{as:S})]}),", depending on your selection. You shall grant appropriate permit or license from the relevant company above before using the generated images for commercial purposes, if it is required to do so.",i("br",{}),"標誌版或路線圖之元素之佈局，基於你所選擇之風格，為",c(u,{color:a,href:"https://www.gzmtr.com/",isExternal:!0,children:["廣州地鐵集團公司 ",i(g,{as:S})]}),"，",c(u,{color:a,href:"https://www.mtr.com.hk/",isExternal:!0,children:["港鐵公司 ",i(g,{as:S})]}),"或",c(u,{color:a,href:"https://www.shmetro.com/",isExternal:!0,children:["上海申通地鐵集團 ",i(g,{as:S})]}),"所設計。在產生之圖像用作商業用途前，你應向相關公司取得適當之許可證或授權。"]}),c(E,{children:["The elements including shapes and lines on the image are drawn by"," ",c(u,{color:a,href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",i(g,{as:S})]})," and ",c(u,{color:a,href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",i(g,{as:S})]}),", based on the design standards or rules of the companies listed above. You may use them for any purposes, but it is recommended to state the name and the link of software alongside.",i("br",{}),"圖像之元素，包括圖形及線條，均由",c(u,{color:a,href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",i(g,{as:S})]}),"及",c(u,{color:a,href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",i(g,{as:S})]}),"基於上述公司之設計標準或準則繪製。你可將其用於任何目的，但我們建議你於使用同時附以我們之名字以及該軟件之連結。"]}),c(E,{children:["Due to copyright, licensing and other legal restrictions, Rail Map Generator uses"," ",c(u,{color:a,href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["GenYoMin provided by ButTaiwan ",i(g,{as:S})]}),", and Vegur instead of MTRSung and Myriad Pro respectively to display and generate MTR-style signage. You shall grant appropriate permit or license from the manufacturers before using those generated images for commercial purposes.",i("br",{}),"由於著作權及其他法律限制，鐵路路線圖產生器使用",c(u,{color:a,href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["由ButTaiwan提供之源樣明體 ",i(g,{as:S})]}),"，以及Vegur，以代替港鐵樣式標誌牌所使用之地鐵宋及Myriad Pro。在產生之圖像用作商業用途前，你應向字型生產廠商取得適當之許可證或授權。"]}),c(E,{children:["The exported images in PNG or SVG format may be modified, published, or used for other purposes, under the conditions above.",i("br",{}),"輸出之PNG或SVG種類之圖像可基於上述條款，用於修改、發行或其他用途。"]}),c(E,{children:["All flag emojis shown on Windows platforms are designed by"," ",c(u,{color:a,href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",i(g,{as:S})]})," ","– the open-source emoji and icon project. License:",c(u,{color:a,href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",i(g,{as:S})]}),i("br",{}),"於Windows作業系統上顯示之旗幟Emoji為",c(u,{color:a,href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",i(g,{as:S})]}),"所設計。許可證：",c(u,{color:a,href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",i(g,{as:S})]})]}),c(E,{children:["We reserve the rights, without prior notice, to modify, add, or remove these terms. The Chinese translation is for reference only. In case of any discrepancy between the English version and the Chinese version, the English version shall prevail.",i("br",{}),"我們保留修改、新增或移除上述條款之權利，而無需另行通知。中文譯本僅供參考，文義如與英文有歧異，概以英文本為準。"]})]}),i(N,{as:"h5",size:"sm",mt:3,mb:2,children:o("Contributors")}),i(N,{as:"h6",size:"xs",my:1,children:o("Core contributors")}),c(nt,{children:[c(R,{size:"lg",minW:"80%",onClick:()=>window.open("https://github.com/wongchito","_blank"),cursor:"pointer",children:[i(O,{src:"https://github.com/wongchito.png",size:"lg",my:2,ml:-1,mr:2}),c(b,{display:"block",children:[i(T,{fontSize:"lg",fontWeight:"bold",mb:1,children:"Chito Wong"}),i(T,{fontSize:"sm",children:"Project initiator"}),i(T,{fontSize:"sm",children:"Author of MTR and Guangzhou Metro styles"})]})]}),c(R,{size:"lg",minW:"80%",onClick:()=>window.open("https://github.com/thekingofcity","_blank"),cursor:"pointer",children:[i(O,{src:"https://github.com/thekingofcity.png",size:"lg",my:2,ml:-1,mr:2}),c(b,{display:"block",children:[i(T,{fontSize:"lg",fontWeight:"bold",mb:1,children:"thekingofcity"}),i(T,{fontSize:"sm",children:"Author of Shanghai Metro style"}),i(T,{fontSize:"sm",children:"Desktop version (Electron) maintainer"})]})]})]}),i(N,{as:"h6",size:"xs",my:1,children:o("Resource contributors")}),c(ot,{wrap:"wrap",children:[_o.map(r=>c(R,{size:"lg",mb:1,mr:1,flex:"100%",onClick:()=>window.open(`https://github.com/railmapgen/rmg/issues?q=is:issue+author:${r}`,"_blank"),cursor:"pointer",children:[i(O,{src:`https://github.com/${r}.png`,size:"xs",ml:-1,mr:2}),i(b,{children:r}),i(b,{flexGrow:1}),i(b,{children:i(T,{fontSize:"sm",children:o("Resource Administrator")})})]},r)),wo.map(r=>c(R,{size:"lg",mb:1,mr:1,onClick:()=>window.open(`https://github.com/railmapgen/rmg/issues?q=is:issue+author:${r}`,"_blank"),cursor:"pointer",children:[i(O,{src:`https://github.com/${r}.png`,size:"xs",ml:-1,mr:2}),i(b,{children:r})]},r))]}),c(T,{children:[o("Visit")," ",c(u,{color:a,href:"https://github.com/railmapgen/rmg/wiki/How-to-add-color-palette-and-line-templates",isExternal:!0,children:[o("Contribution Wiki")," ",i(g,{as:S})]}),o(", open an issue and join us today!")]})]}),i(at,{children:i(rt,{colorScheme:"primary",onClick:()=>window.open("https://github.com/railmapgen/rmg","_blank"),children:o("Visit GitHub")})})]})]})}const To="/rmg/assets/rmp-d1ce425a.png";function Ao(){const{t:e}=K(),t=Z("primary.500","primary.300"),n=y.getEnv(),o=y.getAppVersion(),a=c(U,{i18nKey:"WindowHeader.popoverHeader",environment:n,children:["You're on ",{environment:n}," environment!"]}),r=c(U,{i18nKey:"WindowHeader.popoverBody",children:["This is a testing environment where we don't guarantee the stability and compatibility. Please switch back to"," ",c(u,{color:t,href:"https://railmapgen.github.io"+window.location.pathname,isExternal:!0,children:["Production environment ",i(g,{as:S})]}),"."]}),s=()=>{y.isStandaloneWindow()?window.open("/rmp","_blank"):y.openApp("rmp")},l=d=>{y.setLanguage(d),Q(d)},[h,p]=z.useState(!1);return c(it,{children:[i(N,{as:"h4",size:"md",children:e("Rail Map Generator")}),i(st,{environment:n,version:o,popoverHeader:n===$.PRD?void 0:a,popoverBody:n===$.PRD?void 0:r}),c(lt,{ml:"auto",children:[i(L,{size:"sm",variant:"ghost","aria-label":"Open RMP",icon:i(ct,{src:To,width:"3.5",height:"3.5"}),onClick:s}),c(dt,{children:[i(ht,{as:L,icon:i(pt,{}),variant:"ghost",size:"sm"}),c(mt,{children:[i(D,{onClick:()=>l(f.English),children:"English"}),i(D,{onClick:()=>l(f.ChineseSimp),children:"简体中文"}),i(D,{onClick:()=>l(f.ChineseTrad),children:"繁體中文"})]})]}),i(L,{size:"sm",variant:"ghost","aria-label":"Help",icon:i(ut,{}),onClick:()=>p(!0)})]}),i(yo,{isOpen:h,onClose:()=>p(!1)})]})}const Eo=z.lazy(()=>Yn(()=>import("./app-router-80dcb096.js").then(e=>e.a),["assets/app-router-80dcb096.js","assets/vendor-37640421.js"]));function bo(){const e="/rmg/";return i(z.StrictMode,{children:i(gt,{store:W,children:i(St,{theme:ft,children:i(_t,{basename:e,children:c(wt,{children:[i(Ao,{}),c(yt,{children:[i(F,{path:"/",element:i(Tt,{suspenseFallback:i(At,{isIndeterminate:!0}),allowReset:!0,children:i(Eo,{})})}),i(F,{path:"*",element:i(Et,{to:"/"})})]})]})})})})})}Boolean(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function No(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}const Co=()=>{const e=[];return ke(t=>t.startsWith(m.PARAM_CONFIG_BY_ID),(t,n)=>{const o=t.slice(m.PARAM_CONFIG_BY_ID.length);if(n)try{const a=JSON.parse(n);e.push({...a,id:o})}catch(a){e.push({id:o})}else e.push({id:o})}),console.log("loadParamRegistry():: Found param config in localStorage",e.map(t=>t.id)),e},vo=()=>{let e=window.localStorage.getItem(m.PARAM);if(e===null&&(e=window.localStorage.getItem("rmgParam"),window.localStorage.removeItem("rmgParam"),window.localStorage.removeItem("rmgParamRedux")),e!==null){const t=k();console.log("upgradeLegacyParam():: Found legacy param. Assigning ID:",t),window.localStorage.setItem(m.PARAM_BY_ID+t,e),window.localStorage.removeItem(m.PARAM)}},Va=()=>{const e=Co(),t=[];return ke(n=>n.startsWith(m.PARAM_BY_ID),n=>{const o=n.slice(m.PARAM_BY_ID.length),a=e.find(r=>r.id===o);a?t.push(a):t.push({id:o})}),console.log("getParamRegistry():: Actual param found in localStorage",t.map(n=>n.id)),e.filter(n=>t.every(o=>o.id!==n.id)).forEach(n=>window.localStorage.removeItem(m.PARAM_CONFIG_BY_ID+n.id)),t},ke=(e,t)=>{let n=0;for(;n<window.localStorage.length;){const o=window.localStorage.key(n);o!==null&&e(o)&&t(o,window.localStorage.getItem(o)),n++}},Ya=(e,t)=>{const n=k();return window.localStorage.setItem(m.PARAM_BY_ID+n,e),window.localStorage.setItem(m.PARAM_CONFIG_BY_ID+n,JSON.stringify({name:t,lastModified:Date.now()})),n},ja=async e=>{const t=e.split("/").at(-1);try{const n=await fetch(e);if(n.ok){const o=await n.text(),a=k();return window.localStorage.setItem(m.PARAM_BY_ID+a,o),window.localStorage.setItem(m.PARAM_CONFIG_BY_ID+a,JSON.stringify({name:t,lastModified:Date.now()})),a}else return console.warn("Failed to download param"),null}catch(n){return console.warn("Failed to download param.",n),null}},Po=e=>{try{let t=window.localStorage.getItem(m.CANVAS_SCALE);if(t==null){const o=window.localStorage.getItem("rmgScale");o!=null&&(t=o,console.log("Migrating canvas scale from old key..."),window.localStorage.setItem(m.CANVAS_SCALE,t),window.localStorage.removeItem("rmgScale"))}const n=Number(t);n>=.1&&e.dispatch(Y(n))}catch(t){console.warn("Error in reading canvas scale. Initiating as 1...",t),e.dispatch(Y(1))}},Ro=e=>{try{let t=window.localStorage.getItem(m.CANVAS_TO_SHOW);if(t==null){const n=window.localStorage.getItem("rmgCanvas");n!=null&&(t=n,console.log("Migrating canvas to show from old key..."),window.localStorage.setItem(m.CANVAS_TO_SHOW,t),window.localStorage.removeItem("rmgCanvas"))}if(t!==null){if(Object.values(I).includes(t)){e.dispatch(j([t]));return}const n=JSON.parse(t);if(Array.isArray(n)){e.dispatch(j(n));return}}}catch(t){console.warn("Error in reading canvas to show. Initiating as all...",t)}},Oo=e=>{vo(),Po(e),Ro(e),B({predicate:(t,n,o)=>n.app.canvasScale.toString()!==o.app.canvasScale.toString(),effect:(t,n)=>{window.localStorage.setItem(m.CANVAS_SCALE,n.getState().app.canvasScale.toString())}}),B({predicate:(t,n,o)=>n.app.canvasToShow.toString()!==o.app.canvasToShow.toString(),effect:(t,n)=>{window.localStorage.setItem(m.CANVAS_TO_SHOW,JSON.stringify(n.getState().app.canvasToShow))}}),B({predicate:(t,n,o)=>JSON.stringify(n.param)!==JSON.stringify(o.param),effect:Io})},Io=(e,t)=>{var a;const{id:n,...o}=(a=t.getState().app.paramConfig)!=null?a:{};if(n){const r=window.localStorage.getItem(m.PARAM_BY_ID+n),s=JSON.stringify(t.getState().param);if(r!==s){console.log("ListenerMiddleware:: Writing param and paramConfig to localStorage, ID="+n),window.localStorage.setItem(m.PARAM_BY_ID+n,s);const l=Date.now();t.dispatch(eo(l)),window.localStorage.setItem(m.PARAM_CONFIG_BY_ID+n,JSON.stringify({...o,lastModified:l}))}else console.log("ListenerMiddleware:: Do not write to localStorage as no changes in param, ID="+n)}};No();document.head.append(...["share",...Object.values(I)].map(e=>{const t=document.createElement("link");return t.rel="stylesheet",t.id="css_"+e,t}));let q;const Mo=()=>{q=bt(document.getElementById("root")),q.render(i(bo,{}))};y.ready().then(()=>{Oo(W),Mo(),y.injectCss(),y.event(oe.APP_LOAD,{isStandaloneWindow:y.isStandaloneWindow})}).catch(e=>{const t=document.querySelector("#root");t&&(t.innerHTML=`<div>
                Failed to load Rail Map Generator!
                <br />
                ${e.toString()}
                <br />
                Please contact us in 
                <a href="https://github.com/railmapgen/rmg" target="_blank" rel="noreferrer">GitHub</a>.
            </div>`)});export{ha as $,ea as A,jn as B,ta as C,C as D,oe as E,Xn as F,na as G,qn as H,aa as I,sa as J,ia as K,la as L,ca as M,ra as N,ma as O,ne as P,ua as Q,G as R,te as S,wa as T,ya as U,oa as V,ga as W,Sa as X,fa as Y,_a as Z,Yn as _,Lo as __vite_legacy_guard,Ua as a,pa as a0,da as a1,P as a2,Aa as a3,Go as a4,ee as a5,Ho as a6,Ta as a7,Uo as a8,$a as a9,Ea as aa,Yo as ab,jo as ac,ko as ad,j as ae,Y as af,Ko as ag,Wo as ah,Fo as ai,Bo as aj,Vo as ak,Ya as al,Va as am,m as an,Jo as ao,ja as ap,$o as aq,I as ar,Zn as as,Kn as at,Ca as b,ba as c,Na as d,Ia as e,Oa as f,Ma as g,va as h,Ra as i,Jn as j,ka as k,za as l,Ga as m,Ha as n,xa as o,Wa as p,La as q,Pa as r,Da as s,Ba as t,Fa as u,zo as v,qo as w,Xo as x,Zo as y,Qo as z};
