import{z as Q,r as he,l as E,F as Oe,a5 as gt,a4 as un,g as oe,j as q,a9 as we,H as ze,aa as ge,N as sr,ab as We,ac as Yt,C as Ie,ad as mn,L as pt,ae as Kt,M as Se,af as hn,h as ir,k as He,m as Be,n as Ve,o as Fe,p as Me,q as Ne,V as yt,ag as xt,ah as Ht,ai as $e,aj as Bt,ak as _t,y as Je,x as ot,t as Lt,I as or,v as lr,B as ue,K as je,al as dr,am as Ze,J as Ce,an as xe,ao as Pt,ap as cr,aq as vt,ar as lt,as as Vt,at as Ue,u as Ft,au as Ot,av as Rt,aw as Xt,ax as pn,ay as _n,az as ur,a7 as Ye,aA as Mt,aB as Nt,aC as mr,aD as hr,aE as pr,aF as _r,aG as fr,aH as gr,aI as yr,aJ as vr,aK as ut,P as br,Q as Er,aL as zr,U as wr,W as Qt,aM as Sr,aN as Ar,aO as Lr,aP as Pr,aQ as Or,aR as Rr,aS as Tr,aT as Dr,aU as fn,aV as Tt,aW as kr,aX as Ir,aY as jr,aZ as Cr,a_ as xr,a$ as gn,b0 as Hr,b1 as Br}from"./vendor-37640421.js";import{_ as f,u as te,E as be,a as ye,b as Vr,R as ee,c as en,d as tn,S as Ke,e as Fr,f as nn,g as Mr,h as rn,r as Nr,i as Ur,j as Dt,F as ke,k as Wr,l as Zr,m as Gr,n as qr,o as Jr,p as $r,B as ft,D as Le,q as Yr,s as Kr,t as Xr,v as Ut,w as Qr,x as ea,y as ta,z as na,A as ra,C as aa,G as sa,P as yn,H as vn,I as an,J as ia,K as oa,L as la,M as da,N as ca,O as ua,Q as ma,T as ha,U as zt,V as pa,W as _a,X as fa,Y as ga,Z as ya,$ as va,a0 as ba,a1 as Ea,a2 as Ge,a3 as Xe,a4 as Qe,a5 as qe,a6 as bn,a7 as kt,a8 as It,a9 as za,aa as wa,ab as sn,ac as En,ad as zn,ae as Sa,af as Aa,ag as La,ah as Pa,ai as Oa,aj as wt,ak as Ra,al as St,am as At,an as st,ao as Ta,ap as Da}from"./index-07bab366.js";const ka={mtr:()=>f(()=>import("./index-3a8c49db.js"),["assets/index-3a8c49db.js","assets/vendor-37640421.js","assets/index-07bab366.js","assets/index-c7ec3755.css","assets/share-17f67a4d.js","assets/mtr-f9624cd1.js"]),gzmtr:()=>f(()=>import("./index-33d28e2c.js"),["assets/index-33d28e2c.js","assets/vendor-37640421.js","assets/index-07bab366.js","assets/index-c7ec3755.css","assets/share-17f67a4d.js"]),shmetro:()=>f(()=>import("./index-4a025b0f.js"),["assets/index-4a025b0f.js","assets/vendor-37640421.js","assets/index-07bab366.js","assets/index-c7ec3755.css","assets/share-17f67a4d.js","assets/mtr-f9624cd1.js"])};function Ia(r){const[p,n]=Q.useState({});return Q.useEffect(()=>(ka[r]().then(l=>{n(l.default)}).catch(l=>{console.error(`Failed to load canvas for style ${r}`,l),n({})}),()=>{n({})}),[r]),p}const ja={position:"relative",flexDirection:"row",overflowX:"auto","&::before, &::after":{content:'""',margin:"auto"},"& > svg":{flex:"0 0 auto",border:"1px solid black"}};function Ca(){const{canvasToShow:r,canvasScale:p}=te(e=>e.app),{svg_height:n,style:l}=te(e=>e.param),o=Ia(l);Q.useEffect(()=>{document.getElementById("css_share").href=`/rmg/styles/share_${l}.css`,he.event(be.STYLE_CHANGE,{style:l})},[l]);const t=Object.keys(o).filter(e=>r.includes(e)),a=n*p;return E(Oe,{minH:a,sx:ja,children:Object.keys(o).length===0?E(gt,{isIndeterminate:!0}):t.map(e=>E(un,{sx:{minWidth:750,height:a},children:o[e]},e+l))})}function xa(){const{t:r}=oe(),p=ye(),n=te(s=>s.app.selectedStation);console.log("InfoSection:: Rendering for",n);const l=te(s=>s.param.style),{num:o,name:t,secondaryName:a}=te(s=>s.param.stn_list[n]),e=[{type:"input",label:r("StationSidePanel.info.num"),value:o,placeholder:"01",onChange:s=>p(Vr(n,s)),hidden:![ee.GZMTR].includes(l)},{type:"input",label:r("Chinese name"),value:t[0],onChange:s=>p(en(n,[s,t[1]]))},{type:"input",label:r("English name"),value:t[1],onChange:s=>p(en(n,[t[0],s]))},{type:"input",label:r("StationSidePanel.info.zhSecondary"),value:a?a[0]:"",placeholder:"1号航站楼",onChange:s=>p(tn(n,[s,a?a[1]:""])),hidden:![ee.GZMTR].includes(l)},{type:"input",label:r("StationSidePanel.info.enSecondary"),value:a?a[1]:"",placeholder:"Terminal 1",onChange:s=>p(tn(n,[a?a[0]:"",s])),hidden:![ee.GZMTR].includes(l)}];return q(we,{p:1,children:[E(ze,{as:"h5",size:"sm",children:r("StationSidePanel.info.title")}),E(ge,{fields:e,minW:130})]})}const wn=(r,p)=>{const n=r[p];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((l,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+p)))})};function Ha(r){const{countryCode:p,svgFilename:n}=r,[l,o]=Q.useState(void 0);return Q.useEffect(()=>{n&&wn(Object.assign({"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E6-1F1F9.svg":()=>f(()=>import("./1F1E6-1F1F9-a3474a87.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E6-1F1FF.svg":()=>f(()=>import("./1F1E6-1F1FF-c961f61f.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E7-1F1EA.svg":()=>f(()=>import("./1F1E7-1F1EA-87b63ce0.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E7-1F1F4.svg":()=>f(()=>import("./1F1E7-1F1F4-8e88acbd.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E7-1F1F7.svg":()=>f(()=>import("./1F1E7-1F1F7-2e5da46f.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E8-1F1E6.svg":()=>f(()=>import("./1F1E8-1F1E6-572cf376.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E8-1F1F1.svg":()=>f(()=>import("./1F1E8-1F1F1-bb957357.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E8-1F1F3.svg":()=>f(()=>import("./1F1E8-1F1F3-866d09b5.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E9-1F1EA.svg":()=>f(()=>import("./1F1E9-1F1EA-2bcac591.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1E9-1F1F0.svg":()=>f(()=>import("./1F1E9-1F1F0-130b3df9.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1EA-1F1EC.svg":()=>f(()=>import("./1F1EA-1F1EC-190b639e.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1EA-1F1F8.svg":()=>f(()=>import("./1F1EA-1F1F8-e9f6e238.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1EB-1F1F7.svg":()=>f(()=>import("./1F1EB-1F1F7-12f823eb.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1EC-1F1F7.svg":()=>f(()=>import("./1F1EC-1F1F7-d16bd178.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1ED-1F1F0.svg":()=>f(()=>import("./1F1ED-1F1F0-1346b158.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1ED-1F1FA.svg":()=>f(()=>import("./1F1ED-1F1FA-e44befe3.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1EE-1F1E9.svg":()=>f(()=>import("./1F1EE-1F1E9-256ea73c.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1EE-1F1F3.svg":()=>f(()=>import("./1F1EE-1F1F3-44d109aa.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1EE-1F1F7.svg":()=>f(()=>import("./1F1EE-1F1F7-c924004a.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1EE-1F1F9.svg":()=>f(()=>import("./1F1EE-1F1F9-38eff108.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1EF-1F1F5.svg":()=>f(()=>import("./1F1EF-1F1F5-93518547.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F0-1F1F7.svg":()=>f(()=>import("./1F1F0-1F1F7-4e778503.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F2-1F1F4.svg":()=>f(()=>import("./1F1F2-1F1F4-bb2225c7.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F2-1F1FD.svg":()=>f(()=>import("./1F1F2-1F1FD-31d458ab.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F2-1F1FE.svg":()=>f(()=>import("./1F1F2-1F1FE-9d12ac27.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F3-1F1F4.svg":()=>f(()=>import("./1F1F3-1F1F4-36b22a7a.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F5-1F1EA.svg":()=>f(()=>import("./1F1F5-1F1EA-2359ab5b.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F5-1F1F1.svg":()=>f(()=>import("./1F1F5-1F1F1-56d472c9.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F5-1F1F9.svg":()=>f(()=>import("./1F1F5-1F1F9-48f96f04.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F7-1F1F4.svg":()=>f(()=>import("./1F1F7-1F1F4-a774c3a2.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F7-1F1FA.svg":()=>f(()=>import("./1F1F7-1F1FA-3b81f8de.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F8-1F1E6.svg":()=>f(()=>import("./1F1F8-1F1E6-481d8837.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F8-1F1EA.svg":()=>f(()=>import("./1F1F8-1F1EA-3583e0b5.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F8-1F1EC.svg":()=>f(()=>import("./1F1F8-1F1EC-2b92413d.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F9-1F1ED.svg":()=>f(()=>import("./1F1F9-1F1ED-0757641b.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F9-1F1F7.svg":()=>f(()=>import("./1F1F9-1F1F7-f7cf6b4a.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1F9-1F1FC.svg":()=>f(()=>import("./1F1F9-1F1FC-82e8fcc5.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1FA-1F1E6.svg":()=>f(()=>import("./1F1FA-1F1E6-fc868471.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1FA-1F1F3.svg":()=>f(()=>import("./1F1FA-1F1F3-dddb091b.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1FA-1F1F8.svg":()=>f(()=>import("./1F1FA-1F1F8-47f8491b.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1FA-1F1FF.svg":()=>f(()=>import("./1F1FA-1F1FF-0989e0a8.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1FB-1F1EA.svg":()=>f(()=>import("./1F1FB-1F1EA-8edd6b29.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F1FB-1F1F3.svg":()=>f(()=>import("./1F1FB-1F1F3-2e88414b.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F3F4-E0067-E0062-E0065-E006E-E0067-E007F.svg":()=>f(()=>import("./1F3F4-E0067-E0062-E0065-E006E-E0067-E007F-8302e24f.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/flags/1F3F4-E0067-E0062-E0073-E0063-E0074-E007F.svg":()=>f(()=>import("./1F3F4-E0067-E0062-E0073-E0063-E0074-E007F-a5d75104.js"),[])}),`../../../../node_modules/@railmapgen/rmg-palette-resources/flags/${n.slice(0,-4)}.svg`).then(t=>t.default).then(o).catch(t=>console.error(`Failed to find SVG file ${n} as ${t==null?void 0:t.message}`))},[n]),l?E(sr,{src:l,alt:`Flag of ${p}`,h:17,mr:1}):E(We,{})}function Ba(r){const{defaultValueId:p,onChange:n}=r,{i18n:l}=oe(),o=p?Yt.find(d=>d.id===p):void 0,t=d=>{var g,h;return(h=(g=l.languages.map(_=>d.name[_]).find(_=>_!==void 0))!=null?g:d.name.en)!=null?h:""},a=d=>{var m,b;const g=d.country==="TW"&&[pt.ChineseSimp,pt.ChineseCN].includes(l.languages[0]),h=["Win32","Win64"].includes(navigator.platform),_=l.languages.map(v=>d.name[v]).find(v=>v!==void 0),u=(m=Kt.find(v=>v.id===d.country))==null?void 0:m.flagSvg,y=(b=Kt.find(v=>v.id===d.country))==null?void 0:b.flagEmoji;return q(We,{children:[g?E("span",{children:"🏴 "}):h?E(Ha,{countryCode:d.country,svgFilename:u}):q("span",{children:[y," "]}),_]})},e=(d,g)=>Object.values(d.name).some(h=>h.includes(g)),s=Yt.slice().sort((d,g)=>d.id===Ie.Other?1:g.id===Ie.Other?-1:t(d).localeCompare(t(g),l.languages[0]));return E(mn,{data:s,displayValue:t,displayHandler:a,predicate:e,defaultValue:o,onChange:d=>n==null?void 0:n(d.id)})}const Va=r=>{const[p,n]=Q.useState([]);return Q.useEffect(()=>{wn(Object.assign({"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/ankara.js":()=>f(()=>import("./ankara-29e6e9b6.js"),["assets/ankara-29e6e9b6.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/athens.js":()=>f(()=>import("./athens-6d1b1c9d.js"),["assets/athens-6d1b1c9d.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/baku.js":()=>f(()=>import("./baku-bae24922.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/bangkok.js":()=>f(()=>import("./bangkok-3b9e32a4.js"),["assets/bangkok-3b9e32a4.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/barcelona.js":()=>f(()=>import("./barcelona-8f35e22d.js"),["assets/barcelona-8f35e22d.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/beijing.js":()=>f(()=>import("./beijing-2a379691.js"),["assets/beijing-2a379691.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/berlin.js":()=>f(()=>import("./berlin-d28b9f58.js"),["assets/berlin-d28b9f58.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/bonn.js":()=>f(()=>import("./bonn-fce56b80.js"),["assets/bonn-fce56b80.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/boston.js":()=>f(()=>import("./boston-425bf9be.js"),["assets/boston-425bf9be.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/brussels.js":()=>f(()=>import("./brussels-a5da448e.js"),["assets/brussels-a5da448e.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/bucharest.js":()=>f(()=>import("./bucharest-dec16d21.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/budapest.js":()=>f(()=>import("./budapest-62626276.js"),["assets/budapest-62626276.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/cairo.js":()=>f(()=>import("./cairo-0c2a6072.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/caracas.js":()=>f(()=>import("./caracas-fa5302f9.js"),["assets/caracas-fa5302f9.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/changchun.js":()=>f(()=>import("./changchun-4d112fb7.js"),["assets/changchun-4d112fb7.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/changsha.js":()=>f(()=>import("./changsha-9f337081.js"),["assets/changsha-9f337081.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/chengdu.js":()=>f(()=>import("./chengdu-2fde8740.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/chongqing.js":()=>f(()=>import("./chongqing-7d0846ab.js"),["assets/chongqing-7d0846ab.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/cochabamba.js":()=>f(()=>import("./cochabamba-0710c440.js"),["assets/cochabamba-0710c440.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/cologne.js":()=>f(()=>import("./cologne-4595c0df.js"),["assets/cologne-4595c0df.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/copenhagen.js":()=>f(()=>import("./copenhagen-07818221.js"),["assets/copenhagen-07818221.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/daegu.js":()=>f(()=>import("./daegu-8f53d357.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/dalian.js":()=>f(()=>import("./dalian-08981d46.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/delhi.js":()=>f(()=>import("./delhi-eaa3d5a0.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/dongguan.js":()=>f(()=>import("./dongguan-9877cd9c.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/dortmund.js":()=>f(()=>import("./dortmund-8e43b66f.js"),["assets/dortmund-8e43b66f.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/edinburgh.js":()=>f(()=>import("./edinburgh-244eab26.js"),["assets/edinburgh-244eab26.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/eskisehir.js":()=>f(()=>import("./eskisehir-5404753b.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/foshan.js":()=>f(()=>import("./foshan-17b5fce9.js"),["assets/foshan-17b5fce9.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/frankfurt.js":()=>f(()=>import("./frankfurt-f1ee3295.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/glasgow.js":()=>f(()=>import("./glasgow-e714346d.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/gothenburg.js":()=>f(()=>import("./gothenburg-6debaee0.js"),["assets/gothenburg-6debaee0.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/greatertorontoandhamiltonarea.js":()=>f(()=>import("./greatertorontoandhamiltonarea-71fe717b.js"),["assets/greatertorontoandhamiltonarea-71fe717b.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/guadalajara.js":()=>f(()=>import("./guadalajara-dc4a5f1d.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/guangzhou.js":()=>f(()=>import("./guangzhou-d7e55527.js"),["assets/guangzhou-d7e55527.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/hamburg.js":()=>f(()=>import("./hamburg-517f373e.js"),["assets/hamburg-517f373e.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/hangzhou.js":()=>f(()=>import("./hangzhou-d37a98b5.js"),["assets/hangzhou-d37a98b5.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/hanoi.js":()=>f(()=>import("./hanoi-acd9e760.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/harbin.js":()=>f(()=>import("./harbin-687d6138.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/hefei.js":()=>f(()=>import("./hefei-6aa39370.js"),["assets/hefei-6aa39370.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/hiroshima.js":()=>f(()=>import("./hiroshima-99847d84.js"),["assets/hiroshima-99847d84.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/hochiminh.js":()=>f(()=>import("./hochiminh-65ab3a97.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/hongkong.js":()=>f(()=>import("./hongkong-1f572c4b.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/iashi.js":()=>f(()=>import("./iashi-76cf9267.js"),["assets/iashi-76cf9267.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/istanbul.js":()=>f(()=>import("./istanbul-e6733983.js"),["assets/istanbul-e6733983.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/jakarta.js":()=>f(()=>import("./jakarta-1c42570e.js"),["assets/jakarta-1c42570e.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/jinan.js":()=>f(()=>import("./jinan-b6389b78.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/kansai.js":()=>f(()=>import("./kansai-ca0701d8.js"),["assets/kansai-ca0701d8.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/kaohsiung.js":()=>f(()=>import("./kaohsiung-1a75e57f.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/kharkiv.js":()=>f(()=>import("./kharkiv-2cfbf55b.js"),["assets/kharkiv-2cfbf55b.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/klangvalley.js":()=>f(()=>import("./klangvalley-9114a5fa.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/kunming.js":()=>f(()=>import("./kunming-a39d6f0e.js"),["assets/kunming-a39d6f0e.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/lima.js":()=>f(()=>import("./lima-118ba6e3.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/lisbon.js":()=>f(()=>import("./lisbon-82e2f436.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/london.js":()=>f(()=>import("./london-4cc3d948.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/luoyang.js":()=>f(()=>import("./luoyang-3fbbd0cf.js"),["assets/luoyang-3fbbd0cf.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/macao.js":()=>f(()=>import("./macao-19ac9346.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/madrid.js":()=>f(()=>import("./madrid-a43b8fad.js"),["assets/madrid-a43b8fad.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/manchester.js":()=>f(()=>import("./manchester-6e820aac.js"),["assets/manchester-6e820aac.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/milan.js":()=>f(()=>import("./milan-0ed2db40.js"),["assets/milan-0ed2db40.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/monterrey.js":()=>f(()=>import("./monterrey-fb4657c9.js"),["assets/monterrey-fb4657c9.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/montreal.js":()=>f(()=>import("./montreal-f67ba35c.js"),["assets/montreal-f67ba35c.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/munich.js":()=>f(()=>import("./munich-ad0057b9.js"),["assets/munich-ad0057b9.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/nanjing.js":()=>f(()=>import("./nanjing-322aba26.js"),["assets/nanjing-322aba26.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/nanning.js":()=>f(()=>import("./nanning-75920b84.js"),["assets/nanning-75920b84.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/naples.js":()=>f(()=>import("./naples-19d71e84.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/neworleans.js":()=>f(()=>import("./neworleans-6b10fd62.js"),["assets/neworleans-6b10fd62.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/newtaipei.js":()=>f(()=>import("./newtaipei-2d07dd7a.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/newyork.js":()=>f(()=>import("./newyork-1822ac36.js"),["assets/newyork-1822ac36.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/ningbo.js":()=>f(()=>import("./ningbo-c59f7aa5.js"),["assets/ningbo-c59f7aa5.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/osaka.js":()=>f(()=>import("./osaka-aef7593d.js"),["assets/osaka-aef7593d.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/oslo.js":()=>f(()=>import("./oslo-553a6d1c.js"),["assets/oslo-553a6d1c.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/other.js":()=>f(()=>import("./other-176be433.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/ottawa.js":()=>f(()=>import("./ottawa-e226ac30.js"),["assets/ottawa-e226ac30.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/paris.js":()=>f(()=>import("./paris-ef59074e.js"),["assets/paris-ef59074e.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/qingdao.js":()=>f(()=>import("./qingdao-c83ac49c.js"),["assets/qingdao-c83ac49c.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/rheinruhr.js":()=>f(()=>import("./rheinruhr-d291a748.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/rio.js":()=>f(()=>import("./rio-d6dca2b2.js"),["assets/rio-d6dca2b2.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/riyadh.js":()=>f(()=>import("./riyadh-b2bba800.js"),["assets/riyadh-b2bba800.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/sanfrancisco.js":()=>f(()=>import("./sanfrancisco-fe1b19e4.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/sanktpeterburg.js":()=>f(()=>import("./sanktpeterburg-87b7088d.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/santiago.js":()=>f(()=>import("./santiago-8bfaab32.js"),["assets/santiago-8bfaab32.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/saopaulo.js":()=>f(()=>import("./saopaulo-35903bba.js"),["assets/saopaulo-35903bba.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/seoul.js":()=>f(()=>import("./seoul-7a75bbb3.js"),["assets/seoul-7a75bbb3.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/sevilla.js":()=>f(()=>import("./sevilla-6e04b853.js"),["assets/sevilla-6e04b853.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/shanghai.js":()=>f(()=>import("./shanghai-ae38a564.js"),["assets/shanghai-ae38a564.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/shaoxing.js":()=>f(()=>import("./shaoxing-6464e472.js"),["assets/shaoxing-6464e472.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/shenyang.js":()=>f(()=>import("./shenyang-62628740.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/shenzhen.js":()=>f(()=>import("./shenzhen-8ca05a83.js"),["assets/shenzhen-8ca05a83.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/singapore.js":()=>f(()=>import("./singapore-c20e9984.js"),["assets/singapore-c20e9984.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/stockholm.js":()=>f(()=>import("./stockholm-5eca41a9.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/suzhou.js":()=>f(()=>import("./suzhou-c47f374d.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/taichung.js":()=>f(()=>import("./taichung-507b8f8f.js"),["assets/taichung-507b8f8f.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/taipei.js":()=>f(()=>import("./taipei-900dab74.js"),["assets/taipei-900dab74.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/taiyuan.js":()=>f(()=>import("./taiyuan-a508e746.js"),["assets/taiyuan-a508e746.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/taoyuan.js":()=>f(()=>import("./taoyuan-7b38fe57.js"),["assets/taoyuan-7b38fe57.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/tashkent.js":()=>f(()=>import("./tashkent-10f8d150.js"),["assets/tashkent-10f8d150.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/tehran.js":()=>f(()=>import("./tehran-293c71a8.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/tianjin.js":()=>f(()=>import("./tianjin-5f57d48d.js"),["assets/tianjin-5f57d48d.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/tokyo.js":()=>f(()=>import("./tokyo-bd880bd4.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/tyneandwear.js":()=>f(()=>import("./tyneandwear-b3da8462.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/vienna.js":()=>f(()=>import("./vienna-1e8eea57.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/warsaw.js":()=>f(()=>import("./warsaw-cb7e4b48.js"),["assets/warsaw-cb7e4b48.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/wuhan.js":()=>f(()=>import("./wuhan-eb678328.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/wuxi.js":()=>f(()=>import("./wuxi-68576026.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/xiamen.js":()=>f(()=>import("./xiamen-cca9c4f0.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/xian.js":()=>f(()=>import("./xian-84e19a1a.js"),[]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/yevpatoria.js":()=>f(()=>import("./yevpatoria-59959d11.js"),["assets/yevpatoria-59959d11.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/yokohama.js":()=>f(()=>import("./yokohama-4cdc3d34.js"),["assets/yokohama-4cdc3d34.js","assets/vendor-37640421.js"]),"../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/zhengzhou.js":()=>f(()=>import("./zhengzhou-ae694ed0.js"),[])}),`../../../../node_modules/@railmapgen/rmg-palette-resources/palettes/${r}.js`).then(l=>n(l.default)).catch(()=>n([]))},[r]),p};function Fa(r){const{city:p,defaultValueId:n,onChange:l}=r,{i18n:o}=oe(),t=Va(p),a=n?t.find(g=>g.id===n):void 0,e=g=>{var h;return(h=o.languages.map(_=>g.name[_]).find(_=>_!==void 0))!=null?h:""};return E(mn,{data:t,displayValue:e,displayHandler:g=>{const h=e(g);return E(hn,{name:h,fg:g.fg||Se.white,bg:g.colour})},predicate:(g,h)=>Object.values(g.name).some(_=>_.includes(h)),defaultValue:a,onChange:g=>l==null?void 0:l(g.id,g.colour,g.fg||Se.white)})}function Wt(r){const{isOpen:p,onClose:n,defaultTheme:l,onUpdate:o}=r,{t}=oe(),a=ir("primary.500","primary.300"),[e,s]=Q.useState(l==null?void 0:l[0]),[d,g]=Q.useState(l==null?void 0:l[1]),[h,_]=Q.useState((l==null?void 0:l[2])||"#AAAAAA"),[u,y]=Q.useState((l==null?void 0:l[3])||Se.white);Q.useEffect(()=>{l&&(s(l[0]),g(l[1]),_(l[2]),y(l[3]))},[p,l==null?void 0:l.toString()]);const m=[{type:"custom",label:t("ColourModal.city"),component:E(Ba,{defaultValueId:e,onChange:A=>{s(A),g(void 0),_("#AAAAAA"),y(Se.white)}})},{type:"custom",label:t("ColourModal.line"),component:E(Fa,{city:e,defaultValueId:d,onChange:(A,O,H)=>{g(A),_(O),y(H)}})}],b=[{type:"input",label:t("ColourModal.bg"),variant:"color",value:h,placeholder:"#F3D03E",onChange:A=>{s(Ie.Other),g("other"),_(A)}},{type:"select",label:t("ColourModal.fg"),value:u,options:{[Se.white]:t("ColourModal.white"),[Se.black]:t("ColourModal.black")},onChange:A=>{s(Ie.Other),g("other"),y(A)}}],v=()=>{he.isStandaloneWindow()?window.open("/rmg-palette","_blank"):he.openApp("rmg-palette")},w=e&&d&&h&&u,P=()=>{w&&(o==null||o([e,d,h,u]),n(),he.event(be.SELECT_COLOUR,{cityCode:e,lineCode:d}))};return q(He,{isOpen:p,onClose:n,children:[E(Be,{}),q(Ve,{children:[E(Fe,{children:t("ColourModal.title")}),E(Me,{}),E(Ne,{children:q(yt,{children:[E(hn,{name:t("ColourModal.example"),fg:u,bg:h}),q(xt,{isFitted:!0,colorScheme:"primary",w:"100%",defaultIndex:e===Ie.Other?1:0,children:[q(Ht,{children:[E($e,{children:t("ColourModal.palette")}),E($e,{children:t("ColourModal.custom")})]}),q(Bt,{children:[E(_t,{children:E(ge,{fields:m})}),E(_t,{children:E(ge,{fields:b})})]})]})]})}),q(Je,{children:[q(ot,{fontSize:"sm",marginRight:2,children:[t("ColourModal.seeAll"),q(Lt,{color:a,onClick:v,children:[t("Palette")," ",E(or,{as:lr})]})]}),E(ue,{colorScheme:"primary",onClick:P,isDisabled:!w,children:t("Confirm")})]})]})]})}class Ma{static hexToRgb(p){return[parseInt(p.slice(1,3),16),parseInt(p.slice(3,5),16),parseInt(p.slice(5,7),16)]}static fade(p,n){return`rgba(${[...this.hexToRgb(p),n].join(",")})`}static euclideanDistance(p,n){return this.hexToRgb(p).reduce((l,o,t)=>l+Math.pow(o-this.hexToRgb(n)[t],2),0)}}function Zt(r){const{theme:p,onClick:n}=r,{t:l}=oe();return E(je,{size:"xs","aria-label":l("Colour"),mt:"0.45px",color:p[3],bg:p[2],_hover:{bg:Ma.fade(p[2],.7)},icon:E(dr,{}),onClick:n})}function Na(r){var y;const{interchangeList:p,onAdd:n,onDelete:l,onUpdate:o}=r,{t}=oe(),[a,e]=Q.useState(!1),[s,d]=Q.useState(0),{theme:g,stn_list:h}=te(m=>m.param),_=Object.values(h).reduce((m,b)=>{const[v,w]=m;return[[...new Set(v.concat(b.transfer.info.flat().map(P=>P[4])))],[...new Set(w.concat(b.transfer.info.flat().map(P=>P[5])))]]},[[],[]]),u=p.map((m,b)=>[{type:"input",label:t("Chinese name"),value:m[4],minW:"80px",onChange:v=>o==null?void 0:o(b,[m[0],m[1],m[2],m[3],v,m[5]]),optionList:_[0]},{type:"input",label:t("English name"),value:m[5],minW:"80px",onChange:v=>o==null?void 0:o(b,[m[0],m[1],m[2],m[3],m[4],v]),optionList:_[1]}]);return q(Ze,{direction:"column",children:[p.length===0&&q(Ce,{spacing:.5,"data-testid":"interchange-card-stack",children:[E(ot,{as:"i",flex:1,align:"center",fontSize:"md",colorScheme:"gray",children:t("StationSidePanel.interchange.noInterchanges")}),E(je,{size:"sm",variant:"ghost","aria-label":t("StationSidePanel.interchange.add"),onClick:()=>n==null?void 0:n([g[0],"","#aaaaaa",Se.white,"",""]),icon:E(xe,{})})]}),p.map((m,b)=>q(Ce,{spacing:.5,"data-testid":`interchange-card-stack-${b}`,children:[E(Pt,{label:t("Colour"),minW:"40px",noLabel:b!==0,children:E(Zt,{theme:[m[0],m[1],m[2],m[3]],onClick:()=>{e(!0),d(b)}})}),E(ge,{fields:u[b],noLabel:b!==0}),n&&b===u.length-1?E(je,{size:"sm",variant:"ghost","aria-label":t("StationSidePanel.interchange.copy"),onClick:()=>n==null?void 0:n(p.slice(-1)[0]),icon:E(cr,{})}):E(we,{minW:8}),l&&E(je,{size:"sm",variant:"ghost","aria-label":t("StationSidePanel.interchange.remove"),onClick:()=>l==null?void 0:l(b),icon:E(vt,{})})]},b)),E(Wt,{isOpen:a,onClose:()=>e(!1),defaultTheme:(y=p[s])==null?void 0:y.slice(0,4),onUpdate:m=>o==null?void 0:o(s,[...m,p[s][4],p[s][5]])})]})}function Ua(){const{t:r}=oe(),p=ye(),n=te(h=>h.app.selectedStation),{theme:l,style:o}=te(h=>h.param),{transfer:t}=te(h=>h.param.stn_list[n]),a=h=>{var _,u;return[{type:"input",label:r("Station Chinese name"),value:(_=t.osi_names[h])==null?void 0:_[0],hidden:![ee.MTR].includes(o),onChange:y=>{var m;return p(nn(n,h,[y,(m=t.osi_names[h])==null?void 0:m[1]]))}},{type:"input",label:r("Station English name"),value:(u=t.osi_names[h])==null?void 0:u[1],hidden:![ee.MTR].includes(o),onChange:y=>{var m;return p(nn(n,h,[(m=t.osi_names[h])==null?void 0:m[0],y]))}},{type:"switch",label:r("Paid area"),isChecked:t.paid_area,onChange:y=>p(Mr(n,y)),hidden:![ee.MTR].includes(o)||h!==0,oneLine:!0}]},e=h=>_=>{p(rn(n,h,_))},s=h=>_=>{p(Nr(n,h,_))},d=h=>(_,u)=>{p(Ur(n,h,_,u))},g=()=>{p(rn(n,t.info.length,[l[0],"","#AAAAAA",Se.white,"",""]))};return q(yt,{align:"flex-start",p:1,children:[q(Oe,{w:"100%",children:[E(ze,{as:"h5",size:"sm",mr:"auto",children:r("StationSidePanel.interchange.title")}),o===ee.MTR&&E(lt,{selections:[{label:r("Text on the left"),value:Ke.left},{label:r("Text on the right"),value:Ke.right}],defaultValue:t.tick_direc,onChange:h=>p(Fr(n,h))})]}),t.info.map((h,_)=>q(Q.Fragment,{children:[E(ze,{as:"h6",size:"xs",children:r(_===0?"StationSidePanel.interchange.within":_===1?"StationSidePanel.interchange.outStation":"StationSidePanel.interchange.outSystem")}),_!==0&&E(ge,{fields:a(_-1)}),E(Na,{interchangeList:h,onAdd:e(_),onDelete:s(_),onUpdate:d(_)})]},_)),t.info.length<3&&E(ue,{size:"xs",variant:"ghost",alignSelf:"flex-end",leftIcon:E(xe,{}),onClick:g,children:r("StationSidePanel.interchange.addGroup")})]})}function Wa(){const{t:r}=oe(),p=ye(),n=te(y=>y.app.selectedStation),{style:l,loop:o}=te(y=>y.param),{services:t,facility:a,loop_pivot:e,one_line:s,int_padding:d}=te(y=>y.param.stn_list[n]),g=Object.values(Dt).map(y=>({label:r("StationSidePanel.more."+y),value:y,disabled:y===Dt.local&&l!==ee.SHMetro})),h={[ke.none]:r("StationSidePanel.more.none"),[ke.airport]:r("StationSidePanel.more.airport"),[ke.hsr]:r("StationSidePanel.more.hsr"),[ke.disney]:r("StationSidePanel.more.disney")},_={[ke.none]:r("StationSidePanel.more.none"),[ke.airport]:r("StationSidePanel.more.airport"),[ke.railway]:r("StationSidePanel.more.railway"),[ke.disney]:r("StationSidePanel.more.disney")},u=[{type:"custom",label:r("StationSidePanel.more.service"),component:E(lt,{selections:g,defaultValue:t,onChange:y=>p(Wr(n,y)),multiSelect:!0}),hidden:![ee.GZMTR,ee.SHMetro].includes(l)},{type:"select",label:r("StationSidePanel.more.facility"),value:a,options:l===ee.MTR?h:_,onChange:y=>p(Zr(n,y)),hidden:![ee.MTR,ee.SHMetro].includes(l)},{type:"switch",label:r("StationSidePanel.more.pivot"),isChecked:e,onChange:y=>p(Gr(n,y)),hidden:![ee.SHMetro].includes(l)||!o,minW:"full",oneLine:!0},{type:"switch",label:r("StationSidePanel.more.oneLine"),isChecked:s,onChange:y=>p(qr(n,y)),hidden:![ee.SHMetro].includes(l),minW:"full",oneLine:!0},{type:"input",label:r("StationSidePanel.more.intPadding"),value:d.toString(),validator:y=>Number.isInteger(y),onChange:y=>p(Jr(n,Number(y))),hidden:![ee.SHMetro].includes(l)},{type:"custom",label:r("StationSidePanel.more.intPaddingApplyGlobal"),component:E(lt,{selections:[{label:r("StationSidePanel.more.apply"),value:"",disabled:!1}],defaultValue:"",onChange:y=>p($r(n))}),oneLine:!0,hidden:![ee.SHMetro].includes(l)}];return q(we,{p:1,children:[E(ze,{as:"h5",size:"sm",children:r("StationSidePanel.more.title")}),E(ge,{fields:u})]})}function Za(){const{t:r}=oe(),p=ye(),n=te(h=>h.app.selectedStation),l=te(h=>h.param.stn_list),{parents:o,children:t,branch:a}=l[n],e={[ft.through]:r("StationSidePanel.branch.through"),[ft.nonThrough]:r("StationSidePanel.branch.nonThrough")},s=h=>(h===Le.left?o:t).reduce((_,u)=>({..._,[u]:l[u].name.join(" ")}),{}),d={upper:r("StationSidePanel.branch.upper"),lower:r("StationSidePanel.branch.lower")},g=h=>a[h].length?[{type:"select",label:r("StationSidePanel.branch.type"),options:e,value:a[h][0],onChange:_=>p(Yr(n,h,_))},{type:"select",label:r("StationSidePanel.branch.firstStation"),options:s(h),value:a[h][1],onChange:_=>p(Kr(n,h,_))},{type:"select",label:r("StationSidePanel.branch.position"),options:d,value:(h===Le.left?o:t)[0]===a[h][1]?"upper":"lower",onChange:()=>p(Xr(n,h))}]:[];return q(we,{p:1,children:[E(ze,{as:"h5",size:"sm",children:r("Branches")}),E(ze,{as:"h6",size:"xs",children:r("Branch on the left")}),E(Ze,{direction:"column",children:o.length===2?E(ge,{fields:g(Le.left)}):E(ot,{as:"i",flex:1,align:"center",fontSize:"md",colorScheme:"gray",children:r("No branches found")})}),E(ze,{as:"h6",size:"xs",children:r("Branch on the right")}),E(Ze,{direction:"column",children:t.length===2?E(ge,{fields:g(Le.right)}):E(ot,{as:"i",flex:1,align:"center",fontSize:"md",colorScheme:"gray",children:r("No branches found")})})]})}function Ga(){return q(Vt,{children:[E(xa,{}),E(Ue,{}),E(Ua,{}),E(Ue,{}),E(Za,{}),E(Ue,{}),E(Wa,{})]})}function qa(){const{t:r}=oe(),p=Ft(),{style:n,svgWidth:l,svg_height:o,y_pc:t,branchSpacingPct:a,padding:e,direction_gz_x:s,direction_gz_y:d,loop:g}=te(_=>_.param),h=[...Ut[n].map(_=>({type:"input",label:r(`StyleSidePanel.layout.${_}Width`),value:l[_].toString(),onChange:u=>p(Qr(Number(u),_))})),{type:"input",label:r("StyleSidePanel.layout.canvasHeight"),value:o.toString(),onChange:_=>p(ea(Number(_)))},{type:"slider",label:r("StyleSidePanel.layout.verticalPosition"),value:t,min:0,max:100,onChange:_=>p(ta(_)),leftIcon:E(Ot,{}),rightIcon:E(Rt,{}),hidden:![ee.MTR,ee.GZMTR].includes(n)},{type:"slider",label:r(g?"StyleSidePanel.layout.branchSpacingLoop":"Branch spacing"),value:a,min:0,max:g?50:100,onChange:_=>p(na(_)),leftIcon:E(Xt,{}),rightIcon:E(xe,{})},{type:"slider",label:r("StyleSidePanel.layout.padding"),value:e,min:0,max:50,onChange:_=>p(ra(_)),leftIcon:E(Xt,{}),rightIcon:E(xe,{})},{type:"slider",label:r("StyleSidePanel.layout.directionGzX"),value:s,min:0,max:100,onChange:_=>p(aa(_)),leftIcon:E(pn,{}),rightIcon:E(_n,{}),hidden:![ee.GZMTR].includes(n)},{type:"slider",label:r("StyleSidePanel.layout.directionGzY"),value:d,min:0,max:100,onChange:_=>p(sa(_)),leftIcon:E(Ot,{}),rightIcon:E(Rt,{}),hidden:![ee.GZMTR].includes(n)}];return q(we,{p:1,children:[E(ze,{as:"h5",size:"sm",children:r("StyleSidePanel.layout.title")}),E(ge,{fields:h,minW:130})]})}function Ja(){const{t:r}=oe(),p=ye(),{style:n,theme:l,line_name:o,line_num:t,direction:a,platform_num:e,psd_num:s,namePosMTR:d,customiseMTRDest:g,info_panel_type:h}=te(A=>A.param),[_,u]=Q.useState(!1),y=[{label:r("StyleSidePanel.design.left"),value:Ke.left},{label:r("StyleSidePanel.design.right"),value:Ke.right}],m=Object.values(yn).reduce((A,O)=>({...A,[O]:r("StyleSidePanel.design."+O)}),{}),b=Object.values(vn).reduce((A,O)=>({...A,[O]:r("StyleSidePanel.design."+O)}),{}),v=[{type:"custom",label:r("Colour"),component:E(Zt,{theme:l,onClick:()=>u(!0)}),minW:"40px"},{type:"input",label:r("StyleSidePanel.design.zhLineName"),value:o[0],onChange:A=>p(an([A,o[1]])),minW:130},{type:"input",label:r("StyleSidePanel.design.enLineName"),value:o[1],onChange:A=>p(an([o[0],A])),minW:130},{type:"input",label:r("StyleSidePanel.design.lineNum"),value:t,onChange:A=>p(ia(A)),hidden:![ee.GZMTR].includes(n)},{type:"input",label:r("StyleSidePanel.design.platformNum"),value:e||"",onChange:A=>p(oa(A))},{type:"input",label:r("StyleSidePanel.design.psdNum"),value:s,onChange:A=>p(la(A)),hidden:![ee.GZMTR].includes(n)},{type:"select",label:r("StyleSidePanel.design.panelType"),value:h,options:n===ee.GZMTR?m:b,onChange:A=>p(da(A)),hidden:![ee.GZMTR,ee.SHMetro].includes(n)},{type:"custom",label:r("StyleSidePanel.design.direction"),component:E(lt,{selections:y,defaultValue:a,onChange:A=>p(ca(A))}),minW:"full",oneLine:!0}],w=[{label:r("StyleSidePanel.design.alternatively"),value:!0},{label:r("StyleSidePanel.design.onOneSide"),value:!1}],P=[{type:"custom",label:r("StyleSidePanel.design.nameDisplay"),component:q(Ce,{children:[E(lt,{selections:w,defaultValue:d.isStagger,onChange:A=>p(ua(A))}),E(ue,{size:"xs",variant:"ghost",leftIcon:E(ur,{}),onClick:()=>p(ma()),children:r("StyleSidePanel.design.flip")})]}),minW:"full",oneLine:!0,hidden:![ee.MTR].includes(n)},{type:"switch",label:r("StyleSidePanel.design.legacyDestination"),isChecked:g.isLegacy,onChange:A=>p(ha(A)),hidden:![ee.MTR].includes(n),minW:"full",oneLine:!0},{type:"switch",label:r("StyleSidePanel.design.overrideTerminal"),isChecked:g.terminal!==!1,onChange:A=>p(zt(A?["",""]:!1)),hidden:![ee.MTR].includes(n),minW:"full",oneLine:!0},{type:"input",label:r("StyleSidePanel.design.terminalZhName"),value:g.terminal?g.terminal[0]:"",placeholder:"機場及博覽館",onChange:A=>p(zt([A,g.terminal?g.terminal[1]:""])),hidden:![ee.MTR].includes(n)||g.terminal===!1},{type:"input",label:r("StyleSidePanel.design.terminalEnName"),value:g.terminal?g.terminal[1]:"",placeholder:"Airport and AsiaWorld-Expo",onChange:A=>p(zt([g.terminal?g.terminal[0]:"",A])),hidden:![ee.MTR].includes(n)||g.terminal===!1}];return q(we,{p:1,children:[E(ze,{as:"h5",size:"sm",children:r("StyleSidePanel.design.title")}),E(ge,{fields:[...v,...P],minW:130}),E(Wt,{isOpen:_,onClose:()=>u(!1),defaultTheme:l,onUpdate:A=>p(pa(A))})]})}function $a(){const{t:r}=oe(),p=ye(),{branches:n}=te(_=>_.helper),{loop:l,loop_info:o}=te(_=>_.param),{bank:t,left_and_right_factor:a,bottom_factor:e}=o,s=n.flat().filter((_=>u=>(_[u]=(_[u]||0)+1)===2)({})).filter(_=>!["linestart","lineend"].includes(_)),d=Math.abs(n[0].indexOf(s[0])-n[0].indexOf(s[1])),g=n.length>=2?(0,Math.min)(n[0].length-2-d,d):Math.floor((n[0].length-2-e*2)/2),h=[{type:"switch",label:r("StyleSidePanel.loop.isLoop"),isChecked:l,onChange:_=>p(_a(_)),minW:"full",oneLine:!0},{type:"switch",label:r("StyleSidePanel.loop.isBank"),isChecked:t,onChange:_=>p(fa(_)),minW:"full",oneLine:!0,hidden:!l},{type:"slider",label:r("StyleSidePanel.loop.leftRightFactor"),value:a,min:0,max:g,onChange:_=>p(ga(Math.floor(_))),hidden:!l},{type:"slider",label:r("StyleSidePanel.loop.bottomFactor"),value:e,min:0,max:Math.floor((n[0].length-2-a*2)/2),onChange:_=>p(ya(Math.floor(_))),hidden:!l||l&&n.length>2}];return q(we,{p:1,children:[E(ze,{as:"h5",size:"sm",children:r("StyleSidePanel.loop.title")}),E(ge,{fields:h})]})}function Ya(r){const{note:p,onUpdate:n,onDelete:l}=r,{t:o}=oe(),t=[{type:"textarea",label:o("StyleSidePanel.note.zhNote"),value:p[0],onChange:e=>n==null?void 0:n([e,p[1],p[2],p[3],p[4]])},{type:"textarea",label:o("StyleSidePanel.note.enNote"),value:p[1],onChange:e=>n==null?void 0:n([p[0],e,p[2],p[3],p[4]])},{type:"switch",label:o("StyleSidePanel.note.border"),isChecked:p[4],onChange:e=>n==null?void 0:n([p[0],p[1],p[2],p[3],e]),oneLine:!0}],a=[{type:"slider",label:o("StyleSidePanel.note.positionX"),value:p[2],min:0,max:100,onChange:e=>n==null?void 0:n([p[0],p[1],e,p[3],p[4]]),leftIcon:E(pn,{}),rightIcon:E(_n,{})},{type:"slider",label:o("StyleSidePanel.note.positionY"),value:p[3],min:0,max:100,onChange:e=>n==null?void 0:n([p[0],p[1],p[2],e,p[4]]),leftIcon:E(Ot,{}),rightIcon:E(Rt,{})}];return q(Ze,{direction:"column",children:[E(ge,{fields:t,minW:"full"}),q(Ce,{spacing:.5,sx:{"&>div":{flex:1}},children:[E(ge,{fields:a}),E(je,{size:"sm",variant:"ghost","aria-label":o("StyleSidePanel.note.remove"),onClick:()=>l==null?void 0:l(),icon:E(vt,{})})]})]})}function Ka(){const{t:r}=oe(),p=ye(),n=te(l=>l.param.notesGZMTR);return q(we,{p:1,children:[E(ze,{as:"h5",size:"sm",children:r("StyleSidePanel.note.title")}),q(yt,{spacing:.5,children:[n.map((l,o)=>E(Ya,{note:l,onUpdate:t=>p(va(o,t)),onDelete:()=>p(ba(o))},o)),E(ue,{size:"xs",variant:"ghost",leftIcon:E(xe,{}),alignSelf:"flex-end",onClick:()=>p(Ea()),children:r("StyleSidePanel.note.add")})]})]})}function Xa(){const{style:r}=te(p=>p.param);return q(Vt,{children:[E(qa,{}),E(Ue,{}),E(Ja,{}),r===ee.GZMTR&&q(We,{children:[E(Ue,{}),E(Ka,{})]}),r===ee.SHMetro&&q(We,{children:[E(Ue,{}),E($a,{})]})]})}const Gt=(r,p)=>{if(["linestart","lineend"].includes(r)||p[r].parents.length>1||p[r].children.length>1)return 0;const n=p[r].parents[0];return n?p[n].children.length===1?Gt(n,p):p[n].children.indexOf(r)===0?1:-1:0},Qa=r=>(p,n)=>{const{stn_list:l,current_stn_idx:o}=n().param;if(r===o)return console.log("removeStation():: failed as current station cannot be deleted"),!1;const{parents:t,children:a}=l[r];return Object.keys(l).length===4?(console.log("removeStation():: failed as only 2 stations remaining"),!1):t.length===2&&a.length===2?(console.log("removeStation():: failed as branches on both sides cannot be combined"),!1):Object.keys(l).some(s=>![r,"linestart","lineend"].includes(s)&&Gt(s,l)===0)?!0:(console.log("removeStation():: failed as selected station is the only station without siblings"),!1)},es=r=>(p,n)=>{const l=n().param.stn_list,{parents:o,children:t}=l[r];let a=JSON.parse(JSON.stringify(l));o.length===2||t.length===2?(o.forEach(e=>{a[e].children=t}),t.forEach(e=>{a[e].parents=o}),o.length===1&&(a[o[0]].branch.right=a[r].branch.right),t.length===1&&(a[t[0]].branch.left=a[r].branch.left)):l[o[0]].children.length===2&&l[t[0]].parents.length===2?a={...l,[o[0]]:{...l[o[0]],children:l[o[0]].children.filter(e=>e!==r),branch:{...l[o[0]].branch,right:[]}},[t[0]]:{...l[t[0]],parents:l[t[0]].parents.filter(e=>e!==r),branch:{...l[t[0]].branch,left:[]}}}:(o.forEach(e=>{const s=a[e].children.indexOf(r);t.length?a[e].children[s]=t[0]:a[e].children.splice(s,1),a[e].branch.right[1]===r&&(a[e].branch.right[1]=t[0])}),t.forEach(e=>{const s=a[e].parents.indexOf(r);o.length?a[e].parents[s]=o[0]:a[e].parents.splice(s,1),a[e].branch.left[1]===r&&(a[e].branch.left[1]=o[0])})),delete a[r],p(Ge(a))};function ts(...r){return r.reduce((p,n)=>p.map(l=>n.map(o=>l.concat([o]))).reduce((l,o)=>l.concat(o),[]),[[]])}const et=(r,p)=>!!p[r[0]].children.indexOf(r[1]),Sn=(r,p)=>[r[0][1],r[0][r[0].length-2],...r[0].filter(n=>r.slice(1).filter(l=>et(l,p)).map(l=>l.filter(o=>!["linestart","lineend"].includes(o))).map(l=>[l[0],l[l.length-1]]).flat().includes(n))],ns=(r,p)=>r.slice(1).filter(n=>et(n,p)).map(n=>n.filter(l=>!["linestart","lineend"].includes(l))).map(n=>[n[0],n[n.length-1]]),rs=r=>(p,n)=>{const l=n().helper.branches;if(r===0){const o=n().param.stn_list,t=Sn(l,o);return ts(t,t).filter(a=>a[0]!==a[1])}else{const o=l[r];if(o){const t=o.filter(a=>!["linestart","lineend"].includes(a));return[[t[0],t.slice(-1)[0]]]}else return[]}},ui=(r,p)=>(n,l)=>{const o=l().param.coline,t=l().helper.branches[p];for(const[a,e]of Object.entries(o))if(e.from===r&&t.includes(e.to)){const s=t.indexOf(r),d=t.indexOf(e.to);if(d>s)return[d-s+1,a]}else if(e.to===r&&t.includes(e.to)){const s=t.indexOf(r),d=t.indexOf(e.from);if(d>s)return[d-s+1,a]}return[0,void 0]},An=(r,p)=>(n,l)=>{const o=l().param.stn_list,t=l().helper.branches;if(r===p)throw new Error("addColine():: failed for same stnId");const a=Sn(t,o).filter(s=>[r,p].includes(s)),e=ns(t,o).filter(s=>[r,p].every(d=>s.includes(d)));if(a.length===2&&e.length>0)throw new Error(`addColine():: main check failed for ${r}, ${p}`);if(a.length!==2&&e.length!==1)throw new Error(`addColine():: branch check failed for ${r}, ${p}`)},as=r=>(p,n)=>{const l=n().param.coline,t=n().helper.branches[r];return t?Object.entries(l).reduce((a,e)=>t.includes(e[1].from)&&t.includes(e[1].to)?{...a,[e[0]]:e[1]}:{...a},{}):{}},ss=r=>(p,n)=>{const l=n().param.coline;if(Object.keys(l).length===0)return;const o=Object.entries(l).reduce((t,a)=>a[1].from!==r&&a[1].to!==r?{...t,[a[0]]:a[1]}:{...t},{});p(Xe(o))},is=(r,p,n,l=!0)=>(o,t)=>{const a=t().param.coline;o(An(r,p)),o(Xe({...a,[Ye(4)]:{from:r,to:p,colors:n,display:l}}))},os=(r,p,n,l=!0)=>(o,t)=>{const a=t().param.coline;if(r in a){o(An(p,n));const e={...a,[r]:{...a[r],from:p,to:n,display:l}};o(Xe(e))}},ls=(r,p)=>(n,l)=>{const o=l().param.coline;if(r in o&&o[r].colors.length>p){const t=o[r].colors.filter((a,e)=>e!==p);if(t.length===0){const{[r]:a,...e}=o;n(Xe(e))}else{const a={...o,[r]:{...o[r],colors:t}};n(Xe(a))}}},ds=(r,p,n)=>(l,o)=>{const t=o().param.coline;r in t&&t[r].colors.length>p&&(t[r].colors=t[r].colors.map((a,e)=>e===p?[0,1,2,3,4,5].map(s=>n[s]===void 0?a[s]:n[s]):a),l(Xe(t)))};function cs(r){const{isOpen:p,onClose:n}=r,{t:l}=oe(),o=ye(),t=te(d=>d.app.selectedStation),[a,e]=Q.useState(!1);Q.useEffect(()=>{p||e(!1)},[p]);const s=()=>{const d=o(Qa(t));d?(n(),o(Qe(qe.CLOSE)),o(bn("linestart")),o(ss(t)),o(es(t))):e(!0),he.event(be.REMOVE_STATION,{success:d})};return q(He,{isOpen:p,onClose:n,children:[E(Be,{}),q(Ve,{children:[a&&q(Mt,{status:"error",variant:"solid",size:"xs",children:[E(Nt,{}),l("Unable to remove this station.")]}),q(we,{position:"relative",children:[E(Fe,{children:l("Remove station")}),E(Me,{})]}),E(Ne,{children:l("Are you sure to remove station? You cannot undo this action.")}),q(Je,{children:[E(ue,{onClick:n,children:l("Cancel")}),E(ue,{colorScheme:"primary",onClick:s,ml:3,children:l("Confirm")})]})]})]})}function us(){const{t:r}=oe(),p=ye(),n=te(t=>t.app.selectedStation),[l,o]=Q.useState(!1);return q(mr,{children:[q(Ce,{children:[E(ue,{size:"sm",variant:"outline",onClick:()=>p(kt(n)),children:r("StationSidePanel.footer.current")}),E(ue,{size:"sm",variant:"outline",onClick:()=>o(!0),children:r("StationSidePanel.footer.remove")})]}),E(cs,{isOpen:l,onClose:()=>o(!1)})]})}function ms(r){const{colineInfo:p,routeOptions:n,onUpdateRoute:l,onUpdateColourInfo:o,onDelete:t}=r,{t:a}=oe(),[e,s]=Q.useState(!1),d=[{type:"select",label:"Route",value:[p.from,p.to].join(","),options:n,onChange:h=>l==null?void 0:l(h)}],g=[{type:"custom",label:a("Colour"),component:E(Zt,{theme:[p.colors[0][0],p.colors[0][1],p.colors[0][2],p.colors[0][3]],onClick:()=>s(!0)})},{type:"input",label:a("Chinese name"),value:p.colors[0][4],minW:120,onChange:h=>o==null?void 0:o([p.colors[0][0],p.colors[0][1],p.colors[0][2],p.colors[0][3],h,p.colors[0][5]])},{type:"input",label:a("English name"),value:p.colors[0][5],minW:120,onChange:h=>o==null?void 0:o([p.colors[0][0],p.colors[0][1],p.colors[0][2],p.colors[0][3],p.colors[0][4],h])}];return q(Ze,{direction:"column",children:[E(ge,{fields:d,minW:"full"}),q(Ce,{spacing:.5,children:[E(ge,{fields:g}),E(je,{size:"sm",variant:"ghost","aria-label":"Delete colour for route",onClick:()=>t==null?void 0:t(0),icon:E(vt,{})})]}),E(Wt,{isOpen:e,onClose:()=>s(!1),defaultTheme:p.colors[0].slice(0,4),onUpdate:h=>o==null?void 0:o([...h,p.colors[0][4],p.colors[0][5]])})]})}function hs(){const{t:r}=oe(),p=ye(),n=te(_=>_.app.selectedBranch),{theme:l,stn_list:o}=te(_=>_.param),t=p(as(n)),a=p(rs(n)),e=_=>_.map(u=>o[u].name.join(" - ")).join(" ~ "),s=a.reduce((_,u)=>({..._,[u.join(",")]:e(u)}),{}),d=()=>{console.log(`ColineSection.handleAddTrackSharing():: Adding track sharing to branch ${n} with default combination`,a[0]),p(is(a[0][0],a[0][1],[[l[0],"","#AAAAAA",Se.white,"",""]]))},g=_=>u=>{const[y,m]=u.split(",");console.log(`ColineSection.handleUpdateRoute():: Updating route, colineId=${_}, from=${y}, to=${m}`);try{p(os(_,y,m))}catch(b){p(It({status:"error",message:"Unable to draw this share track."}))}},h=(_,u)=>{p(ls(_,u))};return q(yt,{align:"flex-start",p:1,children:[E(ze,{as:"h5",size:"sm",children:r("BranchSidePanel.coline.title")}),Object.entries(t).map(([_,u])=>E(ms,{colineInfo:u,routeOptions:s,onUpdateRoute:g(_),onUpdateColourInfo:y=>p(ds(_,0,y)),onDelete:y=>h(_,y)},_)),(n===0||Object.keys(t).length===0)&&E(ue,{size:"xs",variant:"ghost",alignSelf:"flex-end",leftIcon:E(xe,{}),onClick:d,children:r("BranchSidePanel.coline.add")})]})}function ps(r){const{isOpen:p,onClose:n}=r,{t:l}=oe(),o=ye(),t=te(A=>A.app.selectedBranch),{style:a,stn_list:e}=te(A=>A.param),s=te(A=>A.helper.branches),[d,g]=Q.useState(t),[h,_]=Q.useState("1"),[u,y]=Q.useState("2"),[m,b]=Q.useState("asc");Q.useEffect(()=>{g(t)},[t]);const v=[{type:"select",label:l("AutoNumModal.where"),value:d,options:{...s.reduce((A,O,H)=>({...A,[H]:H===0?l("AutoNumModal.main"):a!==ee.SHMetro||!et(O,e)?l("AutoNumModal.branch")+" "+H:l("AutoNumModal.external")+" "+H}),{})},onChange:A=>g(A)},{type:"input",label:l("AutoNumModal.from"),value:h,validator:A=>!isNaN(Number(A)),onChange:_,debouncedDelay:0},{type:"input",label:l("AutoNumModal.maxLength"),validator:A=>!isNaN(Number(A)),value:u,onChange:y,debouncedDelay:0},{type:"select",label:l("AutoNumModal.sort"),value:m,options:{asc:l("AutoNumModal.asc"),desc:l("AutoNumModal.desc")},onChange:A=>b(A)}],w=()=>{o(za(d,Number(h),Number(u),m)),n(),he.event(be.AUTO_NUMBERING,{})},P=!h||!u||isNaN(Number(h))||isNaN(Number(u));return q(He,{isOpen:p,onClose:n,children:[E(Be,{}),q(Ve,{children:[E(Fe,{children:l("AutoNumModal.title")}),E(Me,{}),E(Ne,{children:E(ge,{fields:v})}),E(Je,{children:E(ue,{colorScheme:"primary",isDisabled:P,onClick:w,children:l("Confirm")})})]})]})}const qt=r=>(p,n)=>{const o=n().helper.branches[r];return o.includes("linestart")||o.includes("lineend")?1:2},Ln=r=>(p,n)=>{const{branches:l}=n().helper,o=l[0],t=l[r];return o.slice(o.indexOf(t[0])+1,o.indexOf(t.slice(-1)[0]))},_s=(r,p)=>n=>n(qt(p))===2?(console.log("isStationValid2ConnectBranch():: failed as current branch has 2 connected ends"),!1):n(Ln(p)).includes(r)?!0:(console.log("isStationValid2ConnectBranch():: failed as the target station is invalid"),!1),fs=(r,p)=>(n,l)=>{if(!n(_s(r,p)))return!1;const{branches:t}=l().helper,a=l().param.stn_list,e=t[p];if(e[0]==="linestart"){const s={...a,[e[1]]:{...a[e[1]],parents:[r]},[r]:{...a[r],children:a.linestart.children.map(d=>d===e[1]?d:a[r].children[0]),branch:{left:[],right:a.linestart.branch.right}},linestart:{...a.linestart,children:a.linestart.children.filter(d=>d!==e[1]),branch:{left:[],right:[]}}};return n(Ge(s)),!0}else{const s=e.slice(-2)[0],d={...a,[s]:{...a[s],children:[r]},[r]:{...a[r],parents:a.lineend.parents.map(g=>g===s?g:a[r].parents[0]),branch:{right:[],left:a.lineend.branch.left}},lineend:{...a.lineend,parents:a.lineend.parents.filter(g=>g!==s),branch:{left:[],right:[]}}};return n(Ge(d)),!0}},Pn=r=>(p,n)=>{const{branches:l}=n().helper,o=n().param.stn_list,t=l[0],a=l[r];if(p(qt(r))!==2)return console.log("getPossibleDirection():: failed as there is no possible direction"),[];const s=t.indexOf(a[0]),d=t.slice(0,s),g=t.indexOf(a.slice(-1)[0]),h=t.slice(g+1),_=d.every(y=>o[y].children.length<=1&&o[y].parents.length<=1),u=h.every(y=>o[y].children.length<=1&&o[y].parents.length<=1);return _?u?[Le.left,Le.right]:[Le.left]:u?[Le.right]:[]},gs=(r,p)=>(n,l)=>{if(!n(Pn(p)).includes(r))return console.log("disconnectFromMainLine():: failed as the aim direction is not in the possible direction list"),!1;const{branches:t}=l().helper,a=l().param.stn_list,e=t[0],s=t[p];if(r===Le.left){const d=s[0],g={...a,[s[1]]:{...a[s[1]],parents:["linestart"]},[d]:{...a[d],children:a[d].children.filter(h=>h!==s[1]),branch:{right:[],left:[]}},linestart:{...a.linestart,children:a[d].children.map(h=>h===s[1]?h:e[1]),branch:{left:[],right:a[d].branch.right}}};return n(Ge(g)),!0}else{const d=s.slice(-1)[0],g=s.slice(-2)[0],h={...a,[g]:{...a[g],children:["lineend"]},[d]:{...a[d],parents:a[d].parents.filter(_=>_!==g),branch:{right:[],left:[]}},lineend:{...a.lineend,parents:a[d].parents.map(_=>_===g?_:e.slice(-2)[0]),branch:{right:[],left:a[d].branch.left}}};return n(Ge(h)),!0}};function on(r){const{direction:p}=r,{t:n}=oe(),l=ye(),{branches:o}=te(I=>I.helper),t=te(I=>I.app.selectedBranch),{style:a,stn_list:e}=te(I=>I.param),[s,d]=Q.useState(!1),[g,h]=Q.useState(""),_=o[t].filter(I=>!["linestart","lineend"].includes(I)),u=p===Le.left?_[0]:_.slice(-1)[0],y=e[u],m=l(Ln(t)),b=l(qt(t)),v=l(Pn(t)),w=b===1&&!o[0].includes(u),P=v.includes(p),A=m.reduce((I,B)=>{var D;return{...I,[B]:(D=e[B])==null?void 0:D.name.join(" - ")}},{"":n("Please select...")}),O=()=>{const I=l(fs(g,t));I?d(!1):l(It({status:"error",message:n("Unable to connect to main line.")})),he.event(be.CONNECT_BRANCH,{style:a,success:I})},H=()=>{const I=l(gs(p,t));I||l(It({status:"error",message:n("Unable to disconnect from main line.")})),he.event(be.DISCONNECT_BRANCH,{style:a,success:I})};return q(Ze,{direction:"column",children:[q(Oe,{alignItems:"center",children:[E(Pt,{label:n("Station name"),flex:1,children:E(hr,{defaultValue:y.name.join(" "),isDisabled:!0})}),s?E(ue,{mx:1,size:"sm",variant:"outline",onClick:()=>d(!1),children:n("Cancel")}):w?E(ue,{mx:1,size:"sm",variant:"solid",colorScheme:"primary",onClick:()=>d(!0),children:n("Connect to main line")}):E(ue,{mx:1,size:"sm",variant:"solid",colorScheme:"primary",onClick:H,isDisabled:!P,children:n("Disconnect from main line")})]}),s&&q(Oe,{alignItems:"center",children:[E(Pt,{label:n("Target station"),flex:1,children:E(pr,{defaultValue:g,options:A,disabledOptions:[""],onChange:({target:{value:I}})=>h(I)})}),E(ue,{mx:1,size:"sm",variant:"solid",colorScheme:"primary",onClick:O,isDisabled:!g,children:n("Confirm")})]})]})}function ys(){const{t:r}=oe(),p=ye(),n=te(e=>e.param.style),l=te(e=>e.app.selectedBranch),[o,t]=Q.useState(!1),a=()=>{p(wa(n===ee.SHMetro)),he.event(be.REVERSE_STATIONS,{style:n})};return q(we,{p:1,children:[E(ze,{as:"h5",size:"sm",children:r("BranchSidePanel.action.title")}),q(Oe,{wrap:"wrap",sx:{p:1,"&> *":{flexShrink:0,flexBasis:"100%","&:not(:first-of-type)":{marginTop:2}}},children:[l!==0&&n!==ee.SHMetro&&q(We,{children:[E(ze,{as:"h6",size:"xs",children:r("Branch left end")}),E(on,{direction:Le.left}),E(ze,{as:"h6",size:"xs",children:r("Branch right end")}),E(on,{direction:Le.right})]}),n===ee.GZMTR&&E(ue,{size:"sm",variant:"outline",leftIcon:E(_r,{}),alignSelf:"flex-end",onClick:()=>t(!0),children:r("BranchSidePanel.action.autoNum")}),E(ue,{size:"sm",variant:"outline",leftIcon:E(fr,{}),alignSelf:"flex-end",onClick:a,children:n===ee.SHMetro?r("BranchSidePanel.action.flip"):r("BranchSidePanel.action.reverse")})]}),E(ps,{isOpen:o,onClose:()=>t(!1)})]})}function vs(){const r=te(o=>o.app.selectedBranch),{style:p,stn_list:n}=te(o=>o.param),l=te(o=>o.helper.branches);return q(Vt,{children:[p===ee.SHMetro&&(r===0||et(l[r],n))&&q(We,{children:[E(hs,{}),E(Ue,{})]}),E(ys,{})]})}const bs=375;function Es(){var e,s;const{t:r}=oe(),p=Ft(),{sidePanelMode:n,selectedStation:l}=te(d=>d.app),o=te(d=>{var g;return(g=d.param.stn_list[l])==null?void 0:g.name}),t={STATION:{header:E(gr,{text:(o==null?void 0:o.join(" - "))||""}),body:E(Ga,{}),footer:E(us,{})},STYLE:{header:r("StyleSidePanel.header"),body:E(Xa,{})},BRANCH:{header:r("BranchSidePanel.header"),body:E(vs,{})},CLOSE:{header:"Close"}},a=()=>{p(Qe(qe.CLOSE))};return q(yr,{isOpen:n!==qe.CLOSE,width:bs,header:"Dummy header",children:[E(vr,{onClose:a,children:t[n].header}),(e=t[n])==null?void 0:e.body,(s=t[n])==null?void 0:s.footer]})}const On=(r,p,n)=>{const l=new Blob([n],{type:p});jt(r,l)},jt=(r,p)=>{const n=window.URL.createObjectURL(p),l=document.createElement("a");l.href=n,l.download=r,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(n)},zs=r=>new Promise(p=>{const n=new FileReader;n.onloadend=()=>p(n.result),n.readAsText(r)}),Rn=()=>navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome"),ws=r=>{if(r){const p=new Date().getTime()-r;return p<60*1e3?["Just now"]:p<2*60*1e3?["1","minute ago"]:p<60*60*1e3?[Math.floor(p/1e3/60).toString(),"minutes ago"]:p<2*60*60*1e3?["1","hour ago"]:p<24*60*60*1e3?[Math.floor(p/1e3/60/60).toString(),"hours ago"]:p<48*60*60*1e3?["1","day ago"]:[Math.floor(p/1e3/60/60/24).toString(),"days ago"]}else return["Unknown"]};function mt(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ct={},Ss={get exports(){return Ct},set exports(r){Ct=r}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(r,p){(function(n){r.exports=n()})(function(){return function n(l,o,t){function a(d,g){if(!o[d]){if(!l[d]){var h=typeof mt=="function"&&mt;if(!g&&h)return h(d,!0);if(e)return e(d,!0);var _=new Error("Cannot find module '"+d+"'");throw _.code="MODULE_NOT_FOUND",_}var u=o[d]={exports:{}};l[d][0].call(u.exports,function(y){var m=l[d][1][y];return a(m||y)},u,u.exports,n,l,o,t)}return o[d].exports}for(var e=typeof mt=="function"&&mt,s=0;s<t.length;s++)a(t[s]);return a}({1:[function(n,l,o){var t=n("./utils"),a=n("./support"),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(s){for(var d,g,h,_,u,y,m,b=[],v=0,w=s.length,P=w,A=t.getTypeOf(s)!=="string";v<s.length;)P=w-v,h=A?(d=s[v++],g=v<w?s[v++]:0,v<w?s[v++]:0):(d=s.charCodeAt(v++),g=v<w?s.charCodeAt(v++):0,v<w?s.charCodeAt(v++):0),_=d>>2,u=(3&d)<<4|g>>4,y=1<P?(15&g)<<2|h>>6:64,m=2<P?63&h:64,b.push(e.charAt(_)+e.charAt(u)+e.charAt(y)+e.charAt(m));return b.join("")},o.decode=function(s){var d,g,h,_,u,y,m=0,b=0,v="data:";if(s.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var w,P=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===e.charAt(64)&&P--,s.charAt(s.length-2)===e.charAt(64)&&P--,P%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=a.uint8array?new Uint8Array(0|P):new Array(0|P);m<s.length;)d=e.indexOf(s.charAt(m++))<<2|(_=e.indexOf(s.charAt(m++)))>>4,g=(15&_)<<4|(u=e.indexOf(s.charAt(m++)))>>2,h=(3&u)<<6|(y=e.indexOf(s.charAt(m++))),w[b++]=d,u!==64&&(w[b++]=g),y!==64&&(w[b++]=h);return w}},{"./support":30,"./utils":32}],2:[function(n,l,o){var t=n("./external"),a=n("./stream/DataWorker"),e=n("./stream/Crc32Probe"),s=n("./stream/DataLengthProbe");function d(g,h,_,u,y){this.compressedSize=g,this.uncompressedSize=h,this.crc32=_,this.compression=u,this.compressedContent=y}d.prototype={getContentWorker:function(){var g=new a(t.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),h=this;return g.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),g},getCompressedWorker:function(){return new a(t.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(g,h,_){return g.pipe(new e).pipe(new s("uncompressedSize")).pipe(h.compressWorker(_)).pipe(new s("compressedSize")).withStreamInfo("compression",h)},l.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,l,o){var t=n("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new t("STORE compression")},uncompressWorker:function(){return new t("STORE decompression")}},o.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,l,o){var t=n("./utils"),a=function(){for(var e,s=[],d=0;d<256;d++){e=d;for(var g=0;g<8;g++)e=1&e?3988292384^e>>>1:e>>>1;s[d]=e}return s}();l.exports=function(e,s){return e!==void 0&&e.length?t.getTypeOf(e)!=="string"?function(d,g,h,_){var u=a,y=_+h;d^=-1;for(var m=_;m<y;m++)d=d>>>8^u[255&(d^g[m])];return-1^d}(0|s,e,e.length,0):function(d,g,h,_){var u=a,y=_+h;d^=-1;for(var m=_;m<y;m++)d=d>>>8^u[255&(d^g.charCodeAt(m))];return-1^d}(0|s,e,e.length,0):0}},{"./utils":32}],5:[function(n,l,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(n,l,o){var t=null;t=typeof Promise<"u"?Promise:n("lie"),l.exports={Promise:t}},{lie:37}],7:[function(n,l,o){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),e=n("./utils"),s=n("./stream/GenericWorker"),d=t?"uint8array":"array";function g(h,_){s.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=_,this.meta={}}o.magic="\b\0",e.inherits(g,s),g.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(e.transformTo(d,h.data),!1)},g.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},g.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},g.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(_){h.push({data:_,meta:h.meta})}},o.compressWorker=function(h){return new g("Deflate",h)},o.uncompressWorker=function(){return new g("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,l,o){function t(u,y){var m,b="";for(m=0;m<y;m++)b+=String.fromCharCode(255&u),u>>>=8;return b}function a(u,y,m,b,v,w){var P,A,O=u.file,H=u.compression,I=w!==d.utf8encode,B=e.transformTo("string",w(O.name)),D=e.transformTo("string",d.utf8encode(O.name)),M=O.comment,$=e.transformTo("string",w(M)),L=e.transformTo("string",d.utf8encode(M)),x=D.length!==O.name.length,c=L.length!==M.length,V="",ae="",W="",ie=O.dir,Z=O.date,se={crc32:0,compressedSize:0,uncompressedSize:0};y&&!m||(se.crc32=u.crc32,se.compressedSize=u.compressedSize,se.uncompressedSize=u.uncompressedSize);var j=0;y&&(j|=8),I||!x&&!c||(j|=2048);var k=0,re=0;ie&&(k|=16),v==="UNIX"?(re=798,k|=function(Y,pe){var Ee=Y;return Y||(Ee=pe?16893:33204),(65535&Ee)<<16}(O.unixPermissions,ie)):(re=20,k|=function(Y){return 63&(Y||0)}(O.dosPermissions)),P=Z.getUTCHours(),P<<=6,P|=Z.getUTCMinutes(),P<<=5,P|=Z.getUTCSeconds()/2,A=Z.getUTCFullYear()-1980,A<<=4,A|=Z.getUTCMonth()+1,A<<=5,A|=Z.getUTCDate(),x&&(ae=t(1,1)+t(g(B),4)+D,V+="up"+t(ae.length,2)+ae),c&&(W=t(1,1)+t(g($),4)+L,V+="uc"+t(W.length,2)+W);var K="";return K+=`
\0`,K+=t(j,2),K+=H.magic,K+=t(P,2),K+=t(A,2),K+=t(se.crc32,4),K+=t(se.compressedSize,4),K+=t(se.uncompressedSize,4),K+=t(B.length,2),K+=t(V.length,2),{fileRecord:h.LOCAL_FILE_HEADER+K+B+V,dirRecord:h.CENTRAL_FILE_HEADER+t(re,2)+K+t($.length,2)+"\0\0\0\0"+t(k,4)+t(b,4)+B+V+$}}var e=n("../utils"),s=n("../stream/GenericWorker"),d=n("../utf8"),g=n("../crc32"),h=n("../signature");function _(u,y,m,b){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=m,this.encodeFileName=b,this.streamFiles=u,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}e.inherits(_,s),_.prototype.push=function(u){var y=u.meta.percent||0,m=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(u):(this.bytesWritten+=u.data.length,s.prototype.push.call(this,{data:u.data,meta:{currentFile:this.currentFile,percent:m?(y+100*(m-b-1))/m:100}}))},_.prototype.openedSource=function(u){this.currentSourceOffset=this.bytesWritten,this.currentFile=u.file.name;var y=this.streamFiles&&!u.file.dir;if(y){var m=a(u,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(u){this.accumulate=!1;var y=this.streamFiles&&!u.file.dir,m=a(u,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),y)this.push({data:function(b){return h.DATA_DESCRIPTOR+t(b.crc32,4)+t(b.compressedSize,4)+t(b.uncompressedSize,4)}(u),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var u=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var m=this.bytesWritten-u,b=function(v,w,P,A,O){var H=e.transformTo("string",O(A));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+t(v,2)+t(v,2)+t(w,4)+t(P,4)+t(H.length,2)+H}(this.dirRecords.length,m,u,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(u){this._sources.push(u);var y=this;return u.on("data",function(m){y.processChunk(m)}),u.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),u.on("error",function(m){y.error(m)}),this},_.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(u){var y=this._sources;if(!s.prototype.error.call(this,u))return!1;for(var m=0;m<y.length;m++)try{y[m].error(u)}catch(b){}return!0},_.prototype.lock=function(){s.prototype.lock.call(this);for(var u=this._sources,y=0;y<u.length;y++)u[y].lock()},l.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,l,o){var t=n("../compressions"),a=n("./ZipFileWorker");o.generateWorker=function(e,s,d){var g=new a(s.streamFiles,d,s.platform,s.encodeFileName),h=0;try{e.forEach(function(_,u){h++;var y=function(w,P){var A=w||P,O=t[A];if(!O)throw new Error(A+" is not a valid compression method !");return O}(u.options.compression,s.compression),m=u.options.compressionOptions||s.compressionOptions||{},b=u.dir,v=u.date;u._compressWorker(y,m).withStreamInfo("file",{name:_,dir:b,date:v,comment:u.comment||"",unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions}).pipe(g)}),g.entriesCount=h}catch(_){g.error(_)}return g}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,l,o){function t(){if(!(this instanceof t))return new t;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new t;for(var e in this)typeof this[e]!="function"&&(a[e]=this[e]);return a}}(t.prototype=n("./object")).loadAsync=n("./load"),t.support=n("./support"),t.defaults=n("./defaults"),t.version="3.10.1",t.loadAsync=function(a,e){return new t().loadAsync(a,e)},t.external=n("./external"),l.exports=t},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,l,o){var t=n("./utils"),a=n("./external"),e=n("./utf8"),s=n("./zipEntries"),d=n("./stream/Crc32Probe"),g=n("./nodejsUtils");function h(_){return new a.Promise(function(u,y){var m=_.decompressed.getContentWorker().pipe(new d);m.on("error",function(b){y(b)}).on("end",function(){m.streamInfo.crc32!==_.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):u()}).resume()})}l.exports=function(_,u){var y=this;return u=t.extend(u||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:e.utf8decode}),g.isNode&&g.isStream(_)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):t.prepareContent("the loaded zip file",_,!0,u.optimizedBinaryString,u.base64).then(function(m){var b=new s(u);return b.load(m),b}).then(function(m){var b=[a.Promise.resolve(m)],v=m.files;if(u.checkCRC32)for(var w=0;w<v.length;w++)b.push(h(v[w]));return a.Promise.all(b)}).then(function(m){for(var b=m.shift(),v=b.files,w=0;w<v.length;w++){var P=v[w],A=P.fileNameStr,O=t.resolve(P.fileNameStr);y.file(O,P.decompressed,{binary:!0,optimizedBinaryString:!0,date:P.date,dir:P.dir,comment:P.fileCommentStr.length?P.fileCommentStr:null,unixPermissions:P.unixPermissions,dosPermissions:P.dosPermissions,createFolders:u.createFolders}),P.dir||(y.file(O).unsafeOriginalName=A)}return b.zipComment.length&&(y.comment=b.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,l,o){var t=n("../utils"),a=n("../stream/GenericWorker");function e(s,d){a.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(d)}t.inherits(e,a),e.prototype._bindStream=function(s){var d=this;(this._stream=s).pause(),s.on("data",function(g){d.push({data:g,meta:{percent:0}})}).on("error",function(g){d.isPaused?this.generatedError=g:d.error(g)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},e.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},e.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},l.exports=e},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,l,o){var t=n("readable-stream").Readable;function a(e,s,d){t.call(this,s),this._helper=e;var g=this;e.on("data",function(h,_){g.push(h)||g._helper.pause(),d&&d(_)}).on("error",function(h){g.emit("error",h)}).on("end",function(){g.push(null)})}n("../utils").inherits(a,t),a.prototype._read=function(){this._helper.resume()},l.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,l,o){l.exports={isNode:typeof Buffer<"u",newBufferFrom:function(t,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,a);if(typeof t=="number")throw new Error('The "data" argument must not be a number');return new Buffer(t,a)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var a=new Buffer(t);return a.fill(0),a},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&typeof t.on=="function"&&typeof t.pause=="function"&&typeof t.resume=="function"}}},{}],15:[function(n,l,o){function t(O,H,I){var B,D=e.getTypeOf(H),M=e.extend(I||{},g);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(O=v(O)),M.createFolders&&(B=b(O))&&w.call(this,B,!0);var $=D==="string"&&M.binary===!1&&M.base64===!1;I&&I.binary!==void 0||(M.binary=!$),(H instanceof h&&H.uncompressedSize===0||M.dir||!H||H.length===0)&&(M.base64=!1,M.binary=!0,H="",M.compression="STORE",D="string");var L=null;L=H instanceof h||H instanceof s?H:y.isNode&&y.isStream(H)?new m(O,H):e.prepareContent(O,H,M.binary,M.optimizedBinaryString,M.base64);var x=new _(O,L,M);this.files[O]=x}var a=n("./utf8"),e=n("./utils"),s=n("./stream/GenericWorker"),d=n("./stream/StreamHelper"),g=n("./defaults"),h=n("./compressedObject"),_=n("./zipObject"),u=n("./generate"),y=n("./nodejsUtils"),m=n("./nodejs/NodejsStreamInputAdapter"),b=function(O){O.slice(-1)==="/"&&(O=O.substring(0,O.length-1));var H=O.lastIndexOf("/");return 0<H?O.substring(0,H):""},v=function(O){return O.slice(-1)!=="/"&&(O+="/"),O},w=function(O,H){return H=H!==void 0?H:g.createFolders,O=v(O),this.files[O]||t.call(this,O,null,{dir:!0,createFolders:H}),this.files[O]};function P(O){return Object.prototype.toString.call(O)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(O){var H,I,B;for(H in this.files)B=this.files[H],(I=H.slice(this.root.length,H.length))&&H.slice(0,this.root.length)===this.root&&O(I,B)},filter:function(O){var H=[];return this.forEach(function(I,B){O(I,B)&&H.push(B)}),H},file:function(O,H,I){if(arguments.length!==1)return O=this.root+O,t.call(this,O,H,I),this;if(P(O)){var B=O;return this.filter(function(M,$){return!$.dir&&B.test(M)})}var D=this.files[this.root+O];return D&&!D.dir?D:null},folder:function(O){if(!O)return this;if(P(O))return this.filter(function(D,M){return M.dir&&O.test(D)});var H=this.root+O,I=w.call(this,H),B=this.clone();return B.root=I.name,B},remove:function(O){O=this.root+O;var H=this.files[O];if(H||(O.slice(-1)!=="/"&&(O+="/"),H=this.files[O]),H&&!H.dir)delete this.files[O];else for(var I=this.filter(function(D,M){return M.name.slice(0,O.length)===O}),B=0;B<I.length;B++)delete this.files[I[B].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(O){var H,I={};try{if((I=e.extend(O||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");e.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var B=I.comment||this.comment||"";H=u.generateWorker(this,I,B)}catch(D){(H=new s("error")).error(D)}return new d(H,I.type||"string",I.mimeType)},generateAsync:function(O,H){return this.generateInternalStream(O).accumulate(H)},generateNodeStream:function(O,H){return(O=O||{}).type||(O.type="nodebuffer"),this.generateInternalStream(O).toNodejsStream(H)}};l.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,l,o){l.exports=n("stream")},{stream:void 0}],17:[function(n,l,o){var t=n("./DataReader");function a(e){t.call(this,e);for(var s=0;s<this.data.length;s++)e[s]=255&e[s]}n("../utils").inherits(a,t),a.prototype.byteAt=function(e){return this.data[this.zero+e]},a.prototype.lastIndexOfSignature=function(e){for(var s=e.charCodeAt(0),d=e.charCodeAt(1),g=e.charCodeAt(2),h=e.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===s&&this.data[_+1]===d&&this.data[_+2]===g&&this.data[_+3]===h)return _-this.zero;return-1},a.prototype.readAndCheckSignature=function(e){var s=e.charCodeAt(0),d=e.charCodeAt(1),g=e.charCodeAt(2),h=e.charCodeAt(3),_=this.readData(4);return s===_[0]&&d===_[1]&&g===_[2]&&h===_[3]},a.prototype.readData=function(e){if(this.checkOffset(e),e===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,s},l.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,l,o){var t=n("../utils");function a(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var s,d=0;for(this.checkOffset(e),s=this.index+e-1;s>=this.index;s--)d=(d<<8)+this.byteAt(s);return this.index+=e,d},readString:function(e){return t.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},l.exports=a},{"../utils":32}],19:[function(n,l,o){var t=n("./Uint8ArrayReader");function a(e){t.call(this,e)}n("../utils").inherits(a,t),a.prototype.readData=function(e){this.checkOffset(e);var s=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,s},l.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,l,o){var t=n("./DataReader");function a(e){t.call(this,e)}n("../utils").inherits(a,t),a.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},a.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},a.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},a.prototype.readData=function(e){this.checkOffset(e);var s=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,s},l.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,l,o){var t=n("./ArrayReader");function a(e){t.call(this,e)}n("../utils").inherits(a,t),a.prototype.readData=function(e){if(this.checkOffset(e),e===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,s},l.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,l,o){var t=n("../utils"),a=n("../support"),e=n("./ArrayReader"),s=n("./StringReader"),d=n("./NodeBufferReader"),g=n("./Uint8ArrayReader");l.exports=function(h){var _=t.getTypeOf(h);return t.checkSupport(_),_!=="string"||a.uint8array?_==="nodebuffer"?new d(h):a.uint8array?new g(t.transformTo("uint8array",h)):new e(t.transformTo("array",h)):new s(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,l,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,l,o){var t=n("./GenericWorker"),a=n("../utils");function e(s){t.call(this,"ConvertWorker to "+s),this.destType=s}a.inherits(e,t),e.prototype.processChunk=function(s){this.push({data:a.transformTo(this.destType,s.data),meta:s.meta})},l.exports=e},{"../utils":32,"./GenericWorker":28}],25:[function(n,l,o){var t=n("./GenericWorker"),a=n("../crc32");function e(){t.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(e,t),e.prototype.processChunk=function(s){this.streamInfo.crc32=a(s.data,this.streamInfo.crc32||0),this.push(s)},l.exports=e},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,l,o){var t=n("../utils"),a=n("./GenericWorker");function e(s){a.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}t.inherits(e,a),e.prototype.processChunk=function(s){if(s){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+s.data.length}a.prototype.processChunk.call(this,s)},l.exports=e},{"../utils":32,"./GenericWorker":28}],27:[function(n,l,o){var t=n("../utils"),a=n("./GenericWorker");function e(s){a.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(g){d.dataIsReady=!0,d.data=g,d.max=g&&g.length||0,d.type=t.getTypeOf(g),d.isPaused||d._tickAndRepeat()},function(g){d.error(g)})}t.inherits(e,a),e.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},e.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,t.delay(this._tickAndRepeat,[],this)),!0)},e.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(t.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},e.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,d);break;case"uint8array":s=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":s=this.data.slice(this.index,d)}return this.index=d,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},l.exports=e},{"../utils":32,"./GenericWorker":28}],28:[function(n,l,o){function t(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}t.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,e){return this._listeners[a].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,e){if(this._listeners[a])for(var s=0;s<this._listeners[a].length;s++)this._listeners[a][s].call(this,e)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var e=this;return a.on("data",function(s){e.processChunk(s)}),a.on("end",function(){e.end()}),a.on("error",function(s){e.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,e){return this.extraStreamInfo[a]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},l.exports=t},{}],29:[function(n,l,o){var t=n("../utils"),a=n("./ConvertWorker"),e=n("./GenericWorker"),s=n("../base64"),d=n("../support"),g=n("../external"),h=null;if(d.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch(y){}function _(y,m){return new g.Promise(function(b,v){var w=[],P=y._internalType,A=y._outputType,O=y._mimeType;y.on("data",function(H,I){w.push(H),m&&m(I)}).on("error",function(H){w=[],v(H)}).on("end",function(){try{var H=function(I,B,D){switch(I){case"blob":return t.newBlob(t.transformTo("arraybuffer",B),D);case"base64":return s.encode(B);default:return t.transformTo(I,B)}}(A,function(I,B){var D,M=0,$=null,L=0;for(D=0;D<B.length;D++)L+=B[D].length;switch(I){case"string":return B.join("");case"array":return Array.prototype.concat.apply([],B);case"uint8array":for($=new Uint8Array(L),D=0;D<B.length;D++)$.set(B[D],M),M+=B[D].length;return $;case"nodebuffer":return Buffer.concat(B);default:throw new Error("concat : unsupported type '"+I+"'")}}(P,w),O);b(H)}catch(I){v(I)}w=[]}).resume()})}function u(y,m,b){var v=m;switch(m){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=m,this._mimeType=b,t.checkSupport(v),this._worker=y.pipe(new a(v)),y.lock()}catch(w){this._worker=new e("error"),this._worker.error(w)}}u.prototype={accumulate:function(y){return _(this,y)},on:function(y,m){var b=this;return y==="data"?this._worker.on(y,function(v){m.call(b,v.data,v.meta)}):this._worker.on(y,function(){t.delay(m,arguments,b)}),this},resume:function(){return t.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(t.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},y)}},l.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,l,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var t=new ArrayBuffer(0);try{o.blob=new Blob([t],{type:"application/zip"}).size===0}catch(e){try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(t),o.blob=a.getBlob("application/zip").size===0}catch(s){o.blob=!1}}}try{o.nodestream=!!n("readable-stream").Readable}catch(e){o.nodestream=!1}},{"readable-stream":16}],31:[function(n,l,o){for(var t=n("./utils"),a=n("./support"),e=n("./nodejsUtils"),s=n("./stream/GenericWorker"),d=new Array(256),g=0;g<256;g++)d[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;d[254]=d[254]=1;function h(){s.call(this,"utf-8 decode"),this.leftOver=null}function _(){s.call(this,"utf-8 encode")}o.utf8encode=function(u){return a.nodebuffer?e.newBufferFrom(u,"utf-8"):function(y){var m,b,v,w,P,A=y.length,O=0;for(w=0;w<A;w++)(64512&(b=y.charCodeAt(w)))==55296&&w+1<A&&(64512&(v=y.charCodeAt(w+1)))==56320&&(b=65536+(b-55296<<10)+(v-56320),w++),O+=b<128?1:b<2048?2:b<65536?3:4;for(m=a.uint8array?new Uint8Array(O):new Array(O),w=P=0;P<O;w++)(64512&(b=y.charCodeAt(w)))==55296&&w+1<A&&(64512&(v=y.charCodeAt(w+1)))==56320&&(b=65536+(b-55296<<10)+(v-56320),w++),b<128?m[P++]=b:(b<2048?m[P++]=192|b>>>6:(b<65536?m[P++]=224|b>>>12:(m[P++]=240|b>>>18,m[P++]=128|b>>>12&63),m[P++]=128|b>>>6&63),m[P++]=128|63&b);return m}(u)},o.utf8decode=function(u){return a.nodebuffer?t.transformTo("nodebuffer",u).toString("utf-8"):function(y){var m,b,v,w,P=y.length,A=new Array(2*P);for(m=b=0;m<P;)if((v=y[m++])<128)A[b++]=v;else if(4<(w=d[v]))A[b++]=65533,m+=w-1;else{for(v&=w===2?31:w===3?15:7;1<w&&m<P;)v=v<<6|63&y[m++],w--;1<w?A[b++]=65533:v<65536?A[b++]=v:(v-=65536,A[b++]=55296|v>>10&1023,A[b++]=56320|1023&v)}return A.length!==b&&(A.subarray?A=A.subarray(0,b):A.length=b),t.applyFromCharCode(A)}(u=t.transformTo(a.uint8array?"uint8array":"array",u))},t.inherits(h,s),h.prototype.processChunk=function(u){var y=t.transformTo(a.uint8array?"uint8array":"array",u.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var m=y;(y=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),y.set(m,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var b=function(w,P){var A;for((P=P||w.length)>w.length&&(P=w.length),A=P-1;0<=A&&(192&w[A])==128;)A--;return A<0||A===0?P:A+d[w[A]]>P?A:P}(y),v=y;b!==y.length&&(a.uint8array?(v=y.subarray(0,b),this.leftOver=y.subarray(b,y.length)):(v=y.slice(0,b),this.leftOver=y.slice(b,y.length))),this.push({data:o.utf8decode(v),meta:u.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=h,t.inherits(_,s),_.prototype.processChunk=function(u){this.push({data:o.utf8encode(u.data),meta:u.meta})},o.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,l,o){var t=n("./support"),a=n("./base64"),e=n("./nodejsUtils"),s=n("./external");function d(m){return m}function g(m,b){for(var v=0;v<m.length;++v)b[v]=255&m.charCodeAt(v);return b}n("setimmediate"),o.newBlob=function(m,b){o.checkSupport("blob");try{return new Blob([m],{type:b})}catch(w){try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(m),v.getBlob(b)}catch(P){throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(m,b,v){var w=[],P=0,A=m.length;if(A<=v)return String.fromCharCode.apply(null,m);for(;P<A;)b==="array"||b==="nodebuffer"?w.push(String.fromCharCode.apply(null,m.slice(P,Math.min(P+v,A)))):w.push(String.fromCharCode.apply(null,m.subarray(P,Math.min(P+v,A)))),P+=v;return w.join("")},stringifyByChar:function(m){for(var b="",v=0;v<m.length;v++)b+=String.fromCharCode(m[v]);return b},applyCanBeUsed:{uint8array:function(){try{return t.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(m){return!1}}(),nodebuffer:function(){try{return t.nodebuffer&&String.fromCharCode.apply(null,e.allocBuffer(1)).length===1}catch(m){return!1}}()}};function _(m){var b=65536,v=o.getTypeOf(m),w=!0;if(v==="uint8array"?w=h.applyCanBeUsed.uint8array:v==="nodebuffer"&&(w=h.applyCanBeUsed.nodebuffer),w)for(;1<b;)try{return h.stringifyByChunk(m,v,b)}catch(P){b=Math.floor(b/2)}return h.stringifyByChar(m)}function u(m,b){for(var v=0;v<m.length;v++)b[v]=m[v];return b}o.applyFromCharCode=_;var y={};y.string={string:d,array:function(m){return g(m,new Array(m.length))},arraybuffer:function(m){return y.string.uint8array(m).buffer},uint8array:function(m){return g(m,new Uint8Array(m.length))},nodebuffer:function(m){return g(m,e.allocBuffer(m.length))}},y.array={string:_,array:d,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return e.newBufferFrom(m)}},y.arraybuffer={string:function(m){return _(new Uint8Array(m))},array:function(m){return u(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:d,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return e.newBufferFrom(new Uint8Array(m))}},y.uint8array={string:_,array:function(m){return u(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:d,nodebuffer:function(m){return e.newBufferFrom(m)}},y.nodebuffer={string:_,array:function(m){return u(m,new Array(m.length))},arraybuffer:function(m){return y.nodebuffer.uint8array(m).buffer},uint8array:function(m){return u(m,new Uint8Array(m.length))},nodebuffer:d},o.transformTo=function(m,b){if(b=b||"",!m)return b;o.checkSupport(m);var v=o.getTypeOf(b);return y[v][m](b)},o.resolve=function(m){for(var b=m.split("/"),v=[],w=0;w<b.length;w++){var P=b[w];P==="."||P===""&&w!==0&&w!==b.length-1||(P===".."?v.pop():v.push(P))}return v.join("/")},o.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":t.nodebuffer&&e.isBuffer(m)?"nodebuffer":t.uint8array&&m instanceof Uint8Array?"uint8array":t.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(m){if(!t[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(m){var b,v,w="";for(v=0;v<(m||"").length;v++)w+="\\x"+((b=m.charCodeAt(v))<16?"0":"")+b.toString(16).toUpperCase();return w},o.delay=function(m,b,v){setImmediate(function(){m.apply(v||null,b||[])})},o.inherits=function(m,b){function v(){}v.prototype=b.prototype,m.prototype=new v},o.extend=function(){var m,b,v={};for(m=0;m<arguments.length;m++)for(b in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],b)&&v[b]===void 0&&(v[b]=arguments[m][b]);return v},o.prepareContent=function(m,b,v,w,P){return s.Promise.resolve(b).then(function(A){return t.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new s.Promise(function(O,H){var I=new FileReader;I.onload=function(B){O(B.target.result)},I.onerror=function(B){H(B.target.error)},I.readAsArrayBuffer(A)}):A}).then(function(A){var O=o.getTypeOf(A);return O?(O==="arraybuffer"?A=o.transformTo("uint8array",A):O==="string"&&(P?A=a.decode(A):v&&w!==!0&&(A=function(H){return g(H,t.uint8array?new Uint8Array(H.length):new Array(H.length))}(A))),A):s.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,l,o){var t=n("./reader/readerFor"),a=n("./utils"),e=n("./signature"),s=n("./zipEntry"),d=n("./support");function g(h){this.files=[],this.loadOptions=h}g.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(_)+", expected "+a.pretty(h)+")")}},isSignature:function(h,_){var u=this.reader.index;this.reader.setIndex(h);var y=this.reader.readString(4)===_;return this.reader.setIndex(u),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),_=d.uint8array?"uint8array":"array",u=a.transformTo(_,h);this.zipComment=this.loadOptions.decodeFileName(u)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,_,u,y=this.zip64EndOfCentralSize-44;0<y;)h=this.reader.readInt(2),_=this.reader.readInt(4),u=this.reader.readData(_),this.zip64ExtensibleData[h]={id:h,length:_,value:u}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,_;for(h=0;h<this.files.length;h++)_=this.files[h],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(e.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(e.CENTRAL_FILE_HEADER);)(h=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(e.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,e.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var _=h;if(this.checkSignature(e.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,e.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var u=this.centralDirOffset+this.centralDirSize;this.zip64&&(u+=20,u+=12+this.zip64EndOfCentralSize);var y=_-u;if(0<y)this.isSignature(_,e.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(h){this.reader=t(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},l.exports=g},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,l,o){var t=n("./reader/readerFor"),a=n("./utils"),e=n("./compressedObject"),s=n("./crc32"),d=n("./utf8"),g=n("./compressions"),h=n("./support");function _(u,y){this.options=u,this.loadOptions=y}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(u){var y,m;if(u.skip(22),this.fileNameLength=u.readInt(2),m=u.readInt(2),this.fileName=u.readData(this.fileNameLength),u.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(b){for(var v in g)if(Object.prototype.hasOwnProperty.call(g,v)&&g[v].magic===b)return g[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new e(this.compressedSize,this.uncompressedSize,this.crc32,y,u.readData(this.compressedSize))},readCentralPart:function(u){this.versionMadeBy=u.readInt(2),u.skip(2),this.bitFlag=u.readInt(2),this.compressionMethod=u.readString(2),this.date=u.readDate(),this.crc32=u.readInt(4),this.compressedSize=u.readInt(4),this.uncompressedSize=u.readInt(4);var y=u.readInt(2);if(this.extraFieldsLength=u.readInt(2),this.fileCommentLength=u.readInt(2),this.diskNumberStart=u.readInt(2),this.internalFileAttributes=u.readInt(2),this.externalFileAttributes=u.readInt(4),this.localHeaderOffset=u.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");u.skip(y),this.readExtraFields(u),this.parseZIP64ExtraField(u),this.fileComment=u.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var u=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),u==0&&(this.dosPermissions=63&this.externalFileAttributes),u==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var u=t(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=u.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=u.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=u.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=u.readInt(4))}},readExtraFields:function(u){var y,m,b,v=u.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});u.index+4<v;)y=u.readInt(2),m=u.readInt(2),b=u.readData(m),this.extraFields[y]={id:y,length:m,value:b};u.setIndex(v)},handleUTF8:function(){var u=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var m=a.transformTo(u,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var v=a.transformTo(u,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var u=this.extraFields[28789];if(u){var y=t(u.value);return y.readInt(1)!==1||s(this.fileName)!==y.readInt(4)?null:d.utf8decode(y.readData(u.length-5))}return null},findExtraFieldUnicodeComment:function(){var u=this.extraFields[25461];if(u){var y=t(u.value);return y.readInt(1)!==1||s(this.fileComment)!==y.readInt(4)?null:d.utf8decode(y.readData(u.length-5))}return null}},l.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,l,o){function t(y,m,b){this.name=y,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=m,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var a=n("./stream/StreamHelper"),e=n("./stream/DataWorker"),s=n("./utf8"),d=n("./compressedObject"),g=n("./stream/GenericWorker");t.prototype={internalStream:function(y){var m=null,b="string";try{if(!y)throw new Error("No output type specified.");var v=(b=y.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),m=this._decompressWorker();var w=!this._dataBinary;w&&!v&&(m=m.pipe(new s.Utf8EncodeWorker)),!w&&v&&(m=m.pipe(new s.Utf8DecodeWorker))}catch(P){(m=new g("error")).error(P)}return new a(m,b,"")},async:function(y,m){return this.internalStream(y).accumulate(m)},nodeStream:function(y,m){return this.internalStream(y||"nodebuffer").toNodejsStream(m)},_compressWorker:function(y,m){if(this._data instanceof d&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new s.Utf8EncodeWorker)),d.createWorkerFrom(b,y,m)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof g?this._data:new e(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<h.length;u++)t.prototype[h[u]]=_;l.exports=t},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,l,o){(function(t){var a,e,s=t.MutationObserver||t.WebKitMutationObserver;if(s){var d=0,g=new s(y),h=t.document.createTextNode("");g.observe(h,{characterData:!0}),a=function(){h.data=d=++d%2}}else if(t.setImmediate||t.MessageChannel===void 0)a="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var m=t.document.createElement("script");m.onreadystatechange=function(){y(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},t.document.documentElement.appendChild(m)}:function(){setTimeout(y,0)};else{var _=new t.MessageChannel;_.port1.onmessage=y,a=function(){_.port2.postMessage(0)}}var u=[];function y(){var m,b;e=!0;for(var v=u.length;v;){for(b=u,u=[],m=-1;++m<v;)b[m]();v=u.length}e=!1}l.exports=function(m){u.push(m)!==1||e||a()}}).call(this,typeof ut<"u"?ut:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,l,o){var t=n("immediate");function a(){}var e={},s=["REJECTED"],d=["FULFILLED"],g=["PENDING"];function h(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,v!==a&&m(this,v)}function _(v,w,P){this.promise=v,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof P=="function"&&(this.onRejected=P,this.callRejected=this.otherCallRejected)}function u(v,w,P){t(function(){var A;try{A=w(P)}catch(O){return e.reject(v,O)}A===v?e.reject(v,new TypeError("Cannot resolve promise with itself")):e.resolve(v,A)})}function y(v){var w=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof w=="function")return function(){w.apply(v,arguments)}}function m(v,w){var P=!1;function A(I){P||(P=!0,e.reject(v,I))}function O(I){P||(P=!0,e.resolve(v,I))}var H=b(function(){w(O,A)});H.status==="error"&&A(H.value)}function b(v,w){var P={};try{P.value=v(w),P.status="success"}catch(A){P.status="error",P.value=A}return P}(l.exports=h).prototype.finally=function(v){if(typeof v!="function")return this;var w=this.constructor;return this.then(function(P){return w.resolve(v()).then(function(){return P})},function(P){return w.resolve(v()).then(function(){throw P})})},h.prototype.catch=function(v){return this.then(null,v)},h.prototype.then=function(v,w){if(typeof v!="function"&&this.state===d||typeof w!="function"&&this.state===s)return this;var P=new this.constructor(a);return this.state!==g?u(P,this.state===d?v:w,this.outcome):this.queue.push(new _(P,v,w)),P},_.prototype.callFulfilled=function(v){e.resolve(this.promise,v)},_.prototype.otherCallFulfilled=function(v){u(this.promise,this.onFulfilled,v)},_.prototype.callRejected=function(v){e.reject(this.promise,v)},_.prototype.otherCallRejected=function(v){u(this.promise,this.onRejected,v)},e.resolve=function(v,w){var P=b(y,w);if(P.status==="error")return e.reject(v,P.value);var A=P.value;if(A)m(v,A);else{v.state=d,v.outcome=w;for(var O=-1,H=v.queue.length;++O<H;)v.queue[O].callFulfilled(w)}return v},e.reject=function(v,w){v.state=s,v.outcome=w;for(var P=-1,A=v.queue.length;++P<A;)v.queue[P].callRejected(w);return v},h.resolve=function(v){return v instanceof this?v:e.resolve(new this(a),v)},h.reject=function(v){var w=new this(a);return e.reject(w,v)},h.all=function(v){var w=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var P=v.length,A=!1;if(!P)return this.resolve([]);for(var O=new Array(P),H=0,I=-1,B=new this(a);++I<P;)D(v[I],I);return B;function D(M,$){w.resolve(M).then(function(L){O[$]=L,++H!==P||A||(A=!0,e.resolve(B,O))},function(L){A||(A=!0,e.reject(B,L))})}},h.race=function(v){var w=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var P=v.length,A=!1;if(!P)return this.resolve([]);for(var O=-1,H=new this(a);++O<P;)I=v[O],w.resolve(I).then(function(B){A||(A=!0,e.resolve(H,B))},function(B){A||(A=!0,e.reject(H,B))});var I;return H}},{immediate:36}],38:[function(n,l,o){var t={};(0,n("./lib/utils/common").assign)(t,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),l.exports=t},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,l,o){var t=n("./zlib/deflate"),a=n("./utils/common"),e=n("./utils/strings"),s=n("./zlib/messages"),d=n("./zlib/zstream"),g=Object.prototype.toString,h=0,_=-1,u=0,y=8;function m(v){if(!(this instanceof m))return new m(v);this.options=a.assign({level:_,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},v||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var P=t.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(P!==h)throw new Error(s[P]);if(w.header&&t.deflateSetHeader(this.strm,w.header),w.dictionary){var A;if(A=typeof w.dictionary=="string"?e.string2buf(w.dictionary):g.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(P=t.deflateSetDictionary(this.strm,A))!==h)throw new Error(s[P]);this._dict_set=!0}}function b(v,w){var P=new m(w);if(P.push(v,!0),P.err)throw P.msg||s[P.err];return P.result}m.prototype.push=function(v,w){var P,A,O=this.strm,H=this.options.chunkSize;if(this.ended)return!1;A=w===~~w?w:w===!0?4:0,typeof v=="string"?O.input=e.string2buf(v):g.call(v)==="[object ArrayBuffer]"?O.input=new Uint8Array(v):O.input=v,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new a.Buf8(H),O.next_out=0,O.avail_out=H),(P=t.deflate(O,A))!==1&&P!==h)return this.onEnd(P),!(this.ended=!0);O.avail_out!==0&&(O.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(e.buf2binstring(a.shrinkBuf(O.output,O.next_out))):this.onData(a.shrinkBuf(O.output,O.next_out)))}while((0<O.avail_in||O.avail_out===0)&&P!==1);return A===4?(P=t.deflateEnd(this.strm),this.onEnd(P),this.ended=!0,P===h):A!==2||(this.onEnd(h),!(O.avail_out=0))},m.prototype.onData=function(v){this.chunks.push(v)},m.prototype.onEnd=function(v){v===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},o.Deflate=m,o.deflate=b,o.deflateRaw=function(v,w){return(w=w||{}).raw=!0,b(v,w)},o.gzip=function(v,w){return(w=w||{}).gzip=!0,b(v,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,l,o){var t=n("./zlib/inflate"),a=n("./utils/common"),e=n("./utils/strings"),s=n("./zlib/constants"),d=n("./zlib/messages"),g=n("./zlib/zstream"),h=n("./zlib/gzheader"),_=Object.prototype.toString;function u(m){if(!(this instanceof u))return new u(m);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},m||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||m&&m.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var v=t.inflateInit2(this.strm,b.windowBits);if(v!==s.Z_OK)throw new Error(d[v]);this.header=new h,t.inflateGetHeader(this.strm,this.header)}function y(m,b){var v=new u(b);if(v.push(m,!0),v.err)throw v.msg||d[v.err];return v.result}u.prototype.push=function(m,b){var v,w,P,A,O,H,I=this.strm,B=this.options.chunkSize,D=this.options.dictionary,M=!1;if(this.ended)return!1;w=b===~~b?b:b===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof m=="string"?I.input=e.binstring2buf(m):_.call(m)==="[object ArrayBuffer]"?I.input=new Uint8Array(m):I.input=m,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new a.Buf8(B),I.next_out=0,I.avail_out=B),(v=t.inflate(I,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&D&&(H=typeof D=="string"?e.string2buf(D):_.call(D)==="[object ArrayBuffer]"?new Uint8Array(D):D,v=t.inflateSetDictionary(this.strm,H)),v===s.Z_BUF_ERROR&&M===!0&&(v=s.Z_OK,M=!1),v!==s.Z_STREAM_END&&v!==s.Z_OK)return this.onEnd(v),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&v!==s.Z_STREAM_END&&(I.avail_in!==0||w!==s.Z_FINISH&&w!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(P=e.utf8border(I.output,I.next_out),A=I.next_out-P,O=e.buf2string(I.output,P),I.next_out=A,I.avail_out=B-A,A&&a.arraySet(I.output,I.output,P,A,0),this.onData(O)):this.onData(a.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(M=!0)}while((0<I.avail_in||I.avail_out===0)&&v!==s.Z_STREAM_END);return v===s.Z_STREAM_END&&(w=s.Z_FINISH),w===s.Z_FINISH?(v=t.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===s.Z_OK):w!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(I.avail_out=0))},u.prototype.onData=function(m){this.chunks.push(m)},u.prototype.onEnd=function(m){m===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},o.Inflate=u,o.inflate=y,o.inflateRaw=function(m,b){return(b=b||{}).raw=!0,y(m,b)},o.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,l,o){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(s){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var g=d.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(var h in g)g.hasOwnProperty(h)&&(s[h]=g[h])}}return s},o.shrinkBuf=function(s,d){return s.length===d?s:s.subarray?s.subarray(0,d):(s.length=d,s)};var a={arraySet:function(s,d,g,h,_){if(d.subarray&&s.subarray)s.set(d.subarray(g,g+h),_);else for(var u=0;u<h;u++)s[_+u]=d[g+u]},flattenChunks:function(s){var d,g,h,_,u,y;for(d=h=0,g=s.length;d<g;d++)h+=s[d].length;for(y=new Uint8Array(h),d=_=0,g=s.length;d<g;d++)u=s[d],y.set(u,_),_+=u.length;return y}},e={arraySet:function(s,d,g,h,_){for(var u=0;u<h;u++)s[_+u]=d[g+u]},flattenChunks:function(s){return[].concat.apply([],s)}};o.setTyped=function(s){s?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,a)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,e))},o.setTyped(t)},{}],42:[function(n,l,o){var t=n("./common"),a=!0,e=!0;try{String.fromCharCode.apply(null,[0])}catch(h){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(h){e=!1}for(var s=new t.Buf8(256),d=0;d<256;d++)s[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function g(h,_){if(_<65537&&(h.subarray&&e||!h.subarray&&a))return String.fromCharCode.apply(null,t.shrinkBuf(h,_));for(var u="",y=0;y<_;y++)u+=String.fromCharCode(h[y]);return u}s[254]=s[254]=1,o.string2buf=function(h){var _,u,y,m,b,v=h.length,w=0;for(m=0;m<v;m++)(64512&(u=h.charCodeAt(m)))==55296&&m+1<v&&(64512&(y=h.charCodeAt(m+1)))==56320&&(u=65536+(u-55296<<10)+(y-56320),m++),w+=u<128?1:u<2048?2:u<65536?3:4;for(_=new t.Buf8(w),m=b=0;b<w;m++)(64512&(u=h.charCodeAt(m)))==55296&&m+1<v&&(64512&(y=h.charCodeAt(m+1)))==56320&&(u=65536+(u-55296<<10)+(y-56320),m++),u<128?_[b++]=u:(u<2048?_[b++]=192|u>>>6:(u<65536?_[b++]=224|u>>>12:(_[b++]=240|u>>>18,_[b++]=128|u>>>12&63),_[b++]=128|u>>>6&63),_[b++]=128|63&u);return _},o.buf2binstring=function(h){return g(h,h.length)},o.binstring2buf=function(h){for(var _=new t.Buf8(h.length),u=0,y=_.length;u<y;u++)_[u]=h.charCodeAt(u);return _},o.buf2string=function(h,_){var u,y,m,b,v=_||h.length,w=new Array(2*v);for(u=y=0;u<v;)if((m=h[u++])<128)w[y++]=m;else if(4<(b=s[m]))w[y++]=65533,u+=b-1;else{for(m&=b===2?31:b===3?15:7;1<b&&u<v;)m=m<<6|63&h[u++],b--;1<b?w[y++]=65533:m<65536?w[y++]=m:(m-=65536,w[y++]=55296|m>>10&1023,w[y++]=56320|1023&m)}return g(w,y)},o.utf8border=function(h,_){var u;for((_=_||h.length)>h.length&&(_=h.length),u=_-1;0<=u&&(192&h[u])==128;)u--;return u<0||u===0?_:u+s[h[u]]>_?u:_}},{"./common":41}],43:[function(n,l,o){l.exports=function(t,a,e,s){for(var d=65535&t|0,g=t>>>16&65535|0,h=0;e!==0;){for(e-=h=2e3<e?2e3:e;g=g+(d=d+a[s++]|0)|0,--h;);d%=65521,g%=65521}return d|g<<16|0}},{}],44:[function(n,l,o){l.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,l,o){var t=function(){for(var a,e=[],s=0;s<256;s++){a=s;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;e[s]=a}return e}();l.exports=function(a,e,s,d){var g=t,h=d+s;a^=-1;for(var _=d;_<h;_++)a=a>>>8^g[255&(a^e[_])];return-1^a}},{}],46:[function(n,l,o){var t,a=n("../utils/common"),e=n("./trees"),s=n("./adler32"),d=n("./crc32"),g=n("./messages"),h=0,_=4,u=0,y=-2,m=-1,b=4,v=2,w=8,P=9,A=286,O=30,H=19,I=2*A+1,B=15,D=3,M=258,$=M+D+1,L=42,x=113,c=1,V=2,ae=3,W=4;function ie(i,F){return i.msg=g[F],F}function Z(i){return(i<<1)-(4<i?9:0)}function se(i){for(var F=i.length;0<=--F;)i[F]=0}function j(i){var F=i.state,C=F.pending;C>i.avail_out&&(C=i.avail_out),C!==0&&(a.arraySet(i.output,F.pending_buf,F.pending_out,C,i.next_out),i.next_out+=C,F.pending_out+=C,i.total_out+=C,i.avail_out-=C,F.pending-=C,F.pending===0&&(F.pending_out=0))}function k(i,F){e._tr_flush_block(i,0<=i.block_start?i.block_start:-1,i.strstart-i.block_start,F),i.block_start=i.strstart,j(i.strm)}function re(i,F){i.pending_buf[i.pending++]=F}function K(i,F){i.pending_buf[i.pending++]=F>>>8&255,i.pending_buf[i.pending++]=255&F}function Y(i,F){var C,S,z=i.max_chain_length,R=i.strstart,N=i.prev_length,U=i.nice_match,T=i.strstart>i.w_size-$?i.strstart-(i.w_size-$):0,G=i.window,X=i.w_mask,J=i.prev,ne=i.strstart+M,me=G[R+N-1],de=G[R+N];i.prev_length>=i.good_match&&(z>>=2),U>i.lookahead&&(U=i.lookahead);do if(G[(C=F)+N]===de&&G[C+N-1]===me&&G[C]===G[R]&&G[++C]===G[R+1]){R+=2,C++;do;while(G[++R]===G[++C]&&G[++R]===G[++C]&&G[++R]===G[++C]&&G[++R]===G[++C]&&G[++R]===G[++C]&&G[++R]===G[++C]&&G[++R]===G[++C]&&G[++R]===G[++C]&&R<ne);if(S=M-(ne-R),R=ne-M,N<S){if(i.match_start=F,U<=(N=S))break;me=G[R+N-1],de=G[R+N]}}while((F=J[F&X])>T&&--z!=0);return N<=i.lookahead?N:i.lookahead}function pe(i){var F,C,S,z,R,N,U,T,G,X,J=i.w_size;do{if(z=i.window_size-i.lookahead-i.strstart,i.strstart>=J+(J-$)){for(a.arraySet(i.window,i.window,J,J,0),i.match_start-=J,i.strstart-=J,i.block_start-=J,F=C=i.hash_size;S=i.head[--F],i.head[F]=J<=S?S-J:0,--C;);for(F=C=J;S=i.prev[--F],i.prev[F]=J<=S?S-J:0,--C;);z+=J}if(i.strm.avail_in===0)break;if(N=i.strm,U=i.window,T=i.strstart+i.lookahead,G=z,X=void 0,X=N.avail_in,G<X&&(X=G),C=X===0?0:(N.avail_in-=X,a.arraySet(U,N.input,N.next_in,X,T),N.state.wrap===1?N.adler=s(N.adler,U,X,T):N.state.wrap===2&&(N.adler=d(N.adler,U,X,T)),N.next_in+=X,N.total_in+=X,X),i.lookahead+=C,i.lookahead+i.insert>=D)for(R=i.strstart-i.insert,i.ins_h=i.window[R],i.ins_h=(i.ins_h<<i.hash_shift^i.window[R+1])&i.hash_mask;i.insert&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[R+D-1])&i.hash_mask,i.prev[R&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=R,R++,i.insert--,!(i.lookahead+i.insert<D)););}while(i.lookahead<$&&i.strm.avail_in!==0)}function Ee(i,F){for(var C,S;;){if(i.lookahead<$){if(pe(i),i.lookahead<$&&F===h)return c;if(i.lookahead===0)break}if(C=0,i.lookahead>=D&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+D-1])&i.hash_mask,C=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),C!==0&&i.strstart-C<=i.w_size-$&&(i.match_length=Y(i,C)),i.match_length>=D)if(S=e._tr_tally(i,i.strstart-i.match_start,i.match_length-D),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=D){for(i.match_length--;i.strstart++,i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+D-1])&i.hash_mask,C=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart,--i.match_length!=0;);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+1])&i.hash_mask;else S=e._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(S&&(k(i,!1),i.strm.avail_out===0))return c}return i.insert=i.strstart<D-1?i.strstart:D-1,F===_?(k(i,!0),i.strm.avail_out===0?ae:W):i.last_lit&&(k(i,!1),i.strm.avail_out===0)?c:V}function le(i,F){for(var C,S,z;;){if(i.lookahead<$){if(pe(i),i.lookahead<$&&F===h)return c;if(i.lookahead===0)break}if(C=0,i.lookahead>=D&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+D-1])&i.hash_mask,C=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=D-1,C!==0&&i.prev_length<i.max_lazy_match&&i.strstart-C<=i.w_size-$&&(i.match_length=Y(i,C),i.match_length<=5&&(i.strategy===1||i.match_length===D&&4096<i.strstart-i.match_start)&&(i.match_length=D-1)),i.prev_length>=D&&i.match_length<=i.prev_length){for(z=i.strstart+i.lookahead-D,S=e._tr_tally(i,i.strstart-1-i.prev_match,i.prev_length-D),i.lookahead-=i.prev_length-1,i.prev_length-=2;++i.strstart<=z&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+D-1])&i.hash_mask,C=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),--i.prev_length!=0;);if(i.match_available=0,i.match_length=D-1,i.strstart++,S&&(k(i,!1),i.strm.avail_out===0))return c}else if(i.match_available){if((S=e._tr_tally(i,0,i.window[i.strstart-1]))&&k(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return c}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(S=e._tr_tally(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<D-1?i.strstart:D-1,F===_?(k(i,!0),i.strm.avail_out===0?ae:W):i.last_lit&&(k(i,!1),i.strm.avail_out===0)?c:V}function ce(i,F,C,S,z){this.good_length=i,this.max_lazy=F,this.nice_length=C,this.max_chain=S,this.func=z}function ve(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*I),this.dyn_dtree=new a.Buf16(2*(2*O+1)),this.bl_tree=new a.Buf16(2*(2*H+1)),se(this.dyn_ltree),se(this.dyn_dtree),se(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(B+1),this.heap=new a.Buf16(2*A+1),se(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*A+1),se(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function _e(i){var F;return i&&i.state?(i.total_in=i.total_out=0,i.data_type=v,(F=i.state).pending=0,F.pending_out=0,F.wrap<0&&(F.wrap=-F.wrap),F.status=F.wrap?L:x,i.adler=F.wrap===2?0:1,F.last_flush=h,e._tr_init(F),u):ie(i,y)}function Re(i){var F=_e(i);return F===u&&function(C){C.window_size=2*C.w_size,se(C.head),C.max_lazy_match=t[C.level].max_lazy,C.good_match=t[C.level].good_length,C.nice_match=t[C.level].nice_length,C.max_chain_length=t[C.level].max_chain,C.strstart=0,C.block_start=0,C.lookahead=0,C.insert=0,C.match_length=C.prev_length=D-1,C.match_available=0,C.ins_h=0}(i.state),F}function Pe(i,F,C,S,z,R){if(!i)return y;var N=1;if(F===m&&(F=6),S<0?(N=0,S=-S):15<S&&(N=2,S-=16),z<1||P<z||C!==w||S<8||15<S||F<0||9<F||R<0||b<R)return ie(i,y);S===8&&(S=9);var U=new ve;return(i.state=U).strm=i,U.wrap=N,U.gzhead=null,U.w_bits=S,U.w_size=1<<U.w_bits,U.w_mask=U.w_size-1,U.hash_bits=z+7,U.hash_size=1<<U.hash_bits,U.hash_mask=U.hash_size-1,U.hash_shift=~~((U.hash_bits+D-1)/D),U.window=new a.Buf8(2*U.w_size),U.head=new a.Buf16(U.hash_size),U.prev=new a.Buf16(U.w_size),U.lit_bufsize=1<<z+6,U.pending_buf_size=4*U.lit_bufsize,U.pending_buf=new a.Buf8(U.pending_buf_size),U.d_buf=1*U.lit_bufsize,U.l_buf=3*U.lit_bufsize,U.level=F,U.strategy=R,U.method=C,Re(i)}t=[new ce(0,0,0,0,function(i,F){var C=65535;for(C>i.pending_buf_size-5&&(C=i.pending_buf_size-5);;){if(i.lookahead<=1){if(pe(i),i.lookahead===0&&F===h)return c;if(i.lookahead===0)break}i.strstart+=i.lookahead,i.lookahead=0;var S=i.block_start+C;if((i.strstart===0||i.strstart>=S)&&(i.lookahead=i.strstart-S,i.strstart=S,k(i,!1),i.strm.avail_out===0)||i.strstart-i.block_start>=i.w_size-$&&(k(i,!1),i.strm.avail_out===0))return c}return i.insert=0,F===_?(k(i,!0),i.strm.avail_out===0?ae:W):(i.strstart>i.block_start&&(k(i,!1),i.strm.avail_out),c)}),new ce(4,4,8,4,Ee),new ce(4,5,16,8,Ee),new ce(4,6,32,32,Ee),new ce(4,4,16,16,le),new ce(8,16,32,32,le),new ce(8,16,128,128,le),new ce(8,32,128,256,le),new ce(32,128,258,1024,le),new ce(32,258,258,4096,le)],o.deflateInit=function(i,F){return Pe(i,F,w,15,8,0)},o.deflateInit2=Pe,o.deflateReset=Re,o.deflateResetKeep=_e,o.deflateSetHeader=function(i,F){return i&&i.state?i.state.wrap!==2?y:(i.state.gzhead=F,u):y},o.deflate=function(i,F){var C,S,z,R;if(!i||!i.state||5<F||F<0)return i?ie(i,y):y;if(S=i.state,!i.output||!i.input&&i.avail_in!==0||S.status===666&&F!==_)return ie(i,i.avail_out===0?-5:y);if(S.strm=i,C=S.last_flush,S.last_flush=F,S.status===L)if(S.wrap===2)i.adler=0,re(S,31),re(S,139),re(S,8),S.gzhead?(re(S,(S.gzhead.text?1:0)+(S.gzhead.hcrc?2:0)+(S.gzhead.extra?4:0)+(S.gzhead.name?8:0)+(S.gzhead.comment?16:0)),re(S,255&S.gzhead.time),re(S,S.gzhead.time>>8&255),re(S,S.gzhead.time>>16&255),re(S,S.gzhead.time>>24&255),re(S,S.level===9?2:2<=S.strategy||S.level<2?4:0),re(S,255&S.gzhead.os),S.gzhead.extra&&S.gzhead.extra.length&&(re(S,255&S.gzhead.extra.length),re(S,S.gzhead.extra.length>>8&255)),S.gzhead.hcrc&&(i.adler=d(i.adler,S.pending_buf,S.pending,0)),S.gzindex=0,S.status=69):(re(S,0),re(S,0),re(S,0),re(S,0),re(S,0),re(S,S.level===9?2:2<=S.strategy||S.level<2?4:0),re(S,3),S.status=x);else{var N=w+(S.w_bits-8<<4)<<8;N|=(2<=S.strategy||S.level<2?0:S.level<6?1:S.level===6?2:3)<<6,S.strstart!==0&&(N|=32),N+=31-N%31,S.status=x,K(S,N),S.strstart!==0&&(K(S,i.adler>>>16),K(S,65535&i.adler)),i.adler=1}if(S.status===69)if(S.gzhead.extra){for(z=S.pending;S.gzindex<(65535&S.gzhead.extra.length)&&(S.pending!==S.pending_buf_size||(S.gzhead.hcrc&&S.pending>z&&(i.adler=d(i.adler,S.pending_buf,S.pending-z,z)),j(i),z=S.pending,S.pending!==S.pending_buf_size));)re(S,255&S.gzhead.extra[S.gzindex]),S.gzindex++;S.gzhead.hcrc&&S.pending>z&&(i.adler=d(i.adler,S.pending_buf,S.pending-z,z)),S.gzindex===S.gzhead.extra.length&&(S.gzindex=0,S.status=73)}else S.status=73;if(S.status===73)if(S.gzhead.name){z=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>z&&(i.adler=d(i.adler,S.pending_buf,S.pending-z,z)),j(i),z=S.pending,S.pending===S.pending_buf_size)){R=1;break}R=S.gzindex<S.gzhead.name.length?255&S.gzhead.name.charCodeAt(S.gzindex++):0,re(S,R)}while(R!==0);S.gzhead.hcrc&&S.pending>z&&(i.adler=d(i.adler,S.pending_buf,S.pending-z,z)),R===0&&(S.gzindex=0,S.status=91)}else S.status=91;if(S.status===91)if(S.gzhead.comment){z=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>z&&(i.adler=d(i.adler,S.pending_buf,S.pending-z,z)),j(i),z=S.pending,S.pending===S.pending_buf_size)){R=1;break}R=S.gzindex<S.gzhead.comment.length?255&S.gzhead.comment.charCodeAt(S.gzindex++):0,re(S,R)}while(R!==0);S.gzhead.hcrc&&S.pending>z&&(i.adler=d(i.adler,S.pending_buf,S.pending-z,z)),R===0&&(S.status=103)}else S.status=103;if(S.status===103&&(S.gzhead.hcrc?(S.pending+2>S.pending_buf_size&&j(i),S.pending+2<=S.pending_buf_size&&(re(S,255&i.adler),re(S,i.adler>>8&255),i.adler=0,S.status=x)):S.status=x),S.pending!==0){if(j(i),i.avail_out===0)return S.last_flush=-1,u}else if(i.avail_in===0&&Z(F)<=Z(C)&&F!==_)return ie(i,-5);if(S.status===666&&i.avail_in!==0)return ie(i,-5);if(i.avail_in!==0||S.lookahead!==0||F!==h&&S.status!==666){var U=S.strategy===2?function(T,G){for(var X;;){if(T.lookahead===0&&(pe(T),T.lookahead===0)){if(G===h)return c;break}if(T.match_length=0,X=e._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++,X&&(k(T,!1),T.strm.avail_out===0))return c}return T.insert=0,G===_?(k(T,!0),T.strm.avail_out===0?ae:W):T.last_lit&&(k(T,!1),T.strm.avail_out===0)?c:V}(S,F):S.strategy===3?function(T,G){for(var X,J,ne,me,de=T.window;;){if(T.lookahead<=M){if(pe(T),T.lookahead<=M&&G===h)return c;if(T.lookahead===0)break}if(T.match_length=0,T.lookahead>=D&&0<T.strstart&&(J=de[ne=T.strstart-1])===de[++ne]&&J===de[++ne]&&J===de[++ne]){me=T.strstart+M;do;while(J===de[++ne]&&J===de[++ne]&&J===de[++ne]&&J===de[++ne]&&J===de[++ne]&&J===de[++ne]&&J===de[++ne]&&J===de[++ne]&&ne<me);T.match_length=M-(me-ne),T.match_length>T.lookahead&&(T.match_length=T.lookahead)}if(T.match_length>=D?(X=e._tr_tally(T,1,T.match_length-D),T.lookahead-=T.match_length,T.strstart+=T.match_length,T.match_length=0):(X=e._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++),X&&(k(T,!1),T.strm.avail_out===0))return c}return T.insert=0,G===_?(k(T,!0),T.strm.avail_out===0?ae:W):T.last_lit&&(k(T,!1),T.strm.avail_out===0)?c:V}(S,F):t[S.level].func(S,F);if(U!==ae&&U!==W||(S.status=666),U===c||U===ae)return i.avail_out===0&&(S.last_flush=-1),u;if(U===V&&(F===1?e._tr_align(S):F!==5&&(e._tr_stored_block(S,0,0,!1),F===3&&(se(S.head),S.lookahead===0&&(S.strstart=0,S.block_start=0,S.insert=0))),j(i),i.avail_out===0))return S.last_flush=-1,u}return F!==_?u:S.wrap<=0?1:(S.wrap===2?(re(S,255&i.adler),re(S,i.adler>>8&255),re(S,i.adler>>16&255),re(S,i.adler>>24&255),re(S,255&i.total_in),re(S,i.total_in>>8&255),re(S,i.total_in>>16&255),re(S,i.total_in>>24&255)):(K(S,i.adler>>>16),K(S,65535&i.adler)),j(i),0<S.wrap&&(S.wrap=-S.wrap),S.pending!==0?u:1)},o.deflateEnd=function(i){var F;return i&&i.state?(F=i.state.status)!==L&&F!==69&&F!==73&&F!==91&&F!==103&&F!==x&&F!==666?ie(i,y):(i.state=null,F===x?ie(i,-3):u):y},o.deflateSetDictionary=function(i,F){var C,S,z,R,N,U,T,G,X=F.length;if(!i||!i.state||(R=(C=i.state).wrap)===2||R===1&&C.status!==L||C.lookahead)return y;for(R===1&&(i.adler=s(i.adler,F,X,0)),C.wrap=0,X>=C.w_size&&(R===0&&(se(C.head),C.strstart=0,C.block_start=0,C.insert=0),G=new a.Buf8(C.w_size),a.arraySet(G,F,X-C.w_size,C.w_size,0),F=G,X=C.w_size),N=i.avail_in,U=i.next_in,T=i.input,i.avail_in=X,i.next_in=0,i.input=F,pe(C);C.lookahead>=D;){for(S=C.strstart,z=C.lookahead-(D-1);C.ins_h=(C.ins_h<<C.hash_shift^C.window[S+D-1])&C.hash_mask,C.prev[S&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=S,S++,--z;);C.strstart=S,C.lookahead=D-1,pe(C)}return C.strstart+=C.lookahead,C.block_start=C.strstart,C.insert=C.lookahead,C.lookahead=0,C.match_length=C.prev_length=D-1,C.match_available=0,i.next_in=U,i.input=T,i.avail_in=N,C.wrap=R,u},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,l,o){l.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,l,o){l.exports=function(t,a){var e,s,d,g,h,_,u,y,m,b,v,w,P,A,O,H,I,B,D,M,$,L,x,c,V;e=t.state,s=t.next_in,c=t.input,d=s+(t.avail_in-5),g=t.next_out,V=t.output,h=g-(a-t.avail_out),_=g+(t.avail_out-257),u=e.dmax,y=e.wsize,m=e.whave,b=e.wnext,v=e.window,w=e.hold,P=e.bits,A=e.lencode,O=e.distcode,H=(1<<e.lenbits)-1,I=(1<<e.distbits)-1;e:do{P<15&&(w+=c[s++]<<P,P+=8,w+=c[s++]<<P,P+=8),B=A[w&H];t:for(;;){if(w>>>=D=B>>>24,P-=D,(D=B>>>16&255)===0)V[g++]=65535&B;else{if(!(16&D)){if(!(64&D)){B=A[(65535&B)+(w&(1<<D)-1)];continue t}if(32&D){e.mode=12;break e}t.msg="invalid literal/length code",e.mode=30;break e}M=65535&B,(D&=15)&&(P<D&&(w+=c[s++]<<P,P+=8),M+=w&(1<<D)-1,w>>>=D,P-=D),P<15&&(w+=c[s++]<<P,P+=8,w+=c[s++]<<P,P+=8),B=O[w&I];n:for(;;){if(w>>>=D=B>>>24,P-=D,!(16&(D=B>>>16&255))){if(!(64&D)){B=O[(65535&B)+(w&(1<<D)-1)];continue n}t.msg="invalid distance code",e.mode=30;break e}if($=65535&B,P<(D&=15)&&(w+=c[s++]<<P,(P+=8)<D&&(w+=c[s++]<<P,P+=8)),u<($+=w&(1<<D)-1)){t.msg="invalid distance too far back",e.mode=30;break e}if(w>>>=D,P-=D,(D=g-h)<$){if(m<(D=$-D)&&e.sane){t.msg="invalid distance too far back",e.mode=30;break e}if(x=v,(L=0)===b){if(L+=y-D,D<M){for(M-=D;V[g++]=v[L++],--D;);L=g-$,x=V}}else if(b<D){if(L+=y+b-D,(D-=b)<M){for(M-=D;V[g++]=v[L++],--D;);if(L=0,b<M){for(M-=D=b;V[g++]=v[L++],--D;);L=g-$,x=V}}}else if(L+=b-D,D<M){for(M-=D;V[g++]=v[L++],--D;);L=g-$,x=V}for(;2<M;)V[g++]=x[L++],V[g++]=x[L++],V[g++]=x[L++],M-=3;M&&(V[g++]=x[L++],1<M&&(V[g++]=x[L++]))}else{for(L=g-$;V[g++]=V[L++],V[g++]=V[L++],V[g++]=V[L++],2<(M-=3););M&&(V[g++]=V[L++],1<M&&(V[g++]=V[L++]))}break}}break}}while(s<d&&g<_);s-=M=P>>3,w&=(1<<(P-=M<<3))-1,t.next_in=s,t.next_out=g,t.avail_in=s<d?d-s+5:5-(s-d),t.avail_out=g<_?_-g+257:257-(g-_),e.hold=w,e.bits=P}},{}],49:[function(n,l,o){var t=n("../utils/common"),a=n("./adler32"),e=n("./crc32"),s=n("./inffast"),d=n("./inftrees"),g=1,h=2,_=0,u=-2,y=1,m=852,b=592;function v(L){return(L>>>24&255)+(L>>>8&65280)+((65280&L)<<8)+((255&L)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new t.Buf16(320),this.work=new t.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function P(L){var x;return L&&L.state?(x=L.state,L.total_in=L.total_out=x.total=0,L.msg="",x.wrap&&(L.adler=1&x.wrap),x.mode=y,x.last=0,x.havedict=0,x.dmax=32768,x.head=null,x.hold=0,x.bits=0,x.lencode=x.lendyn=new t.Buf32(m),x.distcode=x.distdyn=new t.Buf32(b),x.sane=1,x.back=-1,_):u}function A(L){var x;return L&&L.state?((x=L.state).wsize=0,x.whave=0,x.wnext=0,P(L)):u}function O(L,x){var c,V;return L&&L.state?(V=L.state,x<0?(c=0,x=-x):(c=1+(x>>4),x<48&&(x&=15)),x&&(x<8||15<x)?u:(V.window!==null&&V.wbits!==x&&(V.window=null),V.wrap=c,V.wbits=x,A(L))):u}function H(L,x){var c,V;return L?(V=new w,(L.state=V).window=null,(c=O(L,x))!==_&&(L.state=null),c):u}var I,B,D=!0;function M(L){if(D){var x;for(I=new t.Buf32(512),B=new t.Buf32(32),x=0;x<144;)L.lens[x++]=8;for(;x<256;)L.lens[x++]=9;for(;x<280;)L.lens[x++]=7;for(;x<288;)L.lens[x++]=8;for(d(g,L.lens,0,288,I,0,L.work,{bits:9}),x=0;x<32;)L.lens[x++]=5;d(h,L.lens,0,32,B,0,L.work,{bits:5}),D=!1}L.lencode=I,L.lenbits=9,L.distcode=B,L.distbits=5}function $(L,x,c,V){var ae,W=L.state;return W.window===null&&(W.wsize=1<<W.wbits,W.wnext=0,W.whave=0,W.window=new t.Buf8(W.wsize)),V>=W.wsize?(t.arraySet(W.window,x,c-W.wsize,W.wsize,0),W.wnext=0,W.whave=W.wsize):(V<(ae=W.wsize-W.wnext)&&(ae=V),t.arraySet(W.window,x,c-V,ae,W.wnext),(V-=ae)?(t.arraySet(W.window,x,c-V,V,0),W.wnext=V,W.whave=W.wsize):(W.wnext+=ae,W.wnext===W.wsize&&(W.wnext=0),W.whave<W.wsize&&(W.whave+=ae))),0}o.inflateReset=A,o.inflateReset2=O,o.inflateResetKeep=P,o.inflateInit=function(L){return H(L,15)},o.inflateInit2=H,o.inflate=function(L,x){var c,V,ae,W,ie,Z,se,j,k,re,K,Y,pe,Ee,le,ce,ve,_e,Re,Pe,i,F,C,S,z=0,R=new t.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!L||!L.state||!L.output||!L.input&&L.avail_in!==0)return u;(c=L.state).mode===12&&(c.mode=13),ie=L.next_out,ae=L.output,se=L.avail_out,W=L.next_in,V=L.input,Z=L.avail_in,j=c.hold,k=c.bits,re=Z,K=se,F=_;e:for(;;)switch(c.mode){case y:if(c.wrap===0){c.mode=13;break}for(;k<16;){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}if(2&c.wrap&&j===35615){R[c.check=0]=255&j,R[1]=j>>>8&255,c.check=e(c.check,R,2,0),k=j=0,c.mode=2;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&j)<<8)+(j>>8))%31){L.msg="incorrect header check",c.mode=30;break}if((15&j)!=8){L.msg="unknown compression method",c.mode=30;break}if(k-=4,i=8+(15&(j>>>=4)),c.wbits===0)c.wbits=i;else if(i>c.wbits){L.msg="invalid window size",c.mode=30;break}c.dmax=1<<i,L.adler=c.check=1,c.mode=512&j?10:12,k=j=0;break;case 2:for(;k<16;){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}if(c.flags=j,(255&c.flags)!=8){L.msg="unknown compression method",c.mode=30;break}if(57344&c.flags){L.msg="unknown header flags set",c.mode=30;break}c.head&&(c.head.text=j>>8&1),512&c.flags&&(R[0]=255&j,R[1]=j>>>8&255,c.check=e(c.check,R,2,0)),k=j=0,c.mode=3;case 3:for(;k<32;){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}c.head&&(c.head.time=j),512&c.flags&&(R[0]=255&j,R[1]=j>>>8&255,R[2]=j>>>16&255,R[3]=j>>>24&255,c.check=e(c.check,R,4,0)),k=j=0,c.mode=4;case 4:for(;k<16;){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}c.head&&(c.head.xflags=255&j,c.head.os=j>>8),512&c.flags&&(R[0]=255&j,R[1]=j>>>8&255,c.check=e(c.check,R,2,0)),k=j=0,c.mode=5;case 5:if(1024&c.flags){for(;k<16;){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}c.length=j,c.head&&(c.head.extra_len=j),512&c.flags&&(R[0]=255&j,R[1]=j>>>8&255,c.check=e(c.check,R,2,0)),k=j=0}else c.head&&(c.head.extra=null);c.mode=6;case 6:if(1024&c.flags&&(Z<(Y=c.length)&&(Y=Z),Y&&(c.head&&(i=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),t.arraySet(c.head.extra,V,W,Y,i)),512&c.flags&&(c.check=e(c.check,V,Y,W)),Z-=Y,W+=Y,c.length-=Y),c.length))break e;c.length=0,c.mode=7;case 7:if(2048&c.flags){if(Z===0)break e;for(Y=0;i=V[W+Y++],c.head&&i&&c.length<65536&&(c.head.name+=String.fromCharCode(i)),i&&Y<Z;);if(512&c.flags&&(c.check=e(c.check,V,Y,W)),Z-=Y,W+=Y,i)break e}else c.head&&(c.head.name=null);c.length=0,c.mode=8;case 8:if(4096&c.flags){if(Z===0)break e;for(Y=0;i=V[W+Y++],c.head&&i&&c.length<65536&&(c.head.comment+=String.fromCharCode(i)),i&&Y<Z;);if(512&c.flags&&(c.check=e(c.check,V,Y,W)),Z-=Y,W+=Y,i)break e}else c.head&&(c.head.comment=null);c.mode=9;case 9:if(512&c.flags){for(;k<16;){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}if(j!==(65535&c.check)){L.msg="header crc mismatch",c.mode=30;break}k=j=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),L.adler=c.check=0,c.mode=12;break;case 10:for(;k<32;){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}L.adler=c.check=v(j),k=j=0,c.mode=11;case 11:if(c.havedict===0)return L.next_out=ie,L.avail_out=se,L.next_in=W,L.avail_in=Z,c.hold=j,c.bits=k,2;L.adler=c.check=1,c.mode=12;case 12:if(x===5||x===6)break e;case 13:if(c.last){j>>>=7&k,k-=7&k,c.mode=27;break}for(;k<3;){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}switch(c.last=1&j,k-=1,3&(j>>>=1)){case 0:c.mode=14;break;case 1:if(M(c),c.mode=20,x!==6)break;j>>>=2,k-=2;break e;case 2:c.mode=17;break;case 3:L.msg="invalid block type",c.mode=30}j>>>=2,k-=2;break;case 14:for(j>>>=7&k,k-=7&k;k<32;){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}if((65535&j)!=(j>>>16^65535)){L.msg="invalid stored block lengths",c.mode=30;break}if(c.length=65535&j,k=j=0,c.mode=15,x===6)break e;case 15:c.mode=16;case 16:if(Y=c.length){if(Z<Y&&(Y=Z),se<Y&&(Y=se),Y===0)break e;t.arraySet(ae,V,W,Y,ie),Z-=Y,W+=Y,se-=Y,ie+=Y,c.length-=Y;break}c.mode=12;break;case 17:for(;k<14;){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}if(c.nlen=257+(31&j),j>>>=5,k-=5,c.ndist=1+(31&j),j>>>=5,k-=5,c.ncode=4+(15&j),j>>>=4,k-=4,286<c.nlen||30<c.ndist){L.msg="too many length or distance symbols",c.mode=30;break}c.have=0,c.mode=18;case 18:for(;c.have<c.ncode;){for(;k<3;){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}c.lens[N[c.have++]]=7&j,j>>>=3,k-=3}for(;c.have<19;)c.lens[N[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,C={bits:c.lenbits},F=d(0,c.lens,0,19,c.lencode,0,c.work,C),c.lenbits=C.bits,F){L.msg="invalid code lengths set",c.mode=30;break}c.have=0,c.mode=19;case 19:for(;c.have<c.nlen+c.ndist;){for(;ce=(z=c.lencode[j&(1<<c.lenbits)-1])>>>16&255,ve=65535&z,!((le=z>>>24)<=k);){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}if(ve<16)j>>>=le,k-=le,c.lens[c.have++]=ve;else{if(ve===16){for(S=le+2;k<S;){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}if(j>>>=le,k-=le,c.have===0){L.msg="invalid bit length repeat",c.mode=30;break}i=c.lens[c.have-1],Y=3+(3&j),j>>>=2,k-=2}else if(ve===17){for(S=le+3;k<S;){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}k-=le,i=0,Y=3+(7&(j>>>=le)),j>>>=3,k-=3}else{for(S=le+7;k<S;){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}k-=le,i=0,Y=11+(127&(j>>>=le)),j>>>=7,k-=7}if(c.have+Y>c.nlen+c.ndist){L.msg="invalid bit length repeat",c.mode=30;break}for(;Y--;)c.lens[c.have++]=i}}if(c.mode===30)break;if(c.lens[256]===0){L.msg="invalid code -- missing end-of-block",c.mode=30;break}if(c.lenbits=9,C={bits:c.lenbits},F=d(g,c.lens,0,c.nlen,c.lencode,0,c.work,C),c.lenbits=C.bits,F){L.msg="invalid literal/lengths set",c.mode=30;break}if(c.distbits=6,c.distcode=c.distdyn,C={bits:c.distbits},F=d(h,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,C),c.distbits=C.bits,F){L.msg="invalid distances set",c.mode=30;break}if(c.mode=20,x===6)break e;case 20:c.mode=21;case 21:if(6<=Z&&258<=se){L.next_out=ie,L.avail_out=se,L.next_in=W,L.avail_in=Z,c.hold=j,c.bits=k,s(L,K),ie=L.next_out,ae=L.output,se=L.avail_out,W=L.next_in,V=L.input,Z=L.avail_in,j=c.hold,k=c.bits,c.mode===12&&(c.back=-1);break}for(c.back=0;ce=(z=c.lencode[j&(1<<c.lenbits)-1])>>>16&255,ve=65535&z,!((le=z>>>24)<=k);){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}if(ce&&!(240&ce)){for(_e=le,Re=ce,Pe=ve;ce=(z=c.lencode[Pe+((j&(1<<_e+Re)-1)>>_e)])>>>16&255,ve=65535&z,!(_e+(le=z>>>24)<=k);){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}j>>>=_e,k-=_e,c.back+=_e}if(j>>>=le,k-=le,c.back+=le,c.length=ve,ce===0){c.mode=26;break}if(32&ce){c.back=-1,c.mode=12;break}if(64&ce){L.msg="invalid literal/length code",c.mode=30;break}c.extra=15&ce,c.mode=22;case 22:if(c.extra){for(S=c.extra;k<S;){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}c.length+=j&(1<<c.extra)-1,j>>>=c.extra,k-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=23;case 23:for(;ce=(z=c.distcode[j&(1<<c.distbits)-1])>>>16&255,ve=65535&z,!((le=z>>>24)<=k);){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}if(!(240&ce)){for(_e=le,Re=ce,Pe=ve;ce=(z=c.distcode[Pe+((j&(1<<_e+Re)-1)>>_e)])>>>16&255,ve=65535&z,!(_e+(le=z>>>24)<=k);){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}j>>>=_e,k-=_e,c.back+=_e}if(j>>>=le,k-=le,c.back+=le,64&ce){L.msg="invalid distance code",c.mode=30;break}c.offset=ve,c.extra=15&ce,c.mode=24;case 24:if(c.extra){for(S=c.extra;k<S;){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}c.offset+=j&(1<<c.extra)-1,j>>>=c.extra,k-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){L.msg="invalid distance too far back",c.mode=30;break}c.mode=25;case 25:if(se===0)break e;if(Y=K-se,c.offset>Y){if((Y=c.offset-Y)>c.whave&&c.sane){L.msg="invalid distance too far back",c.mode=30;break}pe=Y>c.wnext?(Y-=c.wnext,c.wsize-Y):c.wnext-Y,Y>c.length&&(Y=c.length),Ee=c.window}else Ee=ae,pe=ie-c.offset,Y=c.length;for(se<Y&&(Y=se),se-=Y,c.length-=Y;ae[ie++]=Ee[pe++],--Y;);c.length===0&&(c.mode=21);break;case 26:if(se===0)break e;ae[ie++]=c.length,se--,c.mode=21;break;case 27:if(c.wrap){for(;k<32;){if(Z===0)break e;Z--,j|=V[W++]<<k,k+=8}if(K-=se,L.total_out+=K,c.total+=K,K&&(L.adler=c.check=c.flags?e(c.check,ae,K,ie-K):a(c.check,ae,K,ie-K)),K=se,(c.flags?j:v(j))!==c.check){L.msg="incorrect data check",c.mode=30;break}k=j=0}c.mode=28;case 28:if(c.wrap&&c.flags){for(;k<32;){if(Z===0)break e;Z--,j+=V[W++]<<k,k+=8}if(j!==(4294967295&c.total)){L.msg="incorrect length check",c.mode=30;break}k=j=0}c.mode=29;case 29:F=1;break e;case 30:F=-3;break e;case 31:return-4;case 32:default:return u}return L.next_out=ie,L.avail_out=se,L.next_in=W,L.avail_in=Z,c.hold=j,c.bits=k,(c.wsize||K!==L.avail_out&&c.mode<30&&(c.mode<27||x!==4))&&$(L,L.output,L.next_out,K-L.avail_out)?(c.mode=31,-4):(re-=L.avail_in,K-=L.avail_out,L.total_in+=re,L.total_out+=K,c.total+=K,c.wrap&&K&&(L.adler=c.check=c.flags?e(c.check,ae,K,L.next_out-K):a(c.check,ae,K,L.next_out-K)),L.data_type=c.bits+(c.last?64:0)+(c.mode===12?128:0)+(c.mode===20||c.mode===15?256:0),(re==0&&K===0||x===4)&&F===_&&(F=-5),F)},o.inflateEnd=function(L){if(!L||!L.state)return u;var x=L.state;return x.window&&(x.window=null),L.state=null,_},o.inflateGetHeader=function(L,x){var c;return L&&L.state&&2&(c=L.state).wrap?((c.head=x).done=!1,_):u},o.inflateSetDictionary=function(L,x){var c,V=x.length;return L&&L.state?(c=L.state).wrap!==0&&c.mode!==11?u:c.mode===11&&a(1,x,V,0)!==c.check?-3:$(L,x,V,V)?(c.mode=31,-4):(c.havedict=1,_):u},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,l,o){var t=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],e=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];l.exports=function(g,h,_,u,y,m,b,v){var w,P,A,O,H,I,B,D,M,$=v.bits,L=0,x=0,c=0,V=0,ae=0,W=0,ie=0,Z=0,se=0,j=0,k=null,re=0,K=new t.Buf16(16),Y=new t.Buf16(16),pe=null,Ee=0;for(L=0;L<=15;L++)K[L]=0;for(x=0;x<u;x++)K[h[_+x]]++;for(ae=$,V=15;1<=V&&K[V]===0;V--);if(V<ae&&(ae=V),V===0)return y[m++]=20971520,y[m++]=20971520,v.bits=1,0;for(c=1;c<V&&K[c]===0;c++);for(ae<c&&(ae=c),L=Z=1;L<=15;L++)if(Z<<=1,(Z-=K[L])<0)return-1;if(0<Z&&(g===0||V!==1))return-1;for(Y[1]=0,L=1;L<15;L++)Y[L+1]=Y[L]+K[L];for(x=0;x<u;x++)h[_+x]!==0&&(b[Y[h[_+x]]++]=x);if(I=g===0?(k=pe=b,19):g===1?(k=a,re-=257,pe=e,Ee-=257,256):(k=s,pe=d,-1),L=c,H=m,ie=x=j=0,A=-1,O=(se=1<<(W=ae))-1,g===1&&852<se||g===2&&592<se)return 1;for(;;){for(B=L-ie,M=b[x]<I?(D=0,b[x]):b[x]>I?(D=pe[Ee+b[x]],k[re+b[x]]):(D=96,0),w=1<<L-ie,c=P=1<<W;y[H+(j>>ie)+(P-=w)]=B<<24|D<<16|M|0,P!==0;);for(w=1<<L-1;j&w;)w>>=1;if(w!==0?(j&=w-1,j+=w):j=0,x++,--K[L]==0){if(L===V)break;L=h[_+b[x]]}if(ae<L&&(j&O)!==A){for(ie===0&&(ie=ae),H+=c,Z=1<<(W=L-ie);W+ie<V&&!((Z-=K[W+ie])<=0);)W++,Z<<=1;if(se+=1<<W,g===1&&852<se||g===2&&592<se)return 1;y[A=j&O]=ae<<24|W<<16|H-m|0}}return j!==0&&(y[H+j]=L-ie<<24|64<<16|0),v.bits=ae,0}},{"../utils/common":41}],51:[function(n,l,o){l.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,l,o){var t=n("../utils/common"),a=0,e=1;function s(z){for(var R=z.length;0<=--R;)z[R]=0}var d=0,g=29,h=256,_=h+1+g,u=30,y=19,m=2*_+1,b=15,v=16,w=7,P=256,A=16,O=17,H=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],B=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$=new Array(2*(_+2));s($);var L=new Array(2*u);s(L);var x=new Array(512);s(x);var c=new Array(256);s(c);var V=new Array(g);s(V);var ae,W,ie,Z=new Array(u);function se(z,R,N,U,T){this.static_tree=z,this.extra_bits=R,this.extra_base=N,this.elems=U,this.max_length=T,this.has_stree=z&&z.length}function j(z,R){this.dyn_tree=z,this.max_code=0,this.stat_desc=R}function k(z){return z<256?x[z]:x[256+(z>>>7)]}function re(z,R){z.pending_buf[z.pending++]=255&R,z.pending_buf[z.pending++]=R>>>8&255}function K(z,R,N){z.bi_valid>v-N?(z.bi_buf|=R<<z.bi_valid&65535,re(z,z.bi_buf),z.bi_buf=R>>v-z.bi_valid,z.bi_valid+=N-v):(z.bi_buf|=R<<z.bi_valid&65535,z.bi_valid+=N)}function Y(z,R,N){K(z,N[2*R],N[2*R+1])}function pe(z,R){for(var N=0;N|=1&z,z>>>=1,N<<=1,0<--R;);return N>>>1}function Ee(z,R,N){var U,T,G=new Array(b+1),X=0;for(U=1;U<=b;U++)G[U]=X=X+N[U-1]<<1;for(T=0;T<=R;T++){var J=z[2*T+1];J!==0&&(z[2*T]=pe(G[J]++,J))}}function le(z){var R;for(R=0;R<_;R++)z.dyn_ltree[2*R]=0;for(R=0;R<u;R++)z.dyn_dtree[2*R]=0;for(R=0;R<y;R++)z.bl_tree[2*R]=0;z.dyn_ltree[2*P]=1,z.opt_len=z.static_len=0,z.last_lit=z.matches=0}function ce(z){8<z.bi_valid?re(z,z.bi_buf):0<z.bi_valid&&(z.pending_buf[z.pending++]=z.bi_buf),z.bi_buf=0,z.bi_valid=0}function ve(z,R,N,U){var T=2*R,G=2*N;return z[T]<z[G]||z[T]===z[G]&&U[R]<=U[N]}function _e(z,R,N){for(var U=z.heap[N],T=N<<1;T<=z.heap_len&&(T<z.heap_len&&ve(R,z.heap[T+1],z.heap[T],z.depth)&&T++,!ve(R,U,z.heap[T],z.depth));)z.heap[N]=z.heap[T],N=T,T<<=1;z.heap[N]=U}function Re(z,R,N){var U,T,G,X,J=0;if(z.last_lit!==0)for(;U=z.pending_buf[z.d_buf+2*J]<<8|z.pending_buf[z.d_buf+2*J+1],T=z.pending_buf[z.l_buf+J],J++,U===0?Y(z,T,R):(Y(z,(G=c[T])+h+1,R),(X=I[G])!==0&&K(z,T-=V[G],X),Y(z,G=k(--U),N),(X=B[G])!==0&&K(z,U-=Z[G],X)),J<z.last_lit;);Y(z,P,R)}function Pe(z,R){var N,U,T,G=R.dyn_tree,X=R.stat_desc.static_tree,J=R.stat_desc.has_stree,ne=R.stat_desc.elems,me=-1;for(z.heap_len=0,z.heap_max=m,N=0;N<ne;N++)G[2*N]!==0?(z.heap[++z.heap_len]=me=N,z.depth[N]=0):G[2*N+1]=0;for(;z.heap_len<2;)G[2*(T=z.heap[++z.heap_len]=me<2?++me:0)]=1,z.depth[T]=0,z.opt_len--,J&&(z.static_len-=X[2*T+1]);for(R.max_code=me,N=z.heap_len>>1;1<=N;N--)_e(z,G,N);for(T=ne;N=z.heap[1],z.heap[1]=z.heap[z.heap_len--],_e(z,G,1),U=z.heap[1],z.heap[--z.heap_max]=N,z.heap[--z.heap_max]=U,G[2*T]=G[2*N]+G[2*U],z.depth[T]=(z.depth[N]>=z.depth[U]?z.depth[N]:z.depth[U])+1,G[2*N+1]=G[2*U+1]=T,z.heap[1]=T++,_e(z,G,1),2<=z.heap_len;);z.heap[--z.heap_max]=z.heap[1],function(de,Ae){var tt,Te,nt,fe,dt,Et,De=Ae.dyn_tree,Jt=Ae.max_code,nr=Ae.stat_desc.static_tree,rr=Ae.stat_desc.has_stree,ar=Ae.stat_desc.extra_bits,$t=Ae.stat_desc.extra_base,rt=Ae.stat_desc.max_length,ct=0;for(fe=0;fe<=b;fe++)de.bl_count[fe]=0;for(De[2*de.heap[de.heap_max]+1]=0,tt=de.heap_max+1;tt<m;tt++)rt<(fe=De[2*De[2*(Te=de.heap[tt])+1]+1]+1)&&(fe=rt,ct++),De[2*Te+1]=fe,Jt<Te||(de.bl_count[fe]++,dt=0,$t<=Te&&(dt=ar[Te-$t]),Et=De[2*Te],de.opt_len+=Et*(fe+dt),rr&&(de.static_len+=Et*(nr[2*Te+1]+dt)));if(ct!==0){do{for(fe=rt-1;de.bl_count[fe]===0;)fe--;de.bl_count[fe]--,de.bl_count[fe+1]+=2,de.bl_count[rt]--,ct-=2}while(0<ct);for(fe=rt;fe!==0;fe--)for(Te=de.bl_count[fe];Te!==0;)Jt<(nt=de.heap[--tt])||(De[2*nt+1]!==fe&&(de.opt_len+=(fe-De[2*nt+1])*De[2*nt],De[2*nt+1]=fe),Te--)}}(z,R),Ee(G,me,z.bl_count)}function i(z,R,N){var U,T,G=-1,X=R[1],J=0,ne=7,me=4;for(X===0&&(ne=138,me=3),R[2*(N+1)+1]=65535,U=0;U<=N;U++)T=X,X=R[2*(U+1)+1],++J<ne&&T===X||(J<me?z.bl_tree[2*T]+=J:T!==0?(T!==G&&z.bl_tree[2*T]++,z.bl_tree[2*A]++):J<=10?z.bl_tree[2*O]++:z.bl_tree[2*H]++,G=T,me=(J=0)===X?(ne=138,3):T===X?(ne=6,3):(ne=7,4))}function F(z,R,N){var U,T,G=-1,X=R[1],J=0,ne=7,me=4;for(X===0&&(ne=138,me=3),U=0;U<=N;U++)if(T=X,X=R[2*(U+1)+1],!(++J<ne&&T===X)){if(J<me)for(;Y(z,T,z.bl_tree),--J!=0;);else T!==0?(T!==G&&(Y(z,T,z.bl_tree),J--),Y(z,A,z.bl_tree),K(z,J-3,2)):J<=10?(Y(z,O,z.bl_tree),K(z,J-3,3)):(Y(z,H,z.bl_tree),K(z,J-11,7));G=T,me=(J=0)===X?(ne=138,3):T===X?(ne=6,3):(ne=7,4)}}s(Z);var C=!1;function S(z,R,N,U){K(z,(d<<1)+(U?1:0),3),function(T,G,X,J){ce(T),J&&(re(T,X),re(T,~X)),t.arraySet(T.pending_buf,T.window,G,X,T.pending),T.pending+=X}(z,R,N,!0)}o._tr_init=function(z){C||(function(){var R,N,U,T,G,X=new Array(b+1);for(T=U=0;T<g-1;T++)for(V[T]=U,R=0;R<1<<I[T];R++)c[U++]=T;for(c[U-1]=T,T=G=0;T<16;T++)for(Z[T]=G,R=0;R<1<<B[T];R++)x[G++]=T;for(G>>=7;T<u;T++)for(Z[T]=G<<7,R=0;R<1<<B[T]-7;R++)x[256+G++]=T;for(N=0;N<=b;N++)X[N]=0;for(R=0;R<=143;)$[2*R+1]=8,R++,X[8]++;for(;R<=255;)$[2*R+1]=9,R++,X[9]++;for(;R<=279;)$[2*R+1]=7,R++,X[7]++;for(;R<=287;)$[2*R+1]=8,R++,X[8]++;for(Ee($,_+1,X),R=0;R<u;R++)L[2*R+1]=5,L[2*R]=pe(R,5);ae=new se($,I,h+1,_,b),W=new se(L,B,0,u,b),ie=new se(new Array(0),D,0,y,w)}(),C=!0),z.l_desc=new j(z.dyn_ltree,ae),z.d_desc=new j(z.dyn_dtree,W),z.bl_desc=new j(z.bl_tree,ie),z.bi_buf=0,z.bi_valid=0,le(z)},o._tr_stored_block=S,o._tr_flush_block=function(z,R,N,U){var T,G,X=0;0<z.level?(z.strm.data_type===2&&(z.strm.data_type=function(J){var ne,me=4093624447;for(ne=0;ne<=31;ne++,me>>>=1)if(1&me&&J.dyn_ltree[2*ne]!==0)return a;if(J.dyn_ltree[18]!==0||J.dyn_ltree[20]!==0||J.dyn_ltree[26]!==0)return e;for(ne=32;ne<h;ne++)if(J.dyn_ltree[2*ne]!==0)return e;return a}(z)),Pe(z,z.l_desc),Pe(z,z.d_desc),X=function(J){var ne;for(i(J,J.dyn_ltree,J.l_desc.max_code),i(J,J.dyn_dtree,J.d_desc.max_code),Pe(J,J.bl_desc),ne=y-1;3<=ne&&J.bl_tree[2*M[ne]+1]===0;ne--);return J.opt_len+=3*(ne+1)+5+5+4,ne}(z),T=z.opt_len+3+7>>>3,(G=z.static_len+3+7>>>3)<=T&&(T=G)):T=G=N+5,N+4<=T&&R!==-1?S(z,R,N,U):z.strategy===4||G===T?(K(z,2+(U?1:0),3),Re(z,$,L)):(K(z,4+(U?1:0),3),function(J,ne,me,de){var Ae;for(K(J,ne-257,5),K(J,me-1,5),K(J,de-4,4),Ae=0;Ae<de;Ae++)K(J,J.bl_tree[2*M[Ae]+1],3);F(J,J.dyn_ltree,ne-1),F(J,J.dyn_dtree,me-1)}(z,z.l_desc.max_code+1,z.d_desc.max_code+1,X+1),Re(z,z.dyn_ltree,z.dyn_dtree)),le(z),U&&ce(z)},o._tr_tally=function(z,R,N){return z.pending_buf[z.d_buf+2*z.last_lit]=R>>>8&255,z.pending_buf[z.d_buf+2*z.last_lit+1]=255&R,z.pending_buf[z.l_buf+z.last_lit]=255&N,z.last_lit++,R===0?z.dyn_ltree[2*N]++:(z.matches++,R--,z.dyn_ltree[2*(c[N]+h+1)]++,z.dyn_dtree[2*k(R)]++),z.last_lit===z.lit_bufsize-1},o._tr_align=function(z){K(z,2,3),Y(z,P,$),function(R){R.bi_valid===16?(re(R,R.bi_buf),R.bi_buf=0,R.bi_valid=0):8<=R.bi_valid&&(R.pending_buf[R.pending++]=255&R.bi_buf,R.bi_buf>>=8,R.bi_valid-=8)}(z)}},{"../utils/common":41}],53:[function(n,l,o){l.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,l,o){(function(t){(function(a,e){if(!a.setImmediate){var s,d,g,h,_=1,u={},y=!1,m=a.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(a);b=b&&b.setTimeout?b:a,s={}.toString.call(a.process)==="[object process]"?function(A){process.nextTick(function(){w(A)})}:function(){if(a.postMessage&&!a.importScripts){var A=!0,O=a.onmessage;return a.onmessage=function(){A=!1},a.postMessage("","*"),a.onmessage=O,A}}()?(h="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",P,!1):a.attachEvent("onmessage",P),function(A){a.postMessage(h+A,"*")}):a.MessageChannel?((g=new MessageChannel).port1.onmessage=function(A){w(A.data)},function(A){g.port2.postMessage(A)}):m&&"onreadystatechange"in m.createElement("script")?(d=m.documentElement,function(A){var O=m.createElement("script");O.onreadystatechange=function(){w(A),O.onreadystatechange=null,d.removeChild(O),O=null},d.appendChild(O)}):function(A){setTimeout(w,0,A)},b.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var O=new Array(arguments.length-1),H=0;H<O.length;H++)O[H]=arguments[H+1];var I={callback:A,args:O};return u[_]=I,s(_),_++},b.clearImmediate=v}function v(A){delete u[A]}function w(A){if(y)setTimeout(w,0,A);else{var O=u[A];if(O){y=!0;try{(function(H){var I=H.callback,B=H.args;switch(B.length){case 0:I();break;case 1:I(B[0]);break;case 2:I(B[0],B[1]);break;case 3:I(B[0],B[1],B[2]);break;default:I.apply(e,B)}})(O)}finally{v(A),y=!1}}}}function P(A){A.source===a&&typeof A.data=="string"&&A.data.indexOf(h)===0&&w(+A.data.slice(h.length))}})(typeof self>"u"?t===void 0?this:t:self)}).call(this,typeof ut<"u"?ut:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ss);const As=Ct,Ls=async(r,p,n,l,o)=>{var s,d,g;const t=document.querySelector(`svg#${r}`);if(!t)throw new Error("Requested canvas SVG element not found");const a=Number((s=t.style.getPropertyValue("--rmg-svg-height").match(/\d+/g))==null?void 0:s[0]),e=t.cloneNode(!0);if(e.setAttribute("height",(a*(o||100)/100).toString()),e.style.setProperty("all","initial"),["share"].map(h=>{var _;return[...((_=[...document.querySelectorAll("link")].filter(u=>u.id==="css_"+h)[0])==null?void 0:_.sheet).cssRules].map(u=>u.cssText).join(" ")}).forEach(h=>{const _=document.createElement("style");_.textContent=h,e.prepend(_)}),(d=e.querySelector("rect#canvas-border"))==null||d.setAttribute("stroke",l?"black":"none"),(g=e.querySelector("rect#canvas-bg"))==null||g.setAttribute("fill",n?"none":"white"),p===ee.MTR)try{const h=await Rs(e),_=document.createElement("style");_.textContent=h.join(`
`),e.prepend(_)}catch(h){alert("Failed to fonts. Fonts in the exported PNG will be missing."),console.error(h)}return e},Ps=r=>new Promise(p=>{const n=new FileReader;n.onloadend=()=>p(n.result),n.readAsDataURL(r)}),Os=(r,p)=>r.find(n=>{const l=n.style;return l.fontFamily.replace(/^"(.+)"$/,"$1")===p.family&&l.unicodeRange===p.unicodeRange}),Rs=async r=>{var t,a,e;const p=Array.from(new Set([...r.querySelectorAll(".rmg-name__zh"),...r.querySelectorAll(".rmg-name__en")].map(s=>s.innerHTML).join("").replace(/\s/g,""))).join(""),n=await document.fonts.load("80px GenYoMin TW, Vegur",p),l=Array.from(((e=(a=(t=document.querySelector("link#css_share"))==null?void 0:t.sheet)==null?void 0:a.cssRules)==null?void 0:e[0]).styleSheet.cssRules),o=n.reduce((s,d)=>{const g=Os(l,d);return g?s.find(_=>{const u=_.style,y=g.style;return u.fontFamily===y.fontFamily&&u.unicodeRange===y.unicodeRange})?s:s.concat(g):s},[]);return await Promise.all(o.map(async s=>{try{const d=await fetch(Ts(s)),g=await Ps(await d.blob());return s.cssText.replace(/src:[ \w('",\-:/.)]+;/g,`src: url('${g}'); `)}catch(d){return console.error(d),""}}))},Ts=r=>{var n;const p=r.style.src;return Rn()?p.replace(/^url\("(\S+)"\).*$/,"$1"):"/rmg/styles/"+((n=p.match(/^url\("([\S*]+)"\)/))==null?void 0:n[1])},Ds=async(r,p,n)=>{const l=r.viewBox.baseVal.width,o=r.viewBox.baseVal.height,t=document.querySelectorAll("canvas")[0];t.width=Number(l)*window.devicePixelRatio*p,t.height=Number(o)*window.devicePixelRatio*p,r.setAttribute("width",t.width.toString()),r.setAttribute("height",t.height.toString());const a=t.getContext("2d");return a.clearRect(0,0,t.width,t.height),r.querySelectorAll(".rmg-name__en.rmg-name__mtr--station").forEach(e=>e.setAttribute("font-size","11px")),r.querySelectorAll(".rmg-name__en.rmg-name__gzmtr--next2-dest").forEach(e=>e.setAttribute("font-size","8.5px")),r.querySelectorAll("text, tspan").forEach(e=>{const s=window.getComputedStyle(e);e.setAttribute("font-family",s.fontFamily),e.setAttribute("fill",s.fill),e.setAttribute("dominant-baseline",s.dominantBaseline),e.setAttribute("text-anchor",s.textAnchor||"")}),new Promise((e,s)=>{const d=new Image;d.onload=()=>{setTimeout(()=>{a.drawImage(d,0,0,t.width,t.height),t.toBlob(g=>{g?e(g):s("Canvas blob is null")},"image/png")},n?2e3:0)},d.onerror=s,d.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r.outerHTML)))})},ks=r=>{var p,n,l,o,t,a,e;"line_name"in r||(r.line_name=["路線名","Name of Line"]),"dest_legacy"in r||(r.dest_legacy=!1),delete r.fontZH,delete r.fontEN,delete r.weightZH,delete r.weightEN;for(const[s,d]of Object.entries(r.stn_list))"branch"in d||(r.stn_list[s].branch={left:[],right:[]},d.children.length===2?r.stn_list[s].branch.right=["through",d.children[1]]:r.stn_list[s].branch.right=[],d.parents.length===2?r.stn_list[s].branch.left=["through",d.parents[1]]:r.stn_list[s].branch.left=[]);"psd_num"in r?r.psd_num=r.psd_num.toString():r.psd_num="1","line_num"in r||(r.line_num="1"),r.theme.length===3&&r.theme.push("#fff");for(const[s,d]of Object.entries(r.stn_list))"num"in d||(r.stn_list[s].num="00"),"interchange"in d&&d.interchange.map(g=>g.forEach(h=>{h.length===5&&h.splice(3,0,"#fff")}));for(const[s,d]of Object.entries(r.stn_list))d.change_type==="osi22_end_p"&&(r.stn_list[s].change_type="osi22_pr"),d.change_type==="osi22_end_u"&&(r.stn_list[s].change_type="osi22_ur");for(const[s,d]of Object.entries(r.stn_list))"interchange"in d||(r.stn_list[s].interchange=[[]]);"info_panel_type"in r?r.info_panel_type=(s=>{switch(s){case"gz_1":case"panasonic":return"gz28";case"gz_2":return"gz6";case"gz_3":return"gz3";default:return s}})(r.info_panel_type):r.info_panel_type="gz28","direction_gz_x"in r||(r.direction_gz_x=50),"direction_gz_y"in r||(r.direction_gz_y=70);for(const[s,d]of Object.entries(r.stn_list))"transfer"in d||(r.stn_list[s].transfer={tick_direc:d.change_type==="none"||d.change_type==="int2"?"r":(p=d.change_type)==null?void 0:p.split("_")[1].split("").slice().reverse()[0],paid_area:((n=d.change_type)==null?void 0:n.indexOf("osi"))!==-1?((l=d.change_type)==null?void 0:l.split("_")[1][0])==="p":!0,osi_names:((o=d.change_type)==null?void 0:o.indexOf("osi"))!==-1?[d.interchange[1][0]]:[],info:d.interchange.length===2?[d.interchange[0],d.interchange[1].slice(1)]:d.interchange}),delete r.stn_list[s].change_type,delete r.stn_list[s].interchange;for(const[s,d]of Object.entries(r.stn_list))"services"in d||(r.stn_list[s].services=["local"]),"facility"in d||("usage"in d?r.stn_list[s].facility=d.usage:r.stn_list[s].facility=""),delete r.stn_list[s].usage;"customiseMTRDest"in r||(r.customiseMTRDest={isLegacy:r.dest_legacy||!1,terminal:!1}),delete r.dest_legacy,"svgWidth"in r||(r.svgWidth={destination:r.svg_dest_width,runin:r.svg_dest_width,railmap:r.svg_width,indoor:r.svg_width}),"indoor"in r.svgWidth||(r.svgWidth.indoor=r.svgWidth.railmap),delete r.svg_width,delete r.svg_dest_width,"notesGZMTR"in r||(r.notesGZMTR=[]),r.notesGZMTR=(t=r.notesGZMTR)==null?void 0:t.map(s=>s.length===4?s.concat([!1]):s),delete r.char_form,delete r.show_outer,delete r.strip_pc,delete r.txt_bg_gap,"namePosMTR"in r||(r.namePosMTR={isStagger:!0,isFlip:r.txt_flip}),delete r.txt_flip,Object.keys(r.stn_list).forEach(s=>{"secondaryName"in r.stn_list[s]?r.stn_list[s].secondaryName!==!1&&r.stn_list[s].secondaryName.join()===","&&(r.stn_list[s].secondaryName=!1):r.stn_list[s].secondaryName=!1,"type"in r.stn_list[s].transfer&&delete r.stn_list[s].transfer.type}),r.style=r.style===void 0||!Object.values(ee).includes(r.style)?ee.MTR:r.style,r.coline=(a=r.coline)!=null?a:[],r.loop=(e=r.loop)!=null?e:!1,r.loop_info=r.loop_info===void 0?{bank:!0,left_and_right_factor:0,bottom_factor:1}:{...r.loop_info,bottom_factor:Math.max(r.loop_info.bottom_factor,1)};for(const[s,d]of Object.entries(r.stn_list))"loop_pivot"in d||(r.stn_list[s].loop_pivot=!1);return Array.isArray(r.coline)&&(r.coline=r.coline.reduce((s,d)=>({...s,[Ye(4)]:d}),{})),r.platform_num===!1&&(r.platform_num=""),Object.values(r.stn_list).forEach(s=>{var g,h;const d=s;d.one_line=(g=d.one_line)!=null?g:!1,d.int_padding=(h=d.int_padding)!=null?h:r.loop?250:355}),r.branchSpacingPct===void 0&&(r.style===ee.SHMetro?r.branchSpacingPct=Math.round(r.branch_spacing/r.svg_height*300):r.branchSpacingPct=Math.round(r.branch_spacing/r.svg_height*200),delete r.branch_spacing),r},Is=r=>new Promise(p=>{setTimeout(p,r)});function js(r){const{isOpen:p,onClose:n}=r,{t:l}=oe(),o=ye(),[t,a]=Q.useState(""),[e,s]=Q.useState(!1),[d,g]=Q.useState(!1),[h,_]=Q.useState(100),[u,y]=Q.useState("png"),m=te(D=>D.app.canvasToShow),{style:b,stn_list:v,current_stn_idx:w,line_name:P}=te(D=>D.param);Q.useEffect(()=>{t!==""&&!m.includes(t)&&a("")},[m]);const A=Ut[b].reduce((D,M)=>m.includes(M)?{...D,[M]:l("CanvasType."+M)}:{...D},{"":l("DownloadModal.pleaseSelect")}),O=[25,33,50,67,75,80,90,100,110,125,150,175,200,250,300,400,500].reduce((D,M)=>({...D,[M]:`${M}%`}),{}),H={png:l("DownloadModal.png"),svg:l("DownloadModal.svg")},I=[{type:"select",label:l("DownloadModal.canvas"),value:t,options:A,disabledOptions:[""],onChange:D=>a(D),minW:"full"},{type:"switch",label:l("DownloadModal.transparent"),isChecked:e,onChange:s,oneLine:!0,minW:"full"},{type:"switch",label:l("DownloadModal.showBorder"),isChecked:d,onChange:g,oneLine:!0,minW:"full"},{type:"select",label:l("DownloadModal.scale"),value:h,options:O,onChange:D=>_(D)},{type:"select",label:l("DownloadModal.format"),value:u,options:H,onChange:D=>y(D)}],B=async D=>{o(sn(0));const M=D==="current"?[w]:Object.keys(v).filter(L=>!["linestart","lineend"].includes(L)),$=new As;for(const L in M){o(sn((Number(L)+1)/M.length*100));const x=M[L];o(kt(x)),await Is(500);const c=await Ls(t,b,e,d,h);document.body.appendChild(c);const V=`rmg.${x}.${v[x].name[0]}.${v[x].name[1]}`.replaceAll(/\\|\/|\||\*|:|\?|<|>|"/g,"_");if(u==="png"){const ae=Rn()&&L==="0",W=await Ds(c,h/100,ae);M.length>1?$.file(`${V}.png`,W):jt(`${V}.png`,W)}else if(u==="svg"){c.removeAttribute("height");const ae="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(c.outerHTML)));M.length>1?$.file(`${V}.svg`,ae.split("base64,")[1],{base64:!0}):On(V+".svg","image/svg+xml",c.outerHTML)}document.body.removeChild(c)}if(M.length>1){const L=await $.generateAsync({type:"blob"}),x=`rmg.${P[0]}.${P[1]}.zip`.replaceAll(" ","_");jt(x,L)}he.event(be.DOWNLOAD_IMAGES,{canvasToDownload:t,style:b,option:D,format:u}),o(kt(w)),o(En()),n()};return q(He,{isOpen:p,onClose:n,children:[E(Be,{}),q(Ve,{children:[E(Fe,{children:l("DownloadModal.title")}),E(Me,{}),E(Ne,{children:E(ge,{fields:I})}),E(Je,{children:q(Ce,{children:[E(ue,{colorScheme:"primary",variant:"outline",size:"sm",onClick:()=>B("current"),isDisabled:!t,children:l("DownloadModal.downloadOne")}),b!==ee.GZMTR&&E(ue,{colorScheme:"primary",variant:"outline",size:"sm",onClick:()=>B("all"),isDisabled:!t,children:l("DownloadModal.downloadAll")})]})})]})]})}function Cs(){const{t:r}=oe(),[p,n]=Q.useState(!1),{paramConfig:l}=te(a=>a.app),o=te(a=>a.param),t=()=>{On(`RMG_${l==null?void 0:l.id}.json`,"application/json",JSON.stringify(o)),he.event(be.DOWNLOAD_PARAM,{style:o.style})};return q(br,{children:[E(Er,{as:ue,variant:"ghost",size:"sm",rightIcon:E(zr,{}),children:r("DownloadActions.downloads")}),q(wr,{children:[E(Qt,{onClick:t,children:r("DownloadActions.configFile")}),E(Qt,{onClick:()=>n(!0),children:r("DownloadActions.images")})]}),E(js,{isOpen:p,onClose:()=>n(!1)})]})}function bt(){const[r,p]=Sr();return[r,l=>{if(p(l),Object.keys(l)){const o=new URLSearchParams(l);he.updateUrl("/rmg/?"+o)}else he.updateUrl("/rmg/")}]}function xs(){const{t:r}=oe(),p=Ft(),[,n]=bt();return q(Ce,{ml:"auto",w:"fit-content",children:[E(ue,{variant:"ghost",size:"sm",leftIcon:E(Ar,{}),onClick:()=>{p(Qe(qe.CLOSE)),p(zn(void 0)),n({})},children:r("All projects")}),E(Cs,{}),E(ue,{variant:"solid",size:"sm",colorScheme:"primary",leftIcon:E(Lr,{}),onClick:()=>p(Qe(qe.STYLE)),children:r("HeaderActions.editStyle")})]})}function Hs(){const{t:r}=oe(),p=ye(),{canvasToShow:n,canvasScale:l}=te(d=>d.app),o=te(d=>d.param.style),t=Object.values(ee).reduce((d,g)=>({...d,[g]:r("RmgStyle."+g)}),{}),a=Ut[o].map(d=>({label:r("CanvasType."+d),value:d})),e=d=>{p(La(d))},s=[{type:"select",label:r("Style"),value:o,options:t,onChange:d=>e(d)},{type:"custom",label:r("View"),component:E(Pr,{displayValue:r("Select canvas"),selections:a,defaultValue:n,onChange:d=>p(Sa(d))})},{type:"slider",label:r("Canvas scale"),value:l,min:.1,max:2,step:.01,onChange:d=>p(Aa(d)),leftIcon:E(Or,{}),rightIcon:E(Rr,{})}];return q(Tr,{children:[E(ge,{fields:s,minW:160}),E(xs,{})]})}const Bs=r=>{switch(r){case ee.MTR:return[Ie.Hongkong,"twl","#E2231A",Se.white];case ee.GZMTR:return[Ie.Guangzhou,"gz1","#F3D03E",Se.black];case ee.SHMetro:return[Ie.Shanghai,"sh1","#E4002B",Se.white];default:return[Ie.Other,"other","#AAAAAA",Se.white]}},Vs=r=>{switch(r){case pt.ChineseSimp:return["1号线","Line 1"];case pt.ChineseTrad:return["荃灣綫","Tsuen Wan Line"];default:return["地鐵線","Metro Line"]}},at=r=>({name:["未命名 "+r,"Unnamed "+r],secondaryName:!1,num:"00",services:[Dt.local],parents:[],children:[],branch:{left:[],right:[]},transfer:{info:[[]],tick_direc:Ke.right,paid_area:!0,osi_names:[]},facility:ke.none,loop_pivot:!1,one_line:!0,int_padding:355}),Fs=(r,p)=>{const n=at("linestart");n.name=["LEFT END","LEFT END"];const l=at("lineend");l.name=["RIGHT END","RIGHT END"];const o=Ye(6),t=at(o);t.num="01";const a=Ye(6),e=at(a);return e.num="02",n.children=[o],t.parents=["linestart"],t.children=[a],e.parents=[o],e.children=["lineend"],l.parents=[a],{svgWidth:{destination:1200,runin:1200,railmap:1200,indoor:1200},svg_height:300,style:r,y_pc:50,padding:10,branchSpacingPct:33,direction:Ke.left,platform_num:"1",theme:Bs(r),line_name:Vs(p),current_stn_idx:a,stn_list:{linestart:n,[o]:t,[a]:e,lineend:l},namePosMTR:{isStagger:!0,isFlip:!0},customiseMTRDest:{isLegacy:!1,terminal:!1},line_num:"1",psd_num:"1",info_panel_type:r===ee.SHMetro?vn.sh:yn.gz1,notesGZMTR:[],direction_gz_x:40,direction_gz_y:70,coline:{},loop:!1,loop_info:{bank:!0,left_and_right_factor:1,bottom_factor:1}}},it=(r,p,n,l)=>(o,t)=>{const a=t().param.stn_list;let e=Ye(6);for(;e in a;)e=Ye(6);const s=at(e);if(r!=="new"){const d={...a,[p]:{...a[p],children:a[p].children.map(g=>g===n?e:g),branch:{left:a[p].branch.left,right:a[p].branch.right.length&&a[p].branch.right[1]===n?[a[p].branch.right[0],e]:a[p].branch.right}},[n]:{...a[n],parents:a[n].parents.map(g=>g===p?e:g),branch:{left:a[n].branch.left.length&&a[n].branch.left[1]===p?[a[n].branch.left[0],e]:a[n].branch.left,right:a[n].branch.right}},[e]:{...s,parents:[p],children:[n]}};return o(Ge(d)),e}else{if(!l)return!1;const d={...a,[p]:{...a[p],children:l==="upper"?[e,a[p].children[0]]:[a[p].children[0],e],branch:{left:a[p].branch.left,right:[ft.through,e]}},[n]:{...a[n],parents:l==="upper"?[e,a[n].parents[0]]:[a[n].parents[0],e],branch:{left:[ft.through,e],right:a[n].branch.right}},[e]:{...s,parents:[p],children:[n]}};return o(Ge(d)),e}},Ms=(r,p,n)=>(l,o)=>{const a=o().helper.branches[r];if(a!=null&&a.length)if(p==="before"){const e=a[a.indexOf(n)-1];return l(it(r.toString(),e,n))}else{const e=a[a.indexOf(n)+1];return l(it(r.toString(),n,e))}else return!1},Ns=()=>(r,p)=>{const n=p().param.stn_list;return p().helper.branches[0].filter(o=>{const t=n[o].parents.length+n[o].children.length===4,a=Gt(o,n)===0;return!t&&a})},ln=(r,p)=>(n,l)=>{const o=l().param.stn_list,t=l().helper.branches;return!t[0].includes(r)||!t[0].includes(p)?"Branch should end at main line":t[0].indexOf(r)>=t[0].indexOf(p)?"Not in correct ordering":r==="linestart"&&p==="lineend"?"Should not be parallel to main line":r==="linestart"&&t[0].indexOf(p)===1?"Branch should not be open jaw from the first station":p==="lineend"&&t[0].indexOf(r)===t[0].length-2?"Branch should not be open jaw from the last station":o[r].children.length>1||o[p].parents.length>1?"Branch already exist":t.slice(1).some(s=>s.slice(1,-1).includes(r)||s.slice(1,-1).includes(p))?"Cannot branch out from existing branch":t[0].slice(t[0].indexOf(r)+1,t[0].indexOf(p)).every(s=>o[s].parents.length===1&&o[s].children.length===1)?"":"One or more stations between both ends are branching out"};function Us(r){var H,I;const{isOpen:p,onClose:n}=r,{t:l}=oe(),o=ye(),t=te(B=>B.app.selectedBranch),{style:a,stn_list:e}=te(B=>B.param),s=te(B=>B.helper.branches),[d,g]=Q.useState(t),[h,_]=Q.useState("before"),[u,y]=Q.useState(""),[m,b]=Q.useState(!1);Q.useEffect(()=>{g(t)},[t]),Q.useEffect(()=>{p||b(!1)},[p]);const v=(I=(H=s[Number(d)])==null?void 0:H.slice(1,-1))!=null?I:[],w=B=>B.reduce((D,M)=>{var $;return{...D,[M]:($=e[M])==null?void 0:$.name.join(" - ")}},{"":l("AddStationModal.pleaseSelect")}),P=[{type:"select",label:l("AddStationModal.where"),value:d,options:{...s.reduce((B,D,M)=>({...B,[M]:M===0?l("AddStationModal.main"):a!==ee.SHMetro||!et(D,e)?l("AddStationModal.branch")+" "+M:l("AddStationModal.external")+" "+M}),{})},onChange:B=>A(B),minW:"full"},{type:"select",label:l("AddStationModal.preposition"),value:h,options:{before:l("AddStationModal.before"),after:l("AddStationModal.after")},onChange:B=>_(B)},{type:"select",label:l("AddStationModal.pivot"),value:u,options:w(v),disabledOptions:[""],onChange:B=>y(B)}],A=B=>{g(B),y("")},O=()=>{const B=o(Ms(d,h,u));B?(n(),o(bn(B)),o(Qe(qe.STATION))):(console.log("false here"),b(!0)),he.event(be.ADD_STATION,{style:a,branchIndex:d,success:B})};return q(He,{isOpen:p,onClose:n,children:[E(Be,{}),q(Ve,{children:[m&&q(Mt,{status:"error",variant:"solid",size:"xs",children:[E(Nt,{}),l("AddStationModal.error")]}),q(we,{position:"relative",children:[E(Fe,{children:l("AddStationModal.title")}),E(Me,{})]}),E(Ne,{children:E(ge,{fields:P})}),E(Je,{children:E(ue,{colorScheme:"primary",onClick:O,isDisabled:!u,children:l("Confirm")})})]})]})}function Ws(r){const{isOpen:p,onClose:n}=r,{t:l}=oe(),o=ye(),[t,a]=Q.useState("new"),[e,s]=Q.useState(""),[d,g]=Q.useState(""),[h,_]=Q.useState("upper"),[u,y]=Q.useState(""),[m,b]=Q.useState(""),{style:v,stn_list:w}=te($=>$.param);Q.useEffect(()=>{p||(a("new"),s(""),g(""))},[p]);const A=($=>$.reduce((L,x)=>{var c;return{...L,[x]:(c=w[x])==null?void 0:c.name.join(" - ")}},{"":l("NewBranchModal.pleaseSelect")}))(o(Ns())),O=[{type:"select",label:l("NewBranchModal.where"),value:t,options:{new:l("NewBranchModal.new"),ext:l("NewBranchModal.ext")},disabledOptions:v===ee.SHMetro?[]:["ext"],onChange:$=>H($),minW:"full"},{type:"select",label:l("NewBranchModal.from"),value:e,options:A,disabledOptions:[""],onChange:$=>I($),isInvalid:Boolean(u)},{type:"select",label:l("NewBranchModal.to"),value:d,options:A,disabledOptions:[""],onChange:$=>B($),isInvalid:Boolean(m)},{type:"select",label:l("NewBranchModal.position"),value:h,options:{upper:l("NewBranchModal.upper"),lower:l("NewBranchModal.lower")},onChange:$=>_($),minW:"full",hidden:t!=="new"||v===ee.SHMetro}],H=$=>{a($),s(""),g(""),y(""),b("")},I=$=>{s($),y(""),$&&d&&b(o(ln($,d)))},B=$=>{g($),b(""),e&&$&&y(o(ln(e,$)))},D=()=>{let $;t==="ext"?$=o(it("new",e,d,"lower")):v===ee.SHMetro?$=o(it("new",e,d,"upper")):$=o(it("new",e,d,h)),$&&(n(),he.event(be.ADD_BRANCH,{style:v,where:t}))},M=Boolean(!e||!d||u||m);return q(He,{isOpen:p,onClose:n,children:[E(Be,{}),q(Ve,{children:[E(Fe,{children:l("NewBranchModal.title")}),E(Me,{}),E(Ne,{children:E(ge,{fields:O})}),E(Je,{children:E(ue,{colorScheme:"primary",title:M?u||m:l("Confirm"),onClick:D,isDisabled:M,children:l("Confirm")})})]})]})}const Zs=Q.lazy(()=>f(()=>import("./station-ag-grid-e3a7ddf0.js"),["assets/station-ag-grid-e3a7ddf0.js","assets/vendor-37640421.js","assets/index-07bab366.js","assets/index-c7ec3755.css"]));function Gs(){const{t:r}=oe(),p=ye(),[n,l]=Q.useState(!1),[o,t]=Q.useState(!1),a=te(h=>h.app.selectedBranch),{style:e,stn_list:s}=te(h=>h.param),d=te(h=>h.helper.branches),g=()=>{p(Qe(qe.BRANCH))};return q(we,{flex:1,overflow:"hidden",children:[q(xt,{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden",index:a,onChange:h=>p(Pa(h)),children:[q(Ht,{children:[d.map((h,_)=>_===0?E($e,{children:r("GridTabs.main")},_):e!==ee.SHMetro||!et(h,s)?E($e,{children:r("GridTabs.branch")+" "+_},_):E($e,{children:r("GridTabs.external")+" "+_},_)),E(je,{size:"sm",variant:"ghost",alignSelf:"center","aria-label":"New branch",onClick:()=>t(!0),icon:E(xe,{})}),q(Ce,{marginLeft:"auto",marginRight:1,children:[E(ue,{variant:"outline",size:"xs",leftIcon:E(xe,{}),onClick:()=>l(!0),children:r("GridTabs.addStation")}),E(ue,{size:"xs",colorScheme:"primary",onClick:g,children:r("GridTabs.editLine")})]})]}),E(Bt,{flex:1,overflowY:"auto",children:d.map((h,_)=>E(_t,{padding:0,h:"100%",position:"relative",children:E(un,{suspenseFallback:E(gt,{isIndeterminate:!0}),children:E(Zs,{branchIndex:_})})},_))})]}),E(Us,{isOpen:n,onClose:()=>l(!1)}),E(Ws,{isOpen:o,onClose:()=>t(!1)})]})}function qs(){const r=ye(),p=te(l=>l.app.globalAlerts),n=l=>{he.isStandaloneWindow()?window.open(`/${l}`,"_blank"):he.openApp(l)};return E(We,{children:Object.entries(p).map(([l,{message:o,url:t,linkedApp:a}])=>q(Mt,{status:l,variant:"solid",size:"xs",pl:3,pr:1,py:0,children:[E(Nt,{}),a?E(Lt,{onClick:()=>n(a),children:o}):t?E(Lt,{href:t,target:"_blank",children:o}):o,E(Dr,{ml:"auto",onClick:()=>r(Oa(l))})]},l))})}function Js(){const r=te(p=>p.app.isLoading);return q(fn,{children:[r&&E(gt,{isIndeterminate:r<0,value:r>=0?r:void 0}),E(Hs,{}),E(qs,{}),q(Oe,{flex:1,overflow:"hidden",position:"relative",children:[q(Oe,{as:"section",direction:"column",flex:1,ml:1,mr:1,overflow:"hidden",children:[E(we,{children:E(Ca,{})}),E(Gs,{})]}),E(Es,{})]}),E("canvas",{style:{display:"none"}})]})}function $s(r){var d;const{config:p,onClose:n,onUpdate:l}=r,{t:o}=oe(),[t,a]=Q.useState((d=p==null?void 0:p.name)!=null?d:"");Q.useEffect(()=>{var g;p&&a((g=p.name)!=null?g:"")},[p]);const e=[{type:"input",label:o("Project name"),value:t,onChange:a,debouncedDelay:0}],s=()=>{var g;p&&((g=p.name)!=null?g:"")!==t&&l({...p,name:t})};return q(He,{isOpen:!!p,onClose:n,isCentered:!0,children:[E(Be,{}),q(Ve,{children:[E(Fe,{children:o("Edit project info")}),E(Me,{}),E(Ne,{children:E(ge,{fields:e})}),E(Je,{children:E(ue,{colorScheme:"primary",onClick:s,children:o("Confirm")})})]})]})}const Ys={flex:"2 1 0%",overflow:"hidden",minW:{base:"unset",md:240},w:{base:"100%",md:"unset"},mr:{base:0,md:2},mb:{base:2,md:0},"& > div":{flexDirection:"column",h:200,overflowX:"hidden",overflowY:"auto",borderRadius:"md",borderWidth:2,"& >.chakra-button":{alignItems:"center"},"& .chakra-button__group":{"& button:not(:first-of-type)":{h:"100%"}}}};function Ks(r){const{paramRegistry:p,downloading:n,selectedParam:l,onParamSelect:o,onParamRemove:t,onParamUpdate:a}=r,{t:e}=oe(),[s,d]=Q.useState(),g=h=>{a(h),d(void 0)};return q(we,{sx:Ys,children:[q(Oe,{children:[n&&E(Tt,{variant:"ghost",primaryText:e("Downloading")+"...",secondaryText:n,isDisabled:!0}),p.slice().sort((h,_)=>{var u,y;return((u=_.lastModified)!=null?u:0)-((y=h.lastModified)!=null?y:0)}).map(h=>{var _;return q(kr,{size:"sm",isAttached:!0,colorScheme:l===h.id?"primary":void 0,variant:l===h.id?"solid":"ghost",children:[E(Tt,{primaryText:(_=h.name)!=null?_:e("Project")+" "+h.id,secondaryText:e("Last modified")+": "+ws(h.lastModified).map(e).join(" "),onClick:()=>o(h.id)}),E(je,{"aria-label":e("Edit project info"),title:e("Edit project info"),icon:E(Ir,{}),onClick:()=>d(h)}),E(je,{"aria-label":e("Remove project"),title:e("Remove project"),icon:E(vt,{}),onClick:()=>t(h.id)})]},h.id)})]}),p.length>=10&&E(ot,{as:"em",fontSize:"xs",children:e("You have reached the maximum number of projects.")}),E($s,{config:s,onClose:()=>d(void 0),onUpdate:g})]})}const Tn=[{id:"basic",name:{en:"Basic",zh:"基本"}},{id:"mtr",name:{en:"MTR","zh-Hans":"港铁","zh-Hant":"港鐵"}},{id:"gzmtr",name:{en:"Guangzhou Metro","zh-Hans":"广州地铁","zh-Hant":"廣州地鐵"}},{id:"shmetro",name:{en:"Shanghai Metro","zh-Hans":"上海地铁","zh-Hant":"上海地鐵"}},{id:"bjsubway",name:{en:"Beijing Subway","zh-Hans":"北京地铁","zh-Hant":"北京地鐵"}},{id:"chengdumetro",name:{en:"Chengdu Metro","zh-Hans":"成都地铁","zh-Hant":"成都地鐵"}},{id:"crt",name:{en:"Chongqing Rail Transit","zh-Hans":"重庆轨道交通","zh-Hant":"重慶軌道交通"}},{id:"fmetro",name:{en:"Foshan Metro","zh-Hans":"佛山地铁","zh-Hant":"佛山地鐵"}},{id:"hrbmetro",name:{en:"Harbin Metro","zh-Hans":"哈尔滨地铁","zh-Hant":"哈爾濱地鐵"}},{id:"kmrailtransit",name:{en:"Kunming Rail Transit","zh-Hans":"昆明地铁","zh-Hant":"昆明地鐵"}},{id:"kvtransit",name:{en:"Klang Valley Integrated Transit System","zh-Hans":"巴生谷综合运输系统","zh-Hant":"巴生谷綜合運輸系統"}},{id:"lahoremetro",name:{en:"Lahore Metro",ur:"لاہور میٹرو","zh-Hans":"拉合尔地铁","zh-Hant":"拉合爾地鐵"}},{id:"mlm",name:{en:"Macao LRT",pt:"Metro Ligeiro de Macau","zh-Hans":"澳门轻轨","zh-Hant":"澳門輕軌"}},{id:"nbrailtransit",name:{en:"Ningbo Rail Transit","zh-Hans":"宁波轨道交通","zh-Hant":"寧波軌道交通"}},{id:"njmetro",name:{en:"Nanjing Metro","zh-Hans":"南京地铁","zh-Hant":"南京地鐵"}},{id:"qdmetro",name:{en:"Qingdao Metro","zh-Hans":"青岛地铁","zh-Hant":"青島地鐵"}},{id:"santiagometro",name:{en:"Santiago Metro","zh-Hans":"圣地亚哥地铁","zh-Hant":"聖地亞哥地鐵"}},{id:"saopaulometro",name:{en:"São Paulo Metro",pt:"Metrô de São Paulo","zh-Hans":"圣保罗地铁","zh-Hant":"聖保羅地鐵"}},{id:"seoulmetro",name:{en:"Seoul Metropolitan Subway",ko:"서울 수도권 전철","zh-Hans":"首尔首都圈电铁","zh-Hant":"首爾首都圈電鐵"}},{id:"szmetro",name:{en:"Shenzhen Metro","zh-Hans":"深圳地铁","zh-Hant":"深圳地鐵"}},{id:"taipeimrt",name:{en:"Taipei Metro","zh-Hans":"台北捷运","zh-Hant":"台北捷運"}},{id:"torontosubway",name:{en:"Toronto Subway",fr:"Métro de Toronto","zh-Hans":"多伦多地铁","zh-Hant":"多倫多地鐵"}},{id:"whrt",name:{en:"Wuhan Metro","zh-Hans":"武汉地铁","zh-Hant":"武漢地鐵"}},{id:"zzmetro",name:{en:"Zhengzhou Metro","zh-Hans":"郑州地铁","zh-Hant":"鄭州地鐵"}}],Xs=Object.freeze(Object.defineProperty({__proto__:null,default:Tn},Symbol.toStringTag,{value:"Module"})),Dn=[{filename:"default",name:{en:"Default","zh-Hans":"默认","zh-Hant":"預設"},style:"mtr"},{filename:"coline",name:{en:"Track Share","zh-Hans":"共线","zh-Hant":"共綫"},style:"shmetro"},{filename:"loop",name:{en:"Loop Line","zh-Hans":"环线","zh-Hant":"環綫"},style:"shmetro"}],kn=[{filename:"twl",name:{en:"Tsuen Wan Line","zh-Hans":"荃湾线","zh-Hant":"荃灣綫"},uploadBy:"wongchito",style:"mtr"},{filename:"ktl",name:{en:"Kwun Tong Line","zh-Hans":"观塘线","zh-Hant":"觀塘綫"},uploadBy:"wongchito",style:"mtr"},{filename:"isl",name:{en:"Island Line","zh-Hans":"港岛线","zh-Hant":"港島綫"},uploadBy:"wongchito",style:"mtr"},{filename:"tkl",name:{en:"Tseung Kwan O Line","zh-Hans":"将军澳线","zh-Hant":"將軍澳綫"},uploadBy:"wongchito",style:"mtr"},{filename:"tcl",name:{en:"Tung Chung Line","zh-Hans":"东涌线","zh-Hant":"東涌綫"},uploadBy:"wongchito",style:"mtr"},{filename:"sile",name:{en:"South Island Line","zh-Hans":"南港岛线","zh-Hant":"南港島綫"},uploadBy:"wongchito",style:"mtr"},{filename:"drl",name:{en:"Disneyland Resort Line","zh-Hans":"迪士尼线","zh-Hant":"迪士尼綫"},uploadBy:"wongchito",style:"mtr"},{filename:"ael",name:{en:"Airport Express","zh-Hans":"机场快线","zh-Hant":"機場快綫"},uploadBy:"wongchito",style:"mtr"},{filename:"eal",name:{en:"East Rail Line","zh-Hans":"东铁线","zh-Hant":"東鐵綫"},uploadBy:"wongchito",style:"mtr"},{filename:"tml",name:{en:"Tuen Ma Line","zh-Hans":"屯马线","zh-Hant":"屯馬綫"},uploadBy:"wongchito",style:"mtr"}],In=[{filename:"gz1",name:{en:"Line 1","zh-Hans":"1号线","zh-Hant":"1號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz2",name:{en:"Line 2","zh-Hans":"2号线","zh-Hant":"2號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz3",name:{en:"Line 3","zh-Hans":"3号线","zh-Hant":"3號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz4",name:{en:"Line 4","zh-Hans":"4号线","zh-Hant":"4號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz5",name:{en:"Line 5","zh-Hans":"5号线","zh-Hant":"5號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz6",name:{en:"Line 6","zh-Hans":"6号线","zh-Hant":"6號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz7",name:{en:"Line 7","zh-Hans":"7号线","zh-Hant":"7號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz8",name:{en:"Line 8","zh-Hans":"8号线","zh-Hant":"8號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz9",name:{en:"Line 9","zh-Hans":"9号线","zh-Hant":"9號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz13",name:{en:"Line 13","zh-Hans":"13号线","zh-Hant":"13號線"},uploadBy:"Dingdong2334",style:"gzmtr"},{filename:"gz14",name:{en:"Line 14","zh-Hans":"14号线","zh-Hant":"14號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz18",name:{en:"Line 18","zh-Hans":"18号线","zh-Hant":"18號線"},uploadBy:"Dingdong2334",style:"gzmtr"},{filename:"gz21",name:{en:"Line 21","zh-Hans":"21号线","zh-Hant":"21號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gz22",name:{en:"Line 22","zh-Hans":"22号线","zh-Hant":"22號線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"gf",name:{en:"Guangfo Line","zh-Hans":"广佛线","zh-Hant":"廣佛線"},uploadBy:"wongchito",style:"gzmtr"},{filename:"apm",name:{en:"APM Line","zh-Hans":"APM线","zh-Hant":"APM線"},uploadBy:"Dingdong2334",style:"gzmtr"},{filename:"thz1",name:{en:"Haizhu Tram Line 1","zh-Hans":"海珠有轨1号线","zh-Hant":"海珠有軌1號線"},uploadBy:"clearng-kly",style:"gzmtr"},{filename:"thp1",name:{en:"Huangpu Tram Line 1","zh-Hans":"黄埔有轨1号线","zh-Hant":"黃埔有軌1號線"},uploadBy:"clearng-kly",style:"gzmtr"}],jn=[{filename:"sh1",name:{en:"Line 1","zh-Hans":"1号线","zh-Hant":"1號線"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh2",name:{en:"Line 2","zh-Hans":"2号线","zh-Hant":"2號線"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh3",name:{en:"Line 3 (External)","zh-Hans":"3号线 （共线）","zh-Hant":"3號線 （共線）"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh4",name:{en:"Line 4 (Loop)","zh-Hans":"4号线 （环线）","zh-Hant":"4號線 （環線）"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh3&4",name:{en:"Line 3 and 4 (External with Loop)","zh-Hans":"3与4号线 （共线与环线）","zh-Hant":"3與4號線 （共線與環線）"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh5",name:{en:"Line 5","zh-Hans":"5号线","zh-Hant":"5號線"},uploadBy:"Tianxiu11111",style:"shmetro"},{filename:"sh6",name:{en:"Line 6","zh-Hans":"6号线","zh-Hant":"6號線"},uploadBy:"Thomastzc",style:"shmetro"},{filename:"sh7",name:{en:"Line 7","zh-Hans":"7号线","zh-Hant":"7號線"},uploadBy:"Thomastzc",style:"shmetro"},{filename:"sh8",name:{en:"Line 8","zh-Hans":"8号线","zh-Hant":"8號線"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh9",name:{en:"Line 9","zh-Hans":"9号线","zh-Hant":"9號線"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh10",name:{en:"Line 10 (Branch)","zh-Hans":"10号线 （支线）","zh-Hant":"10號線 （支線）"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh11",name:{en:"Line 11","zh-Hans":"11号线","zh-Hant":"11號線"},uploadBy:"Tianxiu11111",style:"shmetro"},{filename:"sh12",name:{en:"Line 12","zh-Hans":"12号线","zh-Hant":"12號線"},uploadBy:"Andy1782010",style:"shmetro"},{filename:"sh13",name:{en:"Line 13","zh-Hans":"13号线","zh-Hant":"13號線"},uploadBy:"Andy1782010",style:"shmetro"},{filename:"sh14",name:{en:"Line 14","zh-Hans":"14号线","zh-Hant":"14號線"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh15",name:{en:"Line 15","zh-Hans":"15号线","zh-Hant":"15號線"},uploadBy:"Thomastzc",style:"shmetro"},{filename:"sh16",name:{en:"Line 16 (Express)","zh-Hans":"16号线 （快车）","zh-Hant":"16號線 （快車）"},uploadBy:"thekingofcity",style:"shmetro"},{filename:"sh17",name:{en:"Line 17","zh-Hans":"17号线","zh-Hant":"17號線"},uploadBy:"Thomastzc",style:"shmetro"},{filename:"sh18",name:{en:"Line 18","zh-Hans":"18号线","zh-Hant":"18號線"},uploadBy:"Tianxiu11111",style:"shmetro"}],Cn=[{filename:"bj1",name:{en:"Line 1/Batong Line","zh-Hans":"1号线/八通线","zh-Hant":"1號線/八通線"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"bj2",name:{en:"Line 2","zh-Hans":"2号线","zh-Hant":"2號線"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"bj4",name:{en:"Line 4/Daxing Line","zh-Hans":"4号线/大兴线","zh-Hant":"4號線/大興線"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"bj5",name:{en:"Line 5","zh-Hans":"5号线","zh-Hant":"5號線"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"bj6",name:{en:"Line 6","zh-Hans":"6号线","zh-Hant":"6號線"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"bj7",name:{en:"Line 7","zh-Hans":"7号线","zh-Hant":"7號線"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"bj8",name:{en:"Line 8","zh-Hans":"8号线","zh-Hant":"8號線"},uploadBy:"Jay20081229",style:"shmetro"},{filename:"bj9",name:{en:"Line 9","zh-Hans":"9号线","zh-Hant":"9號線"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"bj10",name:{en:"Line 10","zh-Hans":"10号线","zh-Hant":"10號線"},uploadBy:"52PD",style:"shmetro"},{filename:"bj11",name:{en:"Line 11","zh-Hans":"11号线","zh-Hant":"11號線"},uploadBy:"Jay20081229",style:"shmetro"},{filename:"bj13",name:{en:"Line 13","zh-Hans":"13号线","zh-Hant":"13號線"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"bj14",name:{en:"Line 14","zh-Hans":"14号线","zh-Hant":"14號線"},uploadBy:"Jay20081229",style:"shmetro"},{filename:"bj15",name:{en:"Line 15","zh-Hans":"15号线","zh-Hant":"15號線"},uploadBy:"52PD",style:"shmetro"},{filename:"bj16",name:{en:"Line 16","zh-Hans":"16号线","zh-Hant":"16號線"},uploadBy:"52PD",style:"shmetro"},{filename:"bj17",name:{en:"Line 17","zh-Hans":"17号线","zh-Hant":"17號線"},uploadBy:"Jay20081229",style:"shmetro"},{filename:"bj19",name:{en:"Line 19","zh-Hans":"19号线","zh-Hant":"19號線"},uploadBy:"52PD",style:"shmetro"},{filename:"fsl",name:{en:"Fangshan Line (Through to Line 9)","zh-Hans":"房山线（跨线至9号线）","zh-Hant":"房山線（跨線至9號線）"},uploadBy:"52PD",style:"shmetro"},{filename:"cpl",name:{en:"Changping Line","zh-Hans":"昌平线","zh-Hant":"昌平線"},uploadBy:"52PD",style:"shmetro"},{filename:"yzl",name:{en:"Yizhuang Line","zh-Hans":"亦庄线","zh-Hant":"亦莊線"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"yfl",name:{en:"Yanfang Line","zh-Hans":"燕房线","zh-Hant":"燕房線"},uploadBy:"52PD",style:"shmetro"},{filename:"s1l",name:{en:"Line S1","zh-Hans":"S1线","zh-Hant":"S1線"},uploadBy:"52PD",style:"shmetro"},{filename:"t1l",name:{en:"Yizhuang T1 Line","zh-Hans":"亦庄T1线","zh-Hant":"亦莊T1線"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"xjl",name:{en:"Xijiao Line","zh-Hans":"西郊线","zh-Hant":"西郊線"},uploadBy:"52PD",style:"shmetro"},{filename:"dae",name:{en:"Daxing Airport Express","zh-Hans":"大兴机场线","zh-Hant":"大興機場線"},uploadBy:"52PD",style:"shmetro"}],xn=[{filename:"cd1",name:{en:"Line 1","zh-Hans":"1号线","zh-Hant":"1號線"},uploadBy:"Jay20081229",style:"shmetro"},{filename:"cd2",name:{en:"Line 2","zh-Hans":"2号线","zh-Hant":"2號線"},uploadBy:"Jay20081229",style:"shmetro"},{filename:"cd5",name:{en:"Line 5","zh-Hans":"5号线","zh-Hant":"5號線"},uploadBy:"Jay20081229",style:"shmetro"},{filename:"cd6",name:{en:"Line 6","zh-Hans":"6号线","zh-Hant":"6號線"},uploadBy:"Jay20081229",style:"shmetro"}],Hn=[{filename:"cq0",name:{en:"Loop Line","zh-Hans":"环线","zh-Hant":"環線"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"cqe",name:{en:"Express Train","zh-Hans":"直快列车","zh-Hant":"直快列車"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"cq1",name:{en:"Line 1","zh-Hans":"1号线","zh-Hant":"1號線"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"cq2",name:{en:"Line 2","zh-Hans":"2号线","zh-Hant":"2號線"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"cq3",name:{en:"Line 3","zh-Hans":"3号线","zh-Hant":"3號線"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"cq4",name:{en:"Line 4","zh-Hans":"4号线","zh-Hant":"4號線"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"cq5",name:{en:"Line 5","zh-Hans":"5号线","zh-Hant":"5號線"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"cq6",name:{en:"Line 6","zh-Hans":"6号线","zh-Hant":"6號線"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"cq9",name:{en:"Line 9","zh-Hans":"9号线","zh-Hant":"9號線"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"cq10",name:{en:"Line 10","zh-Hans":"10号线","zh-Hant":"10號線"},uploadBy:"AnDanJuneUnderline",style:"shmetro"},{filename:"cjt",name:{en:"Jiangtiao Line","zh-Hans":"江跳线","zh-Hant":"江跳線"},uploadBy:"AnDanJuneUnderline",style:"gzmtr"}],Bn=[{filename:"fs2",name:{en:"Line 2","zh-Hans":"2号线","zh-Hant":"2號線"},uploadBy:"Dingdong2334",style:"gzmtr"},{filename:"fs3",name:{en:"Line 3","zh-Hans":"3号线","zh-Hant":"3號線"},uploadBy:"clearng",style:"gzmtr"},{filename:"tnh1",name:{en:"Nanhai Tram Line 1","zh-Hans":"南海有轨1号线","zh-Hant":"南海有軌1號線"},uploadBy:"clearng-kly",style:"gzmtr"},{filename:"tgm1",name:{en:"Gaoming Tram","zh-Hans":"高明有轨电车","zh-Hant":"高明有軌電車"},uploadBy:"clearng-kly",style:"gzmtr"}],Vn=[{filename:"hrb1",name:{en:"Line 1","zh-Hans":"1号线","zh-Hant":"1號線"},uploadBy:"AnDanJuneUnderline"},{filename:"hrb2",name:{en:"Line 2","zh-Hans":"2号线","zh-Hant":"2號線"},uploadBy:"AnDanJuneUnderline"},{filename:"hrb3",name:{en:"Line 3","zh-Hans":"3号线","zh-Hant":"3號線"},uploadBy:"AnDanJuneUnderline"}],Fn=[{filename:"km1",name:{en:"Line 1","zh-Hans":"1号线","zh-Hant":"1號線"},uploadBy:"52PD",style:"gzmtr"},{filename:"km2",name:{en:"Line 2","zh-Hans":"2号线","zh-Hant":"2號線"},uploadBy:"52PD",style:"gzmtr"},{filename:"km3",name:{en:"Line 3","zh-Hans":"3号线","zh-Hant":"3號線"},uploadBy:"52PD",style:"gzmtr"},{filename:"km4",name:{en:"Line 4","zh-Hans":"4号线","zh-Hant":"4號線"},uploadBy:"52PD",style:"gzmtr"},{filename:"km5",name:{en:"Line 5","zh-Hans":"5号线","zh-Hant":"5號線"},uploadBy:"52PD",style:"gzmtr"},{filename:"km6",name:{en:"Line 6","zh-Hans":"6号线","zh-Hant":"6號線"},uploadBy:"52PD",style:"gzmtr"}],Mn=[{filename:"klMonorail",name:{en:"KL Monorail",ms:"KL Monorail","zh-Hans":"吉隆坡单轨","zh-Hant":"吉隆坡單軌"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"lrtAmpang",name:{en:"Ampang Line",ms:"Laluan Ampang","zh-Hans":"安邦线","zh-Hant":"安邦線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"lrtKelanaJaya",name:{en:"Kelana Jaya Line",ms:"Laluan Kelana Jaya","zh-Hans":"格拉那再也线","zh-Hant":"格拉那再也線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"lrtSriPataling",name:{en:"Sri Pataling Line",ms:"Laluan Sri Pataling","zh-Hans":"大城堡线","zh-Hant":"大城堡線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"mrtKajang",name:{en:"Kajang Line",ms:"Laluan Kajang","zh-Hans":"加影线","zh-Hant":"加影線"},uploadBy:"linchen1965",style:"gzmtr"}],Nn=[{filename:"orange",name:{en:"Orange Line",ur:"اورنج لائن","zh-Hans":"橙线","zh-Hant":"橙線"},uploadBy:"Dingdong2334",style:"gzmtr"}],Un=[{filename:"taipa",name:{en:"Taipa Line",pt:"Linha Taipa","zh-Hans":"氹仔线","zh-Hant":"氹仔線"},uploadBy:"wongchito",style:"mtr"}],Wn=[{filename:"nb1",name:{en:"Line 1","zh-Hans":"1号线","zh-Hant":"1號線"},uploadBy:"feitongxiaok",style:"shmetro"},{filename:"nb2",name:{en:"Line 2","zh-Hans":"2号线","zh-Hant":"2號線"},uploadBy:"feitongxiaok",style:"shmetro"},{filename:"nb3",name:{en:"Line 3/Ningbo-Fenghua Intercity Railway","zh-Hans":"3号线/宁奉城际","zh-Hant":"3號線/寧奉城際"},uploadBy:"feitongxiaok",style:"shmetro"},{filename:"nb4",name:{en:"Line 4","zh-Hans":"4号线","zh-Hant":"4號線"},uploadBy:"feitongxiaok",style:"shmetro"},{filename:"nb5",name:{en:"Line 5","zh-Hans":"5号线","zh-Hant":"5號線"},uploadBy:"feitongxiaok",style:"shmetro"}],Zn=[{filename:"nj1",name:{en:"Line 1","zh-Hans":"1号线","zh-Hant":"1號線"},uploadBy:"linchen1965",style:"mtr"},{filename:"nj2",name:{en:"Line 2","zh-Hans":"2号线","zh-Hant":"2號線"},uploadBy:"linchen1965",style:"mtr"},{filename:"nj3",name:{en:"Line 3","zh-Hans":"3号线","zh-Hant":"3號線"},uploadBy:"linchen1965",style:"mtr"},{filename:"nj4",name:{en:"Line 4","zh-Hans":"4号线","zh-Hant":"4號線"},uploadBy:"linchen1965",style:"mtr"},{filename:"nj10",name:{en:"Line 10","zh-Hans":"10号线","zh-Hant":"10號線"},uploadBy:"linchen1965",style:"mtr"}],Gn=[{filename:"qd2",name:{en:"Line 2","zh-Hans":"2号线","zh-Hant":"2號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"qd3",name:{en:"Line 3","zh-Hans":"3号线","zh-Hant":"3號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"qd8",name:{en:"Line 8","zh-Hans":"8号线","zh-Hant":"8號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"qd11",name:{en:"Line 11","zh-Hans":"11号线","zh-Hant":"11號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"qd13",name:{en:"Line 13","zh-Hans":"13号线","zh-Hant":"13號線"},uploadBy:"linchen1965",style:"gzmtr"}],qn=[{filename:"st1",name:{en:"Line 1","zh-Hans":"1号线","zh-Hant":"1號缐"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"st2",name:{en:"Line 2","zh-Hans":"2号线","zh-Hant":"2號缐"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"st3",name:{en:"Line 3","zh-Hans":"3号线","zh-Hant":"3號缐"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"st4",name:{en:"Line 4","zh-Hans":"4号线","zh-Hant":"4號缐"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"st5",name:{en:"Line 5","zh-Hans":"5号线","zh-Hant":"5號缐"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"st6",name:{en:"Line 6","zh-Hans":"6号线","zh-Hant":"6號缐"},uploadBy:"linchen1965",style:"gzmtr"}],Jn=[{filename:"sp1",name:{en:"Line 1",pt:"Linha 1","zh-Hans":"1号线","zh-Hant":"1號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"sp2",name:{en:"Line 2",pt:"Linha 2","zh-Hans":"2号线","zh-Hant":"2號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"sp3",name:{en:"Line 3",pt:"Linha 3","zh-Hans":"3号线","zh-Hant":"3號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"sp4",name:{en:"Line 4",pt:"Linha 4","zh-Hans":"4号线","zh-Hant":"4號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"sp5",name:{en:"Line 5",pt:"Linha 5","zh-Hans":"5号线","zh-Hant":"5號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"sp7",name:{en:"Line 7",pt:"Linha 7","zh-Hans":"7号线","zh-Hant":"7號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"sp8",name:{en:"Line 8",pt:"Linha 8","zh-Hans":"8号线","zh-Hant":"8號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"sp9",name:{en:"Line 9",pt:"Linha 9","zh-Hans":"9号线","zh-Hant":"9號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"sp10",name:{en:"Line 10",pt:"Linha 10","zh-Hans":"10号线","zh-Hant":"10號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"sp11",name:{en:"Line 11",pt:"Linha 11","zh-Hans":"11号线","zh-Hant":"11號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"sp12",name:{en:"Line 12",pt:"Linha 12","zh-Hans":"12号线","zh-Hant":"12號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"sp13",name:{en:"Line 13",pt:"Linha 13","zh-Hans":"13号线","zh-Hant":"13號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"sp15",name:{en:"Line 15",pt:"Linha 15","zh-Hans":"15号线","zh-Hant":"15號線"},uploadBy:"linchen1965",style:"gzmtr"}],$n=[{filename:"l3",name:{en:"Line 3",ko:"3호선","zh-Hans":"3号线","zh-Hant":"3號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"l7",name:{en:"Line 7",ko:"7호선","zh-Hans":"7号线","zh-Hant":"7號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"l8",name:{en:"Line 8",ko:"8호선","zh-Hans":"8号线","zh-Hant":"8號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"l9",name:{en:"Line 9",ko:"9호선","zh-Hans":"9号线","zh-Hant":"9號線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"gyeonggang",name:{en:"Gyeonggang Line",ko:"경강선","zh-Hans":"京江线","zh-Hant":"京江線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"suinbundang",name:{en:"Suin-Bundang Line",ko:"수인·분당선","zh-Hans":"水仁·盆唐线","zh-Hant":"水仁·盆唐線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"sillim",name:{en:"Sillim Line",ko:"신림선","zh-Hans":"新林线","zh-Hant":"新林線"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"everline",name:{en:"EverLine",ko:"에버라인","zh-Hans":"龙仁轻电铁","zh-Hant":"龍仁輕電鐵"},uploadBy:"linchen1965",style:"gzmtr"},{filename:"gimpogoldline",name:{en:"Gimpo Goldline",ko:"김포골드라인","zh-Hans":"金浦都市铁道","zh-Hant":"金浦都市鐵道"},uploadBy:"linchen1965",style:"gzmtr"}],Yn=[{filename:"sz1",name:{en:"Line 1","zh-Hans":"1号线","zh-Hant":"1號線"},style:"mtr"},{filename:"sz2",name:{en:"Line 2","zh-Hans":"2号线","zh-Hant":"2號線"},uploadBy:"Dingdong2334",style:"mtr"},{filename:"sz3",name:{en:"Line 3","zh-Hans":"3号线","zh-Hant":"3號線"},style:"mtr"},{filename:"sz4",name:{en:"Line 4","zh-Hans":"4号线","zh-Hant":"4號線"},style:"mtr"},{filename:"sz5",name:{en:"Line 5","zh-Hans":"5号线","zh-Hant":"5號線"},uploadBy:"s1s1s1s1s1s",style:"mtr"},{filename:"sz6",name:{en:"Line 6","zh-Hans":"6号线","zh-Hant":"6號線"},uploadBy:"s1s1s1s1s1s",style:"mtr"},{filename:"sz7",name:{en:"Line 7","zh-Hans":"7号线","zh-Hant":"7號線"},uploadBy:"s1s1s1s1s1s",style:"mtr"},{filename:"sz8",name:{en:"Line 8","zh-Hans":"8号线","zh-Hant":"8號線"},uploadBy:"Dingdong2334",style:"mtr"},{filename:"sz9",name:{en:"Line 9","zh-Hans":"9号线","zh-Hant":"9號線"},uploadBy:"s1s1s1s1s1s",style:"mtr"},{filename:"sz10",name:{en:"Line 10","zh-Hans":"10号线","zh-Hant":"10號線"},uploadBy:"s1s1s1s1s1s",style:"mtr"},{filename:"sz11",name:{en:"Line 11","zh-Hans":"11号线","zh-Hant":"11號線"},uploadBy:"s1s1s1s1s1s",style:"mtr"},{filename:"sz20",name:{en:"Line 20","zh-Hans":"20号线","zh-Hant":"20號線"},uploadBy:"s1s1s1s1s1s",style:"mtr"}],Kn=[{filename:"br",name:{en:"Wenhu Line (BR)","zh-Hans":"文湖线","zh-Hant":"文湖线"},uploadBy:"Andy1782010",style:"gzmtr"},{filename:"r",name:{en:"Tamsui-Xinyi Line (R)","zh-Hans":"淡水信义线","zh-Hant":"淡水信義線"},uploadBy:"Andy1782010",style:"gzmtr"},{filename:"g",name:{en:"Songshan-Xindian Line (G)","zh-Hans":"松山新店线","zh-Hant":"松山新店線"},uploadBy:"Andy1782010",style:"gzmtr"},{filename:"o",name:{en:"Zhonghe-Xinlu Line (O)","zh-Hans":"中和新芦线","zh-Hant":"中和新蘆線"},uploadBy:"Andy1782010",style:"gzmtr"},{filename:"bl",name:{en:"Bannan Line (BL)","zh-Hans":"板南线","zh-Hant":"板南線"},uploadBy:"Andy1782010",style:"gzmtr"},{filename:"y",name:{en:"Circular Line (Y)","zh-Hans":"环状线","zh-Hant":"環狀線"},uploadBy:"Andy1782010",style:"gzmtr"}],Xn=[{filename:"ttc1",name:{en:"Line 1 Yonge-University",fr:"Ligne 1 Yonge-University","zh-Hans":"1 央街－大学线","zh-Hant":"1 央街－大學線"},uploadBy:"52PD",style:"mtr"},{filename:"ttc2",name:{en:"Line 2 Bloor-Danforth",fr:"Ligne 2 Bloor-Danforth","zh-Hans":"2 布鲁亚－丹佛线","zh-Hant":"2 布魯亞－丹佛線"},uploadBy:"52PD",style:"mtr"},{filename:"ttc3",name:{en:"Line 3 Scarborough",fr:"Ligne 3 Scarborough","zh-Hans":"3 士嘉堡轻铁","zh-Hant":"3 士嘉堡輕鐵"},uploadBy:"52PD",style:"mtr"},{filename:"ttc4",name:{en:"Line 4 Sheppard",fr:"Ligne 4 Sheppard","zh-Hans":"4 雪柏线","zh-Hant":"4 雪柏線"},uploadBy:"52PD",style:"mtr"}],Qn=[{filename:"wh1",name:{en:"Line 1","zh-Hans":"1号线","zh-Hant":"1號線"},uploadBy:"Dingdong2334",style:"gzmtr"}],er=[{filename:"zz1",name:{en:"Line 1","zh-Hans":"1号线","zh-Hant":"1號線"},uploadBy:"C1P918R",style:"gzmtr"},{filename:"zz2",name:{en:"Line 2","zh-Hans":"2号线","zh-Hant":"2號線"},uploadBy:"C1P918R",style:"gzmtr"},{filename:"zz3",name:{en:"Line 3","zh-Hans":"3号线","zh-Hant":"3號線"},uploadBy:"C1P918R",style:"gzmtr"},{filename:"zz4",name:{en:"Line 4","zh-Hans":"4号线","zh-Hant":"4號線"},uploadBy:"C1P918R",style:"gzmtr"},{filename:"zz5",name:{en:"Line 5","zh-Hans":"5号线","zh-Hant":"5號線"},uploadBy:"C1P918R",style:"shmetro"},{filename:"zz6",name:{en:"Line 6","zh-Hans":"6号线","zh-Hant":"6號線"},uploadBy:"C1P918R",style:"gzmtr"},{filename:"zz9",name:{en:"Line 9","zh-Hans":"9号线","zh-Hant":"9號線"},uploadBy:"C1P918R",style:"gzmtr"},{filename:"zz14",name:{en:"Line 14","zh-Hans":"14号线","zh-Hant":"14號線"},uploadBy:"C1P918R",style:"gzmtr"}],tr={basic:Dn,mtr:kn,gzmtr:In,shmetro:jn,bjsubway:Cn,chengdumetro:xn,crt:Hn,fmetro:Bn,hrbmetro:Vn,kmrailtransit:Fn,kvtransit:Mn,lahoremetro:Nn,mlm:Un,nbrailtransit:Wn,njmetro:Zn,qdmetro:Gn,santiagometro:qn,saopaulometro:Jn,seoulmetro:$n,szmetro:Yn,taipeimrt:Kn,torontosubway:Xn,whrt:Qn,zzmetro:er},Qs=Object.freeze(Object.defineProperty({__proto__:null,basic:Dn,bjsubway:Cn,chengdumetro:xn,crt:Hn,default:tr,fmetro:Bn,gzmtr:In,hrbmetro:Vn,kmrailtransit:Fn,kvtransit:Mn,lahoremetro:Nn,mlm:Un,mtr:kn,nbrailtransit:Wn,njmetro:Zn,qdmetro:Gn,santiagometro:qn,saopaulometro:Jn,seoulmetro:$n,shmetro:jn,szmetro:Yn,taipeimrt:Kn,torontosubway:Xn,whrt:Qn,zzmetro:er},Symbol.toStringTag,{value:"Module"}));var dn;(function(r){r.MTR="mtr",r.GZMTR="gzmtr",r.SHMetro="shmetro"})(dn||(dn={}));var cn;(function(r){r.Azerbaijani="az",r.Arabic="ar",r.Catalan="ca",r.Chinese="zh",r.ChineseCN="zh-CN",r.ChineseSimp="zh-Hans",r.ChineseTrad="zh-Hant",r.ChineseHK="zh-HK",r.ChineseTW="zh-TW",r.English="en",r.French="fr",r.Gaelic="ga",r.German="de",r.Hindi="hi",r.Japanese="ja",r.Korean="ko",r.Malay="ms",r.Norwegian="no",r.Spanish="es",r.Persian="fa",r.Portuguese="pt",r.Russian="ru",r.Swedish="sv",r.Turkish="tr"})(cn||(cn={}));const ht=Tn,ei=tr,ti=Object.assign({"/node_modules/@railmapgen/rmg-templates-resources/templates/basic/coline.json":()=>f(()=>import("./coline-f8f9d6ad.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/basic/default.json":()=>f(()=>import("./default-8638e856.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/basic/loop.json":()=>f(()=>import("./loop-d33ec3ba.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/bj1.json":()=>f(()=>import("./bj1-3d84a65b.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/bj10.json":()=>f(()=>import("./bj10-96548ea6.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/bj11.json":()=>f(()=>import("./bj11-0e88e43f.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/bj13.json":()=>f(()=>import("./bj13-dbfdc93d.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/bj14.json":()=>f(()=>import("./bj14-b96477a8.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/bj15.json":()=>f(()=>import("./bj15-236eec78.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/bj16.json":()=>f(()=>import("./bj16-aea0fc38.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/bj17.json":()=>f(()=>import("./bj17-8b675721.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/bj19.json":()=>f(()=>import("./bj19-0113af5b.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/bj2.json":()=>f(()=>import("./bj2-68a734e7.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/bj4.json":()=>f(()=>import("./bj4-6acd6943.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/bj5.json":()=>f(()=>import("./bj5-46945a9e.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/bj6.json":()=>f(()=>import("./bj6-76ce1998.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/bj7.json":()=>f(()=>import("./bj7-2a2c065d.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/bj8.json":()=>f(()=>import("./bj8-de28f133.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/bj9.json":()=>f(()=>import("./bj9-9f8b623b.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/cpl.json":()=>f(()=>import("./cpl-b52664aa.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/dae.json":()=>f(()=>import("./dae-7b4ab117.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/fsl.json":()=>f(()=>import("./fsl-f82c4249.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/s1l.json":()=>f(()=>import("./s1l-8e99d0c6.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/t1l.json":()=>f(()=>import("./t1l-4ab34938.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/xjl.json":()=>f(()=>import("./xjl-93767e2a.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/yfl.json":()=>f(()=>import("./yfl-cdcbb894.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/bjsubway/yzl.json":()=>f(()=>import("./yzl-ddfb5951.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/chengdumetro/cd1.json":()=>f(()=>import("./cd1-ef12cb07.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/chengdumetro/cd2.json":()=>f(()=>import("./cd2-dbca70d5.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/chengdumetro/cd5.json":()=>f(()=>import("./cd5-d30d48f3.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/chengdumetro/cd6.json":()=>f(()=>import("./cd6-13757c85.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/company-config.json":()=>f(()=>Promise.resolve().then(()=>Xs),void 0),"/node_modules/@railmapgen/rmg-templates-resources/templates/crt/cjt.json":()=>f(()=>import("./cjt-23bda457.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/crt/cq0.json":()=>f(()=>import("./cq0-38ed08b4.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/crt/cq1.json":()=>f(()=>import("./cq1-8099e16d.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/crt/cq10.json":()=>f(()=>import("./cq10-0f2a114c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/crt/cq2.json":()=>f(()=>import("./cq2-0aee3c57.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/crt/cq3.json":()=>f(()=>import("./cq3-3119fb7c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/crt/cq4.json":()=>f(()=>import("./cq4-7163014c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/crt/cq5.json":()=>f(()=>import("./cq5-bc74ae2c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/crt/cq6.json":()=>f(()=>import("./cq6-933f00c9.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/crt/cq9.json":()=>f(()=>import("./cq9-5d8a8c8e.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/crt/cqe.json":()=>f(()=>import("./cqe-448bad24.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/fmetro/fs2.json":()=>f(()=>import("./fs2-adcb788b.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/fmetro/fs3.json":()=>f(()=>import("./fs3-1baa0c77.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/fmetro/tgm1.json":()=>f(()=>import("./tgm1-61b0e4da.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/fmetro/tnh1.json":()=>f(()=>import("./tnh1-994fd3da.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/apm.json":()=>f(()=>import("./apm-6e72c810.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gf.json":()=>f(()=>import("./gf-18503731.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz1.json":()=>f(()=>import("./gz1-75ca50af.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz13.json":()=>f(()=>import("./gz13-05ce4bc5.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz14.json":()=>f(()=>import("./gz14-0d29f52b.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz18.json":()=>f(()=>import("./gz18-d789dd2d.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz2.json":()=>f(()=>import("./gz2-4c7b72d4.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz21.json":()=>f(()=>import("./gz21-fde5cfda.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz22.json":()=>f(()=>import("./gz22-68732269.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz3.json":()=>f(()=>import("./gz3-6bbd1d1a.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz4.json":()=>f(()=>import("./gz4-cda087f7.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz5.json":()=>f(()=>import("./gz5-9cfad33f.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz6.json":()=>f(()=>import("./gz6-ef051d83.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz7.json":()=>f(()=>import("./gz7-d485fe1c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz8.json":()=>f(()=>import("./gz8-9bfb0da0.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/gz9.json":()=>f(()=>import("./gz9-d4b7ed92.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/thp1.json":()=>f(()=>import("./thp1-a903ecca.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/gzmtr/thz1.json":()=>f(()=>import("./thz1-1ae6befb.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/hrbmetro/hrb1.json":()=>f(()=>import("./hrb1-d750a154.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/hrbmetro/hrb2.json":()=>f(()=>import("./hrb2-56555a39.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/hrbmetro/hrb3.json":()=>f(()=>import("./hrb3-10b1caf9.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/kmrailtransit/km1.json":()=>f(()=>import("./km1-4234b7e5.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/kmrailtransit/km2.json":()=>f(()=>import("./km2-330b245f.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/kmrailtransit/km3.json":()=>f(()=>import("./km3-0c8360c0.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/kmrailtransit/km4.json":()=>f(()=>import("./km4-4b01dfc2.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/kmrailtransit/km5.json":()=>f(()=>import("./km5-ab710d0a.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/kmrailtransit/km6.json":()=>f(()=>import("./km6-8170aff4.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/kvtransit/klMonorail.json":()=>f(()=>import("./klMonorail-8ec28d0b.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/kvtransit/lrtAmpang.json":()=>f(()=>import("./lrtAmpang-3ca12fc5.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/kvtransit/lrtKelanaJaya.json":()=>f(()=>import("./lrtKelanaJaya-c4b5ebdd.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/kvtransit/lrtSriPataling.json":()=>f(()=>import("./lrtSriPataling-155aee3a.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/kvtransit/mrtKajang.json":()=>f(()=>import("./mrtKajang-e69e5939.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/lahoremetro/orange.json":()=>f(()=>import("./orange-1c5f19ac.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mlm/taipa.json":()=>f(()=>import("./taipa-6f1b5dc0.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/ael.json":()=>f(()=>import("./ael-4597497c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/drl.json":()=>f(()=>import("./drl-31b14420.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/eal.json":()=>f(()=>import("./eal-34089efb.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/isl.json":()=>f(()=>import("./isl-f1ae743f.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/ktl.json":()=>f(()=>import("./ktl-a9936c0c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/sile.json":()=>f(()=>import("./sile-9f2ad194.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/tcl.json":()=>f(()=>import("./tcl-820e4d78.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/tkl.json":()=>f(()=>import("./tkl-8050f7fc.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/tml.json":()=>f(()=>import("./tml-a6ec2eb1.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/mtr/twl.json":()=>f(()=>import("./twl-cfa1235a.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/nbrailtransit/nb1.json":()=>f(()=>import("./nb1-4de19f12.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/nbrailtransit/nb2.json":()=>f(()=>import("./nb2-c93e8d04.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/nbrailtransit/nb3.json":()=>f(()=>import("./nb3-9e1d6774.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/nbrailtransit/nb4.json":()=>f(()=>import("./nb4-e3bc4e32.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/nbrailtransit/nb5.json":()=>f(()=>import("./nb5-1bc63403.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/njmetro/nj1.json":()=>f(()=>import("./nj1-89a45b01.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/njmetro/nj10.json":()=>f(()=>import("./nj10-eb6a12e7.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/njmetro/nj2.json":()=>f(()=>import("./nj2-e9412910.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/njmetro/nj3.json":()=>f(()=>import("./nj3-b4dbf2ad.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/njmetro/nj4.json":()=>f(()=>import("./nj4-1e85c03c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/qdmetro/qd11.json":()=>f(()=>import("./qd11-54d984b6.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/qdmetro/qd13.json":()=>f(()=>import("./qd13-ea959721.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/qdmetro/qd2.json":()=>f(()=>import("./qd2-1c47dac7.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/qdmetro/qd3.json":()=>f(()=>import("./qd3-77a449a9.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/qdmetro/qd8.json":()=>f(()=>import("./qd8-a13f59b8.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/santiagometro/st1.json":()=>f(()=>import("./st1-f267dc20.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/santiagometro/st2.json":()=>f(()=>import("./st2-32fb6de4.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/santiagometro/st3.json":()=>f(()=>import("./st3-918d9916.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/santiagometro/st4.json":()=>f(()=>import("./st4-fbf4cf0c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/santiagometro/st5.json":()=>f(()=>import("./st5-c65ac11c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/santiagometro/st6.json":()=>f(()=>import("./st6-4fbb79fe.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/saopaulometro/sp1.json":()=>f(()=>import("./sp1-64a56e88.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/saopaulometro/sp10.json":()=>f(()=>import("./sp10-f64cd302.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/saopaulometro/sp11.json":()=>f(()=>import("./sp11-5fff9af1.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/saopaulometro/sp12.json":()=>f(()=>import("./sp12-5146f43c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/saopaulometro/sp13.json":()=>f(()=>import("./sp13-0b997d7a.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/saopaulometro/sp15.json":()=>f(()=>import("./sp15-ce0a99b1.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/saopaulometro/sp2.json":()=>f(()=>import("./sp2-52c845b8.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/saopaulometro/sp3.json":()=>f(()=>import("./sp3-5c9ae684.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/saopaulometro/sp4.json":()=>f(()=>import("./sp4-5b705e9f.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/saopaulometro/sp5.json":()=>f(()=>import("./sp5-a7b2d955.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/saopaulometro/sp7.json":()=>f(()=>import("./sp7-60a9cff0.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/saopaulometro/sp8.json":()=>f(()=>import("./sp8-0fc31179.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/saopaulometro/sp9.json":()=>f(()=>import("./sp9-0f18f7eb.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/seoulmetro/everline.json":()=>f(()=>import("./everline-017bf1ed.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/seoulmetro/gimpogoldline.json":()=>f(()=>import("./gimpogoldline-24dc17fd.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/seoulmetro/gyeonggang.json":()=>f(()=>import("./gyeonggang-5f717901.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/seoulmetro/l3.json":()=>f(()=>import("./l3-6b9f661f.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/seoulmetro/l7.json":()=>f(()=>import("./l7-d9802a29.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/seoulmetro/l8.json":()=>f(()=>import("./l8-47f3bc66.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/seoulmetro/l9.json":()=>f(()=>import("./l9-a29b7ba0.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/seoulmetro/sillim.json":()=>f(()=>import("./sillim-63028bbd.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/seoulmetro/suinbundang.json":()=>f(()=>import("./suinbundang-5e17b221.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh1.json":()=>f(()=>import("./sh1-16505f5a.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh10.json":()=>f(()=>import("./sh10-20d49595.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh11.json":()=>f(()=>import("./sh11-f590ba3c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh12.json":()=>f(()=>import("./sh12-55a7651d.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh13.json":()=>f(()=>import("./sh13-f5ab141e.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh14.json":()=>f(()=>import("./sh14-e4f19564.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh15.json":()=>f(()=>import("./sh15-450e891e.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh16.json":()=>f(()=>import("./sh16-af851e67.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh17.json":()=>f(()=>import("./sh17-b8b2164e.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh18.json":()=>f(()=>import("./sh18-57e7f645.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh2.json":()=>f(()=>import("./sh2-5e30f125.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh3&4.json":()=>f(()=>import("./sh3_4-e404007d.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh3.json":()=>f(()=>import("./sh3-d2f3bfdd.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh4.json":()=>f(()=>import("./sh4-f52274b7.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh5.json":()=>f(()=>import("./sh5-4c805b99.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh6.json":()=>f(()=>import("./sh6-9ebc745d.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh7.json":()=>f(()=>import("./sh7-8f088603.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh8.json":()=>f(()=>import("./sh8-87130c53.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/shmetro/sh9.json":()=>f(()=>import("./sh9-7e967e6c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/szmetro/sz1.json":()=>f(()=>import("./sz1-eb44ed87.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/szmetro/sz10.json":()=>f(()=>import("./sz10-a6de013b.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/szmetro/sz11.json":()=>f(()=>import("./sz11-493b1457.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/szmetro/sz2.json":()=>f(()=>import("./sz2-cd6b5fe5.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/szmetro/sz20.json":()=>f(()=>import("./sz20-ba9f6658.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/szmetro/sz3.json":()=>f(()=>import("./sz3-8d0ddd6b.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/szmetro/sz4.json":()=>f(()=>import("./sz4-7a163b1d.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/szmetro/sz5.json":()=>f(()=>import("./sz5-5aa9825e.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/szmetro/sz6.json":()=>f(()=>import("./sz6-ab3f3957.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/szmetro/sz7.json":()=>f(()=>import("./sz7-21a0faae.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/szmetro/sz8.json":()=>f(()=>import("./sz8-65ad28c4.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/szmetro/sz9.json":()=>f(()=>import("./sz9-1b78ad03.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/taipeimrt/bl.json":()=>f(()=>import("./bl-1d3caad1.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/taipeimrt/br.json":()=>f(()=>import("./br-28d5aeff.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/taipeimrt/g.json":()=>f(()=>import("./g-22756545.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/taipeimrt/o.json":()=>f(()=>import("./o-c6f0a119.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/taipeimrt/r.json":()=>f(()=>import("./r-4b3119b8.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/taipeimrt/y.json":()=>f(()=>import("./y-c0527648.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/template-configs.json":()=>f(()=>Promise.resolve().then(()=>Qs),void 0),"/node_modules/@railmapgen/rmg-templates-resources/templates/torontosubway/ttc1.json":()=>f(()=>import("./ttc1-0584022b.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/torontosubway/ttc2.json":()=>f(()=>import("./ttc2-a4234330.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/torontosubway/ttc3.json":()=>f(()=>import("./ttc3-02a2131c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/torontosubway/ttc4.json":()=>f(()=>import("./ttc4-283b2184.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/whrt/wh1.json":()=>f(()=>import("./wh1-db6f1f6c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/zzmetro/zz1.json":()=>f(()=>import("./zz1-494441b9.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/zzmetro/zz14.json":()=>f(()=>import("./zz14-f5eb30f5.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/zzmetro/zz2.json":()=>f(()=>import("./zz2-c542980c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/zzmetro/zz3.json":()=>f(()=>import("./zz3-4d2885d1.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/zzmetro/zz4.json":()=>f(()=>import("./zz4-7062f57c.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/zzmetro/zz5.json":()=>f(()=>import("./zz5-3762c561.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/zzmetro/zz6.json":()=>f(()=>import("./zz6-1e0287d0.js"),[]),"/node_modules/@railmapgen/rmg-templates-resources/templates/zzmetro/zz9.json":()=>f(()=>import("./zz9-2bc1c2e7.js"),[])});function ni(r){const{isOpen:p,onClose:n,onOpenParam:l}=r,{t:o}=oe(),t=ye(),a=async(e,s,d)=>{t(Ra());const g=ht.find(u=>u.id===e),h=g?wt(g.name):e,_=await ti[`/node_modules/@railmapgen/rmg-templates-resources/templates/${e}/${s}.json`]();l(_.default,[h,d].join(" ")),he.event(be.OPEN_TEMPLATE,{company:e,filename:s}),t(En())};return q(He,{isOpen:p,onClose:n,children:[E(Be,{}),q(Ve,{children:[E(Fe,{children:o("TemplateModal.title")}),E(Me,{}),E(Ne,{children:q(xt,{isLazy:!0,size:"sm",orientation:"vertical",colorScheme:"primary",children:[E(Ht,{maxW:150,children:ht.map(e=>E($e,{children:wt(e.name)},e.id))}),E(Bt,{maxW:250,children:Object.entries(ei).sort((e,s)=>ht.findIndex(d=>d.id===e[0])-ht.findIndex(d=>d.id===s[0])).map(([e,s])=>E(_t,{as:Oe,flexDirection:"column",py:0,px:1,children:s.map(d=>{var h;const g=wt(d.name);return E(Tt,{variant:"ghost",size:"sm",primaryText:g,secondaryText:o("by")+": "+((h=d.uploadBy)!=null?h:"Unknown"),onClick:()=>a(e,d.filename,g)},d.filename)})},e))})]})})]})]})}const ri={flexWrap:"wrap",flex:"1 1 0%",minW:120,"& button":{w:"100%",m:1}};function ai(r){const{selectedParam:p,disableNew:n,onError:l}=r,{t:o}=oe(),[,t]=bt(),[a,e]=Q.useState(!1),s=Q.useRef(null),d=Q.useRef(null);Q.useEffect(()=>{var y;p&&((y=d.current)==null||y.focus())},[p]);const g=()=>{const y=Fs(ee.MTR,he.getLanguage()),m=St(JSON.stringify(y));t({project:m}),he.event(be.NEW_PARAM,{})},h=(y,m)=>{const b=St(JSON.stringify(y),m);t({project:b})},_=async y=>{var b;const m=(b=y.target.files)==null?void 0:b[0];console.log("handleImportProject():: received file",m);try{if(!m)l(o("OpenActions.unknownError"));else if(m.type!=="application/json")l(o("OpenActions.invalidType"));else{const v=await zs(m),w=St(v);t({project:w}),he.event(be.UPLOAD_PARAM,{})}}catch(v){l(o("OpenActions.unknownError")),console.error("handleImportProject():: Unknown error occurred while parsing the uploaded file",v)}y.target.value=""},u=()=>{p&&(t({project:p}),he.event(be.OPEN_PARAM,{}))};return q(Oe,{sx:ri,children:[E(ue,{leftIcon:E(xe,{}),onClick:g,isDisabled:n,children:o("Blank project")}),E(ue,{leftIcon:E(jr,{}),onClick:()=>e(!0),isDisabled:n,children:o("Open template")}),E(ue,{leftIcon:E(Cr,{}),onClick:()=>{var y;return(y=s.current)==null?void 0:y.click()},isDisabled:n,children:o("Import project")}),E(ue,{ref:d,colorScheme:"primary",leftIcon:E(xr,{}),onClick:u,isDisabled:p===void 0,children:o("Open selected")}),E("input",{ref:s,type:"file",accept:".json",hidden:!0,onChange:_,"data-testid":"file-upload"}),E(ni,{isOpen:a,onClose:()=>e(!1),onOpenParam:h})]})}const si={flexDirection:"column",p:2,h3:{m:2},"& > div":{m:2,flexWrap:"wrap",flexDirection:{base:"column",md:"row"}}};function ii(r){const{downloading:p}=r,{t:n}=oe(),[l]=bt(),o=l.get("project"),[t,a]=Q.useState([]),[e,s]=Q.useState(),d=Q.useRef(null),g=gn();Q.useEffect(()=>{a(At())},[p]),Hr({ref:d,handler:()=>s(void 0)});const h=y=>{const{id:m,name:b,lastModified:v}=y;m&&(window.localStorage.setItem(st.PARAM_CONFIG_BY_ID+m,JSON.stringify({name:b,lastModified:v})),s(void 0),a(At()),he.event(be.UPDATE_PARAM_CONFIG,{}))},_=y=>{window.localStorage.removeItem(st.PARAM_BY_ID+y),window.localStorage.removeItem(st.PARAM_CONFIG_BY_ID+y),s(void 0),a(At()),he.event(be.REMOVE_PARAM,{})},u=y=>{g({description:y,status:"error",duration:1e4,isClosable:!0})};return q(fn,{justifyContent:"center",children:[o&&E(gt,{isIndeterminate:!0}),E(Br,{children:q(Ze,{sx:si,children:[E(ze,{as:"h3",size:"lg",children:n("Saved projects")}),q(Oe,{ref:d,children:[E(Ks,{paramRegistry:t,downloading:p,selectedParam:e,onParamSelect:s,onParamRemove:_,onParamUpdate:h}),E(ai,{selectedParam:e,disableNew:t.length>=10,onError:u})]})]})})]})}const oi=r=>p=>{let n={id:r};const l=window.localStorage.getItem(st.PARAM_CONFIG_BY_ID+r);l===null?console.warn(`Config for paramID=${r} does not exist in localStorage`):n={...n,...JSON.parse(l)};try{const o=window.localStorage.getItem(st.PARAM_BY_ID+r);if(o===null)return console.warn(`Param ID=${r} does not exist in localStorage`),!1;{const t=ks(JSON.parse(o));return p(zn(n)),p(Ta(t)),!0}}catch(o){return console.warn("Failed to parse param.",o),!1}};function li(){const{t:r}=oe(),p=ye(),{paramConfig:n}=te(_=>_.app),[l,o]=bt(),t=l.get("project"),a=l.get("external"),[e,s]=Q.useState(!1),[d,g]=Q.useState(),h=gn();return Q.useEffect(()=>{if(console.log(`searchParam: project=${t}, external=${a}`),t&&a)console.warn("AppRouter:: Both param ID and external URL are provided. External URL will be ignored."),o({project:t});else if(t)h.closeAll(),t===(n==null?void 0:n.id)?(console.log("AppRouter:: Store param ID matches URL param ID. Rendering app view..."),s(!0)):(console.log(`AppRouter:: Loading app view for param (ID=${t})...`),p(oi(t))?s(!0):(console.log(`AppRouter:: Failed to read param (ID=${t}). Rendering param selector view...`),h({description:r("Project selected is invalid or corrupted."),status:"error",duration:1e4,isClosable:!0}),o({})));else if(a){console.log("AppRouter:: External project URl is provided. Downloading project...");const _=decodeURIComponent(a);g(_),Da(_).then(u=>{u?o({project:u}):(console.log(`AppRouter:: Failed to download param from ${_}. Rendering param selector view...`),h({description:r("External URL cannot be opened."),status:"error",duration:1e4,isClosable:!0}),o({})),g(void 0)})}else console.log("AppRouter:: No URL param ID or external URL provided. Rendering param selector view..."),s(!1)},[t,a]),e?E(Js,{}):E(ii,{downloading:d})}const mi=Object.freeze(Object.defineProperty({__proto__:null,default:li},Symbol.toStringTag,{value:"Module"}));export{mi as a,ui as g,et as i,Is as w};
