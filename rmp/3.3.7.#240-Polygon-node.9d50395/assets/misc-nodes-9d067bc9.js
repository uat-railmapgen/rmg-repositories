import{C as w,e as j,an as N,d as B,i as Q,c as Y,j as _,x as G,z as X,ah as F,ao as ee,ap as ne,aq as oe,ar as te}from"./index-4a5e17e7.js";import{j as o,ad as ie,D as K,_ as V}from"./chakra-c00f698a.js";import{b as l}from"./react-2c0b8364.js";import{M as J,R as le,f as ae}from"./stations-2c177b84.js";const se=n=>{const{id:e,x:t,y:c,handlePointerDown:i,handlePointerMove:u,handlePointerUp:x}=n,g=l.useCallback(m=>i(e,m),[e,i]),s=l.useCallback(m=>u(e,m),[e,u]),h=l.useCallback(m=>x(e,m),[e,x]);return l.useMemo(()=>o.jsxs("g",{id:e,transform:`translate(${t}, ${c})rotate(45)`,children:[o.jsx("line",{x1:"-5",y1:"0",x2:"5",y2:"0",stroke:"black"}),o.jsx("line",{x1:"0",y1:"-5",x2:"0",y2:"5",stroke:"black"}),o.jsx("circle",{id:`virtual_circle_${e}`,r:5,stroke:"black",fill:"white",fillOpacity:"0",onPointerDown:g,onPointerMove:s,onPointerUp:h,style:{cursor:"move"}})]}),[e,t,c,g,s,h])},ce={},re=o.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,transform:"rotate(45)",focusable:!1,children:[o.jsx("circle",{cx:"12",cy:"12",r:"6",stroke:"currentColor",fill:"none"}),o.jsx("line",{x1:"6",y1:"12",x2:"18",y2:"12",stroke:"currentColor"}),o.jsx("line",{x1:"12",y1:"6",x2:"12",y2:"18",stroke:"currentColor"})]}),de={component:se,icon:re,defaultAttrs:ce,fields:[],metadata:{displayName:"panel.details.nodes.virtual.displayName",tags:[]}},he=n=>{const{id:e,x:t,y:c,attrs:i,handlePointerDown:u,handlePointerMove:x,handlePointerUp:g}=n,{num:s=A.num,color:h=A.color}=i!=null?i:A,[m,a]=s>=10?[22.67,10.75]:[21,10],r=l.useCallback(f=>u(e,f),[e,u]),d=l.useCallback(f=>x(e,f),[e,x]),p=l.useCallback(f=>g(e,f),[e,g]);return l.useMemo(()=>o.jsxs("g",{id:e,transform:`translate(${t}, ${c})`,children:[o.jsx("rect",{fill:h[2],width:m,height:"22.67"}),o.jsx("text",{className:"rmp-name__zh",textAnchor:"middle",x:a,y:"19",fill:h[3],fontSize:"21.33",letterSpacing:"-1.75",children:s}),o.jsx("text",{className:"rmp-name__zh",x:m+2,y:"12",fontSize:"14.67",children:"号线"}),o.jsxs("text",{className:"rmp-name__en",x:m+4,y:"21.5",fontSize:"8",children:["Line ",s]}),o.jsx("rect",{fill:"white",fillOpacity:"0",width:m,height:"22.67",onPointerDown:r,onPointerMove:d,onPointerUp:p,style:{cursor:"move"}})]}),[e,t,c,s,...h,r,d,p])},A={num:1,color:[w.Shanghai,"sh1","#E4002B",j.white]},me=[{type:"input",label:"panel.details.nodes.common.num",value:n=>(n!=null?n:A).num,validator:n=>!Number.isNaN(n),onChange:(n,e)=>{const t=e!=null?e:A;return Number.isNaN(n)||(t.num=Number(n)),t}},{type:"custom",component:o.jsx(N,{type:B.ShmetroNumLineBadge,defaultTheme:A.color})}],ue=o.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[o.jsx("rect",{fill:"currentColor",x:"2",y:"4",width:"10",height:"16"}),o.jsx("text",{x:"4",y:"18",fill:"white",children:"1"}),o.jsx("text",{x:"14",y:"10",fontSize:"5",children:"号线"}),o.jsx("text",{x:"14",y:"18",fontSize:"4",children:"Line 1"})]}),xe={component:he,icon:ue,defaultAttrs:A,fields:me,metadata:{displayName:"panel.details.nodes.shmetroNumLineBadge.displayName",tags:[]}},ge=n=>{const{id:e,x:t,y:c,attrs:i,handlePointerDown:u,handlePointerMove:x,handlePointerUp:g}=n,{names:s=v.names,color:h=v.color}=i!=null?i:v,m=l.useRef(null),[a,r]=l.useState({width:12});l.useEffect(()=>r(m.current.getBBox()),[...s,r,m]);const d=l.useCallback(b=>u(e,b),[e,u]),p=l.useCallback(b=>x(e,b),[e,x]),f=l.useCallback(b=>g(e,b),[e,g]);return l.useMemo(()=>o.jsxs("g",{id:e,transform:`translate(${t}, ${c})`,children:[o.jsx("rect",{fill:h[2],x:"0",width:a.width+7,height:"21"}),o.jsxs("g",{ref:m,children:[o.jsx("text",{className:"rmp-name__zh",textAnchor:"middle",dominantBaseline:"hanging",x:(a.width+7)/2,y:"4",fontSize:"10",fill:h[3],letterSpacing:"-0.25",children:s[0]}),o.jsx("text",{className:"rmp-name__en",textAnchor:"middle",dominantBaseline:"hanging",x:(a.width+7)/2,y:"13",fontSize:"5",fill:h[3],letterSpacing:"-0.25",children:s[1]})]}),o.jsx("rect",{fill:"white",fillOpacity:"0",x:"0",width:a.width+7,height:"21",onPointerDown:d,onPointerMove:p,onPointerUp:f,style:{cursor:"move"}})]}),[e,t,c,...s,a,...h,d,p,f])},v={names:["浦江线","Pujiang Line"],color:[w.Shanghai,"pjl","#B5B5B6",j.white]},pe=[{type:"input",label:"panel.details.nodes.common.nameZh",value:n=>(n!=null?n:v).names[0],onChange:(n,e)=>{const t=e!=null?e:v;return t.names[0]=n.toString(),t}},{type:"input",label:"panel.details.nodes.common.nameEn",value:n=>(n!=null?n:v).names[1],onChange:(n,e)=>{const t=e!=null?e:v;return t.names[1]=n.toString(),t}},{type:"custom",component:o.jsx(N,{type:B.ShmetroTextLineBadge,defaultTheme:v.color})}],fe=o.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[o.jsx("rect",{fill:"currentColor",x:"2",y:"6",width:"20",height:"12"}),o.jsx("text",{x:"5",y:"11",fontSize:"5",fill:"white",children:"浦江线"}),o.jsx("text",{x:"3",y:"16",fontSize:"4",fill:"white",children:"Pujiang Line"})]}),ye={component:ge,icon:fe,defaultAttrs:v,fields:pe,metadata:{displayName:"panel.details.nodes.shmetroTextLineBadge.displayName",tags:[]}},be=n=>{const{lineName:e,commonPart:t}=n,c=l.useRef(null),[i,u]=l.useState({x:0,height:0,width:0});l.useEffect(()=>{c.current&&u(c.current.getBBox())},[e.toString()]);const x=$/Math.max($,i.width),g=(-i.x-i.width/2)*x,s=i.height*(1-x)*1.2/2;return o.jsx("g",{ref:c,transform:`translate(${g},${s})scale(${x})`,children:o.jsxs("text",{className:"rmp-name__zh",fontSize:14,y:12,textAnchor:"end",dominantBaseline:"central",children:[t,o.jsx("tspan",{className:"rmp-name__zh",fontSize:8,x:0,dy:-2,textAnchor:"start",dominantBaseline:"central",children:e[0].slice(t.length).trim()}),o.jsx("tspan",{className:"rmg-name__en",fontSize:4,x:0,dy:6,textAnchor:"start",dominantBaseline:"central",children:e[1].slice(t.length).trim()})]})})},Be=n=>o.jsx("rect",{x:-22.5,height:24,width:45,rx:4.5,...n}),$=42,je=n=>{const{lineName:e,foregroundColour:t,backgroundColour:c,passed:i}=n,[u,x]=we(e),g=l.useRef(null),s=l.useRef(null),[h,m]=l.useState({width:0}),[a,r]=l.useState({width:0});l.useEffect(()=>{g.current&&m(g.current.getBBox()),s.current&&r(s.current.getBBox())},[e.toString()]);const d=$/Math.max($,h.width),p=$/Math.max($,a.width),f={nameZh:{y:7.3+13.5*(1-d)*d/2},nameEn:{y:19.5-9*(1-p)*p/2}};return o.jsxs("g",{textAnchor:"middle",fill:i?j.white:t,children:[o.jsx(Be,{fill:i?"#aaa":c}),u===2?o.jsx(be,{lineName:e,commonPart:x}):o.jsxs(o.Fragment,{children:[o.jsx("text",{ref:g,className:"rmp-name__zh",fontSize:12,transform:`translate(0,${f.nameZh.y})scale(${d})`,dominantBaseline:"central",children:u===1?o.jsxs(o.Fragment,{children:[o.jsx("tspan",{fontSize:16,dy:.7,className:"rmp-name__zh",dominantBaseline:"central",children:x}),o.jsx("tspan",{dy:-.7,className:"rmp-name__zh",dominantBaseline:"central",children:e[0].slice(x.length)})]}):e[0]}),o.jsx("text",{ref:s,className:"rmp-name__en",fontSize:8,transform:`translate(0,${f.nameEn.y})scale(${p})`,dominantBaseline:"middle",children:e[1]})]})]})},we=n=>{const e=n[0].match(/^(\d+)\D+$/);if(e)return[1,e[1]];const t=n.map(c=>c.match(/^(\w+).+$/));return t[0]&&t[1]&&t[0][1]===t[1][1]?[2,t[0][1]]:[3,""]},Ne=n=>{const{id:e,x:t,y:c,attrs:i,handlePointerDown:u,handlePointerMove:x,handlePointerUp:g}=n,{names:s=P.names,color:h=P.color}=i!=null?i:P,m=l.useCallback(d=>u(e,d),[e,u]),a=l.useCallback(d=>x(e,d),[e,x]),r=l.useCallback(d=>g(e,d),[e,g]);return l.useMemo(()=>o.jsxs("g",{id:e,transform:`translate(${t}, ${c})`,children:[o.jsx(je,{lineName:s,foregroundColour:h[3],backgroundColour:h[2]}),o.jsx("rect",{fill:"white",fillOpacity:"0",x:"-22.5",width:"45",height:"24",rx:"4.5",onPointerDown:m,onPointerMove:a,onPointerUp:r,style:{cursor:"move"}})]}),[e,t,c,...s,...h,m,a,r])},P={names:["1号线","Line 1"],color:[w.Guangzhou,"gz1","#F3D03E",j.black]},Ce=[{type:"input",label:"panel.details.nodes.common.nameZh",value:n=>(n!=null?n:P).names[0],onChange:(n,e)=>{const t=e!=null?e:P;return t.names[0]=n.toString(),t}},{type:"input",label:"panel.details.nodes.common.nameEn",value:n=>(n!=null?n:P).names[1],onChange:(n,e)=>{const t=e!=null?e:P;return t.names[1]=n.toString(),t}},{type:"custom",component:o.jsx(N,{type:B.GzmtrLineBadge,defaultTheme:P.color})}],Se=o.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[o.jsx("rect",{fill:"currentColor",x:"2",y:"5",width:"20",height:"14",rx:"1"}),o.jsx("text",{x:"12",y:"12",textAnchor:"middle",fontSize:"6",fill:"white",children:"1号线"}),o.jsx("text",{x:"12",y:"17",textAnchor:"middle",fontSize:"5",fill:"white",children:"Line 1"})]}),Le={component:Ne,icon:Se,defaultAttrs:P,fields:Ce,metadata:{displayName:"panel.details.nodes.gzmtrLineBadge.displayName",tags:[]}},q=11.84375,ve=n=>{const{id:e,x:t,y:c,attrs:i,handlePointerDown:u,handlePointerMove:x,handlePointerUp:g}=n,{num:s=M.num,color:h=M.color}=i!=null?i:M,m=l.useCallback(p=>u(e,p),[e,u]),a=l.useCallback(p=>x(e,p),[e,x]),r=l.useCallback(p=>g(e,p),[e,g]),d=h[3]===j.black?"#003670":j.white;return l.useMemo(()=>o.jsxs("g",{id:e,transform:`translate(${t}, ${c})`,children:[o.jsx("rect",{fill:h[2],x:"0",width:q+21,height:"16",rx:"2"}),o.jsx("text",{className:"rmp-name__zh",textAnchor:"middle",x:q/2+2,y:"13.5",fill:d,fontSize:"15",letterSpacing:"-1.5",children:s}),o.jsx("text",{className:"rmp-name__zh",x:q+(s>9?5.5:3),y:"8.5",fontSize:"7",fill:d,children:"号线"}),o.jsxs("text",{className:"rmp-name__en",x:q+(s>9?6:4.5),y:"13.5",fontSize:"4",fill:d,children:["Line ",s]}),o.jsx("rect",{fill:"white",fillOpacity:"0",x:"0",width:q+23,height:"16",rx:"2",onPointerDown:m,onPointerMove:a,onPointerUp:r,style:{cursor:"move"}})]}),[e,t,c,s,...h,m,a,r])},M={num:1,color:[w.Beijing,"bj1","#c23a30",j.white]},Pe=[{type:"input",label:"panel.details.nodes.common.num",value:n=>(n!=null?n:M).num,validator:n=>!Number.isNaN(n),onChange:(n,e)=>{const t=e!=null?e:M;return Number.isNaN(n)||(t.num=Number(n)),t}},{type:"custom",component:o.jsx(N,{type:B.BjsubwayNumLineBadge,defaultTheme:M.color})}],ze=o.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[o.jsx("rect",{fill:"currentColor",x:"2",y:"4",width:"20",height:"16",rx:"2"}),o.jsx("text",{x:"4",y:"17",fill:"white",fontSize:"14",children:"1"}),o.jsx("text",{x:"11",y:"11",fill:"white",fontSize:"5",children:"号线"}),o.jsx("text",{x:"11",y:"17",fill:"white",fontSize:"4",children:"Line 1"})]}),Te={component:ve,icon:ze,defaultAttrs:M,fields:Pe,metadata:{displayName:"panel.details.nodes.bjsubwayNumLineBadge.displayName",tags:[]}},ke=28.84375,Ae=n=>{const{id:e,x:t,y:c,attrs:i,handlePointerDown:u,handlePointerMove:x,handlePointerUp:g}=n,{names:s=z.names,color:h=z.color}=i!=null?i:z,m=l.useRef(null),[a,r]=l.useState({width:12});l.useEffect(()=>r(m.current.getBBox()),[...s,r,m]);const d=l.useCallback(L=>u(e,L),[e,u]),p=l.useCallback(L=>x(e,L),[e,x]),f=l.useCallback(L=>g(e,L),[e,g]),b=Math.max(ke,a.width),C=h[3]===j.black?"#003670":j.white;return l.useMemo(()=>o.jsxs("g",{id:e,transform:`translate(${t}, ${c})`,children:[o.jsx("rect",{fill:h[2],x:"0",width:b+4,height:"16",rx:"2"}),o.jsxs("g",{ref:m,children:[o.jsx("text",{className:"rmp-name__zh",textAnchor:"middle",x:(b+4)/2,y:"8",fontSize:"7",fill:C,children:s[0]}),o.jsx("text",{className:"rmp-name__en",textAnchor:"middle",x:(b+4)/2,y:"13.5",fontSize:"4",fill:C,children:s[1]})]}),o.jsx("rect",{fill:"white",fillOpacity:"0",x:"0",width:b+3,height:"16",rx:"2",onPointerDown:d,onPointerMove:p,onPointerUp:f,style:{cursor:"move"}})]}),[e,t,c,...s,a,...h,d,p,f])},z={names:["八通线","Batong Line"],color:[w.Beijing,"bj1","#c23a30",j.white]},Me=[{type:"input",label:"panel.details.nodes.common.nameZh",value:n=>(n!=null?n:z).names[0],onChange:(n,e)=>{const t=e!=null?e:z;return t.names[0]=n.toString(),t}},{type:"input",label:"panel.details.nodes.common.nameEn",value:n=>(n!=null?n:z).names[1],onChange:(n,e)=>{const t=e!=null?e:z;return t.names[1]=n.toString(),t}},{type:"custom",component:o.jsx(N,{type:B.BjsubwayTextLineBadge,defaultTheme:z.color})}],Re=o.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[o.jsx("rect",{fill:"currentColor",x:"2",y:"6",width:"20",height:"12",rx:"2"}),o.jsx("text",{x:"3",y:"12",fontSize:"6",fill:"white",children:"八通线"}),o.jsx("text",{x:"3",y:"16",fontSize:"3.2",fill:"white",children:"Batong Line"})]}),De={component:Ae,icon:Re,defaultAttrs:z,fields:Me,metadata:{displayName:"panel.details.nodes.bjsubwayTextLineBadge.displayName",tags:[]}},Ue=n=>{const{id:e,x:t,y:c,attrs:i,handlePointerDown:u,handlePointerMove:x,handlePointerUp:g}=n,{num:s=S.num,branch:h=S.branch,color:m=S.color}=i!=null?i:S,a=l.useCallback(p=>u(e,p),[e,u]),r=l.useCallback(p=>x(e,p),[e,x]),d=l.useCallback(p=>g(e,p),[e,g]);return l.useMemo(()=>o.jsxs("g",{id:e,transform:`translate(${t}, ${c})`,children:[o.jsx("rect",{fill:m[2],width:"20",height:"20",rx:"2",ry:"2"}),o.jsx("text",{className:"rmp-name__zh",textAnchor:"middle",dominantBaseline:"middle",x:"10",y:"11.4",fill:m[3],fontSize:"15",letterSpacing:"-1",children:s}),h&&o.jsxs(o.Fragment,{children:[o.jsx("text",{className:"rmp-name__zh",x:20+2.5,y:"10",fontSize:"10",children:"支线"}),o.jsx("text",{className:"rmp-name__en",x:20+2.5,y:"18",fontSize:"5",fill:"gray",children:"Branch line"})]}),o.jsx("rect",{fill:"white",fillOpacity:"0",width:"20",height:"20",rx:"2",ry:"2",onPointerDown:a,onPointerMove:r,onPointerUp:d,style:{cursor:"move"}})]}),[e,t,c,s,h,...m,a,r,d])},S={num:1,branch:!1,color:[w.Suzhou,"sz1","#78BA25",j.white]},$e=[{type:"input",label:"panel.details.nodes.common.num",value:n=>(n!=null?n:S).num,validator:n=>!Number.isNaN(n),onChange:(n,e)=>{const t=e!=null?e:S;return Number.isNaN(n)||(t.num=Number(n)),t}},{type:"switch",label:"panel.details.nodes.suzhouRTNumLineBadge.branch",isChecked:n=>{var e;return(e=n==null?void 0:n.branch)!=null?e:S.branch},onChange:(n,e)=>{const t=e!=null?e:S;return t.branch=n,t}},{type:"custom",component:o.jsx(N,{type:B.SuzhouRTNumLineBadge,defaultTheme:S.color})}],Ee=o.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[o.jsx("rect",{fill:"currentColor",x:"4",y:"4",width:"16",height:"16",rx:"3",ry:"3"}),o.jsx("text",{x:"12",y:"13.4",textAnchor:"middle",dominantBaseline:"middle",fill:"white",fontSize:"14",children:"1"})]}),Ie={component:Ue,icon:Ee,defaultAttrs:S,fields:$e,metadata:{displayName:"panel.details.nodes.suzhouRTNumLineBadge.displayName",tags:[]}},qe=n=>{const{id:e,x:t,y:c,attrs:i,handlePointerDown:u,handlePointerMove:x,handlePointerUp:g}=n,{content:s=y.content,fontSize:h=y.fontSize,lineHeight:m=y.lineHeight,textAnchor:a=y.textAnchor,dominantBaseline:r=y.dominantBaseline,language:d=y.language,color:p=y.color,rotate:f=y.rotate,italic:b=y.italic,bold:C=y.bold}=i!=null?i:y,L=l.useRef(null),[E,W]=l.useState({x:0,y:0,width:32,height:16});l.useEffect(()=>W(L.current.getBBox()),[s,a,r,W,L]);const O=l.useCallback(I=>u(e,I),[e,u]),H=l.useCallback(I=>x(e,I),[e,x]),Z=l.useCallback(I=>g(e,I),[e,g]);return l.useMemo(()=>o.jsxs("g",{id:e,transform:`translate(${t}, ${c})rotate(${f})`,children:[o.jsx(J,{ref:L,text:s.split(`
`),lineHeight:m,grow:"down",className:`rmp-name__${d}`,fontSize:h,textAnchor:a,dominantBaseline:r,fill:p[2],fontStyle:b,fontWeight:C}),o.jsx("rect",{fill:"white",fillOpacity:"0",x:E.x-1.5,y:E.y-1.5,width:E.width+3,height:E.height+3,onPointerDown:O,onPointerMove:H,onPointerUp:Z,style:{cursor:"move"}})]}),[e,t,c,s,h,m,a,r,d,p,f,b,C,E,O,H,Z])},y={content:"Enter your text here",fontSize:16,lineHeight:16,textAnchor:"middle",dominantBaseline:"middle",language:"en",color:[w.Shanghai,"jsr","#000000",j.white],rotate:0,italic:"normal",bold:"normal"},Fe=[{type:"textarea",label:"panel.details.nodes.text.content",value:n=>(n!=null?n:y).content,onChange:(n,e)=>{const t=e!=null?e:y;return t.content=n.toString(),t}},{type:"input",label:"panel.details.nodes.text.fontSize",value:n=>(n!=null?n:y).fontSize,validator:n=>Number.isInteger(n)&&Number(n)>0,onChange:(n,e)=>{const t=e!=null?e:y;return t.fontSize=Number(n),t}},{type:"input",label:"panel.details.nodes.text.lineHeight",value:n=>(n!=null?n:y).lineHeight,validator:n=>Number.isInteger(n)&&Number(n)>0,onChange:(n,e)=>{const t=e!=null?e:y;return t.lineHeight=Number(n),t}},{type:"select",label:"panel.details.nodes.text.textAnchor",value:n=>(n!=null?n:y).textAnchor,options:{start:"start",middle:"middle",end:"end"},onChange:(n,e)=>{const t=e!=null?e:y;return t.textAnchor=n,t}},{type:"select",label:"panel.details.nodes.text.dominantBaseline",value:n=>(n!=null?n:y).dominantBaseline,options:{auto:"auto",middle:"middle",hanging:"hanging"},onChange:(n,e)=>{const t=e!=null?e:y;return t.dominantBaseline=n,t}},{type:"select",label:"panel.details.nodes.text.language",value:n=>(n!=null?n:y).language,options:{zh:"Chinese",en:"English",mtr__zh:"MTR Chinese",mtr__en:"MTR English"},onChange:(n,e)=>{const t=e!=null?e:y;return t.language=n.toString(),t}},{type:"select",label:"panel.details.nodes.text.rotate",value:n=>{var e;return(e=n==null?void 0:n.rotate)!=null?e:y.rotate},options:{0:"0",45:"45",90:"90",135:"135",180:"180",225:"225",270:"270",315:"315"},onChange:(n,e)=>{const t=e!=null?e:y;return t.rotate=Number(n),t}},{type:"switch",label:"panel.details.nodes.text.italic",isChecked:n=>{var e;return((e=n==null?void 0:n.italic)!=null?e:y.italic)==="italic"},onChange:(n,e)=>{const t=e!=null?e:y;return t.italic=n?"italic":"normal",t}},{type:"switch",label:"panel.details.nodes.text.bold",isChecked:n=>{var e;return((e=n==null?void 0:n.bold)!=null?e:y.bold)==="bold"},onChange:(n,e)=>{const t=e!=null?e:y;return t.bold=n?"bold":"normal",t}},{type:"custom",component:o.jsx(N,{type:B.Text,defaultTheme:y.color})}],We=o.jsx("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:o.jsx("text",{x:"12",y:"12",textAnchor:"middle",dominantBaseline:"middle",fontSize:"10",children:"Text"})}),Oe={component:qe,icon:We,defaultAttrs:y,fields:Fe,metadata:{displayName:"panel.details.nodes.text.displayName",tags:[]}},He=n=>{const{id:e,x:t,y:c,attrs:i,handlePointerDown:u,handlePointerMove:x,handlePointerUp:g}=n,{num:s=R.num,color:h=R.color}=i!=null?i:R,m=l.useCallback(p=>u(e,p),[e,u]),a=l.useCallback(p=>x(e,p),[e,x]),r=l.useCallback(p=>g(e,p),[e,g]),d=h[3];return l.useMemo(()=>o.jsxs("g",{id:e,transform:`translate(${t}, ${c})`,children:[o.jsx("rect",{fill:h[2],x:"0",width:"25",height:"15"}),o.jsxs("text",{className:"rmp-name__berlin",textAnchor:"middle",x:"12.5",y:"12.5",fill:d,fontSize:"14",letterSpacing:"1",children:["U",s]}),o.jsx("rect",{fill:"white",fillOpacity:"0",x:"0",width:"25",height:"15",onPointerDown:m,onPointerMove:a,onPointerUp:r,style:{cursor:"move"}})]}),[e,t,c,s,...h,m,a,r])},R={num:1,color:[w.Berlin,"bu1","#62AD2D",j.white]},Ze=[{type:"input",label:"panel.details.nodes.common.num",value:n=>(n!=null?n:R).num,validator:n=>!Number.isNaN(n),onChange:(n,e)=>{const t=e!=null?e:R;return Number.isNaN(n)||(t.num=Number(n)),t}},{type:"custom",component:o.jsx(N,{type:B.BerlinUBahnLineBadge,defaultTheme:R.color})}],Ge=o.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[o.jsx("rect",{fill:"currentColor",x:"2",y:"4",width:"20",height:"16"}),o.jsx("text",{x:"4",y:"17",fill:"white",fontSize:"14",children:"U1"})]}),Xe={component:He,icon:Ge,defaultAttrs:R,fields:Ze,metadata:{displayName:"panel.details.nodes.berlinUBahnLineBadge.displayName",tags:[]}},Ke=n=>{const{id:e,x:t,y:c,attrs:i,handlePointerDown:u,handlePointerMove:x,handlePointerUp:g}=n,{num:s=D.num,color:h=D.color}=i!=null?i:D,[m,a]=s>=10?[6,19.75]:[10,20],r=l.useCallback(b=>u(e,b),[e,u]),d=l.useCallback(b=>x(e,b),[e,x]),p=l.useCallback(b=>g(e,b),[e,g]),f=h[3];return l.useMemo(()=>o.jsxs("g",{id:e,transform:`translate(${t}, ${c})`,children:[o.jsx("rect",{fill:h[2],x:"0",width:"30",height:"15",rx:"8"}),o.jsx("text",{className:"rmp-name__berlin",textAnchor:"middle",x:m,y:"12.5",fill:f,fontSize:"14",letterSpacing:"0",children:"S"}),o.jsx("text",{className:"rmp-name__berlin",textAnchor:"middle",x:a,y:"12.5",fill:f,fontSize:"14",letterSpacing:"-0.2",children:s}),o.jsx("rect",{fill:"white",fillOpacity:"0",x:"0",width:"30",height:"15",onPointerDown:r,onPointerMove:d,onPointerUp:p,style:{cursor:"move"}})]}),[e,t,c,s,...h,r,d,p])},D={num:1,color:[w.Berlin,"bs1","#DD6CA6",j.white]},Ve=[{type:"input",label:"panel.details.nodes.common.num",value:n=>(n!=null?n:D).num,validator:n=>!Number.isNaN(n),onChange:(n,e)=>{const t=e!=null?e:D;return Number.isNaN(n)||(t.num=Number(n)),t}},{type:"custom",component:o.jsx(N,{type:B.BerlinSBahnLineBadge,defaultTheme:D.color})}],Je=o.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[o.jsx("rect",{fill:"currentColor",x:"2",y:"4",width:"20",height:"16",rx:"8"}),o.jsx("text",{x:"4.5",y:"16.5",fill:"white",fontSize:"14",children:"S1"})]}),Qe={component:Ke,icon:Je,defaultAttrs:D,fields:Ve,metadata:{displayName:"panel.details.nodes.berlinSBahnLineBadge.displayName",tags:[]}},Ye=n=>{const{id:e,x:t,y:c,attrs:i,handlePointerDown:u,handlePointerMove:x,handlePointerUp:g}=n,{num:s=U.num,color:h=U.color}=i!=null?i:U,m=l.useCallback(C=>u(e,C),[e,u]),a=l.useCallback(C=>x(e,C),[e,x]),r=l.useCallback(C=>g(e,C),[e,g]),d=h[3],p=Number.isInteger(s)?16:15,[f,b]=Number.isInteger(s)?Number(s)>=10?[-1.2,1.5]:[0,5.5]:[0,2.55];return l.useMemo(()=>o.jsxs("g",{id:e,transform:`translate(${t}, ${c})`,children:[o.jsx("rect",{fill:h[2],x:"0",width:"20",height:"20",rx:"10",ry:"10"}),o.jsx("text",{className:"rmp-name__zh",textAnchor:"left",x:b,y:"10",fill:d,fontSize:p,letterSpacing:f,dominantBaseline:"central",children:s}),o.jsx("rect",{fill:"white",fillOpacity:"0",x:"0",width:"20",height:"20",rx:"10",ry:"10",onPointerDown:m,onPointerMove:a,onPointerUp:r,style:{cursor:"move"}})]}),[e,t,c,s,...h,m,a,r])},U={num:1,color:[w.Chongqing,"cq1","#e4002b",j.white]},_e=[{type:"input",label:"panel.details.nodes.common.num",value:n=>(n!=null?n:U).num,validator:n=>!Number.isNaN(n),onChange:(n,e)=>{const t=e!=null?e:U;return Number.isNaN(Number(n))?t.num=n:t.num=Number(n),t}},{type:"custom",component:o.jsx(N,{type:B.ChongqingRTNumLineBadge,defaultTheme:U.color})}],en=o.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[o.jsx("rect",{fill:"currentColor",x:"2",y:"2",rx:"10",ry:"10",width:"20",height:"20"}),o.jsx("text",{x:"8",y:"18",fill:"white",fontSize:"18",children:"1"})]}),nn={component:Ye,icon:en,defaultAttrs:U,fields:_e,metadata:{displayName:"panel.details.nodes.chongqingRTNumLineBadge.displayName",tags:[]}},on=n=>{const{id:e,x:t,y:c,attrs:i,handlePointerDown:u,handlePointerMove:x,handlePointerUp:g}=n,{names:s=T.names,color:h=T.color}=i!=null?i:T,m=l.useRef(null),a=l.useCallback(f=>u(e,f),[e,u]),r=l.useCallback(f=>x(e,f),[e,x]),d=l.useCallback(f=>g(e,f),[e,g]),p=h[3];return l.useMemo(()=>o.jsxs("g",{id:e,transform:`translate(${t}, ${c})`,children:[o.jsx("rect",{fill:h[2],x:"0",width:"20",height:"20",rx:"10",ry:"10"}),o.jsx("text",{className:"rmp-name__zh",textAnchor:"middle",x:"10",y:"10.5",fill:p,fontSize:"6",letterSpacing:"0",children:s[0]}),o.jsx(J,{ref:m,text:s[1].split(`
`),className:"rmp-name__en",textAnchor:"middle",x:"10",y:"9.25",fill:p,fontSize:"2.5",letterSpacing:"0",lineHeight:2.25,grow:"down"}),o.jsx("rect",{fill:"white",fillOpacity:"0",x:"0",width:"20",height:"20",rx:"10",ry:"10",onPointerDown:a,onPointerMove:r,onPointerUp:d,style:{cursor:"move"}})]}),[e,t,c,...s,...h,a,r,d])},T={names:["空港线","Konggang Line"],color:[w.Chongqing,"cq3","#003da5",j.white]},tn=[{type:"input",label:"panel.details.nodes.common.nameZh",value:n=>(n!=null?n:T).names[0],onChange:(n,e)=>{const t=e!=null?e:T;return t.names[0]=n.toString(),t}},{type:"textarea",label:"panel.details.nodes.common.nameEn",value:n=>(n!=null?n:T).names[1],onChange:(n,e)=>{const t=e!=null?e:T;return t.names[1]=n.toString(),t}},{type:"custom",component:o.jsx(N,{type:B.ChongqingRTTextLineBadge,defaultTheme:T.color})}],ln=o.jsxs("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:[o.jsx("rect",{fill:"currentColor",x:"2",y:"2",rx:"10",ry:"10",width:"20",height:"20"}),o.jsx("text",{x:"4.5",y:"12.5",fill:"white",fontSize:"5",children:"空港线"}),o.jsx("text",{x:"4.5",y:"15",fill:"white",fontSize:"2",children:"Konggang Line"})]}),an={component:on,icon:ln,defaultAttrs:T,fields:tn,metadata:{displayName:"panel.details.nodes.chongqingRTTextLineBadge.displayName",tags:[]}},sn=n=>{const{id:e,x:t,y:c,attrs:i,handlePointerDown:u,handlePointerMove:x,handlePointerUp:g}=n,{dots:s=k.dots,stroke:h=k.stroke,strokeWidth:m=k.strokeWidth,fill:a=k.fill}=i!=null?i:k,r=s.map(b=>b.join(",")).join(" "),d=l.useCallback(b=>u(e,b),[e,u]),p=l.useCallback(b=>x(e,b),[e,x]),f=l.useCallback(b=>g(e,b),[e,g]);return l.useMemo(()=>o.jsx("g",{id:e,transform:`translate(${t}, ${c})`,onPointerDown:d,onPointerMove:p,onPointerUp:f,style:{cursor:"move"},children:o.jsx("polygon",{points:r,fill:a[2],stroke:h[2],strokeWidth:m})}),[e,t,c,r,h,m,a,d,p,f])},k={dots:[[-10,-10],[10,-10],[10,10],[-10,10]],stroke:[w.Shanghai,"jsr","#000000",j.white],strokeWidth:1,fill:[w.Shanghai,"white","#fff",j.black]},cn=()=>{const n=Q(),{t:e}=Y(),{selected:t}=_(a=>a.runtime),c=t.at(0);let i;if(t.length===1&&window.graph.hasNode(c)){const a=window.graph.getNodeAttribute(c,"type");a===B.Polygon&&(i=structuredClone(window.graph.getNodeAttribute(c,a)))}const u=l.useCallback((a,r)=>{if(!a||!r)return;const d=window.graph.getNodeAttribute(a,"type");d===B.Polygon&&(window.graph.mergeNodeAttributes(a,{[d]:r}),n(G()),n(X(window.graph.export())))},[n,G,X]),x=a=>{isFinite(a)&&(i.strokeWidth=Number(a),u(c,i))},g=a=>{i==null||i.dots.push(a),u(c,i)},s=(a,r)=>{i.dots[a]=r,u(c,i)},h=a=>{i.dots=i.dots.filter((r,d)=>a!==d),u(c,i)},m=i==null?void 0:i.dots.map((a,r)=>[{type:"input",label:e("panel.details.nodes.polygon.x"),value:a[0].toString(),minW:"40px",onChange:d=>s(r,[Number(d),a[1]])},{type:"input",label:e("panel.details.nodes.polygon.y"),value:a[1].toString(),minW:"40px",onChange:d=>s(r,[a[0],Number(d)])}]);return o.jsxs(o.Fragment,{children:[o.jsx(F,{label:e("panel.details.nodes.polygon.fill"),children:o.jsx(N,{type:B.Polygon,colorKey:"fill",defaultTheme:k.fill})}),o.jsx(F,{label:e("panel.details.nodes.polygon.strokeWidth"),children:o.jsx(ee,{value:i==null?void 0:i.strokeWidth.toString(),onDebouncedChange:a=>x(a),delay:1e3})}),o.jsx(F,{label:e("panel.details.nodes.polygon.stroke"),children:o.jsx(N,{type:B.Polygon,colorKey:"stroke",defaultTheme:k.stroke})}),o.jsx(F,{label:e("panel.details.nodes.polygon.dots"),children:o.jsx(ne,{direction:"column",children:m==null?void 0:m.map((a,r)=>o.jsxs(ie,{spacing:.5,children:[o.jsx(le,{fields:a,noLabel:r!==0}),r===m.length-1?o.jsx(K,{size:"sm",variant:"ghost","aria-label":e("panel.details.nodes.polygon.duplicate"),onClick:()=>{var d;return g((d=i==null?void 0:i.dots.at(-1))!=null?d:[0,0])},icon:o.jsx(oe,{})}):o.jsx(V,{minW:8}),r>=3?o.jsx(K,{size:"sm",variant:"ghost","aria-label":e("panel.details.nodes.polygon.remove"),onClick:()=>h(r),icon:o.jsx(te,{})}):o.jsx(V,{minW:8})]},r))})})]})},rn=o.jsx("svg",{viewBox:"0 0 24 24",height:40,width:40,focusable:!1,children:o.jsx("polygon",{transform:"translate(12,12)rotate(20)",points:"0,-5.19 -6,6 6,6",fill:"currentColor"})}),dn={component:sn,icon:rn,defaultAttrs:k,fields:[],attrsComponent:cn,metadata:{displayName:"panel.details.nodes.polygon.displayName",tags:[]}},gn={[B.Virtual]:de,[B.ShmetroNumLineBadge]:xe,[B.ShmetroTextLineBadge]:ye,[B.GzmtrLineBadge]:Le,[B.BjsubwayNumLineBadge]:Te,[B.BjsubwayTextLineBadge]:De,[B.SuzhouRTNumLineBadge]:Ie,[B.BerlinSBahnLineBadge]:Qe,[B.BerlinUBahnLineBadge]:Xe,[B.ChongqingRTNumLineBadge]:nn,[B.ChongqingRTTextLineBadge]:an,[B.Facilities]:ae,[B.Text]:Oe,[B.Polygon]:dn};export{gn as m};
