(self.webpackChunkrmp=self.webpackChunkrmp||[]).push([[4030],{2676:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Qe}});var r=t(4165),s=t(5861),i=t(9439),o=t(2791),a=t(1252),c=t(5946),l=t(2128),d=t(6096),u=t(9120),h=t(7067),x=t(2790),f=t(447),p=t(7322),j=t(9230),m=t(971),g=t(1638),v=t(924),b=t(713),y=t(7339),w=t(8284),C=t(5987),S=t(4942),k=t(3433),Z=t(1413),T=t(5515),O=t(5984),z=t(3671),A=t(8817),E=t(3486),N=t(7599),_=t(3649),M=t(138),R=t(3321),P=t(9671),J=t(3399),I=t(7705),U=t(4090),L=t(7496),B=t(6146),G=t(3306),V=t(184),D=function(e){var n=e.isOpen,i=e.handleOpenTemplates,o=e.onClose,a=(0,j.$G)().t,c=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(9681)("./".concat(n,".json"));case 2:s=e.sent,i(s.default),o();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,V.jsxs)(R.u_,{isOpen:n,onClose:o,children:[(0,V.jsx)(P.Z,{}),(0,V.jsxs)(J.h,{children:[(0,V.jsx)(I.x,{children:a("header.open.gallery")}),(0,V.jsx)(U.o,{}),(0,V.jsx)(L.f,{children:(0,V.jsx)(B.g,{children:["shanghai","guangzhou","beijing","santiago"].map((function(e){return(0,V.jsx)(G.z,{minWidth:200,onClick:function(){return c(e)},children:a("header.open.".concat(e))},e)}))})})]})]})},W=["version"],H=["version","graph"];function $(){var e=(0,j.$G)().t,n=(0,y.u5)(),t=o.useRef(window.graph),a=o.useRef(null),c=o.useRef(null),l=o.useState(!1),m=(0,i.Z)(l,2),g=m[0],v=m[1],b=o.useCallback((function(){n((0,z.ML)()),n((0,z.lH)()),n((0,w.DR)(t.current.export()))}),[n,z.ML,z.lH,w.DR,t]),R=function(){var o=(0,s.Z)((0,r.Z)().mark((function s(o){var a,c,l,d,u,h,x;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=null===(a=o.target.files)||void 0===a?void 0:a[0],console.log("OpenActions.handleUploadRMG():: received file",c),"application/json"===(null===c||void 0===c?void 0:c.type)){r.next=7;break}n((0,z.bI)({status:"error",message:e("OpenActions.invalidType")})),console.error("OpenActions.handleUploadRMG():: Invalid file type! Only file in JSON format is accepted."),r.next=25;break;case 7:return r.prev=7,r.next=10,q(c);case 10:l=r.sent,d=JSON.parse(l),u=d.stn_list,h=d.theme,x=Object.fromEntries(Object.keys(u).filter((function(e){return!["linestart","lineend"].includes(e)})).map((function(e){return[e,"stn_".concat((0,O.x0)(10))]}))),Object.entries(u).filter((function(e){var n=(0,i.Z)(e,2),t=n[0];n[1];return!["linestart","lineend"].includes(t)})).forEach((function(e){var n=(0,i.Z)(e,2),r=n[0],s=n[1],o=t.current.filterNodes((function(e,n){return Object.values(E.T).includes(n.type)&&n[n.type].names[0]===s.name[0]}));0!==o.length&&(x[r]=o[0])})),Object.entries(u).filter((function(e){var n=(0,i.Z)(e,2),t=n[0];n[1];return!["linestart","lineend"].includes(t)})).filter((function(e){var n=(0,i.Z)(e,2),r=(n[0],n[1]);return 0===t.current.filterNodes((function(e,n){return Object.values(E.T).includes(n.type)&&n[n.type].names[0]===r.name[0]})).length})).forEach((function(e,n){var r=(0,i.Z)(e,2),s=r[0],o=r[1],a=E.T.ShmetroBasic;"shmetro"===d.style?a=o.transfer.info.flat().length>0?E.T.ShmetroInt:"sh2020"===d.info_panel_type?E.T.ShmetroBasic2020:E.T.ShmetroBasic:"gzmtr"===d.style?a=o.transfer.info.flat().length>0?E.T.GzmtrInt:E.T.GzmtrBasic:"mtr"===d.style&&(a=E.T.MTR);var c=(0,Z.Z)((0,Z.Z)({},JSON.parse(JSON.stringify(_.Z[a].defaultAttrs))),{},{names:o.name});if(a===E.T.ShmetroBasic2020)c.color=h;else if(a===E.T.GzmtrBasic)c.color=d.theme,c.lineCode=d.line_num,c.stationCode=o.num;else if(a===E.T.GzmtrInt){var l=JSON.parse(JSON.stringify(o.transfer.info));l.forEach((function(e){return e.forEach((function(e){e[4]="1",e[5]="01"}))})),l[0].unshift([].concat((0,k.Z)(d.theme),[d.line_num,o.num])),c.transfer=l}else if(a===E.T.MTR){var u=JSON.parse(JSON.stringify(o.transfer.info));(u=[u[0]]).forEach((function(e){return e.forEach((function(e){e[4]="",e[5]=""}))})),u.flat().length>0&&u[0].unshift([].concat((0,k.Z)(d.theme),["",""])),c.transfer=u}t.current.addNode(x[s],(0,S.Z)({visible:!0,zIndex:0,x:100+50*n,y:1e3,type:a},a,c))})),Object.entries(u).filter((function(e){var n=(0,i.Z)(e,2),t=n[0];n[1];return!["linestart","lineend"].includes(t)})).forEach((function(e){var n=(0,i.Z)(e,2),r=n[0];n[1].children.filter((function(e){return!["linestart","lineend"].includes(e)})).forEach((function(e){var n;t.current.addDirectedEdgeWithKey("line_".concat((0,O.x0)(10)),x[r],x[e],(n={visible:!0,zIndex:0,type:A.y.Diagonal},(0,S.Z)(n,A.y.Diagonal,JSON.parse(JSON.stringify(N.V[A.y.Diagonal].defaultAttrs))),(0,S.Z)(n,"style",A.R.SingleColor),(0,S.Z)(n,A.R.SingleColor,{color:h}),(0,S.Z)(n,"reconcileId",""),n))}))})),b(),r.next=25;break;case 21:r.prev=21,r.t0=r.catch(7),n((0,z.bI)({status:"error",message:e("OpenActions.unknownError")})),console.error("OpenActions.handleUploadRMG():: Unknown error occurred while parsing the uploaded file",r.t0);case 25:o.target.value="";case 26:case"end":return r.stop()}}),s,null,[[7,21]])})));return function(e){return o.apply(this,arguments)}}(),P=function(){var i=(0,s.Z)((0,r.Z)().mark((function s(i){var o,a,c,l,d,u;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=null===(o=i.target.files)||void 0===o?void 0:o[0],console.log("OpenActions.handleUpload():: received file",a),"application/json"===(null===a||void 0===a?void 0:a.type)){r.next=7;break}n((0,z.bI)({status:"error",message:e("OpenActions.invalidType")})),console.error("OpenActions.handleUpload():: Invalid file type! Only file in JSON format is accepted."),r.next=30;break;case 7:return r.prev=7,r.next=10,q(a);case 10:return c=r.sent,r.t0=JSON,r.next=14,(0,M._s)(c);case 14:r.t1=r.sent,l=r.t0.parse.call(r.t0,r.t1),l.version,d=(0,C.Z)(l,W),n((0,z.x_)()),t.current.clear(),t.current.import(d.graph),u=(0,Z.Z)((0,Z.Z)({},d),{},{present:d.graph,past:[],future:[]}),n((0,w.hf)(u)),b(),r.next=30;break;case 26:r.prev=26,r.t2=r.catch(7),n((0,z.bI)({status:"error",message:e("OpenActions.unknownError")})),console.error("OpenActions.handleUpload():: Unknown error occurred while parsing the uploaded file",r.t2);case 30:i.target.value="";case 31:case"end":return r.stop()}}),s,null,[[7,26]])})));return function(e){return i.apply(this,arguments)}}(),J=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(s){var i,o,a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,(0,M._s)(JSON.stringify(s));case 3:e.t1=e.sent,i=e.t0.parse.call(e.t0,e.t1),i.version,o=i.graph,a=(0,C.Z)(i,H),n((0,z.x_)()),t.current.clear(),t.current.import(o),c=(0,Z.Z)((0,Z.Z)({},a),{},{present:o,past:[],future:[]}),n((0,w.hf)(c)),b();case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,V.jsxs)(u.v,{children:[(0,V.jsx)(h.j,{as:d.h,size:"sm",variant:"ghost",icon:(0,V.jsx)(p.Ap8,{})}),(0,V.jsxs)(x.q,{children:[(0,V.jsx)(f.s,{icon:(0,V.jsx)(p.KVB,{}),onClick:function(){n((0,z.x_)()),t.current.clear(),n((0,w.u4)(100)),n((0,w.FL)({x:0,y:0})),b()},children:e("header.open.new")}),(0,V.jsx)("input",{ref:c,type:"file",accept:".json",hidden:!0,onChange:P,"data-testid":"file-upload"}),(0,V.jsx)(f.s,{icon:(0,V.jsx)(p.Ap8,{}),onClick:function(){var e;return null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.click()},children:e("header.open.config")}),(0,V.jsx)("input",{ref:a,type:"file",accept:".json",hidden:!0,onChange:R,"data-testid":"file-upload"}),(0,V.jsx)(f.s,{icon:(0,V.jsx)(p.Ap8,{}),onClick:function(){var e;return null===a||void 0===a||null===(e=a.current)||void 0===e?void 0:e.click()},children:e("header.open.configRMG")}),(0,V.jsxs)(f.s,{icon:(0,V.jsx)(p.uEt,{}),onClick:function(){return v(!0)},children:[e("header.open.gallery"),(0,V.jsx)(T.C,{ml:"1",colorScheme:"green",children:"New"})]}),(0,V.jsx)(D,{isOpen:g,handleOpenTemplates:J,onClose:function(){return v(!1)}})]})]})}var q=function(e){return new Promise((function(n){var t=new FileReader;t.onloadend=function(){return n(t.result)},t.readAsText(e)}))},F=t(6300),Q=t(2406),K=t(3466),Y=t(4363),X=t(3578),ee=t(2893),ne=t(9704),te=t(3300),re=function(e){return new Promise((function(n){var t=new FileReader;t.onloadend=function(){return n(t.result)},t.readAsDataURL(e)}))},se=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){var t,i,o,a,c,l,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Array.from(new Set([].concat((0,k.Z)(n.querySelectorAll(".rmp-name__mtr__zh")),(0,k.Z)(n.querySelectorAll(".rmp-name__mtr__en"))).map((function(e){return e.innerHTML})).join("").replace(/\s/g,""))).join(""),e.next=3,document.fonts.load("80px GenYoMin TW, Vegur",o);case 3:if(a=e.sent,c=null===(t=document.querySelector("link#fonts_mtr"))||void 0===t||null===(i=t.sheet)||void 0===i?void 0:i.cssRules){e.next=7;break}return e.abrupt("return",Promise.reject(new Error("cssRules can not be found in link#css_share")));case 7:return l=Array.from(c).filter((function(e){return e instanceof CSSFontFaceRule})),d=a.reduce((function(e,n){var t,r=(t=n,l.find((function(e){var n=e.style;return n.getPropertyValue("font-family").replace(/^"(.+)"$/,"$1")===t.family&&n.getPropertyValue("unicode-range")===t.unicodeRange})));return r?e.find((function(e){var n=e.style,t=r.style;return n.getPropertyValue("font-family")===t.getPropertyValue("font-family")&&n.getPropertyValue("unicode-range")===t.getPropertyValue("unicode-range")}))?e:e.concat(r):e}),[]),e.next=11,Promise.all(d.map(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){var t,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(ie(n));case 3:return t=e.sent,e.t0=re,e.next=7,t.blob();case 7:return e.t1=e.sent,e.next=10,(0,e.t0)(e.t1);case 10:return s=e.sent,e.abrupt("return",n.cssText.replace(/src:[ \w('",\-:/.)]+;/g,"src: url('".concat(s,"'); ")));case 14:return e.prev=14,e.t2=e.catch(0),console.error(e.t2),e.abrupt("return","");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(n){return e.apply(this,arguments)}}()));case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ie=function(e){var n,t=e.style.src;return navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?t.replace(/^url\("(\S+)"\).*$/,"$1"):"/rmp/styles/"+(null===(n=t.match(/^url\("([\S*]+)"\)/))||void 0===n?void 0:n[1])},oe=t(3541),ae=function(e){var n=e.isOpen,t=e.onClose,r=(0,j.$G)().t;return(0,V.jsxs)(R.u_,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[(0,V.jsx)(P.Z,{}),(0,V.jsxs)(J.h,{children:[(0,V.jsx)(I.x,{children:r("header.download.termsAndConditions")}),(0,V.jsx)(U.o,{}),(0,V.jsx)(L.f,{children:(0,V.jsxs)(oe.GS,{children:[(0,V.jsxs)(oe.HC,{children:["The layout of the elements on the signage or rail map, is designed by"," ",(0,V.jsxs)(K.r,{color:"teal.500",href:"https://www.shmetro.com/",isExternal:!0,children:["Shanghai Shentong Metro Group ",(0,V.jsx)(Y.J,{as:p.jhj})]}),", ",(0,V.jsxs)(K.r,{color:"teal.500",href:"https://www.gzmtr.com/",isExternal:!0,children:["Guangzhou Metro Group ",(0,V.jsx)(Y.J,{as:p.jhj})]})," or ",(0,V.jsxs)(K.r,{color:"teal.500",href:"https://www.mtr.com.hk/",isExternal:!0,children:["MTR Corporation ",(0,V.jsx)(Y.J,{as:p.jhj})]}),", depending on your selection. You shall grant appropriate permit or license from the relevant company above before using the generated images for commercial purposes, if it is required to do so.",(0,V.jsx)("br",{}),"\u6807\u5fd7\u7248\u6216\u8def\u7ebf\u56fe\u7684\u5143\u7d20\u6216\u5e03\u5c40\uff0c\u57fa\u4e8e\u4f60\u6240\u9009\u62e9\u7684\u98ce\u683c\uff0c\u4e3a",(0,V.jsxs)(K.r,{color:"teal.500",href:"https://www.shmetro.com/",isExternal:!0,children:["\u4e0a\u6d77\u7533\u901a\u5730\u94c1\u96c6\u56e2 ",(0,V.jsx)(Y.J,{as:p.jhj})]}),"\uff0c",(0,V.jsxs)(K.r,{color:"teal.500",href:"https://www.gzmtr.com/",isExternal:!0,children:["\u5e7f\u5dde\u5730\u94c1\u96c6\u56e2\u516c\u53f8 ",(0,V.jsx)(Y.J,{as:p.jhj})]}),"\u6216",(0,V.jsxs)(K.r,{color:"teal.500",href:"https://www.mtr.com.hk/",isExternal:!0,children:["\u6e2f\u94c1\u516c\u53f8 ",(0,V.jsx)(Y.J,{as:p.jhj})]}),"\u6240\u8bbe\u8ba1\u3002\u5728\u4ea7\u751f\u7684\u56fe\u50cf\u7528\u4f5c\u5546\u4e1a\u7528\u9014\u524d\uff0c\u4f60\u5e94\u5411\u76f8\u5173\u516c\u53f8\u53d6\u5f97\u9002\u5f53\u4e4b\u8bb8\u53ef\u8bc1\u6216\u6388\u6743\u3002"]}),(0,V.jsxs)(oe.HC,{children:["The elements including shapes and lines on the image are drawn by"," ",(0,V.jsxs)(K.r,{color:"teal.500",href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",(0,V.jsx)(Y.J,{as:p.jhj})]})," and ",(0,V.jsxs)(K.r,{color:"teal.500",href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",(0,V.jsx)(Y.J,{as:p.jhj})]}),", based on the design standards or rules of the companies listed above. You may use them for any purposes, but it is recommended to state the name and the link of software alongside.",(0,V.jsx)("br",{}),"\u56fe\u50cf\u7684\u5143\u7d20\uff0c\u5305\u62ec\u56fe\u5f62\u53ca\u7ebf\u6761\uff0c\u5747\u7531",(0,V.jsxs)(K.r,{color:"teal.500",href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",(0,V.jsx)(Y.J,{as:p.jhj})]}),"\u53ca",(0,V.jsxs)(K.r,{color:"teal.500",href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",(0,V.jsx)(Y.J,{as:p.jhj})]}),"\u57fa\u4e8e\u4e0a\u8ff0\u516c\u53f8\u8bbe\u8ba1\u6807\u51c6\u6216\u51c6\u5219\u7ed8\u5236\u3002\u4f60\u53ef\u5c06\u5176\u7528\u4e8e\u4efb\u4f55\u76ee\u7684\uff0c\u4f46\u6211\u4eec\u5efa\u8bae\u4f60\u4e8e\u4f7f\u7528\u540c\u65f6\u9644\u4ee5\u6211\u4eec\u7684\u540d\u5b57\u4ee5\u53ca\u672c\u7f51\u7ad9\u5730\u5740\u3002"]}),(0,V.jsxs)(oe.HC,{children:["Due to copyright, licensing and other legal restrictions, Rail Map Painter uses"," ",(0,V.jsxs)(K.r,{color:"teal.500",href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["GenYoMin provided by ButTaiwan ",(0,V.jsx)(Y.J,{as:p.jhj})]}),", and Vegur instead of MTRSung and Myriad Pro respectively to display and generate MTR-style signage. You shall grant appropriate permit or license from the manufacturers before using those generated images for commercial purposes.",(0,V.jsx)("br",{}),"\u7531\u4e8e\u8457\u4f5c\u6743\u53ca\u5176\u4ed6\u6cd5\u5f8b\u9650\u5236\uff0c\u94c1\u8def\u8def\u7ebf\u56fe\u7ed8\u5236\u5668\u4f7f\u7528\u7531",(0,V.jsxs)(K.r,{color:"teal.500",href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["ButTaiwan\u63d0\u4f9b\u7684\u6e90\u6a23\u660e\u9ad4 ",(0,V.jsx)(Y.J,{as:p.jhj})]}),"\uff0c\u4ee5\u53caVegur\uff0c\u4ee5\u4ee3\u66ff\u6e2f\u94c1\u6837\u5f0f\u6807\u5fd7\u724c\u6240\u4f7f\u7528\u7684\u5730\u94c1\u5b8b\u53caMyriad Pro\u3002\u5728\u4ea7\u751f\u4e4b\u56fe\u50cf\u7528\u4f5c\u5546\u4e1a\u7528\u9014\u524d\uff0c\u4f60\u5e94\u5411\u5b57\u578b\u751f\u4ea7\u5382\u5546\u53d6\u5f97\u9002\u5f53\u4e4b\u8bb8\u53ef\u8bc1\u6216\u6388\u6743\u3002"]}),(0,V.jsxs)(oe.HC,{children:["The exported images in PNG or SVG format may be modified, published, or used for other purposes except commercial use, under the conditions above.",(0,V.jsx)("br",{}),"\u8f93\u51fa\u7684PNG\u6216SVG\u56fe\u50cf\u53ef\u57fa\u4e8e\u4e0a\u8ff0\u6761\u6b3e\uff0c\u5728\u975e\u5546\u4e1a\u4f7f\u7528\u65f6\uff0c\u7528\u4e8e\u4fee\u6539\u3001\u53d1\u884c\u6216\u5176\u4ed6\u7528\u9014\u3002"]}),(0,V.jsxs)(oe.HC,{children:["All flag emojis shown on Windows platforms are designed by"," ",(0,V.jsxs)(K.r,{color:"teal.500",href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",(0,V.jsx)(Y.J,{as:p.jhj})]})," ","\u2013 the open-source emoji and icon project. License:",(0,V.jsxs)(K.r,{color:"teal.500",href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",(0,V.jsx)(Y.J,{as:p.jhj})]}),(0,V.jsx)("br",{}),"\u4e8eWindows\u4f5c\u4e1a\u7cfb\u7edf\u4e0a\u663e\u793a\u7684\u56fd\u65d7Emoji\u4e3a",(0,V.jsxs)(K.r,{color:"teal.500",href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",(0,V.jsx)(Y.J,{as:p.jhj})]}),"\u6240\u8bbe\u8ba1\u3002\u8bb8\u53ef\u8bc1\uff1a",(0,V.jsxs)(K.r,{color:"teal.500",href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",(0,V.jsx)(Y.J,{as:p.jhj})]})]}),(0,V.jsxs)(oe.HC,{children:["We reserve the rights, without prior notice, to modify, add, or remove these terms. The Chinese translation is for reference only. In case of any discrepancy between the English version and the Chinese version, the English version shall prevail.",(0,V.jsx)("br",{}),"\u6211\u4eec\u4fdd\u7559\u4fee\u6539\u3001\u65b0\u589e\u6216\u79fb\u9664\u4e0a\u8ff0\u6761\u6b3e\u4e4b\u6743\u5229\uff0c\u800c\u65e0\u9700\u53e6\u884c\u901a\u77e5\u3002\u4e2d\u6587\u8bd1\u672c\u4ec5\u4f9b\u53c2\u8003\uff0c\u6587\u4e49\u5982\u4e0e\u82f1\u6587\u6709\u6b67\u5f02\uff0c\u6982\u4ee5\u82f1\u6587\u672c\u4e3a\u51c6\u3002"]})]})})]})]})};function ce(){var e=(0,j.$G)().t,n=(0,y.Qy)((function(e){return e.app})).telemetry.project,t=(0,y.Qy)((function(e){return e.runtime})).nodeExists,c=o.useRef(window.graph),l=(0,a.ff)("white","gray.800"),g=o.useState("png"),w=(0,i.Z)(g,2),C=w[0],S=w[1],Z={png:e("header.download.png"),svg:e("header.download.svg")},T=o.useState(100),O=(0,i.Z)(T,2),z=O[0],A=O[1],N=Object.fromEntries([25,33,50,67,75,80,90,100,110,125,150,175,200,250,300,400,500].map((function(e){return[e,"".concat(e,"%")]}))),_=o.useState(!1),B=(0,i.Z)(_,2),D=B[0],W=B[1],H=[{type:"select",label:e("header.download.format"),value:C,options:Z,onChange:function(e){return S("png"===e?"png":"svg")}}],$=[{type:"select",label:e("header.download.scale"),value:z,options:N,onChange:function(e){return A(e)}},{type:"switch",label:e("header.download.transparent"),isChecked:D,onChange:W}],q=o.useState(!1),re=(0,i.Z)(q,2),ie=re[0],oe=re[1],ce=o.useState(!1),he=(0,i.Z)(ce,2),xe=he[0],fe=he[1],pe=o.useState(!1),je=(0,i.Z)(pe,2),me=je[0],ge=je[1],ve=o.useState(!1),be=(0,i.Z)(ve,2),ye=be[0],we=be[1],Ce=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var s,o,a,d,u,h,x,f,p,j,m,g,y,w,S,Z;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(oe(!1),n&&v.ZP.event(b.zW.DOWNLOAD_IMAGES,{numberOfNodes:c.current.order,numberOfEdges:c.current.size}),s=(0,te.fx)(c.current),o=s.xMin,a=s.yMin,d=s.xMax,u=s.yMax,h=d-o,x=u-a,f=document.getElementById("canvas").cloneNode(!0),(0,k.Z)(f.children).filter((function(e){return c.current.hasNode(e.id)&&c.current.getNodeAttribute(e.id,"type")===ne.Z.Virtual})).forEach((function(e){return f.removeChild(e)})),me||f.appendChild(ue(d-400,u-60)),f.setAttribute("viewBox","".concat(o," ").concat(a," ").concat(h," ").concat(x)),f.setAttribute("width",h.toString()),f.setAttribute("height",x.toString()),Object.entries({".rmp-name__zh":["font-family"],".rmp-name__en":["font-family"],".rmp-name__mtr__zh":["font-family"],".rmp-name__mtr__en":["font-family"],".rmp-name-station":["paint-order","stroke","stroke-width"]}).forEach((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1],s=document.querySelector(t);if(null!==s){var o=window.getComputedStyle(s);f.querySelectorAll(t).forEach((function(e){r.forEach((function(n){e.setAttribute(n,o.getPropertyValue(n))})),e.classList.remove(t)}))}})),!t[E.T.MTR]){e.next=25;break}return e.prev=12,e.next=15,se(f);case 15:p=e.sent,(j=document.createElement("style")).textContent=p.join("\n"),f.prepend(j),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(12),alert("Failed to fonts. Fonts in the exported PNG will be missing."),console.error(e.t0);case 25:if("svg"!==C){e.next=28;break}return le("RMP_".concat((new Date).valueOf(),".svg"),"image/svg+xml",f.outerHTML),e.abrupt("return");case 28:document.body.appendChild(f),m="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(f.outerHTML))),document.body.removeChild(f),g=document.createElement("canvas"),y=h*z/100,w=x*z/100,g.width=y,g.height=w,S=g.getContext("2d"),D||(S.fillStyle=l,S.fillRect(0,0,y,w)),(Z=new Image).onload=function(){S.drawImage(Z,0,0,y,w),g.toBlob((function(e){return de("RMP_".concat((new Date).valueOf(),".png"),e)}),"image/png")},Z.src=m;case 40:case"end":return e.stop()}}),e,null,[[12,21]])})));return function(){return e.apply(this,arguments)}}();return(0,V.jsxs)(u.v,{children:[(0,V.jsx)(h.j,{as:d.h,size:"sm",variant:"ghost",icon:(0,V.jsx)(p.uKn,{})}),(0,V.jsxs)(x.q,{children:[(0,V.jsx)(f.s,{icon:(0,V.jsx)(p.tfk,{}),onClick:function(){n&&v.ZP.event(b.zW.DOWNLOAD_PARAM,{"#nodes":c.current.order,"#edges":c.current.size});var e=(0,M.Ru)(y.ZP.getState().param);le("RMP_".concat((new Date).valueOf(),".json"),"application/json",e)},children:e("header.download.config")}),(0,V.jsx)(f.s,{icon:(0,V.jsx)(p.e0s,{}),onClick:function(){return oe(!0)},children:e("header.download.image")})]}),(0,V.jsxs)(R.u_,{size:"xl",isOpen:ie,onClose:function(){return oe(!1)},children:[(0,V.jsx)(P.Z,{}),(0,V.jsxs)(J.h,{children:[(0,V.jsx)(I.x,{children:e("header.download.image")}),(0,V.jsx)(U.o,{}),(0,V.jsxs)(L.f,{children:[(0,V.jsx)(m.M5,{fields:H}),"png"===C&&(0,V.jsx)(m.M5,{fields:$}),(0,V.jsx)("br",{}),(0,V.jsx)(F.X,{isChecked:me,onChange:function(e){return ge(e.target.checked)},children:(0,V.jsxs)(Q.x,{children:[e("header.download.shareInfo1"),(0,V.jsxs)(K.r,{color:"teal.500",onClick:function(){return window.open("https://railmapgen.github.io/rmp","_blank")},children:[e("header.about.rmp")," ",(0,V.jsx)(Y.J,{as:p.jhj})]}),e("header.download.shareInfo2")]})}),(0,V.jsx)(F.X,{isChecked:ye,onChange:function(e){return we(e.target.checked)},children:(0,V.jsxs)(Q.x,{children:[e("header.download.termsAndConditionsInfo"),(0,V.jsxs)(K.r,{color:"teal.500",onClick:function(){return fe(!0)},children:[e("header.download.termsAndConditions")," ",(0,V.jsx)(Y.J,{as:p.jhj})]}),e("header.download.period")]})})]}),(0,V.jsx)(X.m,{children:(0,V.jsx)(ee.U,{children:(0,V.jsx)(G.z,{colorScheme:"teal",variant:"outline",size:"sm",disabled:!ye,onClick:Ce,children:e("header.download.confirm")})})}),(0,V.jsx)(ae,{isOpen:xe,onClose:function(){return fe(!1)}})]})]})]})}var le=function(e,n,t){var r=new Blob([t],{type:n});de(e,r)},de=function(e,n){var t=window.URL.createObjectURL(n),r=document.createElement("a");r.href=t,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t)},ue=function(e,n){var t=document.createElementNS("http://www.w3.org/2000/svg","g");t.setAttribute("transform","translate(".concat(e,", ").concat(n,")scale(2)"));var r=document.createElementNS("http://www.w3.org/2000/svg","image");r.setAttribute("width","40"),r.setAttribute("height","40"),r.setAttribute("x","-50"),r.setAttribute("y","-20");var s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("font-family","Arial, sans-serif"),s.setAttribute("font-size","16"),s.appendChild(document.createTextNode("Rail Map Painter"));var i=document.createElementNS("http://www.w3.org/2000/svg","text");return i.setAttribute("font-family","Arial, sans-serif"),i.setAttribute("font-size","10"),i.setAttribute("y","10"),i.appendChild(document.createTextNode("https://railmapgen.github.io/rmp/")),t.appendChild(r),t.appendChild(s),t.appendChild(i),t},he=t(176),xe=t(76),fe=t(4087),pe=t(6718),je=t(7732);var me=t.p+"static/media/github-mark.6fa18895f6e6c7772cab7049f7e05f59.svg";var ge=t.p+"static/media/slack-mark.3474c14d58fbbab9cfa2208b01a4ac3a.svg",ve=function(e){var n=e.isOpen,t=e.onClose,r=(0,j.$G)().t,s=v.ZP.getAppVersion();return(0,V.jsxs)(R.u_,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[(0,V.jsx)(P.Z,{}),(0,V.jsxs)(J.h,{children:[(0,V.jsx)(I.x,{children:r("header.about.title")}),(0,V.jsx)(U.o,{}),(0,V.jsxs)(L.f,{paddingBottom:10,children:[(0,V.jsxs)(he.k,{direction:"row",children:[(0,V.jsx)(xe.E,{boxSize:"128px",src:"/rmp/logo192.png"}),(0,V.jsxs)(he.k,{direction:"column",width:"100%",alignItems:"center",justifyContent:"center",children:[(0,V.jsx)(Q.x,{fontSize:"xl",as:"b",children:r("header.about.rmp")}),(0,V.jsx)(Q.x,{children:s}),(0,V.jsx)(Q.x,{}),(0,V.jsx)(Q.x,{fontSize:"sm",children:r("header.about.railmapgen")})]})]}),(0,V.jsx)(fe.xu,{margin:5,children:(0,V.jsx)(Q.x,{fontSize:"xl",children:r("header.about.desc")})}),(0,V.jsx)(c.X,{as:"h5",size:"sm",mt:3,mb:2,children:r("header.about.contributors")}),(0,V.jsx)(c.X,{as:"h6",size:"xs",my:2,children:r("header.about.coreContributors")}),(0,V.jsx)(B.g,{children:(0,V.jsxs)(pe.Vp,{size:"lg",w:"85%",onClick:function(){return window.open("https://github.com/thekingofcity","_blank")},cursor:"pointer",children:[(0,V.jsx)(je.q,{src:"https://github.com/thekingofcity.png",size:"lg",my:2,ml:-1,mr:2}),(0,V.jsxs)(pe.Sn,{display:"block",width:"100%",children:[(0,V.jsx)(Q.x,{fontSize:"lg",fontWeight:"bold",mb:1,children:"thekingofcity"}),(0,V.jsx)(Q.x,{fontSize:"sm",children:r("header.about.content1")}),(0,V.jsx)(Q.x,{fontSize:"sm",align:"right",children:r("header.about.content2")})]})]})}),(0,V.jsx)(c.X,{as:"h5",size:"sm",mt:3,mb:2,children:r("header.about.contactUs")}),(0,V.jsxs)(B.g,{children:[(0,V.jsxs)(pe.Vp,{size:"lg",w:"85%",onClick:function(){return window.open("https://github.com/railmapgen/rmp/issues","_blank")},cursor:"pointer",children:[(0,V.jsx)(je.q,{src:me,size:"lg",my:2,ml:-1,mr:2}),(0,V.jsxs)(pe.Sn,{display:"block",width:"100%",children:[(0,V.jsx)(Q.x,{fontSize:"lg",fontWeight:"bold",mb:1,children:r("header.about.github")}),(0,V.jsx)(Q.x,{fontSize:"sm",children:r("header.about.githubContent")})]})]}),(0,V.jsxs)(pe.Vp,{size:"lg",w:"85%",onClick:function(){return window.open("https://join.slack.com/t/railmapgenerator/shared_invite/zt-1odhhta3n-DdZF~fnVwo_q0S0RJmgV8A","_blank")},cursor:"pointer",children:[(0,V.jsx)(je.q,{src:ge,size:"lg",my:2,ml:-1,mr:2}),(0,V.jsxs)(pe.Sn,{display:"block",width:"100%",children:[(0,V.jsx)(Q.x,{fontSize:"lg",fontWeight:"bold",mb:1,children:r("header.about.slack")}),(0,V.jsx)(Q.x,{fontSize:"sm",children:r("header.about.slackContent")}),(0,V.jsx)(Q.x,{fontSize:"sm",as:"i",children:"#rmg, #rmp, #palette-and-templates, #random"})]})]})]})]})]})]})},be=t(6690),ye=t(3627),we=t(954),Ce=t(8574),Se=function(){var e=o.useState(!1),n=(0,i.Z)(e,2),t=n[0],r=n[1],s=(0,y.Qy)((function(e){return e.param})).svgViewBoxZoom,a=(0,y.u5)(),c=[{type:"slider",label:"",value:400-s,min:10,max:390,step:1,onChange:function(e){return a((0,w.u4)(400-e))},leftIcon:(0,V.jsx)(p._a6,{}),rightIcon:(0,V.jsx)(p.Ers,{}),minW:160}];return(0,V.jsxs)(be.J,{isOpen:t,onOpen:function(){return r(!0)},onClose:function(){return r(!1)},children:[(0,V.jsx)(ye.x,{children:(0,V.jsx)(d.h,{"aria-label":"zoom",variant:"ghost",size:"sm",icon:(0,V.jsx)(p.Ers,{}),onClick:function(){return r(!t)}})}),(0,V.jsx)(we.y,{children:(0,V.jsx)(Ce.b,{children:(0,V.jsx)(m.M5,{fields:c,noLabel:!0})})})]})},ke=t(1279),Ze=t(9549),Te=t(2732),Oe=t(553),ze=t(3129),Ae=t(5237),Ee=t(8500),Ne=t(4004),_e=t(2891),Me=t(4081),Re=t(5105),Pe=t(1122),Je=t(4566),Ie=t(8168),Ue=function(e){var n=e.isOpen,t=e.onClose,r=(0,y.u5)(),s=(0,j.$G)().t,a=o.useRef(window.graph),c=o.useState(0),l=(0,i.Z)(c,2),d=l[0],u=l[1],h=o.useState(0),x=(0,i.Z)(h,2),f=x[0],p=x[1],g=[{type:"input",label:s("header.settings.procedures.translate.x"),value:d.toString(),variant:"number",onChange:function(e){return u(Number(e))},minW:"full"},{type:"input",label:s("header.settings.procedures.translate.y"),value:f.toString(),variant:"number",onChange:function(e){return p(Number(e))},minW:"full"}];return(0,V.jsxs)(R.u_,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[(0,V.jsx)(P.Z,{}),(0,V.jsxs)(J.h,{children:[(0,V.jsx)(I.x,{children:s("header.settings.procedures.translate.title")}),(0,V.jsx)(U.o,{}),(0,V.jsxs)(L.f,{children:[s("header.settings.procedures.translate.content"),(0,V.jsx)(m.M5,{fields:g})]}),(0,V.jsxs)(X.m,{children:[(0,V.jsx)(G.z,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:s("cancel")}),(0,V.jsx)(G.z,{colorScheme:"red",onClick:function(){a.current.forEachNode((function(e,n){a.current.updateNodeAttribute(e,"x",(function(e){return(null!==e&&void 0!==e?e:0)+d})),a.current.updateNodeAttribute(e,"y",(function(e){return(null!==e&&void 0!==e?e:0)+f}))})),r((0,z.ML)()),r((0,z.lH)()),r((0,w.DR)(a.current.export())),t()},children:s("apply")})]})]})]})},Le=function(e){var n=e.isOpen,t=e.onClose,r=(0,y.u5)(),s=(0,j.$G)().t,a=o.useRef(window.graph),c=o.useState(1),l=(0,i.Z)(c,2),d=l[0],u=l[1],h=[{type:"input",label:s("header.settings.procedures.scale.factor"),value:d.toString(),variant:"number",onChange:function(e){return u(Number(e))},minW:"full"}];return(0,V.jsxs)(R.u_,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[(0,V.jsx)(P.Z,{}),(0,V.jsxs)(J.h,{children:[(0,V.jsx)(I.x,{children:s("header.settings.procedures.scale.title")}),(0,V.jsx)(U.o,{}),(0,V.jsxs)(L.f,{children:[s("header.settings.procedures.scale.content"),(0,V.jsx)(m.M5,{fields:h})]}),(0,V.jsxs)(X.m,{children:[(0,V.jsx)(G.z,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:s("cancel")}),(0,V.jsx)(G.z,{colorScheme:"red",onClick:function(){a.current.forEachNode((function(e,n){a.current.updateNodeAttribute(e,"x",(function(e){return(null!==e&&void 0!==e?e:0)*d})),a.current.updateNodeAttribute(e,"y",(function(e){return(null!==e&&void 0!==e?e:0)*d}))})),r((0,z.ML)()),r((0,z.lH)()),r((0,w.DR)(a.current.export())),t()},children:s("apply")})]})]})]})},Be=function(e){var n=e.isOpen,t=e.onClose,r=(0,y.u5)(),s=(0,j.$G)().t,a=o.useRef(window.graph),c=Object.fromEntries(Object.entries(_.Z).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return[t,s(r.metadata.displayName).toString()]}))),l=o.useState(Object.keys(_.Z).at(0)),d=(0,i.Z)(l,2),u=d[0],h=d[1],x=o.useState(Object.keys(_.Z).at(1)),f=(0,i.Z)(x,2),p=f[0],g=f[1],v=[{type:"select",label:s("header.settings.procedures.changeType.changeFrom"),value:u,options:c,disabledOptions:[p],onChange:function(e){return h(e)},minW:"full"},{type:"select",label:s("header.settings.procedures.changeType.changeTo"),value:p,options:c,disabledOptions:[u],onChange:function(e){return g(e)},minW:"full"}];return(0,V.jsxs)(R.u_,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[(0,V.jsx)(P.Z,{}),(0,V.jsxs)(J.h,{children:[(0,V.jsxs)(I.x,{children:[(0,V.jsx)(Q.x,{as:"b",fontSize:"xl",children:s("header.settings.procedures.changeType.title")}),(0,V.jsx)(Me.u,{label:s("header.settings.pro"),children:(0,V.jsx)(T.C,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",children:"PRO"})})]}),(0,V.jsx)(U.o,{}),(0,V.jsxs)(L.f,{children:[(0,V.jsx)(m.M5,{fields:v}),(0,V.jsx)(Q.x,{fontSize:"sm",mt:"3",lineHeight:"100%",color:"red.500",children:s("header.settings.procedures.changeType.info")})]}),(0,V.jsxs)(X.m,{children:[(0,V.jsx)(G.z,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:s("cancel")}),(0,V.jsx)(G.z,{colorScheme:"red",onClick:function(){(0,Pe.x8)(a.current,u,p),r((0,z.ML)()),r((0,w.DR)(a.current.export()))},children:s("apply")})]})]})]})},Ge=function(e){var n=e.isOpen,t=e.onClose,r=(0,y.u5)(),s=(0,y.Qy)((function(e){return e.runtime})).theme,a=(0,j.$G)().t,c=o.useRef(window.graph),l=o.useState(s),d=(0,i.Z)(l,2),u=d[0],h=d[1],x=o.useState(!1),f=(0,i.Z)(x,2),p=f[0],m=f[1];return(0,V.jsxs)(R.u_,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[(0,V.jsx)(P.Z,{}),(0,V.jsxs)(J.h,{children:[(0,V.jsx)(I.x,{children:a("header.settings.procedures.removeLines.title")}),(0,V.jsx)(U.o,{}),(0,V.jsxs)(L.f,{children:[a("header.settings.procedures.removeLines.content"),(0,V.jsx)(Ie.Z,{theme:u,onClick:function(){return m(!0)}}),(0,V.jsx)(Je.Z,{isOpen:p,defaultTheme:u,onClose:function(){return m(!1)},onUpdate:function(e){return h(e)}})]}),(0,V.jsxs)(X.m,{children:[(0,V.jsx)(G.z,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:a("cancel")}),(0,V.jsx)(G.z,{colorScheme:"red",onClick:function(){c.current.filterEdges((function(e,n,t,r,s,i,o){return n.style===A.R.SingleColor&&JSON.stringify(n[A.R.SingleColor].color)===JSON.stringify(u)})).forEach((function(e){return c.current.dropEdge(e)})),r((0,z.lH)()),r((0,w.DR)(c.current.export())),t()},children:a("remove")})]})]})]})},Ve={width:"100%",justifyContent:"space-between"},De=function(e){var n=e.isOpen,t=e.onClose,r=(0,y.Qy)((function(e){return e.runtime})).keepLastPath,s=(0,y.u5)(),c=(0,j.$G)().t,l=(0,a.ff)("primary.500","primary.300"),d=o.useState(!1),u=(0,i.Z)(d,2),h=u[0],x=u[1],f=o.useState(!1),m=(0,i.Z)(f,2),g=m[0],b=m[1],w=o.useState(!1),C=(0,i.Z)(w,2),S=C[0],k=C[1],Z=o.useState(!1),O=(0,i.Z)(Z,2),A=O[0],E=O[1],N=v.ZP.isAllowAnalytics(),_=(0,y.Qy)((function(e){return e.app})).telemetry.app;return(0,V.jsxs)(R.u_,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[(0,V.jsx)(P.Z,{}),(0,V.jsxs)(J.h,{children:[(0,V.jsx)(I.x,{children:c("header.settings.title")}),(0,V.jsx)(U.o,{}),(0,V.jsx)(L.f,{children:(0,V.jsxs)(B.g,{divider:(0,V.jsx)(ke.c,{borderColor:"gray.200"}),children:[(0,V.jsxs)(fe.xu,{width:"100%",mb:"3",children:[(0,V.jsx)(Q.x,{as:"b",fontSize:"xl",children:c("header.settings.preference.title")}),(0,V.jsx)(fe.xu,{mt:"3",children:(0,V.jsxs)(fe.xu,{display:"flex",mb:"1",children:[(0,V.jsx)(Q.x,{flex:"1",children:c("header.settings.preference.keepLastPath")}),(0,V.jsx)(Ze.r,{isChecked:r,onChange:function(e){var n=e.target.checked;return s((0,z.Mm)(n))}})]})})]}),(0,V.jsxs)(fe.xu,{width:"100%",mb:"3",children:[(0,V.jsx)(Q.x,{as:"b",fontSize:"xl",children:c("header.settings.shortcuts.title")}),(0,V.jsx)(fe.xu,{mt:"3",children:(0,V.jsxs)(Te.i,{children:[(0,V.jsx)(Oe.h,{children:(0,V.jsxs)(ze.Tr,{children:[(0,V.jsx)(Ae.Th,{children:c("header.settings.shortcuts.keys")}),(0,V.jsx)(Ae.Th,{children:c("header.settings.shortcuts.description")})]})}),(0,V.jsxs)(Ee.p,{children:[(0,V.jsxs)(ze.Tr,{children:[(0,V.jsx)(Ne.Td,{children:(0,V.jsx)(_e.T,{children:"f"})}),(0,V.jsx)(Ne.Td,{children:c("header.settings.shortcuts.f")})]}),(0,V.jsxs)(ze.Tr,{children:[(0,V.jsx)(Ne.Td,{children:(0,V.jsx)(p.InZ,{})}),(0,V.jsx)(Ne.Td,{children:c("header.settings.shortcuts.arrowUpward")})]}),(0,V.jsxs)(ze.Tr,{children:[(0,V.jsx)(Ne.Td,{children:(0,V.jsx)(p.KYK,{})}),(0,V.jsx)(Ne.Td,{children:c("header.settings.shortcuts.arrowBack")})]}),(0,V.jsxs)(ze.Tr,{children:[(0,V.jsx)(Ne.Td,{children:(0,V.jsx)(p.hdK,{})}),(0,V.jsx)(Ne.Td,{children:c("header.settings.shortcuts.arrowForward")})]}),(0,V.jsxs)(ze.Tr,{children:[(0,V.jsx)(Ne.Td,{children:(0,V.jsx)(p.t9$,{})}),(0,V.jsx)(Ne.Td,{children:c("header.settings.shortcuts.arrowDownward")})]}),(0,V.jsxs)(ze.Tr,{children:[(0,V.jsx)(Ne.Td,{children:(0,V.jsx)(_e.T,{children:"i"})}),(0,V.jsx)(Ne.Td,{children:c("header.settings.shortcuts.i")})]}),(0,V.jsxs)(ze.Tr,{children:[(0,V.jsx)(Ne.Td,{children:(0,V.jsx)(_e.T,{children:"j"})}),(0,V.jsx)(Ne.Td,{children:c("header.settings.shortcuts.j")})]}),(0,V.jsxs)(ze.Tr,{children:[(0,V.jsx)(Ne.Td,{children:(0,V.jsx)(_e.T,{children:"k"})}),(0,V.jsx)(Ne.Td,{children:c("header.settings.shortcuts.k")})]}),(0,V.jsxs)(ze.Tr,{children:[(0,V.jsx)(Ne.Td,{children:(0,V.jsx)(_e.T,{children:"l"})}),(0,V.jsx)(Ne.Td,{children:c("header.settings.shortcuts.l")})]}),(0,V.jsxs)(ze.Tr,{children:[(0,V.jsx)(Ne.Td,{children:(0,V.jsx)(_e.T,{children:"shift"})}),(0,V.jsx)(Ne.Td,{children:c("header.settings.shortcuts.shift")})]}),(0,V.jsxs)(ze.Tr,{children:[(0,V.jsx)(Ne.Td,{children:(0,V.jsx)(_e.T,{children:"alt"})}),(0,V.jsx)(Ne.Td,{children:c("header.settings.shortcuts.alt")})]}),(0,V.jsxs)(ze.Tr,{children:[(0,V.jsx)(Ne.Td,{children:(0,V.jsx)(_e.T,{children:"delete"})}),(0,V.jsx)(Ne.Td,{children:c("header.settings.shortcuts.delete")})]}),(0,V.jsxs)(ze.Tr,{children:[(0,V.jsxs)(Ne.Td,{children:[(0,V.jsx)(_e.T,{children:"ctrl"}),"+",(0,V.jsx)(_e.T,{children:"z"})]}),(0,V.jsx)(Ne.Td,{children:c("header.settings.shortcuts.undo")})]}),(0,V.jsxs)(ze.Tr,{children:[(0,V.jsxs)(Ne.Td,{children:[(0,V.jsx)(_e.T,{children:"ctrl"}),"+",(0,V.jsx)(_e.T,{children:"y"})]}),(0,V.jsx)(Ne.Td,{children:c("header.settings.shortcuts.redo")})]})]})]})})]}),(0,V.jsxs)(fe.xu,{width:"100%",mb:"3",children:[(0,V.jsx)(Q.x,{as:"b",fontSize:"xl",children:c("header.settings.procedures.title")}),(0,V.jsxs)(fe.xu,{mt:"3",children:[(0,V.jsx)(G.z,{sx:Ve,rightIcon:(0,V.jsx)(p.Q7r,{}),onClick:function(){return x(!0)},children:c("header.settings.procedures.translate.title")}),(0,V.jsx)(Ue,{isOpen:h,onClose:function(){return x(!1)}}),(0,V.jsx)(G.z,{sx:Ve,rightIcon:(0,V.jsx)(p.Q7r,{}),onClick:function(){return b(!0)},children:c("header.settings.procedures.scale.title")}),(0,V.jsx)(Le,{isOpen:g,onClose:function(){return b(!1)}}),(0,V.jsx)(G.z,{sx:Ve,rightIcon:(0,V.jsx)(p.Q7r,{}),onClick:function(){return k(!0)},children:(0,V.jsxs)(fe.xu,{children:[c("header.settings.procedures.changeType.title"),(0,V.jsx)(Me.u,{label:c("header.settings.pro"),children:(0,V.jsx)(T.C,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",children:"PRO"})})]})}),(0,V.jsx)(Be,{isOpen:S,onClose:function(){return k(!1)}}),(0,V.jsx)(G.z,{sx:Ve,rightIcon:(0,V.jsx)(p.Q7r,{}),onClick:function(){return E(!0)},children:c("header.settings.procedures.removeLines.title")}),(0,V.jsx)(Ge,{isOpen:A,onClose:function(){return E(!1)}})]})]}),(0,V.jsxs)(fe.xu,{width:"100%",mb:"3",children:[(0,V.jsx)(Q.x,{as:"b",fontSize:"xl",children:c("header.settings.telemetry.title")}),(0,V.jsxs)(fe.xu,{mt:"3",children:[(0,V.jsxs)(fe.xu,{display:"flex",mb:"1",children:[(0,V.jsx)(Q.x,{flex:"1",children:c("header.settings.telemetry.essential")}),(0,V.jsx)(Ze.r,{isChecked:N,isDisabled:!0})]}),(0,V.jsx)(Q.x,{fontSize:"sm",lineHeight:"100%",color:"gray.600",children:c("header.settings.telemetry.essentialInfo")}),(0,V.jsxs)(K.r,{color:l,fontSize:"sm",lineHeight:"100%",href:"https://support.google.com/analytics/answer/11593727",isExternal:!0,children:[c("header.settings.telemetry.essentialLink")," ",(0,V.jsx)(Y.J,{as:p.jhj})]}),(0,V.jsxs)(fe.xu,{display:"flex",mb:"1",children:[(0,V.jsx)(Q.x,{flex:"1",children:c("header.settings.telemetry.additional")}),(0,V.jsx)(Ze.r,{isChecked:_,onChange:function(e){var n,t=e.target.checked;return n=t,s((0,Re.uJ)(n))}})]}),(0,V.jsx)(Q.x,{fontSize:"sm",lineHeight:"100%",color:"gray.600",children:c("header.settings.telemetry.additionalInfo")})]})]})]})})]})]})};function We(){var e=(0,j.$G)().t,n=(0,y.u5)(),t=(0,y.Qy)((function(e){return e.app})).telemetry.app,C=(0,y.Qy)((function(e){return e.param})),S=C.past,k=C.future,Z=(0,a.ff)("white","gray.800"),T=o.useState(!1),O=(0,i.Z)(T,2),z=O[0],A=O[1],E=o.useState(!1),N=(0,i.Z)(E,2),_=N[0],M=N[1],R=(0,m.$H)(v.ZP.getEnv),P=(0,m.$H)(v.ZP.getAppVersion);o.useEffect((function(){t&&R!==v.Sy.DEV&&v.ZP.event(b.zW.APP_LOAD,{isStandaloneWindow:v.ZP.isStandaloneWindow()})}),[R]);var J=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.ZP.setLanguage(n),v.ZP.getI18nInstance().changeLanguage(n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,V.jsxs)(m.Td,{style:{background:Z},children:[(0,V.jsx)(c.X,{as:"h4",size:"md",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:e("header.about.rmp")}),(0,V.jsx)(m.xt,{environment:R,version:P,popoverHeader:R===v.Sy.PRD?void 0:(0,V.jsxs)(j.cC,{i18nKey:"header.popoverHeader",environment:R,children:["You're on ",{environment:R}," environment!"]}),popoverBody:R===v.Sy.PRD?void 0:(0,V.jsx)(j.cC,{i18nKey:"header.popoverBody",children:"This is a testing environment where we test the latest beta RMP."})}),(0,V.jsxs)(l.E,{ml:"auto",children:[(0,V.jsx)(l.U,{children:(0,V.jsx)(d.h,{size:"sm",variant:"ghost","aria-label":"Undo",icon:(0,V.jsx)(p.TsG,{}),disabled:0===S.length,onClick:function(){return n((0,w.wK)())}})}),(0,V.jsx)(l.U,{children:(0,V.jsx)(d.h,{size:"sm",variant:"ghost","aria-label":"Redo",icon:(0,V.jsx)(p.VUZ,{}),disabled:0===k.length,onClick:function(){return n((0,w.b)())}})}),(0,V.jsx)(l.U,{children:(0,V.jsx)(Se,{})}),(0,V.jsx)(l.U,{children:(0,V.jsx)($,{})}),(0,V.jsx)(l.U,{children:(0,V.jsx)(ce,{})}),(0,V.jsx)(l.U,{children:(0,V.jsxs)(u.v,{children:[(0,V.jsx)(h.j,{as:d.h,icon:(0,V.jsx)(p.mp2,{}),variant:"ghost",size:"sm"}),(0,V.jsx)(x.q,{children:g.E7.map((function(e){return(0,V.jsx)(f.s,{onClick:function(){return J(e)},children:g.tK[e][e]},e)}))})]})}),(0,V.jsx)(l.U,{children:(0,V.jsx)(d.h,{size:"sm",variant:"ghost","aria-label":"Settings",icon:(0,V.jsx)(p.b9P,{}),onClick:function(){return A(!0)}})}),(0,V.jsx)(l.U,{children:(0,V.jsx)(d.h,{size:"sm",variant:"ghost","aria-label":"Help",icon:(0,V.jsx)(p.r$n,{}),onClick:function(){return M(!0)}})})]}),(0,V.jsx)(De,{isOpen:z,onClose:function(){return A(!1)}}),(0,V.jsx)(ve,{isOpen:_,onClose:function(){return M(!1)}})]})}var He=t(7498),$e=t(8618),qe=t(8843);function Fe(){var e=(0,y.u5)(),n=(0,y.Qy)((function(e){return e.runtime.globalAlerts}));return(0,V.jsx)(V.Fragment,{children:Object.entries(n).map((function(n){var t=(0,i.Z)(n,2),r=t[0],s=t[1],o=s.message,a=s.url,c=s.linkedApp;return(0,V.jsxs)(He.b,{status:r,variant:"solid",size:"xs",pl:3,pr:1,py:0,children:[(0,V.jsx)($e.z,{}),c?(0,V.jsx)(K.r,{onClick:function(){return function(e){v.ZP.isStandaloneWindow()?window.open("/".concat(e),"_blank"):v.ZP.openApp(e)}(c)},children:o}):a?(0,V.jsx)(K.r,{href:a,target:"_blank",children:o}):o,(0,V.jsx)(qe.P,{ml:"auto",onClick:function(){return e((0,z.sy)(r))}})]},r)}))})}function Qe(){return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(We,{}),(0,V.jsx)(Fe,{})]})}},1122:function(e,n,t){"use strict";t.d(n,{Bd:function(){return x},Kz:function(){return d},Vz:function(){return h},x8:function(){return u}});var r=t(4942),s=t(1413),i=t(3486),o=t(8817),a=t(3649),c=t(7599),l=[i.T.ShmetroBasic2020],d=function(e,n,t){var i=e.getNodeAttribute(n,"type"),o=e.getNodeAttribute(n,i).names,c=(0,s.Z)((0,s.Z)({},a.Z[t].defaultAttrs),{},{names:o});Object.values(l).includes(i)&&Object.values(l).includes(t)||(c.nameOffsetX=e.getNodeAttribute(n,i).nameOffsetX,c.nameOffsetY=e.getNodeAttribute(n,i).nameOffsetY),e.removeNodeAttribute(n,i),e.mergeNodeAttributes(n,(0,r.Z)({type:t},t,c))},u=function(e,n,t){return e.filterNodes((function(e,t){return e.startsWith("stn")&&t.type===n})).forEach((function(n){d(e,n,t)}))},h=function(e,n,t){var s=e.getEdgeAttribute(n,"type");e.removeEdgeAttribute(n,s);var i=JSON.parse(JSON.stringify(c.V[t].defaultAttrs));e.mergeEdgeAttributes(n,(0,r.Z)({type:t},t,i))},x=function(e,n,t,s){var i=e.getEdgeAttribute(n,"style");e.removeEdgeAttribute(n,i);var a=JSON.parse(JSON.stringify(c.b[t].defaultAttrs));t===o.R.SingleColor&&s&&(a.color=s),e.mergeEdgeAttributes(n,(0,r.Z)({style:t},t,a)),t===o.R.River?e.setEdgeAttribute(n,"zIndex",-5):e.setEdgeAttribute(n,"zIndex",0)}},3300:function(e,n,t){"use strict";t.d(n,{Z9:function(){return s},fx:function(){return i},yK:function(){return r}});var r=function(e){var n=e.currentTarget.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}},s=function(e,n){return Math.round(e/n)*n},i=function(e){var n=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE],t=n[0],r=n[1],s=n[2],i=n[3];return e.forEachNode((function(e,n){t=Math.min(n.x,t),r=Math.min(n.y,r),s=Math.max(n.x,s),i=Math.max(n.y,i)})),{xMin:t-=150,yMin:r-=150,xMax:s+=150,yMax:i+=150}}},9681:function(e,n,t){var r={"./beijing.json":[4781,2639],"./guangzhou.json":[7845,5202],"./santiago.json":[8470,6398],"./shanghai.json":[7414,8233]};function s(e){if(!t.o(r,e))return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}));var n=r[e],s=n[0];return t.e(n[1]).then((function(){return t.t(s,19)}))}s.keys=function(){return Object.keys(r)},s.id=9681,e.exports=s}}]);
//# sourceMappingURL=WindowHeader.776a2fbf.chunk.js.map