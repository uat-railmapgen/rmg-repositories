"use strict";(self.webpackChunkrmp=self.webpackChunkrmp||[]).push([[5316],{1432:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var r=n(4942),i=n(3433),a=n(9439),u=n(1413),o=n(2791),s=n(9230),l=n(4087),c=n(5946),d=n(2893),f=n(3306),p=n(5984),h=n(1165),g=n(7339),m=n(8284),v=n(3671),x=n(8168),b=n(9073),y=n(7236),N=n(443),Z=n(1154),j=n(8673),A=n(3948),E=n(9671),C=n(7705),S=n(7496),k=n(3578),O=n(1122),W=n(184);function w(){var e=(0,s.$G)().t,t=(0,g.u5)(),n=o.useCallback((function(){t((0,v.n9)()),t((0,m.DR)(p.current.export()))}),[t,v.n9,m.DR]),i=(0,g.Qy)((function(e){return e.runtime})).selected,d=i.at(0),p=o.useRef(window.graph),x=o.useState(!1),b=(0,a.Z)(x,2),w=b[0],R=b[1],_=o.useRef(null),z=o.useState(void 0),D=(0,a.Z)(z,2),G=D[0],Q=D[1],T=1===i.length?p.current.hasNode(d)?p.current.getNodeAttribute(d,"type"):p.current.getEdgeAttribute(d,"type"):i.length>1?"multiple nodes":"undefined",U=1===i.length&&d.startsWith("stn")&&p.current.hasNode(d),X=Object.fromEntries(Object.entries(y.Z).map((function(t){var n=(0,a.Z)(t,2),r=n[0],i=n[1];return[r,e(i.metadata.displayName).toString()]}))),$=(0,r.Z)({},T,e((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)({},y.Z),N.Z),Z.Z),j.Z),{},{"multiple nodes":{metadata:{displayName:"panel.details.multipleSelection"}},undefined:{metadata:{displayName:"undefined"}}})[T].metadata.displayName).toString()),I=function(e){e&&U&&G&&((0,O.K)(p.current,d,G),n()),Q(void 0),R(!1)},L=[{type:"input",label:e("panel.details.info.id"),value:i.length>0?i.join(", "):"undefined",minW:276},{type:"select",label:e("panel.details.info.type"),value:T,options:U?X:$,onChange:U?function(e){Q(e),R(!0)}:void 0,minW:276}];return(0,W.jsxs)(l.xu,{p:1,children:[(0,W.jsx)(c.X,{as:"h5",size:"sm",children:e("panel.details.info.title")}),(0,W.jsx)(h.M5,{fields:L,minW:130}),(0,W.jsx)(A.a,{isOpen:w,leastDestructiveRef:_,onClose:function(){return I(!1)},children:(0,W.jsx)(E.Z,{children:(0,W.jsxs)(A._,{children:[(0,W.jsx)(C.x,{children:e("warning")}),(0,W.jsx)(S.f,{children:e("panel.details.changeStationTypeContent")}),(0,W.jsxs)(k.m,{children:[(0,W.jsx)(f.z,{ref:_,onClick:function(){return I(!1)},children:e("cancel")}),(0,W.jsx)(f.z,{ml:"2",colorScheme:"red",onClick:function(){return I(!0)},children:e("panel.details.changeStationType")})]})]})})})]})}function R(){var e=(0,s.$G)().t,t=(0,g.u5)(),n=o.useCallback((function(){t((0,v.n9)()),t((0,m.DR)(f.current.export()))}),[t,v.n9,m.DR]),r=(0,g.Qy)((function(e){return e.runtime})),i=r.selected,u=r.refresh.all,d=i.at(0),f=o.useRef(window.graph),p=o.useState({x:0,y:0}),x=(0,a.Z)(p,2),b=x[0],y=x[1];o.useEffect((function(){var e=i.at(0);if(null!==e&&void 0!==e&&e.startsWith("stn")||null!==e&&void 0!==e&&e.startsWith("misc_node_")){var t=f.current.getNodeAttribute(e,"x"),n=f.current.getNodeAttribute(e,"y");y({x:t,y:n})}}),[u,i]);var N=[{type:"input",label:e("panel.details.nodePosition.pos.x"),value:b.x.toString(),validator:function(e){return!Number.isNaN(e)},onChange:function(e){f.current.mergeNodeAttributes(d,{x:Number(e)}),n()}},{type:"input",label:e("panel.details.nodePosition.pos.y"),value:b.y.toString(),validator:function(e){return!Number.isNaN(e)},onChange:function(e){f.current.mergeNodeAttributes(d,{y:Number(e)}),n()}}];return(0,W.jsxs)(l.xu,{p:1,children:[(0,W.jsx)(c.X,{as:"h5",size:"sm",children:e("panel.details.nodePosition.title")}),(0,W.jsx)(h.M5,{fields:N,minW:130})]})}var _=(0,u.Z)((0,u.Z)({},y.Z),N.Z),z=(0,u.Z)((0,u.Z)({},Z.Z),j.Z),D=function(){var e,t=(0,s.$G)().t,n=(0,g.u5)(),u=o.useCallback((function(){n((0,v.n9)()),n((0,m.DR)(N.current.export()))}),[n,v.n9,m.DR]),y=(0,g.Qy)((function(e){return e.runtime})).selected,N=o.useRef(window.graph),Z=o.useState(""),j=(0,a.Z)(Z,2),A=(j[0],j[1]);o.useEffect((function(){var e,t=y.at(0);N.current.hasEdge(t)&&A(null!==(e=N.current.getEdgeAttribute(t,"reconcileId"))&&void 0!==e?e:"undefined")}),[y]);var E=[],C=y.at(0);if(1===y.length&&N.current.hasNode(C)){var S=N.current.getNodeAttribute(C,"type"),k=N.current.getNodeAttribute(C,S);E.push.apply(E,(0,i.Z)(_[S].fields.filter((function(e){return"custom"!==e.type})).map((function(e){return{type:e.type,label:t(e.label),value:e.value(k),options:e.options,disabledOptions:e.disabledOptions&&e.disabledOptions(k),validator:e.validator,onChange:function(i){var a;try{a=e.onChange(i,k)}catch(o){return void n((0,v.bI)({status:"error",message:t("err-code.".concat(o))}))}N.current.mergeNodeAttributes(C,(0,r.Z)({},S,a)),u()}}}))).concat((0,i.Z)(_[S].fields.filter((function(e){return"custom"===e.type})))))}if(1===y.length&&N.current.hasEdge(C)){C.startsWith("line")&&E.push({type:"custom",label:t("color"),component:(0,W.jsx)(x.Z,{theme:N.current.getEdgeAttribute(C,"color"),onClick:function(){return U(!0)}}),minW:"40px"});var O=N.current.getEdgeAttribute(C,"type"),D=N.current.getEdgeAttribute(C,O);E.push.apply(E,(0,i.Z)(z[O].fields.map((function(e){return{type:e.type,label:t(e.label),value:e.value(D),options:e.options,disabledOptions:e.disabledOptions&&e.disabledOptions(D),validator:e.validator,onChange:function(t){N.current.mergeEdgeAttributes(C,(0,r.Z)({},O,e.onChange(t,D))),u()}}}))))}var G=o.useState(!1),Q=(0,a.Z)(G,2),T=Q[0],U=Q[1];return(0,W.jsxs)(h.L$,{isOpen:y.length>0,width:300,header:"Dummy header",alwaysOverlay:!0,children:[(0,W.jsx)(h.mQ,{onClose:function(){return n((0,v.x_)())},children:t("panel.details.header")}),(0,W.jsxs)(h.EI,{children:[(0,W.jsx)(w,{}),1===y.length&&N.current.hasNode(C)&&(0,W.jsx)(R,{}),(0,W.jsxs)(l.xu,{p:1,children:[(0,W.jsx)(c.X,{as:"h5",size:"sm",children:t("panel.details.specificAttrsTitle")}),(0,W.jsx)(h.M5,{fields:E,minW:276})]}),(0,W.jsx)(b.Z,{isOpen:T,defaultTheme:null!==(e=y.at(0))&&void 0!==e&&e.startsWith("line")?N.current.getEdgeAttribute(y.at(0),"color"):void 0,onClose:function(){return U(!1)},onUpdate:function(e){return t=e,void(y.at(0)&&N.current.hasEdge(y.at(0))&&(N.current.mergeEdgeAttributes(y.at(0),{color:t}),u()));var t}})]}),(0,W.jsx)(h.B0,{children:(0,W.jsxs)(d.U,{children:[1===y.length&&N.current.hasNode(y.at(0))&&(0,W.jsx)(f.z,{size:"sm",variant:"outline",onClick:function(){return function(e){var t=JSON.parse(JSON.stringify(N.current.getNodeAttributes(e)));t.x+=50,t.y+=50;var n=e.startsWith("stn")?"stn_".concat((0,p.x0)(10)):"misc_node_".concat((0,p.x0)(10));N.current.addNode(n,t),u()}(y.at(0))},children:t("panel.details.footer.duplicate")}),(0,W.jsx)(f.z,{size:"sm",variant:"outline",onClick:function(){return function(e){n((0,v.x_)()),e.forEach((function(e){N.current.hasNode(e)?N.current.dropNode(e):N.current.hasEdge(e)&&N.current.dropEdge(e)})),u()}(y)},children:t("panel.details.footer.remove")}),1===y.length&&(null===C||void 0===C?void 0:C.startsWith("line-"))&&(0,W.jsx)(f.z,{size:"sm",variant:"outline",onClick:function(){return function(e){n((0,v.x_)());var t=N.current.getEdgeAttribute(e,"color");N.current.filterEdges((function(e,n,r,i,a,u,o){return n.color.every((function(e,n){return e===t[n]}))})).forEach((function(e){N.current.dropEdge(e)})),u()}(y.at(0))},children:t("panel.details.footer.removeEntireLine")})]})})]})}},1122:function(e,t,n){n.d(t,{K:function(){return u},x:function(){return o}});var r=n(4942),i=n(1413),a=n(7236),u=function(e,t,n){var u=e.getNodeAttribute(t,"type"),o=e.getNodeAttribute(t,u).names;e.removeNodeAttribute(t,u);var s=(0,i.Z)((0,i.Z)({},a.Z[n].defaultAttrs),{},{names:o});e.mergeNodeAttributes(t,(0,r.Z)({type:n},n,s))},o=function(e,t,n){return e.filterNodes((function(e,n){return e.startsWith("stn")&&n.type===t})).forEach((function(t){u(e,t,n)}))}},5946:function(e,t,n){n.d(t,{X:function(){return f}});var r=n(1413),i=n(5987),a=n(7872),u=n(581),o=n(9477),s=n(1070),l=n(6992),c=n(184),d=["className"],f=(0,a.G)((function(e,t){var n=(0,u.mq)("Heading",e),a=(0,o.Lr)(e),f=(a.className,(0,i.Z)(a,d));return(0,c.jsx)(s.m.h2,(0,r.Z)((0,r.Z)({ref:t,className:(0,l.cx)("chakra-heading",e.className)},f),{},{__css:n}))}));f.displayName="Heading"},5984:function(e,t,n){n.d(t,{x0:function(){return r}});var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce((function(e,t){return e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"}),"")}}}]);
//# sourceMappingURL=DetailsPanel.67529f37.chunk.js.map