"use strict";(self.webpackChunkrmp=self.webpackChunkrmp||[]).push([[4030],{3646:function(e,n,t){t.r(n),t.d(n,{default:function(){return Zn}});var r=t(4165),s=t(5861),i=t(9439),o=t(2791),a=t(5946),l=t(2128),c=t(6096),d=t(9120),u=t(7067),h=t(2790),x=t(447),f=t(7322),p=t(9230),m=t(6231),g=t(1638),j=t(4134),v=t(713),b=t(7339),y=t(8284),w=t(5987),C=t(5515),S=t(3671),_=t(4942),k=t(3433),T=t(1413),z=t(5984),Z=t(7599),E=t(3649),A=t(8817),O=t(3486),R=t(138),N=t(184),M={h:500,maxH:"70%","& iframe":{h:"100%",w:"100%"}};function P(e){var n=e.isOpen,t=e.onClose,r=e.onImport,s=(0,o.useState)(crypto.randomUUID()),a=(0,i.Z)(s,1)[0],l="/rmg/import?"+new URLSearchParams({parentComponent:j.ZP.getAppName(),parentId:a});return(0,o.useEffect)((function(){var e=new BroadcastChannel("rmg-bridge--"+a);return e.onmessage=function(e){var n=e.data,s=n.event,i=n.data;console.log("[rmp] Received event from RMG app clip:",s),"CLOSE"===s?t():"IMPORT"===s&&r(i)},function(){e.close()}}),[]),(0,N.jsx)(m.$Y,{isOpen:n,onClose:t,sx:M,children:(0,N.jsx)("iframe",{src:l,loading:"lazy"})})}var I=t(2536),L=t(8843),G=["version"],B=new BroadcastChannel("RMP_GALLERY_CHANNEL"),J={h:"80%",w:"80%","& iframe":{h:"100%",w:"100%"}};function D(e){var n=e.isOpen,t=e.onClose,i=(0,I.p)(),a=(0,p.$G)().t,l=(0,b.u5)(),c=o.useRef(window.graph),d=o.useCallback((function(){l((0,S.ML)()),l((0,S.lH)()),l((0,y.DR)(c.current.export()))}),[l,S.ML,S.lH,y.DR,c]),u=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){var t,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,(0,R._s)(JSON.stringify(n));case 3:e.t1=e.sent,t=e.t0.parse.call(e.t0,e.t1),t.version,s=(0,w.Z)(t,G),l((0,S.x_)()),c.current.clear(),c.current.import(s.graph),d();case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){var t,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled([fetch("/rmp-gallery/resources/real_world/".concat(n,".json")),fetch("/rmp-gallery/resources/fantasy/".concat(n,".json"))]);case 2:if(e.t1=t=e.sent.filter((function(e){return"fulfilled"===e.status})).find((function(e){return 200===e.value.status})),e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===t;case 6:if(!e.t0){e.next=10;break}e.t2=void 0,e.next=11;break;case 10:e.t2=t.value.json();case 11:return e.next=13,e.t2;case 13:(s=e.sent)?(u(s),i({title:a("header.open.importFromRMPGallery",{id:n}),status:"success",duration:9e3,isClosable:!0})):i({title:a("header.open.failToImportFromRMPGallery",{id:n}),status:"error",duration:9e3,isClosable:!0});case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return o.useEffect((function(){var e=window.location.href;if(e.includes("/s/")){history.replaceState({},a("about.rmp"),e.substring(0,e.indexOf("s/")));var n=e.substring(e.lastIndexOf("s/")+2);h(n)}}),[]),o.useEffect((function(){B.onmessage=function(e){var n=e.data,r=n.event,s=n.data;"OPEN_TEMPLATE"===r&&(h(s),t())}}),[]),(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(m.$Y,{isOpen:n,onClose:t,size:"full",sx:J,children:[(0,N.jsx)("iframe",{src:"/rmp-gallery/",loading:"lazy"}),(0,N.jsx)(L.P,{onClick:t,position:"fixed",top:"5px",right:"15px"})]})})}var U=["version"];function W(){var e=(0,p.$G)().t,n=(0,b.u5)(),t=o.useRef(window.graph),a=o.useRef(null),l=o.useState(!1),m=(0,i.Z)(l,2),g=m[0],j=m[1],v=o.useState(!1),M=(0,i.Z)(v,2),I=M[0],L=M[1],G=o.useCallback((function(){n((0,S.ML)()),n((0,S.lH)()),n((0,y.DR)(t.current.export()))}),[n,S.ML,S.lH,y.DR,t]),B=function(){var i=(0,s.Z)((0,r.Z)().mark((function s(i){var o,a,l,c,d;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=null===(o=i.target.files)||void 0===o?void 0:o[0],console.log("OpenActions.handleUpload():: received file",a),"application/json"===(null===a||void 0===a?void 0:a.type)){r.next=7;break}n((0,S.bI)({status:"error",message:e("OpenActions.invalidType")})),console.error("OpenActions.handleUpload():: Invalid file type! Only file in JSON format is accepted."),r.next=28;break;case 7:return r.prev=7,r.next=10,H(a);case 10:return l=r.sent,r.t0=JSON,r.next=14,(0,R._s)(l);case 14:r.t1=r.sent,c=r.t0.parse.call(r.t0,r.t1),c.version,d=(0,w.Z)(c,U),n((0,S.x_)()),t.current.clear(),t.current.import(d.graph),G(),r.next=28;break;case 24:r.prev=24,r.t2=r.catch(7),n((0,S.bI)({status:"error",message:e("OpenActions.unknownError")})),console.error("OpenActions.handleUpload():: Unknown error occurred while parsing the uploaded file",r.t2);case 28:i.target.value="";case 29:case"end":return r.stop()}}),s,null,[[7,24]])})));return function(e){return i.apply(this,arguments)}}();return(0,N.jsxs)(d.v,{children:[(0,N.jsx)(u.j,{as:c.h,size:"sm",variant:"ghost",icon:(0,N.jsx)(f.Ap8,{})}),(0,N.jsxs)(h.q,{children:[(0,N.jsx)(x.s,{icon:(0,N.jsx)(f.KVB,{}),onClick:function(){n((0,S.x_)()),t.current.clear(),n((0,y.u4)(100)),n((0,y.FL)({x:0,y:0})),G()},children:e("header.open.new")}),(0,N.jsx)("input",{id:"upload_project",ref:a,type:"file",accept:".json",hidden:!0,onChange:B,"data-testid":"file-upload"}),(0,N.jsx)(x.s,{icon:(0,N.jsx)(f.Ap8,{}),onClick:function(){var e;return null===a||void 0===a||null===(e=a.current)||void 0===e?void 0:e.click()},children:e("header.open.config")}),(0,N.jsx)(x.s,{icon:(0,N.jsx)(f.uEt,{}),onClick:function(){return j(!0)},children:e("header.open.projectRMG")}),(0,N.jsxs)(x.s,{icon:(0,N.jsx)(f.uEt,{}),onClick:function(){return L(!0)},children:[e("header.open.gallery"),(0,N.jsx)(C.C,{ml:"1",colorScheme:"green",children:"New"})]})]}),(0,N.jsx)(P,{isOpen:g,onClose:function(){return j(!1)},onImport:function(r){try{!function(e,n){var t=n.info_panel_type,r=n.line_num,s=n.stn_list,o=n.style,a=n.theme,l=Object.fromEntries(Object.keys(s).filter((function(e){return!["linestart","lineend"].includes(e)})).map((function(e){return[e,"stn_".concat((0,z.x0)(10))]})));Object.entries(s).filter((function(e){var n=(0,i.Z)(e,2),t=n[0];return n[1],!["linestart","lineend"].includes(t)})).forEach((function(n){var t=(0,i.Z)(n,2),r=t[0],s=t[1],o=e.filterNodes((function(e,n){return Object.values(O.T).includes(n.type)&&n[n.type].names[0]===s.name[0]}));0!==o.length&&(l[r]=o[0])})),Object.entries(s).filter((function(e){var n=(0,i.Z)(e,2),t=n[0];return n[1],!["linestart","lineend"].includes(t)})).filter((function(n){var t=(0,i.Z)(n,2),r=(t[0],t[1]);return 0===e.filterNodes((function(e,n){return Object.values(O.T).includes(n.type)&&n[n.type].names[0]===r.name[0]})).length})).forEach((function(n,s){var c=(0,i.Z)(n,2),d=c[0],u=c[1],h=O.T.ShmetroBasic,x=u.transfer.groups,f=x.map((function(e){return e.lines})).flat();"shmetro"===o?h=f.length>0?O.T.ShmetroInt:"sh2020"===t?O.T.ShmetroBasic2020:O.T.ShmetroBasic:"gzmtr"===o?h=f.length>0?O.T.GzmtrInt:O.T.GzmtrBasic:"mtr"===o&&(h=O.T.MTR);var p=(0,T.Z)((0,T.Z)({},JSON.parse(JSON.stringify(E.Z[h].defaultAttrs))),{},{names:u.name});h===O.T.ShmetroBasic2020?p.color=a:h===O.T.GzmtrBasic?(p.color=a,p.lineCode=r,p.stationCode=u.num):h===O.T.GzmtrInt?p.transfer=x.map((function(e,n){var t=e.lines.map((function(e){var n;return[].concat((0,k.Z)(null!==(n=e.theme)&&void 0!==n?n:a),["1","01"])}));return 0===n?[[].concat((0,k.Z)(a),[r,u.num])].concat((0,k.Z)(t)):t})):h===O.T.MTR&&(x[0].lines.length?p.transfer=[[[].concat((0,k.Z)(a),["",""])].concat((0,k.Z)(x[0].lines.map((function(e){var n;return[].concat((0,k.Z)(null!==(n=e.theme)&&void 0!==n?n:a),["",""])}))))]:p.transfer=[[]]),e.addNode(l[d],(0,_.Z)({visible:!0,zIndex:0,x:100+50*s,y:1e3,type:h},h,p))})),Object.entries(s).filter((function(e){var n=(0,i.Z)(e,2),t=n[0];return n[1],!["linestart","lineend"].includes(t)})).forEach((function(n){var t=(0,i.Z)(n,2),r=t[0];t[1].children.filter((function(e){return!["linestart","lineend"].includes(e)})).forEach((function(n){var t;e.addDirectedEdgeWithKey("line_".concat((0,z.x0)(10)),l[r],l[n],(t={visible:!0,zIndex:0,type:A.y.Diagonal},(0,_.Z)(t,A.y.Diagonal,JSON.parse(JSON.stringify(Z.V[A.y.Diagonal].defaultAttrs))),(0,_.Z)(t,"style",A.R.SingleColor),(0,_.Z)(t,A.R.SingleColor,{color:a}),(0,_.Z)(t,"reconcileId",""),t))}))}))}(t.current,r),G()}catch(s){n((0,S.bI)({status:"error",message:e("OpenActions.unknownError")})),console.error("OpenActions.handleUploadRMG():: Unknown error occurred while parsing the RMG project",s)}finally{j(!1)}}}),(0,N.jsx)(D,{isOpen:I,onClose:function(){return L(!1)}})]})}var H=function(e){return new Promise((function(n){var t=new FileReader;t.onloadend=function(){return n(t.result)},t.readAsText(e)}))},V=t(1252),$=t(3321),F=t(9671),Y=t(3399),q=t(7705),K=t(4090),Q=t(7496),X=t(6300),ee=t(2406),ne=t(3466),te=t(4363),re=t(3578),se=t(2893),ie=t(3306),oe=t(9704),ae=t(3300),le=function(e){return new Promise((function(n){var t=new FileReader;t.onloadend=function(){return n(t.result)},t.readAsDataURL(e)}))},ce=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){var t,i,o,a,l,c,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Array.from(new Set([].concat((0,k.Z)(n.querySelectorAll(".rmp-name__mtr__zh")),(0,k.Z)(n.querySelectorAll(".rmp-name__mtr__en"))).map((function(e){return e.innerHTML})).join("").replace(/\s/g,""))).join(""),e.next=3,document.fonts.load("80px GenYoMin TW, Vegur",o);case 3:if(a=e.sent,l=null===(t=document.querySelector("link#fonts_mtr"))||void 0===t||null===(i=t.sheet)||void 0===i?void 0:i.cssRules){e.next=7;break}return e.abrupt("return",Promise.reject(new Error("cssRules can not be found in link#css_share")));case 7:return c=Array.from(l).filter((function(e){return e instanceof CSSFontFaceRule})),d=a.reduce((function(e,n){var t,r=(t=n,c.find((function(e){var n=e.style;return n.getPropertyValue("font-family").replace(/^"(.+)"$/,"$1")===t.family&&n.getPropertyValue("unicode-range")===t.unicodeRange})));return r?e.find((function(e){var n=e.style,t=r.style;return n.getPropertyValue("font-family")===t.getPropertyValue("font-family")&&n.getPropertyValue("unicode-range")===t.getPropertyValue("unicode-range")}))?e:e.concat(r):e}),[]),e.next=11,Promise.all(d.map(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){var t,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(de(n));case 3:return t=e.sent,e.t0=le,e.next=7,t.blob();case 7:return e.t1=e.sent,e.next=10,(0,e.t0)(e.t1);case 10:return s=e.sent,e.abrupt("return",n.cssText.replace(/src:[ \w('",\-:/.)]+;/g,"src: url('".concat(s,"'); ")));case 14:return e.prev=14,e.t2=e.catch(0),console.error(e.t2),e.abrupt("return","");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(n){return e.apply(this,arguments)}}()));case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),de=function(e){var n,t=e.style.src;return navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?t.replace(/^url\("(\S+)"\).*$/,"$1"):"/rmp/styles/"+(null===(n=t.match(/^url\("([\S*]+)"\)/))||void 0===n?void 0:n[1])},ue=t(3541),he=function(e){var n=e.isOpen,t=e.onClose,r=(0,p.$G)().t;return(0,N.jsxs)($.u_,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[(0,N.jsx)(F.Z,{}),(0,N.jsxs)(Y.h,{children:[(0,N.jsx)(q.x,{children:r("header.download.termsAndConditions")}),(0,N.jsx)(K.o,{}),(0,N.jsx)(Q.f,{children:(0,N.jsxs)(ue.GS,{children:[(0,N.jsxs)(ue.HC,{children:["The layout of the elements on the signage or rail map, is designed by"," ",(0,N.jsxs)(ne.r,{color:"teal.500",href:"https://www.shmetro.com/",isExternal:!0,children:["Shanghai Shentong Metro Group ",(0,N.jsx)(te.J,{as:f.jhj})]}),", ",(0,N.jsxs)(ne.r,{color:"teal.500",href:"https://www.gzmtr.com/",isExternal:!0,children:["Guangzhou Metro Group ",(0,N.jsx)(te.J,{as:f.jhj})]})," or ",(0,N.jsxs)(ne.r,{color:"teal.500",href:"https://www.mtr.com.hk/",isExternal:!0,children:["MTR Corporation ",(0,N.jsx)(te.J,{as:f.jhj})]}),", depending on your selection. You shall grant appropriate permit or license from the relevant company above before using the generated images for commercial purposes, if it is required to do so.",(0,N.jsx)("br",{}),"\u6807\u5fd7\u7248\u6216\u8def\u7ebf\u56fe\u7684\u5143\u7d20\u6216\u5e03\u5c40\uff0c\u57fa\u4e8e\u4f60\u6240\u9009\u62e9\u7684\u98ce\u683c\uff0c\u4e3a",(0,N.jsxs)(ne.r,{color:"teal.500",href:"https://www.shmetro.com/",isExternal:!0,children:["\u4e0a\u6d77\u7533\u901a\u5730\u94c1\u96c6\u56e2 ",(0,N.jsx)(te.J,{as:f.jhj})]}),"\uff0c",(0,N.jsxs)(ne.r,{color:"teal.500",href:"https://www.gzmtr.com/",isExternal:!0,children:["\u5e7f\u5dde\u5730\u94c1\u96c6\u56e2\u516c\u53f8 ",(0,N.jsx)(te.J,{as:f.jhj})]}),"\u6216",(0,N.jsxs)(ne.r,{color:"teal.500",href:"https://www.mtr.com.hk/",isExternal:!0,children:["\u6e2f\u94c1\u516c\u53f8 ",(0,N.jsx)(te.J,{as:f.jhj})]}),"\u6240\u8bbe\u8ba1\u3002\u5728\u4ea7\u751f\u7684\u56fe\u50cf\u7528\u4f5c\u5546\u4e1a\u7528\u9014\u524d\uff0c\u4f60\u5e94\u5411\u76f8\u5173\u516c\u53f8\u53d6\u5f97\u9002\u5f53\u4e4b\u8bb8\u53ef\u8bc1\u6216\u6388\u6743\u3002"]}),(0,N.jsxs)(ue.HC,{children:["The elements including shapes and lines on the image are drawn by"," ",(0,N.jsxs)(ne.r,{color:"teal.500",href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",(0,N.jsx)(te.J,{as:f.jhj})]})," and ",(0,N.jsxs)(ne.r,{color:"teal.500",href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",(0,N.jsx)(te.J,{as:f.jhj})]}),", based on the design standards or rules of the companies listed above. You may use them for any purposes, but it is recommended to state the name and the link of software alongside.",(0,N.jsx)("br",{}),"\u56fe\u50cf\u7684\u5143\u7d20\uff0c\u5305\u62ec\u56fe\u5f62\u53ca\u7ebf\u6761\uff0c\u5747\u7531",(0,N.jsxs)(ne.r,{color:"teal.500",href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",(0,N.jsx)(te.J,{as:f.jhj})]}),"\u53ca",(0,N.jsxs)(ne.r,{color:"teal.500",href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",(0,N.jsx)(te.J,{as:f.jhj})]}),"\u57fa\u4e8e\u4e0a\u8ff0\u516c\u53f8\u8bbe\u8ba1\u6807\u51c6\u6216\u51c6\u5219\u7ed8\u5236\u3002\u4f60\u53ef\u5c06\u5176\u7528\u4e8e\u4efb\u4f55\u76ee\u7684\uff0c\u4f46\u6211\u4eec\u5efa\u8bae\u4f60\u4e8e\u4f7f\u7528\u540c\u65f6\u9644\u4ee5\u6211\u4eec\u7684\u540d\u5b57\u4ee5\u53ca\u672c\u7f51\u7ad9\u5730\u5740\u3002"]}),(0,N.jsxs)(ue.HC,{children:["Due to copyright, licensing and other legal restrictions, Rail Map Painter uses"," ",(0,N.jsxs)(ne.r,{color:"teal.500",href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["GenYoMin provided by ButTaiwan ",(0,N.jsx)(te.J,{as:f.jhj})]}),", and Vegur instead of MTRSung and Myriad Pro respectively to display and generate MTR-style signage. You shall grant appropriate permit or license from the manufacturers before using those generated images for commercial purposes.",(0,N.jsx)("br",{}),"\u7531\u4e8e\u8457\u4f5c\u6743\u53ca\u5176\u4ed6\u6cd5\u5f8b\u9650\u5236\uff0c\u94c1\u8def\u8def\u7ebf\u56fe\u7ed8\u5236\u5668\u4f7f\u7528\u7531",(0,N.jsxs)(ne.r,{color:"teal.500",href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["ButTaiwan\u63d0\u4f9b\u7684\u6e90\u6a23\u660e\u9ad4 ",(0,N.jsx)(te.J,{as:f.jhj})]}),"\uff0c\u4ee5\u53caVegur\uff0c\u4ee5\u4ee3\u66ff\u6e2f\u94c1\u6837\u5f0f\u6807\u5fd7\u724c\u6240\u4f7f\u7528\u7684\u5730\u94c1\u5b8b\u53caMyriad Pro\u3002\u5728\u4ea7\u751f\u4e4b\u56fe\u50cf\u7528\u4f5c\u5546\u4e1a\u7528\u9014\u524d\uff0c\u4f60\u5e94\u5411\u5b57\u578b\u751f\u4ea7\u5382\u5546\u53d6\u5f97\u9002\u5f53\u4e4b\u8bb8\u53ef\u8bc1\u6216\u6388\u6743\u3002"]}),(0,N.jsxs)(ue.HC,{children:["The exported images in PNG or SVG format may be modified, published, or used for other purposes except commercial use, under the conditions above.",(0,N.jsx)("br",{}),"\u8f93\u51fa\u7684PNG\u6216SVG\u56fe\u50cf\u53ef\u57fa\u4e8e\u4e0a\u8ff0\u6761\u6b3e\uff0c\u5728\u975e\u5546\u4e1a\u4f7f\u7528\u65f6\uff0c\u7528\u4e8e\u4fee\u6539\u3001\u53d1\u884c\u6216\u5176\u4ed6\u7528\u9014\u3002"]}),(0,N.jsxs)(ue.HC,{children:["All flag emojis shown on Windows platforms are designed by"," ",(0,N.jsxs)(ne.r,{color:"teal.500",href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",(0,N.jsx)(te.J,{as:f.jhj})]})," ","\u2013 the open-source emoji and icon project. License:",(0,N.jsxs)(ne.r,{color:"teal.500",href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",(0,N.jsx)(te.J,{as:f.jhj})]}),(0,N.jsx)("br",{}),"\u4e8eWindows\u4f5c\u4e1a\u7cfb\u7edf\u4e0a\u663e\u793a\u7684\u56fd\u65d7Emoji\u4e3a",(0,N.jsxs)(ne.r,{color:"teal.500",href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",(0,N.jsx)(te.J,{as:f.jhj})]}),"\u6240\u8bbe\u8ba1\u3002\u8bb8\u53ef\u8bc1\uff1a",(0,N.jsxs)(ne.r,{color:"teal.500",href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",(0,N.jsx)(te.J,{as:f.jhj})]})]}),(0,N.jsxs)(ue.HC,{children:["We reserve the rights, without prior notice, to modify, add, or remove these terms. The Chinese translation is for reference only. In case of any discrepancy between the English version and the Chinese version, the English version shall prevail.",(0,N.jsx)("br",{}),"\u6211\u4eec\u4fdd\u7559\u4fee\u6539\u3001\u65b0\u589e\u6216\u79fb\u9664\u4e0a\u8ff0\u6761\u6b3e\u4e4b\u6743\u5229\uff0c\u800c\u65e0\u9700\u53e6\u884c\u901a\u77e5\u3002\u4e2d\u6587\u8bd1\u672c\u4ec5\u4f9b\u53c2\u8003\uff0c\u6587\u4e49\u5982\u4e0e\u82f1\u6587\u6709\u6b67\u5f02\uff0c\u6982\u4ee5\u82f1\u6587\u672c\u4e3a\u51c6\u3002"]})]})})]})]})},xe=t(7762),fe=t(6069),pe=t(4081),me=new Set,ge=new Set,je=new Set,ve=new Map,be=new Map,ye=new Array,we=0,Ce=new Map,Se=new Map,_e={name:["LEFT END","LEFT END"],secondaryName:!1,num:"00",services:["local"],parents:[],children:["lineend"],branch:{left:[],right:[]},transfer:{groups:[{lines:[]}],tick_direc:"r",paid_area:!0},facility:"",loop_pivot:!1,one_line:!0,int_padding:355},ke={name:["RIGHT END","RIGHT END"],secondaryName:!1,num:"00",services:["local"],parents:[],children:[],branch:{left:[],right:[]},transfer:{groups:[{lines:[]}],tick_direc:"r",paid_area:!0},facility:"",loop_pivot:!1,one_line:!0,int_padding:355},Te={svgWidth:{destination:1500,runin:1500,railmap:1500,indoor:1500},svg_height:400,style:"shmetro",y_pc:50,padding:10,branchSpacingPct:33,direction:"r",platform_num:"1",theme:["hongkong","twl","#E2231A","#fff"],line_name:["\u5730\u9435\u7dda","Metro Line"],current_stn_idx:"jlaMj2",stn_list:{},namePosMTR:{isStagger:!0,isFlip:!0},customiseMTRDest:{isLegacy:!1,terminal:!1},line_num:"1",psd_num:"1",info_panel_type:"gz1",notesGZMTR:[],direction_gz_x:40,direction_gz_y:70,coline:{},loop:!1,loop_info:{bank:!0,left_and_right_factor:0,bottom_factor:1}},ze={name:[],secondaryName:!1,num:"",services:["local"],parents:[],children:[],branch:{left:[],right:[]},transfer:{groups:[{lines:[]}],tick_direc:"r",paid_area:!0},facility:"",loop_pivot:!1,one_line:!0,int_padding:355},Ze=function(e){return String(e[0]+"/"+e[1]+"="+e[2]+e[3])},Ee=function(e){for(var n=[],t=e.length-1;t>=0;t--)n.push(e[t]);return n},Ae=function(e){return e==A.R.SingleColor||e==A.R.MTRRaceDays},Oe=function(e,n){var t=e.extremities(n)[0],r=e.extremities(n)[1],s=e.getEdgeAttributes(n),i=s.style;if(t!=r&&Ae(i)){var o=function(e){var n=new Array;e.style==A.R.SingleColor?n=e[A.R.SingleColor].color:e.style==A.R.MTRRaceDays&&(n=e[A.R.MTRRaceDays].color);return structuredClone(n)}(s);je.has(Ze(o))||(ge.add(o),je.add(Ze(o)),ve.set(o,t)),be.has(t)?ye.push({target:r,next:be.get(t),color:o}):ye.push({target:r,next:-1,color:o}),be.set(t,we),we++,be.has(r)?ye.push({target:t,next:be.get(r),color:o}):ye.push({target:t,next:-1,color:o}),be.set(r,we),we++}},Re=function e(n,t,r){if(!me.has(n)){me.add(n);for(var s=0,i=new Set,o=be.get(n);-1!=o;o=ye[o].next){var a=ye[o].target,l=ye[o].color;Ze(l)==Ze(r)&&(i.has(a)||(i.add(a),s++,a!=t&&e(a,n,r)))}Ce.set(n,s)}},Ne=function(e,n){var t=structuredClone(e.stn_list.lineend.parents);t.push(n),e.stn_list.lineend.parents=Ee(structuredClone(t)),2==e.stn_list.lineend.parents.length&&(e.stn_list.lineend.branch.left=["through",structuredClone(t[1])])},Me=function(e){if(Se.get(e[0])>Se.get(e[1])){var n=structuredClone(e[0]);e[0]=structuredClone(e[1]),e[1]=n}return e},Pe=function e(n,t,r,s,i,o){if(me.has(n)&&(void 0==o.stn_list[n]||n.startsWith("misc_node_")||o.loop))return[];if(me.has(n)&&void 0!=o.stn_list[n]&&o.stn_list[n].children.length>=2){var a=Me([t].concat((0,k.Z)(structuredClone(o.stn_list[n].parents))));o.stn_list[n].parents=Ee(a),o.stn_list[n].branch.left=["through",a[1]];var l,c=[],d=(0,xe.Z)(o.stn_list[n].children);try{for(d.s();!(l=d.n()).done;){var u=l.value;u!=t&&c.push(u)}}catch(L){d.e(L)}finally{d.f()}o.stn_list[n].children=structuredClone(c),o.stn_list[n].branch.right=[];var h,x=[],f=(0,xe.Z)(o.stn_list.lineend.parents);try{for(f.s();!(h=f.n()).done;){var p=h.value;p!=n&&x.push(p)}}catch(L){f.e(L)}finally{f.f()}var m=Me(x);return o.stn_list.lineend.parents=Ee(structuredClone(m)),2==o.stn_list.lineend.parents.length&&(o.stn_list.lineend.branch.left=["through",structuredClone(m[1])]),[n]}me.add(n);for(var g=new Array,j=new Array,v=new Set,b=new Set,y=be.get(n);-1!=y;y=ye[y].next){var w=ye[y].target,C=ye[y].color;if(w!=t){if(Ze(C)==Ze(i)){if(b.has(w))continue;if(b.add(w),String(n).startsWith("misc_node_")){var S=e(w,t,r+1,s,i,o);0!=S.length&&g.push.apply(g,(0,k.Z)(S))}else{var _=e(w,n,r+1,s,i,o);0!=_.length&&g.push.apply(g,(0,k.Z)(_))}}if(!v.has(Ze(C))&&Ze(C)!=Ze(i)){v.add(Ze(C));var T={theme:C,name:[C[1],C[1]]};j.push(T)}}}if(2==g.length)for(var z=0;z<2;z++)"lineend"==g[z]&&g.splice(z,1);if(2==g.length&&"lineend"!=o.stn_list[g[0]].children[0]&&"lineend"!=o.stn_list[g[1]].children[0]&&Me(g),String(n).startsWith("misc_node_"))return 0==g.length?(Ne(o,t),["lineend"]):g;var Z=s.getNodeAttributes(n).type,E=s.getNodeAttributes(n)[Z];if(o.stn_list[n]=structuredClone(ze),o.stn_list[n].name=E.names,o.stn_list[n].num=String(r),s.getNodeAttributes(n).type==O.T.GzmtrBasic){var A=E;o.stn_list[n].num=A.stationCode,o.stn_list[n].secondaryName=A.secondaryNames}if(s.getNodeAttributes(n).type==O.T.GzmtrInt){var R,N=E,M=N.transfer[0],P=(0,xe.Z)(M);try{for(P.s();!(R=P.n()).done;){var I=R.value;if(Ze(I)==Ze(i)){o.stn_list[n].num=String(I[5]);break}}}catch(L){P.e(L)}finally{P.f()}o.stn_list[n].secondaryName=N.secondaryNames}return 0!=g.length?(o.stn_list[n].children=Ee(structuredClone(g)),2==g.length&&(o.stn_list[n].branch.right=["through",g[1]])):(o.stn_list[n].children=["lineend"],Ne(o,n)),o.stn_list[n].parents=[t],0!=j.length&&(o.stn_list[n].transfer.groups[0].lines=structuredClone(j)),[n]},Ie=function(e,n,t){!function(e,n){var t=window.URL.createObjectURL(n),r=document.createElement("a");r.href=t,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t)}(e,new Blob([t],{type:n}))},Le=t(1125),Ge=function(e){var n=e.isOpen,t=e.onClose,r=(0,p.$G)().t,s=function(e){me.clear(),ge.clear(),je.clear(),ve.clear(),be.clear(),ye=new Array,we=0,Ce.clear(),Se.clear(),e.filterEdges((function(e){return e.startsWith("line")})).forEach((function(n){Ae(String(e.getEdgeAttributes(n).style))&&Oe(e,n)}));var n=0;e.forEachNode((function(e){Se.set(e,++n)}));var t,r=new Array,s=(0,xe.Z)(ge);try{for(s.s();!(t=s.n()).done;){var o=t.value;me.clear(),Ce.clear(),Re(ve.get(o),"line_root",o);var a,l="no_val",c=2147483647,d=!0,u="LINE",h=(0,xe.Z)(Ce);try{for(h.s();!(a=h.n()).done;){var x=(0,i.Z)(a.value,2),f=x[0],p=x[1];if(1==p){var m=Se.get(f);m<c&&(l=f,c=m)}3==p&&(u="BRANCH"),p>3&&(d=!1)}}catch(b){h.e(b)}finally{h.f()}if(d){var g=structuredClone(Te);"no_val"==l&&(g.loop=!0,l=ve.get(o),u="LOOP");var j=void 0;switch(e.getNodeAttributes(l).type){case O.T.GzmtrBasic:case O.T.GzmtrInt:j="gzmtr";break;case O.T.MTR:j="mtr";break;default:j="shmetro"}g.theme=structuredClone(o),g.style=structuredClone(j),g.stn_list.linestart=structuredClone(_e),g.stn_list.lineend=structuredClone(ke),me.clear();var v=Pe(l,"linestart",1,e,o,g);g.current_stn_idx=structuredClone(v[0]),g.stn_list.linestart.children=[v[0]],g.stn_list.length<=3||g.stn_list.lineend.parents.length>=3||r.push([structuredClone(g),u])}}}catch(b){s.e(b)}finally{s.f()}return structuredClone(r)}(o.useRef(window.graph).current),a=function(e){return"other"==e[0]&&"other"==e[1]?e[2]:e[1]},l=function(e){return"LOOP"==e?(0,N.jsx)(m.l2,{name:"Loop",bg:"#ff6666",fg:Le.AJ.white}):"LINE"==e?(0,N.jsx)(m.l2,{name:"Line",bg:"#33ccff",fg:Le.AJ.white}):"BRANCH"==e?(0,N.jsx)(m.l2,{name:"Branch",bg:"#007B61",fg:Le.AJ.white}):void 0},c=function(){var e,n=[],t=(0,xe.Z)(s);try{var r=function(){var t=(0,i.Z)(e.value,2),r=t[0],s=t[1],o=r.theme;n.push((0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{children:(0,N.jsx)(m.l2,{name:a(structuredClone(o)),bg:structuredClone(o[2]),fg:structuredClone(o[3])})}),(0,N.jsx)("td",{children:(0,N.jsx)(fe.I,{placeholder:"Chinese Name",id:"nameCh_"+o[0]+o[1]+o[2]+o[3],size:"sm"})}),(0,N.jsx)("td",{children:(0,N.jsx)(fe.I,{placeholder:"English Name",id:"nameEn_"+o[0]+o[1]+o[2]+o[3],size:"sm"})}),(0,N.jsx)("td",{children:(0,N.jsx)(fe.I,{placeholder:"Line Code",id:"lineNum_"+o[0]+o[1]+o[2]+o[3],size:"sm"})}),(0,N.jsx)("td",{children:l(s)}),(0,N.jsx)("td",{children:(0,N.jsx)(ie.z,{colorScheme:"blue",variant:"ghost",mr:"1",onClick:function(){var e=document.getElementById("nameCh_"+o[0]+o[1]+o[2]+o[3]),n=document.getElementById("nameEn_"+o[0]+o[1]+o[2]+o[3]),t=document.getElementById("lineNum_"+o[0]+o[1]+o[2]+o[3]);!function(e,n,t){e.line_name=n,e.line_num=String(t),console.log(e),console.log(JSON.stringify(structuredClone(e))),Ie("RMG_".concat(n[1],".json"),"application/json",JSON.stringify(structuredClone(e)))}(structuredClone(r),[e.value,n.value],t.value)},size:"sm",children:(0,N.jsx)(f.uKn,{})})})]}))};for(t.s();!(e=t.n()).done;)r()}catch(o){t.e(o)}finally{t.f()}return n};return(0,N.jsxs)($.u_,{isOpen:n,onClose:t,size:"2xl",scrollBehavior:"inside",children:[(0,N.jsx)(F.Z,{}),(0,N.jsxs)(Y.h,{children:[(0,N.jsxs)(q.x,{children:[(0,N.jsx)(ee.x,{as:"b",fontSize:"xl",children:"Generate RMG Saves"}),(0,N.jsx)(pe.u,{label:r("header.settings.pro"),children:(0,N.jsx)(C.C,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",children:"TEST"})})]}),(0,N.jsx)(K.o,{}),(0,N.jsxs)(Q.f,{children:[(0,N.jsx)(ee.x,{fontSize:"sm",mt:"3",lineHeight:"100%",children:"This function is designed to convert RMP saves into RMG saves."}),(0,N.jsx)(ee.x,{fontSize:"sm",mt:"3",lineHeight:"100%",children:"The lines in the list following are the available lines for converting. You can enter the Chinese line name in the text box on the left, the English line name in the middle, the line code (for Guangzhou Metro style) on the right, and then click the download button on the right to save your RMG saves."}),(0,N.jsx)("br",{}),0!=s.length?(0,N.jsx)("table",{children:c()}):(0,N.jsx)(ee.x,{fontSize:"md",children:"No available lines found."})]}),(0,N.jsx)(re.m,{children:(0,N.jsx)(ie.z,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:r("close")})})]})]})};function Be(){var e=(0,p.$G)().t,n=(0,b.Qy)((function(e){return e.app})).telemetry.project,t=(0,b.Qy)((function(e){return e.runtime})).nodeExists,a=o.useRef(window.graph),l=(0,V.ff)("white","gray.800"),g=o.useState("png"),y=(0,i.Z)(g,2),w=y[0],C=y[1],S={png:e("header.download.png"),svg:e("header.download.svg")},_=o.useState(100),T=(0,i.Z)(_,2),z=T[0],Z=T[1],E=Object.fromEntries([25,33,50,67,75,80,90,100,110,125,150,175,200,250,300,400,500].map((function(e){return[e,"".concat(e,"%")]}))),A=o.useState(!1),M=(0,i.Z)(A,2),P=M[0],I=M[1],L=[{type:"select",label:e("header.download.format"),value:w,options:S,onChange:function(e){return C("png"===e?"png":"svg")}}],G=[{type:"select",label:e("header.download.scale"),value:z,options:E,onChange:function(e){return Z(e)}},{type:"switch",label:e("header.download.transparent"),isChecked:P,onChange:I}],B=o.useState(!1),J=(0,i.Z)(B,2),D=J[0],U=J[1],W=o.useState(!1),H=(0,i.Z)(W,2),le=H[0],de=H[1],ue=o.useState(!1),xe=(0,i.Z)(ue,2),fe=xe[0],pe=xe[1],me=o.useState(!1),ge=(0,i.Z)(me,2),je=ge[0],ve=ge[1],be=o.useState(!1),ye=(0,i.Z)(be,2),we=ye[0],Ce=ye[1],Se=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var s,o,c,d,u,h,x,f,p,m,g,b,y,C,S,_;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U(!1),n&&j.ZP.event(v.zW.DOWNLOAD_IMAGES,{numberOfNodes:a.current.order,numberOfEdges:a.current.size}),s=(0,ae.fx)(a.current),o=s.xMin,c=s.yMin,d=s.xMax,u=s.yMax,h=d-o,x=u-c,f=document.getElementById("canvas").cloneNode(!0),(0,k.Z)(f.children).filter((function(e){return a.current.hasNode(e.id)&&a.current.getNodeAttribute(e.id,"type")===oe.Z.Virtual})).forEach((function(e){return f.removeChild(e)})),fe||f.appendChild(Ue(d-400,u-60)),f.setAttribute("viewBox","".concat(o," ").concat(c," ").concat(h," ").concat(x)),f.setAttribute("width",h.toString()),f.setAttribute("height",x.toString()),Object.entries({".rmp-name__zh":["font-family"],".rmp-name__en":["font-family"],".rmp-name__mtr__zh":["font-family"],".rmp-name__mtr__en":["font-family"],".rmp-name-station":["paint-order","stroke","stroke-width"]}).forEach((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1],s=document.querySelector(t);if(null!==s){var o=window.getComputedStyle(s);f.querySelectorAll(t).forEach((function(e){r.forEach((function(n){e.setAttribute(n,o.getPropertyValue(n))})),e.classList.remove(t)}))}})),!t[O.T.MTR]){e.next=25;break}return e.prev=12,e.next=15,ce(f);case 15:p=e.sent,(m=document.createElement("style")).textContent=p.join("\n"),f.prepend(m),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(12),alert("Failed to fonts. Fonts in the exported PNG will be missing."),console.error(e.t0);case 25:if("svg"!==w){e.next=28;break}return Je("RMP_".concat((new Date).valueOf(),".svg"),"image/svg+xml",f.outerHTML),e.abrupt("return");case 28:document.body.appendChild(f),g="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(f.outerHTML))),document.body.removeChild(f),b=document.createElement("canvas"),y=h*z/100,C=x*z/100,b.width=y,b.height=C,S=b.getContext("2d"),P||(S.fillStyle=l,S.fillRect(0,0,y,C)),(_=new Image).onload=function(){S.drawImage(_,0,0,y,C),b.toBlob((function(e){return De("RMP_".concat((new Date).valueOf(),".png"),e)}),"image/png")},_.src=g;case 40:case"end":return e.stop()}}),e,null,[[12,21]])})));return function(){return e.apply(this,arguments)}}();return(0,N.jsxs)(d.v,{id:"download",children:[(0,N.jsx)(u.j,{as:c.h,size:"sm",variant:"ghost",icon:(0,N.jsx)(f.uKn,{})}),(0,N.jsxs)(h.q,{children:[(0,N.jsx)(x.s,{icon:(0,N.jsx)(f.tfk,{}),onClick:function(){n&&j.ZP.event(v.zW.DOWNLOAD_PARAM,{"#nodes":a.current.order,"#edges":a.current.size});var e=(0,R.Ru)(b.ZP.getState().param);Je("RMP_".concat((new Date).valueOf(),".json"),"application/json",e)},children:e("header.download.config")}),(0,N.jsx)(x.s,{icon:(0,N.jsx)(f.e0s,{}),onClick:function(){return U(!0)},children:e("header.download.image")}),(0,N.jsx)(x.s,{icon:(0,N.jsx)(f.KQY,{}),onClick:function(){return Ce(!0)},children:"Generate RMG saves"})]}),(0,N.jsxs)($.u_,{size:"xl",isOpen:D,onClose:function(){return U(!1)},children:[(0,N.jsx)(F.Z,{}),(0,N.jsxs)(Y.h,{children:[(0,N.jsx)(q.x,{children:e("header.download.image")}),(0,N.jsx)(K.o,{}),(0,N.jsxs)(Q.f,{children:[(0,N.jsx)(m.M5,{fields:L}),"png"===w&&(0,N.jsx)(m.M5,{fields:G}),(0,N.jsx)("br",{}),(0,N.jsx)(X.X,{isChecked:fe,onChange:function(e){return pe(e.target.checked)},children:(0,N.jsxs)(ee.x,{children:[e("header.download.shareInfo1"),(0,N.jsxs)(ne.r,{color:"teal.500",onClick:function(){return window.open("https://railmapgen.github.io/rmp","_blank")},children:[e("header.about.rmp")," ",(0,N.jsx)(te.J,{as:f.jhj})]}),e("header.download.shareInfo2")]})}),(0,N.jsx)(X.X,{isChecked:je,onChange:function(e){return ve(e.target.checked)},children:(0,N.jsxs)(ee.x,{children:[e("header.download.termsAndConditionsInfo"),(0,N.jsxs)(ne.r,{color:"teal.500",onClick:function(){return de(!0)},children:[e("header.download.termsAndConditions")," ",(0,N.jsx)(te.J,{as:f.jhj})]}),e("header.download.period")]})})]}),(0,N.jsx)(re.m,{children:(0,N.jsx)(se.U,{children:(0,N.jsx)(ie.z,{colorScheme:"teal",variant:"outline",size:"sm",disabled:!je,onClick:Se,children:e("header.download.confirm")})})}),(0,N.jsx)(he,{isOpen:le,onClose:function(){return de(!1)}})]})]}),(0,N.jsx)(Ge,{isOpen:we,onClose:function(){return Ce(!1)}})]})}var Je=function(e,n,t){var r=new Blob([t],{type:n});De(e,r)},De=function(e,n){var t=window.URL.createObjectURL(n),r=document.createElement("a");r.href=t,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t)},Ue=function(e,n){var t=document.createElementNS("http://www.w3.org/2000/svg","g");t.setAttribute("transform","translate(".concat(e,", ").concat(n,")scale(2)"));var r=document.createElementNS("http://www.w3.org/2000/svg","image");r.setAttribute("width","40"),r.setAttribute("height","40"),r.setAttribute("x","-50"),r.setAttribute("y","-20");var s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("font-family","Arial, sans-serif"),s.setAttribute("font-size","16"),s.appendChild(document.createTextNode("Rail Map Painter"));var i=document.createElementNS("http://www.w3.org/2000/svg","text");return i.setAttribute("font-family","Arial, sans-serif"),i.setAttribute("font-size","10"),i.setAttribute("y","10"),i.appendChild(document.createTextNode("https://railmapgen.github.io/rmp/")),t.appendChild(r),t.appendChild(s),t.appendChild(i),t},We=t(176),He=t(76),Ve=t(4087),$e=t(6146),Fe=t(6718),Ye=t(7732);var qe=t.p+"static/media/github-mark.6fa18895f6e6c7772cab7049f7e05f59.svg";var Ke=t.p+"static/media/slack-mark.3474c14d58fbbab9cfa2208b01a4ac3a.svg",Qe=function(e){var n=e.isOpen,t=e.onClose,r=(0,b.u5)(),s=(0,p.$G)().t,i=j.ZP.getAppVersion();return(0,N.jsxs)($.u_,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[(0,N.jsx)(F.Z,{}),(0,N.jsxs)(Y.h,{children:[(0,N.jsx)(q.x,{children:s("header.about.title")}),(0,N.jsx)(K.o,{}),(0,N.jsxs)(Q.f,{paddingBottom:10,children:[(0,N.jsxs)(We.k,{direction:"row",children:[(0,N.jsx)(He.E,{boxSize:"128px",src:"/rmp/logo192.png"}),(0,N.jsxs)(We.k,{direction:"column",width:"100%",alignItems:"center",justifyContent:"center",children:[(0,N.jsx)(ee.x,{fontSize:"xl",as:"b",children:s("header.about.rmp")}),(0,N.jsx)(ee.x,{children:i}),(0,N.jsx)(ee.x,{}),(0,N.jsx)(ee.x,{fontSize:"sm",children:s("header.about.railmapgen")})]})]}),(0,N.jsx)(Ve.xu,{margin:5,children:(0,N.jsx)(ee.x,{fontSize:"xl",children:s("header.about.desc")})}),(0,N.jsx)(a.X,{as:"h5",size:"sm",mt:3,mb:2,children:s("header.about.contributors")}),(0,N.jsx)(a.X,{as:"h6",size:"xs",my:2,children:s("header.about.coreContributors")}),(0,N.jsxs)($e.g,{children:[(0,N.jsxs)(Fe.Vp,{size:"lg",w:"85%",onClick:function(){return window.open("https://github.com/thekingofcity","_blank")},cursor:"pointer",children:[(0,N.jsx)(Ye.q,{src:"https://github.com/thekingofcity.png",size:"lg",my:2,ml:-1,mr:2}),(0,N.jsxs)(Fe.Sn,{display:"block",width:"100%",children:[(0,N.jsx)(ee.x,{fontSize:"lg",fontWeight:"bold",mb:1,children:"thekingofcity"}),(0,N.jsx)(ee.x,{fontSize:"sm",children:s("header.about.content1")}),(0,N.jsx)(ee.x,{fontSize:"sm",align:"right",mb:1,children:s("header.about.content2")})]})]}),(0,N.jsxs)(Fe.Vp,{size:"lg",w:"85%",onClick:function(){return window.open("https://github.com/langonginc","_blank")},cursor:"pointer",children:[(0,N.jsx)(Ye.q,{src:"https://github.com/langonginc.png",size:"lg",my:2,ml:-1,mr:2}),(0,N.jsxs)(Fe.Sn,{display:"block",width:"100%",children:[(0,N.jsx)(ee.x,{fontSize:"lg",fontWeight:"bold",mb:1,children:"langonginc"}),(0,N.jsx)(ee.x,{fontSize:"sm",children:s("header.about.langonginc")}),(0,N.jsx)(ee.x,{fontSize:"sm",align:"right",mb:1,children:"--Avicii"})]})]})]}),(0,N.jsx)(a.X,{as:"h6",size:"xs",my:2,children:s("header.about.styleContributors")}),(0,N.jsx)($e.g,{children:(0,N.jsxs)(Fe.Vp,{size:"lg",w:"85%",onClick:function(){return window.open("https://github.com/203IhzElttil","_blank")},cursor:"pointer",children:[(0,N.jsx)(Ye.q,{src:"https://github.com/203IhzElttil.png",size:"lg",my:2,ml:-1,mr:2}),(0,N.jsxs)(Fe.Sn,{display:"block",width:"100%",children:[(0,N.jsx)(ee.x,{fontSize:"lg",fontWeight:"bold",mb:1,children:"203IhzElttil"}),(0,N.jsx)(ee.x,{fontSize:"sm",mb:1,children:s("header.about.203IhzElttil")})]})]})}),(0,N.jsx)(a.X,{as:"h5",size:"sm",mt:3,mb:2,children:s("header.about.contactUs")}),(0,N.jsxs)($e.g,{children:[(0,N.jsxs)(Fe.Vp,{size:"lg",w:"85%",onClick:function(){return window.open("https://github.com/railmapgen/rmp/issues","_blank")},cursor:"pointer",children:[(0,N.jsx)(Ye.q,{src:qe,size:"lg",my:2,ml:-1,mr:2}),(0,N.jsxs)(Fe.Sn,{display:"block",width:"100%",children:[(0,N.jsx)(ee.x,{fontSize:"lg",fontWeight:"bold",mb:1,children:s("header.about.github")}),(0,N.jsx)(ee.x,{fontSize:"sm",children:s("header.about.githubContent")})]})]}),(0,N.jsxs)(Fe.Vp,{size:"lg",w:"85%",onClick:function(){return window.open("https://join.slack.com/t/railmapgenerator/shared_invite/zt-1odhhta3n-DdZF~fnVwo_q0S0RJmgV8A","_blank")},cursor:"pointer",children:[(0,N.jsx)(Ye.q,{src:Ke,size:"lg",my:2,ml:-1,mr:2}),(0,N.jsxs)(Fe.Sn,{display:"block",width:"100%",children:[(0,N.jsx)(ee.x,{fontSize:"lg",fontWeight:"bold",mb:1,children:s("header.about.slack")}),(0,N.jsx)(ee.x,{fontSize:"sm",children:s("header.about.slackContent")}),(0,N.jsx)(ee.x,{fontSize:"sm",as:"i",children:"#rmg, #rmp, #palette-and-templates, #random"})]})]})]}),(0,N.jsx)(a.X,{as:"h5",size:"sm",mt:3,mb:2,children:s("header.about.linkExchange")}),(0,N.jsx)($e.g,{children:(0,N.jsxs)(Fe.Vp,{size:"lg",w:"85%",onClick:function(){return r((0,S.W3)(!0))},cursor:"pointer",children:[(0,N.jsx)(Ye.q,{src:"/rmp/images/guidaoTransit.jpg",size:"lg",my:2,ml:-1,mr:2}),(0,N.jsxs)(Fe.Sn,{display:"block",width:"100%",children:[(0,N.jsx)(ee.x,{fontSize:"lg",fontWeight:"bold",mb:1,children:s("header.about.guidaoTransit")}),(0,N.jsx)(ee.x,{fontSize:"sm",children:s("header.about.guidaoTransitContent")})]})]})})]})]})]})},Xe=t(6690),en=t(3627),nn=t(954),tn=t(8574),rn=function(){var e=o.useState(!1),n=(0,i.Z)(e,2),t=n[0],r=n[1],s=(0,b.Qy)((function(e){return e.param})).svgViewBoxZoom,a=(0,b.u5)(),l=[{type:"slider",label:"",value:400-s,min:10,max:390,step:1,onChange:function(e){return a((0,y.u4)(400-e))},leftIcon:(0,N.jsx)(f._a6,{}),rightIcon:(0,N.jsx)(f.Ers,{}),minW:160}];return(0,N.jsxs)(Xe.J,{isOpen:t,onOpen:function(){return r(!0)},onClose:function(){return r(!1)},children:[(0,N.jsx)(en.x,{children:(0,N.jsx)(c.h,{"aria-label":"zoom",variant:"ghost",size:"sm",icon:(0,N.jsx)(f.Ers,{}),onClick:function(){return r(!t)}})}),(0,N.jsx)(nn.y,{children:(0,N.jsx)(tn.b,{children:(0,N.jsx)(m.M5,{fields:l,noLabel:!0})})})]})},sn=t(1279),on=t(9549),an=t(2732),ln=t(553),cn=t(3129),dn=t(5237),un=t(8500),hn=t(4004),xn=t(2891),fn=t(5105),pn=t(1122),mn=t(4566),gn=t(8168),jn=function(e){var n=e.isOpen,t=e.onClose,r=(0,b.u5)(),s=(0,p.$G)().t,a=o.useRef(window.graph),l=o.useState(0),c=(0,i.Z)(l,2),d=c[0],u=c[1],h=o.useState(0),x=(0,i.Z)(h,2),f=x[0],g=x[1],j=[{type:"input",label:s("header.settings.procedures.translate.x"),value:d.toString(),variant:"number",onChange:function(e){return u(Number(e))},minW:"full"},{type:"input",label:s("header.settings.procedures.translate.y"),value:f.toString(),variant:"number",onChange:function(e){return g(Number(e))},minW:"full"}];return(0,N.jsxs)($.u_,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[(0,N.jsx)(F.Z,{}),(0,N.jsxs)(Y.h,{children:[(0,N.jsx)(q.x,{children:s("header.settings.procedures.translate.title")}),(0,N.jsx)(K.o,{}),(0,N.jsxs)(Q.f,{children:[s("header.settings.procedures.translate.content"),(0,N.jsx)(m.M5,{fields:j})]}),(0,N.jsxs)(re.m,{children:[(0,N.jsx)(ie.z,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:s("cancel")}),(0,N.jsx)(ie.z,{colorScheme:"red",onClick:function(){a.current.forEachNode((function(e,n){a.current.updateNodeAttribute(e,"x",(function(e){return(null!==e&&void 0!==e?e:0)+d})),a.current.updateNodeAttribute(e,"y",(function(e){return(null!==e&&void 0!==e?e:0)+f}))})),r((0,S.ML)()),r((0,S.lH)()),r((0,y.DR)(a.current.export())),t()},children:s("apply")})]})]})]})},vn=function(e){var n=e.isOpen,t=e.onClose,r=(0,b.u5)(),s=(0,p.$G)().t,a=o.useRef(window.graph),l=o.useState(1),c=(0,i.Z)(l,2),d=c[0],u=c[1],h=[{type:"input",label:s("header.settings.procedures.scale.factor"),value:d.toString(),variant:"number",onChange:function(e){return u(Number(e))},minW:"full"}];return(0,N.jsxs)($.u_,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[(0,N.jsx)(F.Z,{}),(0,N.jsxs)(Y.h,{children:[(0,N.jsx)(q.x,{children:s("header.settings.procedures.scale.title")}),(0,N.jsx)(K.o,{}),(0,N.jsxs)(Q.f,{children:[s("header.settings.procedures.scale.content"),(0,N.jsx)(m.M5,{fields:h})]}),(0,N.jsxs)(re.m,{children:[(0,N.jsx)(ie.z,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:s("cancel")}),(0,N.jsx)(ie.z,{colorScheme:"red",onClick:function(){a.current.forEachNode((function(e,n){a.current.updateNodeAttribute(e,"x",(function(e){return(null!==e&&void 0!==e?e:0)*d})),a.current.updateNodeAttribute(e,"y",(function(e){return(null!==e&&void 0!==e?e:0)*d}))})),r((0,S.ML)()),r((0,S.lH)()),r((0,y.DR)(a.current.export())),t()},children:s("apply")})]})]})]})},bn=function(e){var n=e.isOpen,t=e.onClose,r=(0,b.u5)(),s=(0,p.$G)().t,a=o.useRef(window.graph),l=Object.fromEntries(Object.entries(E.Z).map((function(e){var n=(0,i.Z)(e,2),t=n[0],r=n[1];return[t,s(r.metadata.displayName).toString()]}))),c=o.useState(Object.keys(E.Z).at(0)),d=(0,i.Z)(c,2),u=d[0],h=d[1],x=o.useState(Object.keys(E.Z).at(1)),f=(0,i.Z)(x,2),g=f[0],j=f[1],v=[{type:"select",label:s("header.settings.procedures.changeType.changeFrom"),value:u,options:l,disabledOptions:[g],onChange:function(e){return h(e)},minW:"full"},{type:"select",label:s("header.settings.procedures.changeType.changeTo"),value:g,options:l,disabledOptions:[u],onChange:function(e){return j(e)},minW:"full"}];return(0,N.jsxs)($.u_,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[(0,N.jsx)(F.Z,{}),(0,N.jsxs)(Y.h,{children:[(0,N.jsxs)(q.x,{children:[(0,N.jsx)(ee.x,{as:"b",fontSize:"xl",children:s("header.settings.procedures.changeType.title")}),(0,N.jsx)(pe.u,{label:s("header.settings.pro"),children:(0,N.jsx)(C.C,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",children:"PRO"})})]}),(0,N.jsx)(K.o,{}),(0,N.jsxs)(Q.f,{children:[(0,N.jsx)(m.M5,{fields:v}),(0,N.jsx)(ee.x,{fontSize:"sm",mt:"3",lineHeight:"100%",color:"red.500",children:s("header.settings.procedures.changeType.info")})]}),(0,N.jsxs)(re.m,{children:[(0,N.jsx)(ie.z,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:s("cancel")}),(0,N.jsx)(ie.z,{colorScheme:"red",onClick:function(){(0,pn.x8)(a.current,u,g),r((0,S.ML)()),r((0,y.DR)(a.current.export()))},children:s("apply")})]})]})]})},yn=function(e){var n=e.isOpen,t=e.onClose,r=(0,b.u5)(),s=(0,b.Qy)((function(e){return e.runtime})).theme,a=(0,p.$G)().t,l=o.useRef(window.graph),c=o.useState(s),d=(0,i.Z)(c,2),u=d[0],h=d[1],x=o.useState(!1),f=(0,i.Z)(x,2),m=f[0],g=f[1];return(0,N.jsxs)($.u_,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[(0,N.jsx)(F.Z,{}),(0,N.jsxs)(Y.h,{children:[(0,N.jsx)(q.x,{children:a("header.settings.procedures.removeLines.title")}),(0,N.jsx)(K.o,{}),(0,N.jsxs)(Q.f,{children:[a("header.settings.procedures.removeLines.content"),(0,N.jsx)(gn.Z,{theme:u,onClick:function(){return g(!0)}}),(0,N.jsx)(mn.Z,{isOpen:m,defaultTheme:u,onClose:function(){return g(!1)},onUpdate:function(e){return h(e)}})]}),(0,N.jsxs)(re.m,{children:[(0,N.jsx)(ie.z,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:a("cancel")}),(0,N.jsx)(ie.z,{colorScheme:"red",onClick:function(){l.current.filterEdges((function(e,n,t,r,s,i,o){return n.style===A.R.SingleColor&&JSON.stringify(n[A.R.SingleColor].color)===JSON.stringify(u)})).forEach((function(e){return l.current.dropEdge(e)})),r((0,S.lH)()),r((0,y.DR)(l.current.export())),t()},children:a("remove")})]})]})]})},wn={width:"100%",justifyContent:"space-between"},Cn={fontFamily:"-apple-system"},Sn=function(e){var n=e.isOpen,t=e.onClose,r=(0,b.Qy)((function(e){return e.runtime})).keepLastPath,s=(0,b.u5)(),a=(0,p.$G)().t,l=(0,V.ff)("primary.500","primary.300"),c=o.useState(!1),d=(0,i.Z)(c,2),u=d[0],h=d[1],x=o.useState(!1),m=(0,i.Z)(x,2),g=m[0],v=m[1],y=o.useState(!1),w=(0,i.Z)(y,2),_=w[0],k=w[1],T=o.useState(!1),z=(0,i.Z)(T,2),Z=z[0],E=z[1],A=j.ZP.isAllowAnalytics(),O=(0,b.Qy)((function(e){return e.app})).telemetry.app;return(0,N.jsxs)($.u_,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[(0,N.jsx)(F.Z,{}),(0,N.jsxs)(Y.h,{children:[(0,N.jsx)(q.x,{children:a("header.settings.title")}),(0,N.jsx)(K.o,{}),(0,N.jsx)(Q.f,{children:(0,N.jsxs)($e.g,{divider:(0,N.jsx)(sn.c,{borderColor:"gray.200"}),children:[(0,N.jsxs)(Ve.xu,{width:"100%",mb:"3",children:[(0,N.jsx)(ee.x,{as:"b",fontSize:"xl",children:a("header.settings.preference.title")}),(0,N.jsx)(Ve.xu,{mt:"3",children:(0,N.jsxs)(Ve.xu,{display:"flex",mb:"1",children:[(0,N.jsx)(ee.x,{flex:"1",children:a("header.settings.preference.keepLastPath")}),(0,N.jsx)(on.r,{isChecked:r,onChange:function(e){var n=e.target.checked;return s((0,S.Mm)(n))}})]})})]}),(0,N.jsxs)(Ve.xu,{width:"100%",mb:"3",children:[(0,N.jsx)(ee.x,{as:"b",fontSize:"xl",children:a("header.settings.shortcuts.title")}),(0,N.jsx)(Ve.xu,{mt:"3",children:(0,N.jsxs)(an.i,{children:[(0,N.jsx)(ln.h,{children:(0,N.jsxs)(cn.Tr,{children:[(0,N.jsx)(dn.Th,{children:a("header.settings.shortcuts.keys")}),(0,N.jsx)(dn.Th,{children:a("header.settings.shortcuts.description")})]})}),(0,N.jsxs)(un.p,{children:[(0,N.jsxs)(cn.Tr,{children:[(0,N.jsx)(hn.Td,{children:(0,N.jsx)(xn.T,{children:"f"})}),(0,N.jsx)(hn.Td,{children:a("header.settings.shortcuts.f")})]}),(0,N.jsxs)(cn.Tr,{children:[(0,N.jsx)(hn.Td,{children:(0,N.jsx)(f.InZ,{})}),(0,N.jsx)(hn.Td,{children:a("header.settings.shortcuts.arrowUpward")})]}),(0,N.jsxs)(cn.Tr,{children:[(0,N.jsx)(hn.Td,{children:(0,N.jsx)(f.KYK,{})}),(0,N.jsx)(hn.Td,{children:a("header.settings.shortcuts.arrowBack")})]}),(0,N.jsxs)(cn.Tr,{children:[(0,N.jsx)(hn.Td,{children:(0,N.jsx)(f.hdK,{})}),(0,N.jsx)(hn.Td,{children:a("header.settings.shortcuts.arrowForward")})]}),(0,N.jsxs)(cn.Tr,{children:[(0,N.jsx)(hn.Td,{children:(0,N.jsx)(f.t9$,{})}),(0,N.jsx)(hn.Td,{children:a("header.settings.shortcuts.arrowDownward")})]}),(0,N.jsxs)(cn.Tr,{children:[(0,N.jsx)(hn.Td,{children:(0,N.jsx)(xn.T,{children:"i"})}),(0,N.jsx)(hn.Td,{children:a("header.settings.shortcuts.i")})]}),(0,N.jsxs)(cn.Tr,{children:[(0,N.jsx)(hn.Td,{children:(0,N.jsx)(xn.T,{children:"j"})}),(0,N.jsx)(hn.Td,{children:a("header.settings.shortcuts.j")})]}),(0,N.jsxs)(cn.Tr,{children:[(0,N.jsx)(hn.Td,{children:(0,N.jsx)(xn.T,{children:"k"})}),(0,N.jsx)(hn.Td,{children:a("header.settings.shortcuts.k")})]}),(0,N.jsxs)(cn.Tr,{children:[(0,N.jsx)(hn.Td,{children:(0,N.jsx)(xn.T,{children:"l"})}),(0,N.jsx)(hn.Td,{children:a("header.settings.shortcuts.l")})]}),(0,N.jsxs)(cn.Tr,{children:[(0,N.jsx)(hn.Td,{children:ae.jc?(0,N.jsx)(xn.T,{sx:Cn,children:"\u21e7"}):(0,N.jsx)(xn.T,{children:"shift"})}),(0,N.jsx)(hn.Td,{children:a("header.settings.shortcuts.shift")})]}),(0,N.jsxs)(cn.Tr,{children:[(0,N.jsx)(hn.Td,{children:ae.jc?(0,N.jsx)(xn.T,{sx:Cn,children:"\u2325"}):(0,N.jsx)(xn.T,{children:"alt"})}),(0,N.jsx)(hn.Td,{children:a("header.settings.shortcuts.alt")})]}),(0,N.jsxs)(cn.Tr,{children:[(0,N.jsx)(hn.Td,{children:ae.jc?(0,N.jsx)(xn.T,{sx:Cn,children:"\u232b"}):(0,N.jsx)(xn.T,{children:"delete"})}),(0,N.jsx)(hn.Td,{children:a("header.settings.shortcuts.delete")})]}),(0,N.jsxs)(cn.Tr,{children:[(0,N.jsxs)(hn.Td,{children:[ae.jc?(0,N.jsx)(xn.T,{sx:Cn,children:"\u2318"}):(0,N.jsx)(xn.T,{children:"ctrl"})," + ",(0,N.jsx)(xn.T,{children:"z"})]}),(0,N.jsx)(hn.Td,{children:a("header.settings.shortcuts.undo")})]}),(0,N.jsxs)(cn.Tr,{children:[(0,N.jsx)(hn.Td,{children:ae.jc?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(xn.T,{sx:Cn,children:"\u21e7"})," + ",(0,N.jsx)(xn.T,{sx:Cn,children:"\u2318"})," + ",(0,N.jsx)(xn.T,{children:"z"})]}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(xn.T,{children:"ctrl"})," + ",(0,N.jsx)(xn.T,{children:"y"})]})}),(0,N.jsx)(hn.Td,{children:a("header.settings.shortcuts.redo")})]})]})]})})]}),(0,N.jsxs)(Ve.xu,{width:"100%",mb:"3",children:[(0,N.jsx)(ee.x,{as:"b",fontSize:"xl",children:a("header.settings.procedures.title")}),(0,N.jsxs)(Ve.xu,{mt:"3",children:[(0,N.jsx)(ie.z,{sx:wn,rightIcon:(0,N.jsx)(f.Q7r,{}),onClick:function(){return h(!0)},children:a("header.settings.procedures.translate.title")}),(0,N.jsx)(jn,{isOpen:u,onClose:function(){return h(!1)}}),(0,N.jsx)(ie.z,{sx:wn,rightIcon:(0,N.jsx)(f.Q7r,{}),onClick:function(){return v(!0)},children:a("header.settings.procedures.scale.title")}),(0,N.jsx)(vn,{isOpen:g,onClose:function(){return v(!1)}}),(0,N.jsx)(ie.z,{sx:wn,rightIcon:(0,N.jsx)(f.Q7r,{}),onClick:function(){return k(!0)},children:(0,N.jsxs)(Ve.xu,{children:[a("header.settings.procedures.changeType.title"),(0,N.jsx)(pe.u,{label:a("header.settings.pro"),children:(0,N.jsx)(C.C,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",children:"PRO"})})]})}),(0,N.jsx)(bn,{isOpen:_,onClose:function(){return k(!1)}}),(0,N.jsx)(ie.z,{sx:wn,rightIcon:(0,N.jsx)(f.Q7r,{}),onClick:function(){return E(!0)},children:a("header.settings.procedures.removeLines.title")}),(0,N.jsx)(yn,{isOpen:Z,onClose:function(){return E(!1)}})]})]}),(0,N.jsxs)(Ve.xu,{width:"100%",mb:"3",children:[(0,N.jsx)(ee.x,{as:"b",fontSize:"xl",children:a("header.settings.telemetry.title")}),(0,N.jsxs)(Ve.xu,{mt:"3",children:[(0,N.jsxs)(Ve.xu,{display:"flex",mb:"1",children:[(0,N.jsx)(ee.x,{flex:"1",children:a("header.settings.telemetry.essential")}),(0,N.jsx)(on.r,{isChecked:A,isDisabled:!0})]}),(0,N.jsx)(ee.x,{fontSize:"sm",lineHeight:"100%",color:"gray.600",children:a("header.settings.telemetry.essentialInfo")}),(0,N.jsxs)(ne.r,{color:l,fontSize:"sm",lineHeight:"100%",href:"https://support.google.com/analytics/answer/11593727",isExternal:!0,children:[a("header.settings.telemetry.essentialLink")," ",(0,N.jsx)(te.J,{as:f.jhj})]}),(0,N.jsxs)(Ve.xu,{display:"flex",mb:"1",children:[(0,N.jsx)(ee.x,{flex:"1",children:a("header.settings.telemetry.additional")}),(0,N.jsx)(on.r,{isChecked:O,onChange:function(e){var n,t=e.target.checked;return n=t,s((0,fn.uJ)(n))}})]}),(0,N.jsx)(ee.x,{fontSize:"sm",lineHeight:"100%",color:"gray.600",children:a("header.settings.telemetry.additionalInfo")})]})]})]})})]})]})};function _n(){var e=(0,p.$G)().t,n=(0,b.u5)(),t=(0,b.Qy)((function(e){return e.app})).telemetry.app,w=(0,b.Qy)((function(e){return e.param})),C=w.past,S=w.future,_=o.useState(!1),k=(0,i.Z)(_,2),T=k[0],z=k[1],Z=o.useState(!1),E=(0,i.Z)(Z,2),A=E[0],O=E[1],R=(0,m.$H)(j.ZP.getEnv),M=(0,m.$H)(j.ZP.getAppVersion);o.useEffect((function(){t&&R!==j.Sy.DEV&&j.ZP.event(v.zW.APP_LOAD,{isStandaloneWindow:j.ZP.isStandaloneWindow()})}),[R]);var P=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j.ZP.getI18nInstance().changeLanguage(n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,N.jsxs)(m.Td,{children:[(0,N.jsx)(a.X,{as:"h4",size:"md",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:e("header.about.rmp")}),(0,N.jsx)(m.xt,{environment:R,version:M,popoverHeader:R===j.Sy.PRD?void 0:(0,N.jsxs)(p.cC,{i18nKey:"header.popoverHeader",environment:R,children:["You're on ",{environment:R}," environment!"]}),popoverBody:R===j.Sy.PRD?void 0:(0,N.jsx)(p.cC,{i18nKey:"header.popoverBody",children:"This is a testing environment where we test the latest beta RMP."})}),(0,N.jsxs)(l.E,{ml:"auto",children:[(0,N.jsx)(l.U,{children:(0,N.jsx)(c.h,{size:"sm",variant:"ghost","aria-label":"Undo",icon:(0,N.jsx)(f.TsG,{}),disabled:0===C.length,onClick:function(){return n((0,y.wK)())}})}),(0,N.jsx)(l.U,{children:(0,N.jsx)(c.h,{size:"sm",variant:"ghost","aria-label":"Redo",icon:(0,N.jsx)(f.VUZ,{}),disabled:0===S.length,onClick:function(){return n((0,y.b)())}})}),(0,N.jsx)(l.U,{children:(0,N.jsx)(rn,{})}),(0,N.jsx)(l.U,{children:(0,N.jsx)(W,{})}),(0,N.jsx)(l.U,{children:(0,N.jsx)(Be,{})}),j.ZP.isStandaloneWindow()&&(0,N.jsx)(l.U,{children:(0,N.jsxs)(d.v,{children:[(0,N.jsx)(u.j,{as:c.h,icon:(0,N.jsx)(f.mp2,{}),variant:"ghost",size:"sm"}),(0,N.jsx)(h.q,{children:["en","zh-Hans","zh-Hant","ja","ko"].map((function(e){return(0,N.jsx)(x.s,{onClick:function(){return P(e)},children:g.tK[e][e]},e)}))})]})}),(0,N.jsx)(l.U,{children:(0,N.jsx)(c.h,{size:"sm",variant:"ghost","aria-label":"Settings",icon:(0,N.jsx)(f.b9P,{}),onClick:function(){return z(!0)}})}),(0,N.jsx)(l.U,{children:(0,N.jsx)(c.h,{size:"sm",variant:"ghost","aria-label":"Help",icon:(0,N.jsx)(f.r$n,{}),onClick:function(){return O(!0)}})})]}),(0,N.jsx)(Sn,{isOpen:T,onClose:function(){return z(!1)}}),(0,N.jsx)(Qe,{isOpen:A,onClose:function(){return O(!1)}})]})}var kn=t(7498),Tn=t(8618);function zn(){var e=(0,b.u5)(),n=(0,b.Qy)((function(e){return e.runtime.globalAlerts}));return(0,N.jsx)(N.Fragment,{children:Object.entries(n).map((function(n){var t=(0,i.Z)(n,2),r=t[0],s=t[1],o=s.message,a=s.url,l=s.linkedApp;return(0,N.jsxs)(kn.b,{status:r,variant:"solid",size:"xs",pl:3,pr:1,py:0,zIndex:"1",children:[(0,N.jsx)(Tn.z,{}),l?(0,N.jsx)(ne.r,{onClick:function(){return function(e){j.ZP.isStandaloneWindow()?window.open("/".concat(e),"_blank"):j.ZP.openApp(e)}(l)},children:o}):a?(0,N.jsx)(ne.r,{href:a,target:"_blank",children:o}):o,(0,N.jsx)(L.P,{ml:"auto",onClick:function(){return e((0,S.sy)(r))}})]},r)}))})}function Zn(){return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(_n,{}),(0,N.jsx)(zn,{})]})}},1122:function(e,n,t){t.d(n,{Bd:function(){return x},Kz:function(){return d},Vz:function(){return h},x8:function(){return u}});var r=t(4942),s=t(1413),i=t(3486),o=t(8817),a=t(3649),l=t(7599),c=[i.T.ShmetroBasic2020],d=function(e,n,t){var i=e.getNodeAttribute(n,"type"),o=e.getNodeAttribute(n,i).names,l=(0,s.Z)((0,s.Z)({},a.Z[t].defaultAttrs),{},{names:o});Object.values(c).includes(i)&&Object.values(c).includes(t)||(l.nameOffsetX=e.getNodeAttribute(n,i).nameOffsetX,l.nameOffsetY=e.getNodeAttribute(n,i).nameOffsetY),e.removeNodeAttribute(n,i),e.mergeNodeAttributes(n,(0,r.Z)({type:t},t,l))},u=function(e,n,t){return e.filterNodes((function(e,t){return e.startsWith("stn")&&t.type===n})).forEach((function(n){d(e,n,t)}))},h=function(e,n,t){var s=e.getEdgeAttribute(n,"type");e.removeEdgeAttribute(n,s);var i=JSON.parse(JSON.stringify(l.V[t].defaultAttrs));e.mergeEdgeAttributes(n,(0,r.Z)({type:t},t,i))},x=function(e,n,t,s){var i=e.getEdgeAttribute(n,"style");e.removeEdgeAttribute(n,i);var a=JSON.parse(JSON.stringify(l.b[t].defaultAttrs));t===o.R.SingleColor&&s&&(a.color=s),e.mergeEdgeAttributes(n,(0,r.Z)({style:t},t,a)),t===o.R.River?e.setEdgeAttribute(n,"zIndex",-5):e.setEdgeAttribute(n,"zIndex",0)}},3300:function(e,n,t){t.d(n,{Z9:function(){return s},fx:function(){return i},jc:function(){return o},yK:function(){return r}});var r=function(e){var n=e.currentTarget.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}},s=function(e,n){return Math.round(e/n)*n},i=function(e){var n=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE],t=n[0],r=n[1],s=n[2],i=n[3];return e.forEachNode((function(e,n){t=Math.min(n.x,t),r=Math.min(n.y,r),s=Math.max(n.x,s),i=Math.max(n.y,i)})),{xMin:t-=100,yMin:r-=100,xMax:s+=150,yMax:i+=150}},o=navigator.platform.startsWith("Mac")}}]);
//# sourceMappingURL=WindowHeader.af559af6.chunk.js.map