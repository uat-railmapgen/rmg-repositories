!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}var n=["version"],t=["version"];function r(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=f(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==t.return||t.return()}finally{if(a)throw s}}}}function i(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */i=function(){return n};var n={},t=Object.prototype,r=t.hasOwnProperty,s=Object.defineProperty||function(e,n,t){e[n]=t.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,n,t){return Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{u({},"")}catch(H){u=function(e,n,t){return e[n]=t}}function h(e,n,t,r){var i=n&&n.prototype instanceof p?n:p,o=Object.create(i.prototype),a=new C(r||[]);return s(o,"_invoke",{value:O(e,t,a)}),o}function d(e,n,t){try{return{type:"normal",arg:e.call(n,t)}}catch(H){return{type:"throw",arg:H}}}n.wrap=h;var f={};function p(){}function m(){}function g(){}var x={};u(x,a,(function(){return this}));var j=Object.getPrototypeOf,v=j&&j(j(_([])));v&&v!==t&&r.call(v,a)&&(x=v);var y=g.prototype=p.prototype=Object.create(x);function b(e){["next","throw","return"].forEach((function(n){u(e,n,(function(e){return this._invoke(n,e)}))}))}function w(n,t){function i(s,o,a,c){var l=d(n[s],n,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==e(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,a,c)}),(function(e){i("throw",e,a,c)})):t.resolve(h).then((function(e){u.value=e,a(u)}),(function(e){return i("throw",e,a,c)}))}c(l.arg)}var o;s(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function O(e,n,t){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return E()}for(t.method=i,t.arg=s;;){var o=t.delegate;if(o){var a=S(o,t);if(a){if(a===f)continue;return a}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var c=d(e,n,t);if("normal"===c.type){if(r=t.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:t.done}}"throw"===c.type&&(r="completed",t.method="throw",t.arg=c.arg)}}}function S(e,n){var t=n.method,r=e.iterator[t];if(void 0===r)return n.delegate=null,"throw"===t&&e.iterator.return&&(n.method="return",n.arg=void 0,S(e,n),"throw"===n.method)||"return"!==t&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+t+"' method")),f;var i=d(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,f;var s=i.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,f):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function k(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function z(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function _(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var t=-1,i=function n(){for(;++t<e.length;)if(r.call(e,t))return n.value=e[t],n.done=!1,n;return n.value=void 0,n.done=!0,n};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return m.prototype=g,s(y,"constructor",{value:g,configurable:!0}),s(g,"constructor",{value:m,configurable:!0}),m.displayName=u(g,l,"GeneratorFunction"),n.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===m||"GeneratorFunction"===(n.displayName||n.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(y),e},n.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,c,(function(){return this})),n.AsyncIterator=w,n.async=function(e,t,r,i,s){void 0===s&&(s=Promise);var o=new w(h(e,t,r,i),s);return n.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(y),u(y,l,"Generator"),u(y,a,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var n=Object(e),t=[];for(var r in n)t.push(r);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in n)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=_,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(z),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return t("end");if(s.tryLoc<=this.prev){var a=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(a&&c){if(this.prev<s.catchLoc)return t(s.catchLoc,!0);if(this.prev<s.finallyLoc)return t(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return t(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return t(s.finallyLoc)}}}},abrupt:function(e,n){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=n&&n<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=n,s?(this.method="next",this.next=s.finallyLoc,f):this.complete(o)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),f},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),z(t),f}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.tryLoc===e){var r=t.completion;if("throw"===r.type){var i=r.arg;z(t)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,t){return this.delegate={iterator:_(e),resultName:n,nextLoc:t},"next"===this.method&&(this.arg=void 0),f}},n}function s(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function o(e,n,t,r,i,s,o){try{var a=e[s](o),c=a.value}catch(l){return void t(l)}a.done?n(c):Promise.resolve(c).then(r,i)}function a(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var s=e.apply(n,t);function a(e){o(s,r,i,a,c,"next",e)}function c(e){o(s,r,i,a,c,"throw",e)}a(void 0)}))}}function c(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){h(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function h(n,t,r){return(t=function(n){var t=function(n,t){if("object"!==e(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"===e(t)?t:String(t)}(t))in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function d(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,s,o,a=[],c=!0,l=!1;try{if(s=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=s.call(t)).done)&&(a.push(r.value),a.length!==n);c=!0);}catch(u){l=!0,i=u}finally{try{if(!c&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}(e,n)||f(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,n){if(e){if("string"==typeof e)return p(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?p(e,n):void 0}}function p(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}System.register(["./chakra-legacy-6a2b2acd.js","./react-legacy-d8ea2a5a.js","./index-legacy-664a32a6.js","./stations-legacy-6f6b4d26.js","./helpers-legacy-45987c2a.js","./change-types-legacy-1d7f7490.js"],(function(e,o){"use strict";var l,f,p,m,g,x,j,v,y,b,w,O,S,k,z,C,_,E,H,A,N,P,R,T,I,L,M,B,G,D,W,F,U,V,J,K,Y,q,$,Z,Q,X,ee,ne,te,re,ie,se,oe,ae,ce,le,ue,he,de,fe,pe,me,ge,xe,je,ve,ye,be,we,Oe,Se,ke,ze,Ce,_e,Ee,He,Ae,Ne,Pe,Re,Te,Ie,Le,Me,Be,Ge,De,We,Fe,Ue,Ve,Je,Ke,Ye,qe,$e,Ze,Qe,Xe,en,nn,tn,rn,sn,on,an,cn,ln,un,hn,dn,fn,pn,mn,gn,xn,jn,vn,yn,bn,wn,On,Sn,kn,zn,Cn,_n,En;return{setters:[function(e){l=e.a9,f=e.j,p=e.aa,m=e.Q,g=e.ab,x=e.ac,j=e.G,v=e.ad,y=e.ae,b=e.k,w=e.a0,O=e.M,S=e.a1,k=e.p,z=e.s,C=e.af,_=e.q,E=e.r,H=e.I,A=e.h,N=e.t,P=e.ag,R=e.ah,T=e.g,I=e.w,L=e.a8,M=e.v,B=e.ai,G=e.aj,D=e.F,W=e.$,F=e.B,U=e.ak,V=e.a2,J=e.al,K=e.am,Y=e.an,q=e.c,$=e.i,Z=e.e,Q=e.f,X=e.ao,ee=e.O,ne=e.ap,te=e.aq,re=e.ar,ie=e.as,se=e.at,oe=e.au,ae=e.av,ce=e.aw,le=e.ax,ue=e.x,he=e.y},function(e){de=e.g,fe=e.r,pe=e._,me=e.e,ge=e.b},function(e){xe=e.w,je=e.g,ve=e.a,ye=e.b,be=e.I,we=e.u,Oe=e.r,Se=e.n,ke=e.S,ze=e.L,Ce=e.l,_e=e.c,Ee=e.R,He=e.d,Ae=e.e,Ne=e.s,Pe=e.f,Re=e.h,Te=e.i,Ie=e.j,Le=e.M,Me=e.k,Be=e.m,Ge=e.o,De=e.p,We=e.q,Fe=e.t,Ue=e.C,Ve=e.v,Je=e.x,Ke=e.y,Ye=e.z,qe=e.A,$e=e.B,Ze=e.D,Qe=e.E,Xe=e.F,en=e.G,nn=e.H,tn=e.J,rn=e.K,sn=e.N,on=e.T,an=e.O,cn=e.P,ln=e.Q,un=e.U,hn=e.V,dn=e.W,fn=e.X,pn=e.Y,mn=e.Z,gn=e._,xn=e.$,jn=e.a0,vn=e.a1,yn=e.a2,bn=e.a3,wn=e.a4,On=e.a5,Sn=e.a6,kn=e.a7},function(e){zn=e.s},function(e){Cn=e.c,_n=e.i},function(e){En=e.c}],execute:function(){function o(e,n){if(null==e)return{};var t,r,i=l(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}e("default",(function(){return f.jsxs(f.Fragment,{children:[f.jsx(Xt,{}),f.jsx(er,{})]})}));var Hn=de({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),An=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function Nn(e){var n={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=e.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(n.name=t[1],(Hn[t[1]]||"/"===e.charAt(e.length-2))&&(n.voidElement=!0),n.name.startsWith("!--"))){var r=e.indexOf("--\x3e");return{type:"comment",comment:-1!==r?e.slice(4,r):""}}for(var i=new RegExp(An),s=null;null!==(s=i.exec(e));)if(s[0].trim())if(s[1]){var o=s[1].trim(),a=[o,""];o.indexOf("=")>-1&&(a=o.split("=")),n.attrs[a[0]]=a[1],i.lastIndex--}else s[2]&&(n.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return n}var Pn=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Rn=/^\s*$/,Tn=Object.create(null);var In=function(e,n){n||(n={}),n.components||(n.components=Tn);var t,r=[],i=[],s=-1,o=!1;if(0!==e.indexOf("<")){var a=e.indexOf("<");r.push({type:"text",content:-1===a?e:e.substring(0,a)})}return e.replace(Pn,(function(a,c){if(o){if(a!=="</"+t.name+">")return;o=!1}var l,u="/"!==a.charAt(1),h=a.startsWith("\x3c!--"),d=c+a.length,f=e.charAt(d);if(h){var p=Nn(a);return s<0?(r.push(p),r):((l=i[s]).children.push(p),r)}if(u&&(s++,"tag"===(t=Nn(a)).type&&n.components[t.name]&&(t.type="component",o=!0),t.voidElement||o||!f||"<"===f||t.children.push({type:"text",content:e.slice(d,e.indexOf("<",d))}),0===s&&r.push(t),(l=i[s-1])&&l.children.push(t),i[s]=t),(!u||t.voidElement)&&(s>-1&&(t.voidElement||t.name===a.slice(2,-1))&&(s--,t=-1===s?r:i[s]),!o&&"<"!==f&&f)){l=-1===s?r:i[s].children;var m=e.indexOf("<",d),g=e.slice(d,-1===m?void 0:m);Rn.test(g)&&(g=" "),(m>-1&&s+l.length>=0||" "!==g)&&l.push({type:"text",content:g})}})),r},Ln=["format"],Mn=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function Bn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Gn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Bn(Object(t),!0).forEach((function(n){pe(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Bn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Dn(e,n){if(!e)return!1;var t=e.props?e.props.children:e.children;return n?t.length>0:!!t}function Wn(e){return e?e.props?e.props.children:e.children:[]}function Fn(e){return Array.isArray(e)?e:[e]}function Un(e,n){if(!e)return"";var t="",r=Fn(e),i=n.transSupportBasicHtmlNodes&&n.transKeepBasicHtmlNodesFor?n.transKeepBasicHtmlNodesFor:[];return r.forEach((function(e,r){if("string"==typeof e)t+="".concat(e);else if(fe.isValidElement(e)){var s=Object.keys(e.props).length,a=i.indexOf(e.type)>-1,c=e.props.children;if(!c&&a&&0===s)t+="<".concat(e.type,"/>");else if(c||a&&0===s)if(e.props.i18nIsDynamicList)t+="<".concat(r,"></").concat(r,">");else if(a&&1===s&&"string"==typeof c)t+="<".concat(e.type,">").concat(c,"</").concat(e.type,">");else{var l=Un(c,n);t+="<".concat(r,">").concat(l,"</").concat(r,">")}else t+="<".concat(r,"></").concat(r,">")}else if(null===e)ve("Trans: the passed in value is invalid - seems you passed in a null child.");else if("object"===me(e)){var u=e.format,h=o(e,Ln),d=Object.keys(h);if(1===d.length){var f=u?"".concat(d[0],", ").concat(u):d[0];t+="{{".concat(f,"}}")}else ve("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",e)}else ve("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",e)})),t}function Vn(e,n,t,r,i,s){if(""===n)return[];var o=r.transKeepBasicHtmlNodesFor||[],a=n&&new RegExp(o.join("|")).test(n);if(!e&&!a)return[n];var c={};!function e(n){Fn(n).forEach((function(n){"string"!=typeof n&&(Dn(n)?e(Wn(n)):"object"!==me(n)||fe.isValidElement(n)||Object.assign(c,n))}))}(e);var l=In("<0>".concat(n,"</0>")),u=Gn(Gn({},c),i);function h(e,n,t){var r=Wn(e),i=f(r,n.children,t);return function(e){return"[object Array]"===Object.prototype.toString.call(e)&&e.every((function(e){return fe.isValidElement(e)}))}(r)&&0===i.length?r:i}function d(e,n,t,r,i){e.dummy&&(e.children=n),t.push(fe.cloneElement(e,Gn(Gn({},e.props),{},{key:r}),i?void 0:n))}function f(n,i,c){var l=Fn(n);return Fn(i).reduce((function(n,i,p){var m,g,x,j=i.children&&i.children[0]&&i.children[0].content&&t.services.interpolator.interpolate(i.children[0].content,u,t.language);if("tag"===i.type){var v=l[parseInt(i.name,10)];!v&&1===c.length&&c[0][i.name]&&(v=c[0][i.name]),v||(v={});var y=0!==Object.keys(i.attrs).length?(m={props:i.attrs},(x=Gn({},g=v)).props=Object.assign(m.props,g.props),x):v,b=fe.isValidElement(y),w=b&&Dn(i,!0)&&!i.voidElement,O=a&&"object"===me(y)&&y.dummy&&!b,S="object"===me(e)&&null!==e&&Object.hasOwnProperty.call(e,i.name);if("string"==typeof y){var k=t.services.interpolator.interpolate(y,u,t.language);n.push(k)}else if(Dn(y)||w){d(y,h(y,i,c),n,p)}else if(O){var z=f(l,i.children,c);n.push(fe.cloneElement(y,Gn(Gn({},y.props),{},{key:p}),z))}else if(Number.isNaN(parseFloat(i.name))){if(S)d(y,h(y,i,c),n,p,i.voidElement);else if(r.transSupportBasicHtmlNodes&&o.indexOf(i.name)>-1)if(i.voidElement)n.push(fe.createElement(i.name,{key:"".concat(i.name,"-").concat(p)}));else{var C=f(l,i.children,c);n.push(fe.createElement(i.name,{key:"".concat(i.name,"-").concat(p)},C))}else if(i.voidElement)n.push("<".concat(i.name," />"));else{var _=f(l,i.children,c);n.push("<".concat(i.name,">").concat(_,"</").concat(i.name,">"))}}else if("object"!==me(y)||b)1===i.children.length&&j?n.push(fe.cloneElement(y,Gn(Gn({},y.props),{},{key:p}),j)):n.push(fe.cloneElement(y,Gn(Gn({},y.props),{},{key:p})));else{var E=i.children[0]?j:null;E&&n.push(E)}}else if("text"===i.type){var H=r.transWrapTextNodes,A=s?r.unescape(t.services.interpolator.interpolate(i.content,u,t.language)):t.services.interpolator.interpolate(i.content,u,t.language);H?n.push(fe.createElement(H,{key:"".concat(i.name,"-").concat(p)},A)):n.push(A)}return n}),[])}return Wn(f([{dummy:!0,children:e||[]}],l,Fn(e||[]))[0])}function Jn(e){var n=e.children,t=e.count,r=e.parent,i=e.i18nKey,s=e.context,a=e.tOptions,c=void 0===a?{}:a,l=e.values,u=e.defaults,h=e.components,d=e.ns,f=e.i18n,p=e.t,m=e.shouldUnescape,g=o(e,Mn),x=f||ye();if(!x)return xe("You will need to pass in an i18next instance by using i18nextReactModule"),n;var j=p||x.t.bind(x)||function(e){return e};s&&(c.context=s);var v=Gn(Gn({},je()),x.options&&x.options.react),y=d||j.ns||x.options&&x.options.defaultNS;y="string"==typeof y?[y]:y||["translation"];var b=u||Un(n,v)||v.transEmptyNodeValue||i,w=v.hashTransKey,O=i||(w?w(b):b),S=l?c.interpolation:{interpolation:Gn(Gn({},c.interpolation),{},{prefix:"#$?",suffix:"?$#"})},k=Gn(Gn(Gn(Gn({},c),{},{count:t},l),S),{},{defaultValue:b,ns:y}),z=Vn(h||n,O?j(O,k):b,x,v,k,m),C=void 0!==r?r:v.defaultTransParent;return C?fe.createElement(C,g,z):z}var Kn=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function Yn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function qn(e){var n=e.children,t=e.count,r=e.parent,i=e.i18nKey,s=e.context,a=e.tOptions,c=void 0===a?{}:a,l=e.values,u=e.defaults,h=e.components,d=e.ns,f=e.i18n,p=e.t,m=e.shouldUnescape,g=o(e,Kn),x=fe.useContext(be)||{},j=x.i18n,v=x.defaultNS,y=f||j||ye(),b=p||y&&y.t.bind(y);return Jn(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Yn(Object(t),!0).forEach((function(n){pe(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Yn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({children:n,count:t,parent:r,i18nKey:i,context:s,tOptions:c,values:l,defaults:u,components:h,ns:d||b&&b.ns||v||y&&y.options&&y.options.defaultNS,i18n:y,t:p,shouldUnescape:m},g))}var $n=function(e){return we(Oe.ready(),e)},Zn={ar:{ar:"العربية",en:"Arabic",ko:"아랍어","zh-Hans":"阿拉伯文","zh-Hant":"阿拉伯文"},az:{az:"Azərbaycanca",en:"Azerbaijani",ko:"아제르바이잔어","zh-Hans":"阿塞拜疆文","zh-Hant":"阿塞拜疆文"},ca:{ca:"Català",en:"Catalan",ko:"카탈루냐어","zh-Hans":"加泰罗尼亚文","zh-Hant":"加泰隆尼亞文"},da:{da:"Dansk",en:"Danish",ko:"덴마크어","zh-Hans":"丹麦文","zh-Hant":"丹麥文"},de:{de:"Deutsch",en:"German",ko:"독일어","zh-Hans":"德文","zh-Hant":"德文"},el:{el:"Ελληνικά",en:"Greek",ko:"그리스어","zh-Hans":"希腊文","zh-Hant":"希臘文"},en:{en:"English",ko:"영어","zh-Hans":"英文","zh-Hant":"英文"},es:{en:"Spanish",es:"Español",ko:"스페인어","zh-Hans":"西班牙文","zh-Hant":"西班牙文"},fa:{en:"Persian",fa:"فارسی",ko:"페르시아어","zh-Hans":"波斯文","zh-Hant":"波斯文"},fr:{en:"French",fr:"Français",ko:"프랑스어","zh-Hans":"法文","zh-Hant":"法文"},ga:{en:"Irish",ga:"Gaeilge",ko:"아일랜드어","zh-Hans":"爱尔兰文","zh-Hant":"愛爾蘭文"},gd:{en:"Scottish Gaelic",gd:"Gàidhlig",ko:"스코틀랜드 게일어","zh-Hans":"苏格兰盖尔文","zh-Hant":"蘇格蘭蓋爾文"},hi:{en:"Hindi",hi:"हिन्दी",ko:"힌디어","zh-Hans":"印地文","zh-Hant":"印地文"},hu:{en:"Hungarian",hu:"Magyar",ko:"헝가리어","zh-Hans":"匈牙利文","zh-Hant":"匈牙利文"},id:{en:"Indoesian",id:"Bahasa Indonesia",ko:"인도네시아어","zh-Hans":"印尼文","zh-Hant":"印尼文"},it:{en:"Italian",it:"Italiano",ko:"이탈리아어","zh-Hans":"意大利文","zh-Hant":"意大利文"},ja:{en:"Japanese",ja:"日本語",ko:"일본어","zh-Hans":"日文","zh-Hant":"日文"},ko:{en:"Korean",ko:"한국어","zh-Hans":"韩文","zh-Hant":"韓文"},ms:{en:"Malay",ko:"말레이어",ms:"Bahasa Melayu","zh-Hans":"马来文","zh-Hant":"馬來文"},no:{en:"Norwegian",ko:"노르웨이어",no:"Norsk","zh-Hans":"挪威文","zh-Hant":"挪威文"},pl:{en:"Polish",ko:"폴란드어",pl:"Polski","zh-Hans":"波兰文","zh-Hant":"波蘭文"},pt:{en:"Portuguese",ko:"포르투갈어",pt:"Português","zh-Hans":"葡萄牙文","zh-Hant":"葡萄牙文"},ro:{en:"Romanian",ko:"루마니아어",ro:"Română","zh-Hans":"罗马尼亚文","zh-Hant":"羅馬尼亞文"},ru:{en:"Russian",ko:"러시아어",ru:"Русский","zh-Hans":"俄文","zh-Hant":"俄文"},sv:{en:"Swedish",ko:"스웨덴어",sv:"Svenska","zh-Hans":"瑞典文","zh-Hant":"瑞典文"},th:{en:"Thai",ko:"태국어",th:"ภาษาไทย","zh-Hans":"泰文","zh-Hant":"泰文"},tr:{en:"Turkish",ko:"튀르키예어",tr:"Türkçe","zh-Hans":"土耳其文","zh-Hant":"土耳其文"},ur:{en:"Urdo",ko:"우르두어",ur:"اردو","zh-Hans":"乌尔都文","zh-Hant":"烏爾都文"},uz:{en:"Uzbek",ko:"우즈베크어",uz:"Oʻzbekcha","zh-Hans":"乌兹别克文","zh-Hant":"烏茲別克文"},vi:{en:"Vietnamese",ko:"베트남어",vi:"Tiếng Việt","zh-Hans":"越南文","zh-Hant":"越南文"},"zh-Hans":{en:"Simplified Chinese",ko:"중국어 간체자","zh-Hans":"简体中文","zh-Hant":"簡體中文"},"zh-Hant":{en:"Traditional Chinese",ko:"중국어 정체자","zh-Hans":"繁体中文","zh-Hant":"繁體中文"}},Qn=function(e){return e.left="l",e.right="r",e}(Qn||{}),Xn=function(e){return e.through="through",e.nonThrough="nonthrough",e}(Xn||{}),et=function(e){return e.local="local",e.express="express",e.direct="direct",e}(et||{}),nt=function(e){return e.MTR="mtr",e.GZMTR="gzmtr",e.SHMetro="shmetro",e}(nt||{}),tt=function(e){return e.sh="sh",e.sh2020="sh2020",e}(tt||{}),rt={h:500,maxH:"70%","& iframe":{h:"100%",w:"100%"}};function it(e){var n=e.isOpen,t=e.onClose,r=e.onImport,i=d(fe.useState(crypto.randomUUID()),1)[0],s="/rmg/import?"+new URLSearchParams({parentComponent:Oe.getAppName(),parentId:i});return fe.useEffect((function(){var e=new BroadcastChannel("rmg-bridge--"+i);return e.onmessage=function(e){var n=e.data,i=n.event,s=n.data;console.log("[rmp] Received event from RMG app clip:",i),"CLOSE"===i?t():"IMPORT"===i&&r(s)},function(){e.close()}}),[]),f.jsx(Ee,{isOpen:n,onClose:t,sx:rt,children:f.jsx("iframe",{src:s,loading:"lazy"})})}var st=new BroadcastChannel("RMP_GALLERY_CHANNEL"),ot={h:"80%",w:"80%","& iframe":{h:"100%",w:"100%"}};function at(e){var t=e.isOpen,r=e.onClose,o=p(),c=He().t,l=Ae(),u=ge.useRef(window.graph),h=ge.useCallback((function(){l(Ne()),l(Pe()),l(Re(u.current.export()))}),[l,Ne,Pe,Re,u]),d=function(){var e=a(i().mark((function e(t){var r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,Te(JSON.stringify(t));case 3:e.t1=e.sent,r=e.t0.parse.call(e.t0,e.t1),r.version,o=s(r,n),l(Ie()),u.current.clear(),u.current.import(o.graph),h();case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g=function(){var e=a(i().mark((function e(n){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled([fetch("/rmp-gallery/resources/real_world/".concat(n,".json")),fetch("/rmp-gallery/resources/fantasy/".concat(n,".json"))]);case 2:if(e.t1=t=e.sent.filter((function(e){return"fulfilled"===e.status})).find((function(e){return 200===e.value.status})),e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===t;case 6:if(!e.t0){e.next=10;break}e.t2=void 0,e.next=11;break;case 10:e.t2=t.value.json();case 11:return e.next=13,e.t2;case 13:(r=e.sent)?(d(r),o({title:c("header.open.importFromRMPGallery",{id:n}),status:"success",duration:9e3,isClosable:!0})):o({title:c("header.open.failToImportFromRMPGallery",{id:n}),status:"error",duration:9e3,isClosable:!0});case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return ge.useEffect((function(){var e=window.location.href;if(e.includes("/s/")){history.replaceState({},c("about.rmp"),e.substring(0,e.indexOf("s/")));var n=e.substring(e.lastIndexOf("s/")+2);g(n)}}),[]),ge.useEffect((function(){st.onmessage=function(e){var n=e.data,t=n.event,i=n.data;"OPEN_TEMPLATE"===t&&(g(i),r())}}),[]),f.jsx(f.Fragment,{children:f.jsxs(Ee,{isOpen:t,onClose:r,size:"full",sx:ot,children:[f.jsx("iframe",{src:"/rmp-gallery/",loading:"lazy"}),f.jsx(m,{onClick:r,position:"fixed",top:"5px",right:"15px"})]})})}function ct(){var e=He().t,n=Ae(),r=ge.useRef(window.graph),o=ge.useRef(null),l=d(ge.useState(!1),2),p=l[0],m=l[1],w=d(ge.useState(!1),2),O=w[0],S=w[1],k=ge.useCallback((function(){n(Ne()),n(Pe()),n(Re(r.current.export()))}),[n,Ne,Pe,Re,r]),z=function(){var o=a(i().mark((function o(a){var c,l,u,h,d;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(l=null===(c=a.target.files)||void 0===c?void 0:c[0],console.log("OpenActions.handleUpload():: received file",l),"application/json"===(null==l?void 0:l.type)){i.next=7;break}n(Fe({status:"error",message:e("OpenActions.invalidType")})),console.error("OpenActions.handleUpload():: Invalid file type! Only file in JSON format is accepted."),i.next=28;break;case 7:return i.prev=7,i.next=10,lt(l);case 10:return u=i.sent,i.t0=JSON,i.next=14,Te(u);case 14:i.t1=i.sent,h=i.t0.parse.call(i.t0,i.t1),h.version,d=s(h,t),n(Ie()),r.current.clear(),r.current.import(d.graph),k(),i.next=28;break;case 24:i.prev=24,i.t2=i.catch(7),n(Fe({status:"error",message:e("OpenActions.unknownError")})),console.error("OpenActions.handleUpload():: Unknown error occurred while parsing the uploaded file",i.t2);case 28:a.target.value="";case 29:case"end":return i.stop()}}),o,null,[[7,24]])})));return function(e){return o.apply(this,arguments)}}();return f.jsxs(g,{children:[f.jsx(x,{as:j,size:"sm",variant:"ghost",icon:f.jsx(Le,{})}),f.jsxs(v,{children:[f.jsx(y,{icon:f.jsx(Me,{}),onClick:function(){n(Ie()),r.current.clear(),n(De(100)),n(We({x:0,y:0})),k()},children:e("header.open.new")}),f.jsx("input",{id:"upload_project",ref:o,type:"file",accept:".json",hidden:!0,onChange:z,"data-testid":"file-upload"}),f.jsx(y,{icon:f.jsx(Le,{}),onClick:function(){var e;return null==o||null===(e=o.current)||void 0===e?void 0:e.click()},children:e("header.open.config")}),f.jsx(y,{icon:f.jsx(Be,{}),onClick:function(){return m(!0)},children:e("header.open.projectRMG")}),f.jsxs(y,{icon:f.jsx(Ge,{}),onClick:function(){return S(!0)},children:[e("header.open.gallery"),f.jsx(b,{ml:"1",colorScheme:"green",children:"New"})]})]}),f.jsx(it,{isOpen:p,onClose:function(){return m(!1)},onImport:function(t){try{!function(e,n){var t=n.info_panel_type,r=n.line_num,i=n.stn_list,s=n.style,o=n.theme,a=Object.fromEntries(Object.keys(i).filter((function(e){return!["linestart","lineend"].includes(e)})).map((function(e){return[e,"stn_".concat(Se(10))]})));Object.entries(i).filter((function(e){var n=d(e,2),t=n[0];return n[1],!["linestart","lineend"].includes(t)})).forEach((function(n){var t=d(n,2),r=t[0],i=t[1],s=e.filterNodes((function(e,n){return Object.values(ke).includes(n.type)&&n[n.type].names[0]===i.name[0]}));0!==s.length&&(a[r]=s[0])})),Object.entries(i).filter((function(e){var n=d(e,2),t=n[0];return n[1],!["linestart","lineend"].includes(t)})).filter((function(n){var t=d(n,2),r=(t[0],t[1]);return 0===e.filterNodes((function(e,n){return Object.values(ke).includes(n.type)&&n[n.type].names[0]===r.name[0]})).length})).forEach((function(n,i){var l=d(n,2),f=l[0],p=l[1],m=ke.ShmetroBasic,g=p.transfer.groups,x=g.map((function(e){return e.lines})).flat();s===nt.SHMetro?m=x.length>0?ke.ShmetroInt:t===tt.sh2020?ke.ShmetroBasic2020:ke.ShmetroBasic:s===nt.GZMTR?m=x.length>0?ke.GzmtrInt:ke.GzmtrBasic:s===nt.MTR&&(m=ke.MTR);var j=u(u({},structuredClone(zn[m].defaultAttrs)),{},{names:p.name});m===ke.ShmetroBasic2020?j.color=o:m===ke.GzmtrBasic?(j.color=o,j.lineCode=r,j.stationCode=p.num):m===ke.GzmtrInt?j.transfer=g.map((function(e,n){var t=e.lines.map((function(e){var n;return[].concat(c(null!==(n=e.theme)&&void 0!==n?n:o),["1","01"])}));return 0===n?[[].concat(c(o),[r,p.num])].concat(c(t)):t})):m===ke.MTR&&(g[0].lines.length?j.transfer=[[[].concat(c(o),["",""])].concat(c(g[0].lines.map((function(e){var n;return[].concat(c(null!==(n=e.theme)&&void 0!==n?n:o),["",""])}))))]:j.transfer=[[]]),e.addNode(a[f],h({visible:!0,zIndex:0,x:100+50*i,y:1e3,type:m},m,j))})),Object.entries(i).filter((function(e){var n=d(e,2),t=n[0];return n[1],!["linestart","lineend"].includes(t)})).forEach((function(n){var t=d(n,2),r=t[0];t[1].children.filter((function(e){return!["linestart","lineend"].includes(e)})).forEach((function(n){var t;e.addDirectedEdgeWithKey("line_".concat(Se(10)),a[r],a[n],(h(t={visible:!0,zIndex:0,type:ze.Diagonal},ze.Diagonal,structuredClone(Ce[ze.Diagonal].defaultAttrs)),h(t,"style",_e.SingleColor),h(t,_e.SingleColor,{color:o}),h(t,"reconcileId",""),t))}))}))}(r.current,t),k()}catch(i){n(Fe({status:"error",message:e("OpenActions.unknownError")})),console.error("OpenActions.handleUploadRMG():: Unknown error occurred while parsing the RMG project",i)}finally{m(!1)}}}),f.jsx(at,{isOpen:O,onClose:function(){return S(!1)}})]})}var lt=function(e){return new Promise((function(n){var t=new FileReader;t.onloadend=function(){return n(t.result)},t.readAsText(e)}))},ut=function(e,n,t){var r=new Blob([t],{type:n});ht(e,r)},ht=function(e,n){var t=window.URL.createObjectURL(n),r=document.createElement("a");r.href=t,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t)},dt=function(e){return new Promise((function(n){var t=new FileReader;t.onloadend=function(){return n(t.result)},t.readAsDataURL(e)}))},ft=function(){var e=a(i().mark((function e(n){var t,r,s,o,l,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Array.from(new Set([].concat(c(n.querySelectorAll(".rmp-name__mtr__zh")),c(n.querySelectorAll(".rmp-name__mtr__en"))).map((function(e){return e.innerHTML})).join("").replace(/\s/g,""))).join(""),e.next=3,document.fonts.load("80px GenYoMin TW, Vegur",r);case 3:if(s=e.sent,o=null===(t=document.querySelector("link#fonts_mtr"))||void 0===t||null===(t=t.sheet)||void 0===t?void 0:t.cssRules){e.next=7;break}return e.abrupt("return",Promise.reject(new Error("cssRules can not be found in link#css_share")));case 7:return l=Array.from(o).filter((function(e){return e instanceof CSSFontFaceRule})),u=s.reduce((function(e,n){var t,r=(t=n,l.find((function(e){var n=e.style;return n.getPropertyValue("font-family").replace(/^"(.+)"$/,"$1")===t.family&&n.getPropertyValue("unicode-range")===t.unicodeRange})));return r?e.find((function(e){var n=e.style,t=r.style;return n.getPropertyValue("font-family")===t.getPropertyValue("font-family")&&n.getPropertyValue("unicode-range")===t.getPropertyValue("unicode-range")}))?e:e.concat(r):e}),[]),e.next=11,Promise.all(u.map(function(){var e=a(i().mark((function e(n){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(pt(n));case 3:return t=e.sent,e.t0=dt,e.next=7,t.blob();case 7:return e.t1=e.sent,e.next=10,(0,e.t0)(e.t1);case 10:return r=e.sent,e.abrupt("return",n.cssText.replace(/src:[ \w('",\-:/.)]+;/g,"src: url('".concat(r,"'); ")));case 14:return e.prev=14,e.t2=e.catch(0),console.error(e.t2),e.abrupt("return","");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(n){return e.apply(this,arguments)}}()));case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),pt=function(e){var n,t=e.style.src;return navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?t.replace(/^url\("(\S+)"\).*$/,"$1"):"/rmp//styles/"+(null===(n=t.match(/^url\("([\S*]+)"\)/))||void 0===n?void 0:n[1])},mt=new Set,gt=new Set,xt=new Set,jt=new Map,vt=new Map,yt=[],bt=0,wt=new Map,Ot=new Map,St={name:["LEFT END","LEFT END"],secondaryName:!1,num:"00",services:[et.local],parents:[],children:["lineend"],branch:{left:[],right:[]},transfer:{groups:[{lines:[]}],tick_direc:Qn.right,paid_area:!0},facility:"",loop_pivot:!1,one_line:!0,int_padding:355},kt={name:["RIGHT END","RIGHT END"],secondaryName:!1,num:"00",services:[et.local],parents:[],children:[],branch:{left:[],right:[]},transfer:{groups:[{lines:[]}],tick_direc:Qn.right,paid_area:!0},facility:"",loop_pivot:!1,one_line:!0,int_padding:355},zt={svgWidth:{destination:1500,runin:1500,railmap:1500,indoor:1500},svg_height:400,style:nt.SHMetro,y_pc:50,padding:10,branchSpacingPct:33,direction:Qn.right,platform_num:"1",theme:[Ue.Shanghai,"sh1","#E3002B",Ve.white],line_name:["地鐵線","Metro Line"],current_stn_idx:"jlaMj2",stn_list:{},namePosMTR:{isStagger:!0,isFlip:!0},customiseMTRDest:{isLegacy:!1,terminal:!1},line_num:"1",psd_num:"1",info_panel_type:tt.sh,notesGZMTR:[],direction_gz_x:40,direction_gz_y:70,coline:{},loop:!1,loop_info:{bank:!0,left_and_right_factor:0,bottom_factor:1}},Ct={name:["",""],secondaryName:!1,num:"",services:[et.local],parents:[],children:[],branch:{left:[],right:[]},transfer:{groups:[{lines:[]}],tick_direc:Qn.right,paid_area:!0},facility:"",loop_pivot:!1,one_line:!0,int_padding:355},_t=function(e){return"".concat(e[0],"/").concat(e[1],"=").concat(e[2]).concat(e[3])},Et=function(e){for(var n=[],t=e.length-1;t>=0;t--)n.push(e[t]);return n},Ht=function(e){return e==_e.SingleColor||e==_e.MTRRaceDays},At=function(e,n){var t=d(e.extremities(n),2),r=t[0],i=t[1],s=e.getEdgeAttributes(n),o=s.style;if(r!=i&&Ht(o)){var a=function(e){if(e.style==_e.SingleColor||e.style==_e.MTRRaceDays)return structuredClone(e[e.style].color)}(s);xt.has(_t(a))||(gt.add(a),xt.add(_t(a)),jt.set(a,r)),vt.has(r)?yt.push({target:i,next:vt.get(r),color:a}):yt.push({target:i,next:-1,color:a}),vt.set(r,bt),bt++,vt.has(i)?yt.push({target:r,next:vt.get(i),color:a}):yt.push({target:r,next:-1,color:a}),vt.set(i,bt),bt++}},Nt=function e(n,t,r){if(!mt.has(n)){mt.add(n);for(var i=0,s=new Set,o=vt.get(n);-1!=o;o=yt[o].next){var a=yt[o].target,c=yt[o].color;_t(c)==_t(r)&&(s.has(a)||(s.add(a),i++,a!=t&&e(a,n,r)))}wt.set(n,i)}},Pt=function(e,n){var t=e.stn_list.lineend.parents;t.push(n),e.stn_list.lineend.parents=Et(structuredClone(t)),2==e.stn_list.lineend.parents.length&&(e.stn_list.lineend.branch.left=[Xn.through,t[1]])},Rt=function(e){if(Ot.get(e[0])>Ot.get(e[1])){var n=e[0];e[0]=e[1],e[1]=n}return e},Tt=function e(n,t,i,s,o,a){if(mt.has(n)&&(null==a.stn_list[n]||n.startsWith("misc_node_")||a.loop))return[];if(mt.has(n)&&null!=a.stn_list[n]&&a.stn_list[n].children.length>=2){var l=Rt([t].concat(c(a.stn_list[n].parents)));a.stn_list[n].parents=Et(l),a.stn_list[n].branch.left=[Xn.through,l[1]];var u,h=[],d=r(a.stn_list[n].children);try{for(d.s();!(u=d.n()).done;){var f=u.value;f!=t&&h.push(f)}}catch(L){d.e(L)}finally{d.f()}a.stn_list[n].children=structuredClone(h),a.stn_list[n].branch.right=[];var p,m=[],g=r(a.stn_list.lineend.parents);try{for(g.s();!(p=g.n()).done;){var x=p.value;x!=n&&m.push(x)}}catch(L){g.e(L)}finally{g.f()}var j=Rt(m);return a.stn_list.lineend.parents=Et(structuredClone(j)),2==a.stn_list.lineend.parents.length&&(a.stn_list.lineend.branch.left=[Xn.through,j[1]]),[n]}mt.add(n);for(var v=[],y=[],b=new Set,w=new Set,O=vt.get(n);-1!=O;O=yt[O].next){var S=yt[O].target,k=yt[O].color;if(S!=t){if(_t(k)==_t(o)){if(w.has(S))continue;if(w.add(S),n.startsWith("misc_node_")){var z=e(S,t,i+1,s,o,a);0!=z.length&&v.push.apply(v,c(z))}else{var C=e(S,n,i+1,s,o,a);0!=C.length&&v.push.apply(v,c(C))}}if(!b.has(_t(k))&&_t(k)!=_t(o)){b.add(_t(k));var _={theme:k,name:[k[1],k[1]]};y.push(_)}}}if(2==v.length)for(var E=0;E<2;E++)"lineend"==v[E]&&v.splice(E,1);if(2==v.length&&"lineend"!=a.stn_list[v[0]].children[0]&&"lineend"!=a.stn_list[v[1]].children[0]&&Rt(v),n.startsWith("misc_node_"))return 0==v.length?(Pt(a,t),["lineend"]):v;var H=s.getNodeAttributes(n).type,A=s.getNodeAttributes(n)[H];if(a.stn_list[n]=structuredClone(Ct),a.stn_list[n].name=[A.names[0],A.names[1]],a.stn_list[n].num=String(i),s.getNodeAttributes(n).type==ke.GzmtrBasic){var N=A;a.stn_list[n].num=N.stationCode,a.stn_list[n].secondaryName=N.secondaryNames}if(s.getNodeAttributes(n).type==ke.GzmtrInt){var P,R=A,T=r(R.transfer[0]);try{for(T.s();!(P=T.n()).done;){var I=P.value;if(_t(I)==_t(o)){a.stn_list[n].num=String(I[5]);break}}}catch(L){T.e(L)}finally{T.f()}a.stn_list[n].secondaryName=R.secondaryNames}return 0!=v.length?(a.stn_list[n].children=Et(structuredClone(v)),2==v.length&&(a.stn_list[n].branch.right=[Xn.through,v[1]])):(a.stn_list[n].children=["lineend"],Pt(a,n)),a.stn_list[n].parents=[t],0!=y.length&&(a.stn_list[n].transfer.groups[0].lines=structuredClone(y)),[n]},It=function(e,n,t,r){var i,s=structuredClone(zt);switch("LOOP"==r&&(s.loop=!0),e.getNodeAttributes(t).type){case ke.GzmtrBasic:case ke.GzmtrInt:i=nt.GZMTR;break;case ke.MTR:i=nt.MTR;break;default:i=nt.SHMetro}s.theme=structuredClone(n),s.style=i,s.stn_list.linestart=structuredClone(St),s.stn_list.lineend=structuredClone(kt),mt.clear();var o=Tt(t,"linestart",1,e,n,s);return s.current_stn_idx=o[0],s.stn_list.linestart.children=[o[0]],Object.keys(s.stn_list).length<=3||s.stn_list.lineend.parents.length>=3?void 0:structuredClone(s)},Lt=function(e,n,t){var r;e.line_name=n,e.line_num=String(t),console.log(e),console.log(JSON.stringify(e)),ut("RMG_".concat(""!=(r=n)[0]&&""!=r[1]?r[0]+"_"+r[1]:""!=r[0]?r[0]:""!=r[1]?r[1]:"".concat((new Date).valueOf()),".json"),"application/json",JSON.stringify(e))},Mt={LINE:"#33ccff",BRANCH:"#007B61",LOOP:"#ff6666"},Bt=function(e){var n=e.isOpen,t=e.onClose,i=He().t,s=ge.useRef(window.graph),o=d(ge.useState(!1),2),a=o[0],c=o[1],l=d(ge.useState([[zt,"",""]]),2),u=l[0],h=l[1],p=d(ge.useState(["","",""]),2),m=p[0],g=p[1],x=d(ge.useState([]),2),j=x[0],v=x[1];return ge.useEffect((function(){n&&v(function(e){mt.clear(),gt.clear(),xt.clear(),jt.clear(),vt.clear(),yt=[],bt=0,wt.clear(),Ot.clear(),e.filterEdges((function(e){return e.startsWith("line")})).forEach((function(n){Ht(e.getEdgeAttributes(n).style)&&At(e,n)}));var n=0;e.forEachNode((function(e){Ot.set(e,++n)}));var t,i=[],s=r(gt);try{for(s.s();!(t=s.n()).done;){var o=t.value;mt.clear(),wt.clear(),Nt(jt.get(o),"line_root",o);var a,c="no_val",l=2147483647,u=!0,h="LINE",f=[],p=r(wt);try{for(p.s();!(a=p.n()).done;){var m=d(a.value,2),g=m[0],x=m[1];if(1==x){var j=Ot.get(g);j<l&&(c=g,l=j),f.push(g)}3==x&&(h="BRANCH"),x>3&&(u=!1)}}catch(S){p.e(S)}finally{p.f()}if(u){"no_val"==c&&(c=jt.get(o),h="LOOP",f.push(c));for(var v=[],y=0,b=f;y<b.length;y++){var w=b[y],O=It(e,o,w,h);null!=O&&v.push([O,O.stn_list[O.current_stn_idx].name[0],O.stn_list[O.current_stn_idx].name[1]])}i.push({theme:o,param:structuredClone(v),type:h})}}}catch(S){s.e(S)}finally{s.f()}return i}(s.current))}),[n]),f.jsxs(w,{isOpen:n,onClose:t,size:"2xl",scrollBehavior:"inside",children:[f.jsx(O,{}),f.jsxs(S,{children:[f.jsxs(k,{children:[f.jsx(z,{as:"b",fontSize:"xl",children:i("header.download.2rmg.title")}),f.jsx(C,{label:i("header.settings.pro"),children:f.jsx(b,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",children:"PRO"})})]}),f.jsx(_,{}),f.jsxs(E,{children:[f.jsx(z,{fontSize:"sm",mt:"3",lineHeight:"100%",children:i("header.download.2rmg.info1")}),f.jsx(z,{fontSize:"sm",mt:"3",lineHeight:"100%",children:i("header.download.2rmg.info2")}),f.jsx("br",{}),0===j.length?f.jsx(z,{fontSize:"md",children:i("header.download.2rmg.noline")}):f.jsx("table",{children:j.map((function(e){var n=e.theme,t=e.param,r=e.type;return f.jsxs("tr",{children:[f.jsx("td",{children:f.jsx(Je,{name:"other"==n[0]&&"other"==n[1]?n[2]:n[1],bg:n[2],fg:n[3]})}),f.jsx("td",{children:f.jsx(H,{placeholder:i("header.download.2rmg.placeholder.chinese"),id:"nameCh_"+JSON.stringify(n),size:"sm"})}),f.jsx("td",{children:f.jsx(H,{placeholder:i("header.download.2rmg.placeholder.english"),id:"nameEn_"+JSON.stringify(n),size:"sm"})}),f.jsx("td",{children:f.jsx(H,{placeholder:i("header.download.2rmg.placeholder.lineCode"),id:"lineNum_"+JSON.stringify(n),size:"sm"})}),f.jsx("td",{children:f.jsx(Je,{name:i("header.download.2rmg.type.".concat(r.toLowerCase())),bg:Mt[r],fg:Ve.white})}),f.jsx("td",{children:f.jsx(A,{colorScheme:"blue",variant:"ghost",mr:"1",onClick:function(){var e=document.getElementById("nameCh_"+JSON.stringify(n)),r=document.getElementById("nameEn_"+JSON.stringify(n)),i=document.getElementById("lineNum_"+JSON.stringify(n));h(t),g([e.value.trim(),r.value.trim(),i.value.trim()]),c(!0)},size:"sm",children:f.jsx(Ke,{})})})]},JSON.stringify(n))}))})]}),f.jsx(N,{children:f.jsx(A,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:i("close")})})]}),f.jsx(Gt,{isOpen:a,onClose:function(){return c(!1)},param:u,nameList:m})]})},Gt=function(e){var n=e.isOpen,t=e.onClose,r=e.param,i=e.nameList,s=He().t,o=d(ge.useState(""),2),a=o[0],l=o[1];return ge.useEffect((function(){""!=i[0]&&""!=i[1]?l(i[0]+"/"+i[1]):""!=i[0]?l(i[0]):""!=i[1]&&l(i[1])}),c(i)),f.jsxs(w,{isOpen:n,onClose:t,size:"md",scrollBehavior:"inside",children:[f.jsx(O,{}),f.jsxs(S,{children:[f.jsx(k,{children:f.jsxs(z,{as:"b",fontSize:"xl",children:[s("header.download.2rmg.download")," ",a]})}),f.jsx(_,{}),f.jsx(E,{children:f.jsxs(P,{children:[f.jsx(z,{fontSize:"sm",mb:"2",lineHeight:"100%",children:s("header.download.2rmg.downloadInfo")}),r.map((function(e){var n=d(e,3),t=n[0],r=n[1],s=n[2];return f.jsxs(A,{onClick:function(){Lt(t,[i[0],i[1]],i[2])},children:[r,"/",s]},"".concat(r).concat(s))}))]})}),f.jsx(N,{children:f.jsx(A,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:s("close")})})]})]})},Dt=function(e){var n=e.isOpen,t=e.onClose,r=He().t;return f.jsxs(w,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[f.jsx(O,{}),f.jsxs(S,{children:[f.jsx(k,{children:r("header.download.termsAndConditions")}),f.jsx(_,{}),f.jsx(E,{children:f.jsxs(R,{children:[f.jsxs(T,{children:["The layout of the elements on the signage or rail map, is designed by"," ",f.jsxs(I,{color:"teal.500",href:"https://www.shmetro.com/",isExternal:!0,children:["Shanghai Shentong Metro Group ",f.jsx(L,{as:Ge})]}),", ",f.jsxs(I,{color:"teal.500",href:"https://www.gzmtr.com/",isExternal:!0,children:["Guangzhou Metro Group ",f.jsx(L,{as:Ge})]})," or ",f.jsxs(I,{color:"teal.500",href:"https://www.mtr.com.hk/",isExternal:!0,children:["MTR Corporation ",f.jsx(L,{as:Ge})]}),", depending on your selection. You shall grant appropriate permit or license from the relevant company above before using the generated images for commercial purposes, if it is required to do so.",f.jsx("br",{}),"标志版或路线图的元素或布局，基于你所选择的风格，为",f.jsxs(I,{color:"teal.500",href:"https://www.shmetro.com/",isExternal:!0,children:["上海申通地铁集团 ",f.jsx(L,{as:Ge})]}),"，",f.jsxs(I,{color:"teal.500",href:"https://www.gzmtr.com/",isExternal:!0,children:["广州地铁集团公司 ",f.jsx(L,{as:Ge})]}),"或",f.jsxs(I,{color:"teal.500",href:"https://www.mtr.com.hk/",isExternal:!0,children:["港铁公司 ",f.jsx(L,{as:Ge})]}),"所设计。在产生的图像用作商业用途前，你应向相关公司取得适当之许可证或授权。"]}),f.jsxs(T,{children:["The elements including shapes and lines on the image are drawn by"," ",f.jsxs(I,{color:"teal.500",href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",f.jsx(L,{as:Ge})]})," and ",f.jsxs(I,{color:"teal.500",href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",f.jsx(L,{as:Ge})]}),", based on the design standards or rules of the companies listed above. You may use them for any purposes, but it is recommended to state the name and the link of software alongside.",f.jsx("br",{}),"图像的元素，包括图形及线条，均由",f.jsxs(I,{color:"teal.500",href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",f.jsx(L,{as:Ge})]}),"及",f.jsxs(I,{color:"teal.500",href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",f.jsx(L,{as:Ge})]}),"基于上述公司设计标准或准则绘制。你可将其用于任何目的，但我们建议你于使用同时附以我们的名字以及本网站地址。"]}),f.jsxs(T,{children:["Due to copyright, licensing and other legal restrictions, Rail Map Painter uses"," ",f.jsxs(I,{color:"teal.500",href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["GenYoMin provided by ButTaiwan ",f.jsx(L,{as:Ge})]}),", and Vegur instead of MTRSung and Myriad Pro respectively to display and generate MTR-style signage. You shall grant appropriate permit or license from the manufacturers before using those generated images for commercial purposes.",f.jsx("br",{}),"由于著作权及其他法律限制，铁路路线图绘制器使用由",f.jsxs(I,{color:"teal.500",href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["ButTaiwan提供的源樣明體 ",f.jsx(L,{as:Ge})]}),"，以及Vegur，以代替港铁样式标志牌所使用的地铁宋及Myriad Pro。在产生之图像用作商业用途前，你应向字型生产厂商取得适当之许可证或授权。"]}),f.jsxs(T,{children:["The exported images in PNG or SVG format may be modified, published, or used for other purposes except commercial use, under the conditions above.",f.jsx("br",{}),"输出的PNG或SVG图像可基于上述条款，在非商业使用时，用于修改、发行或其他用途。"]}),f.jsxs(T,{children:["All flag emojis shown on Windows platforms are designed by"," ",f.jsxs(I,{color:"teal.500",href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",f.jsx(L,{as:Ge})]})," ","– the open-source emoji and icon project. License:",f.jsxs(I,{color:"teal.500",href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",f.jsx(L,{as:Ge})]}),f.jsx("br",{}),"于Windows作业系统上显示的国旗Emoji为",f.jsxs(I,{color:"teal.500",href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",f.jsx(L,{as:Ge})]}),"所设计。许可证：",f.jsxs(I,{color:"teal.500",href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",f.jsx(L,{as:Ge})]})]}),f.jsxs(T,{children:["We reserve the rights, without prior notice, to modify, add, or remove these terms. The Chinese translation is for reference only. In case of any discrepancy between the English version and the Chinese version, the English version shall prevail.",f.jsx("br",{}),"我们保留修改、新增或移除上述条款之权利，而无需另行通知。中文译本仅供参考，文义如与英文有歧异，概以英文本为准。"]})]})})]})]})};function Wt(){var e=He().t,n=Ye((function(e){return e.app})).telemetry.project,t=Ye((function(e){return e.runtime})).nodeExists,r=ge.useRef(window.graph),s=M("white","gray.800"),o=d(ge.useState("png"),2),l=o[0],u=o[1],h={png:e("header.download.png"),svg:e("header.download.svg")},p=d(ge.useState(100),2),m=p[0],b=p[1],C=Object.fromEntries([25,33,50,67,75,80,90,100,110,125,150,175,200,250,300,400,500].map((function(e){return[e,"".concat(e,"%")]}))),H=d(ge.useState(!1),2),P=H[0],R=H[1],T=[{type:"select",label:e("header.download.format"),value:l,options:h,onChange:function(e){return u("png"===e?"png":"svg")}}],D=[{type:"select",label:e("header.download.scale"),value:m,options:C,onChange:function(e){return b(e)}},{type:"switch",label:e("header.download.transparent"),isChecked:P,onChange:R}],W=d(ge.useState(!1),2),F=W[0],U=W[1],V=d(ge.useState(!1),2),J=V[0],K=V[1],Y=d(ge.useState(!1),2),q=Y[0],$=Y[1],Z=d(ge.useState(!1),2),Q=Z[0],X=Z[1],ee=d(ge.useState(!1),2),ne=ee[0],te=ee[1],re=function(){var e=a(i().mark((function e(){var o,a,u,h,f,p,g,x,j,v,y,b,w,O,S,k;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U(!1),n&&Oe.event(Xe.DOWNLOAD_IMAGES,{numberOfNodes:r.current.order,numberOfEdges:r.current.size}),o=Cn(r.current),a=o.xMin,u=o.yMin,h=o.xMax,f=o.yMax,p=h-a,g=f-u,c((x=document.getElementById("canvas").cloneNode(!0)).children).filter((function(e){return r.current.hasNode(e.id)&&r.current.getNodeAttribute(e.id,"type")===tn.Virtual})).forEach((function(e){return x.removeChild(e)})),q||x.appendChild(Ft(h-400,f-60)),x.setAttribute("viewBox","".concat(a," ").concat(u," ").concat(p," ").concat(g)),x.setAttribute("width",p.toString()),x.setAttribute("height",g.toString()),Object.entries({".rmp-name__zh":["font-family"],".rmp-name__en":["font-family"],".rmp-name__mtr__zh":["font-family"],".rmp-name__mtr__en":["font-family"],".rmp-name-station":["paint-order","stroke","stroke-width"]}).forEach((function(e){var n=d(e,2),t=n[0],r=n[1],i=document.querySelector(t);if(null!==i){var s=window.getComputedStyle(i);x.querySelectorAll(t).forEach((function(e){r.forEach((function(n){e.setAttribute(n,s.getPropertyValue(n))})),e.classList.remove(t)}))}})),!t[ke.MTR]){e.next=25;break}return e.prev=12,e.next=15,ft(x);case 15:j=e.sent,(v=document.createElement("style")).textContent=j.join("\n"),x.prepend(v),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(12),alert("Failed to fonts. Fonts in the exported PNG will be missing."),console.error(e.t0);case 25:if("svg"!==l){e.next=28;break}return ut("RMP_".concat((new Date).valueOf(),".svg"),"image/svg+xml",x.outerHTML),e.abrupt("return");case 28:document.body.appendChild(x),y="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(x.outerHTML))),document.body.removeChild(x),b=document.createElement("canvas"),w=p*m/100,O=g*m/100,b.width=w,b.height=O,S=b.getContext("2d"),P||(S.fillStyle=s,S.fillRect(0,0,w,O)),(k=new Image).onload=function(){S.drawImage(k,0,0,w,O),b.toBlob((function(e){return ht("RMP_".concat((new Date).valueOf(),".png"),e)}),"image/png")},k.src=y;case 40:case"end":return e.stop()}}),e,null,[[12,21]])})));return function(){return e.apply(this,arguments)}}();return f.jsxs(g,{id:"download",children:[f.jsx(x,{as:j,size:"sm",variant:"ghost",icon:f.jsx(Ke,{})}),f.jsxs(v,{children:[f.jsx(y,{icon:f.jsx(qe,{}),onClick:function(){n&&Oe.event(Xe.DOWNLOAD_PARAM,{"#nodes":r.current.order,"#edges":r.current.size});var e=en(nn.getState().param);ut("RMP_".concat((new Date).valueOf(),".json"),"application/json",e)},children:e("header.download.config")}),f.jsx(y,{icon:f.jsx($e,{}),onClick:function(){return te(!0)},children:e("header.download.2rmg.title")}),f.jsx(y,{icon:f.jsx(Ze,{}),onClick:function(){return U(!0)},children:e("header.download.image")})]}),f.jsxs(w,{size:"xl",isOpen:F,onClose:function(){return U(!1)},children:[f.jsx(O,{}),f.jsxs(S,{children:[f.jsx(k,{children:e("header.download.image")}),f.jsx(_,{}),f.jsxs(E,{children:[f.jsx(Qe,{fields:T}),"png"===l&&f.jsx(Qe,{fields:D}),f.jsx("br",{}),f.jsx(B,{isChecked:q,onChange:function(e){return $(e.target.checked)},children:f.jsxs(z,{children:[e("header.download.shareInfo1"),f.jsxs(I,{color:"teal.500",onClick:function(){return window.open("https://railmapgen.github.io/rmp","_blank")},children:[e("header.about.rmp")," ",f.jsx(L,{as:Ge})]}),e("header.download.shareInfo2")]})}),f.jsx(B,{isChecked:Q,onChange:function(e){return X(e.target.checked)},children:f.jsxs(z,{children:[e("header.download.termsAndConditionsInfo"),f.jsxs(I,{color:"teal.500",onClick:function(){return K(!0)},children:[e("header.download.termsAndConditions")," ",f.jsx(L,{as:Ge})]}),e("header.download.period")]})})]}),f.jsx(N,{children:f.jsx(G,{children:f.jsx(A,{colorScheme:"teal",variant:"outline",size:"sm",disabled:!Q,onClick:re,children:e("header.download.confirm")})})}),f.jsx(Dt,{isOpen:J,onClose:function(){return K(!1)}})]})]}),f.jsx(Bt,{isOpen:ne,onClose:function(){return te(!1)}})]})}var Ft=function(e,n){var t=document.createElementNS("http://www.w3.org/2000/svg","g");t.setAttribute("transform","translate(".concat(e,", ").concat(n,")scale(2)"));var r=document.createElementNS("http://www.w3.org/2000/svg","image");r.setAttribute("width","40"),r.setAttribute("height","40"),r.setAttribute("x","-50"),r.setAttribute("y","-20");var i=document.createElementNS("http://www.w3.org/2000/svg","text");i.setAttribute("font-family","Arial, sans-serif"),i.setAttribute("font-size","16"),i.appendChild(document.createTextNode("Rail Map Painter"));var s=document.createElementNS("http://www.w3.org/2000/svg","text");return s.setAttribute("font-family","Arial, sans-serif"),s.setAttribute("font-size","10"),s.setAttribute("y","10"),s.appendChild(document.createTextNode("https://railmapgen.github.io/rmp/")),t.appendChild(r),t.appendChild(i),t.appendChild(s),t},Ut=function(e){var n=e.isOpen,t=e.onClose,r=He().t,i=Oe.getAppVersion(),s=d(ge.useState(!1),2),o=s[0],a=s[1];return f.jsxs(w,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[f.jsx(O,{}),f.jsxs(S,{children:[f.jsx(k,{children:r("header.about.title")}),f.jsx(_,{}),f.jsxs(E,{paddingBottom:10,children:[f.jsxs(D,{direction:"row",children:[f.jsx(W,{boxSize:"128px",src:"/rmp//logo192.png"}),f.jsxs(D,{direction:"column",width:"100%",alignItems:"center",justifyContent:"center",children:[f.jsx(z,{fontSize:"xl",as:"b",children:r("header.about.rmp")}),f.jsx(z,{children:i}),f.jsx(z,{}),f.jsx(z,{fontSize:"sm",children:r("header.about.railmapgen")})]})]}),f.jsx(F,{margin:5,children:f.jsx(z,{fontSize:"xl",children:r("header.about.desc")})}),f.jsx(U,{as:"h5",size:"sm",mt:3,mb:2,children:r("header.about.contributors")}),f.jsx(U,{as:"h6",size:"xs",my:2,children:r("header.about.coreContributors")}),f.jsxs(V,{children:[f.jsxs(J,{size:"lg",w:"85%",onClick:function(){return window.open("https://github.com/thekingofcity","_blank")},cursor:"pointer",children:[f.jsx(K,{src:"https://github.com/thekingofcity.png",size:"lg",my:2,ml:-1,mr:2}),f.jsxs(Y,{display:"block",width:"100%",children:[f.jsx(z,{fontSize:"lg",fontWeight:"bold",mb:1,children:"thekingofcity"}),f.jsx(z,{fontSize:"sm",children:r("header.about.content1")}),f.jsx(z,{fontSize:"sm",align:"right",mb:1,children:r("header.about.content2")})]})]}),f.jsxs(J,{size:"lg",w:"85%",onClick:function(){return window.open("https://github.com/langonginc","_blank")},cursor:"pointer",children:[f.jsx(K,{src:"https://github.com/langonginc.png",size:"lg",my:2,ml:-1,mr:2}),f.jsxs(Y,{display:"block",width:"100%",children:[f.jsx(z,{fontSize:"lg",fontWeight:"bold",mb:1,children:"langonginc"}),f.jsx(z,{fontSize:"sm",children:r("header.about.langonginc")}),f.jsx(z,{fontSize:"sm",align:"right",mb:1,children:"--Avicii"})]})]})]}),f.jsx(U,{as:"h6",size:"xs",my:2,children:r("header.about.styleContributors")}),f.jsx(V,{children:f.jsxs(J,{size:"lg",w:"85%",onClick:function(){return window.open("https://github.com/203IhzElttil","_blank")},cursor:"pointer",children:[f.jsx(K,{src:"https://github.com/203IhzElttil.png",size:"lg",my:2,ml:-1,mr:2}),f.jsxs(Y,{display:"block",width:"100%",children:[f.jsx(z,{fontSize:"lg",fontWeight:"bold",mb:1,children:"203IhzElttil"}),f.jsx(z,{fontSize:"sm",mb:1,children:r("header.about.203IhzElttil")})]})]})}),f.jsx(U,{as:"h5",size:"sm",mt:3,mb:2,children:r("header.about.contactUs")}),f.jsxs(V,{children:[f.jsxs(J,{size:"lg",w:"85%",onClick:function(){return window.open("https://github.com/railmapgen/rmp/issues","_blank")},cursor:"pointer",children:[f.jsx(K,{src:"/rmp/assets/github-mark-7a0dd11e.svg",size:"lg",my:2,ml:-1,mr:2}),f.jsxs(Y,{display:"block",width:"100%",children:[f.jsx(z,{fontSize:"lg",fontWeight:"bold",mb:1,children:r("header.about.github")}),f.jsx(z,{fontSize:"sm",children:r("header.about.githubContent")})]})]}),f.jsxs(J,{size:"lg",w:"85%",onClick:function(){return window.open("https://join.slack.com/t/railmapgenerator/shared_invite/zt-1odhhta3n-DdZF~fnVwo_q0S0RJmgV8A","_blank")},cursor:"pointer",children:[f.jsx(K,{src:"/rmp/assets/slack-mark-19839006.svg",size:"lg",my:2,ml:-1,mr:2}),f.jsxs(Y,{display:"block",width:"100%",children:[f.jsx(z,{fontSize:"lg",fontWeight:"bold",mb:1,children:r("header.about.slack")}),f.jsx(z,{fontSize:"sm",children:r("header.about.slackContent")}),f.jsx(z,{fontSize:"sm",as:"i",children:"#rmg, #rmp, #palette-and-templates, #random"})]})]})]}),f.jsx(U,{as:"h5",size:"sm",mt:3,mb:2,children:r("header.about.linkExchange")}),f.jsxs(V,{children:[f.jsxs(J,{size:"lg",w:"85%",onClick:function(){return a(!0)},cursor:"pointer",children:[f.jsx(K,{src:"/rmp//images/guidaoTransit.jpg",size:"lg",my:2,ml:-1,mr:2}),f.jsxs(Y,{display:"block",width:"100%",children:[f.jsx(z,{fontSize:"lg",fontWeight:"bold",mb:1,children:r("header.about.guidaoTransit")}),f.jsx(z,{fontSize:"sm",children:r("header.about.guidaoTransitContent")})]})]}),f.jsxs(w,{size:"6xl",isOpen:o,onClose:function(){return a(!1)},children:[f.jsx(O,{}),f.jsxs(S,{children:[f.jsx(k,{children:r("header.about.guidaoTransit")}),f.jsx(_,{}),f.jsx(E,{paddingBottom:10,children:f.jsx(W,{width:"1080",height:"304",src:"/rmp//images/guidaoTransitQRCode.png"})})]})]})]})]})]})]})},Vt=function(){var e=d(ge.useState(!1),2),n=e[0],t=e[1],r=Ye((function(e){return e.param})).svgViewBoxZoom,i=Ae(),s=[{type:"slider",label:"",value:400-r,min:10,max:390,step:1,onChange:function(e){return i(De(400-e))},leftIcon:f.jsx(sn,{}),rightIcon:f.jsx(rn,{}),minW:160}];return f.jsxs(q,{isOpen:n,onOpen:function(){return t(!0)},onClose:function(){return t(!1)},children:[f.jsx($,{children:f.jsx(j,{"aria-label":"zoom",variant:"ghost",size:"sm",icon:f.jsx(rn,{}),onClick:function(){return t(!n)}})}),f.jsx(Z,{children:f.jsx(Q,{children:f.jsx(Qe,{fields:s,noLabel:!0})})})]})},Jt=function(e){var n=e.isOpen,t=e.onClose,r=Ae(),i=He().t,s=ge.useRef(window.graph),o=d(ge.useState(0),2),a=o[0],c=o[1],l=d(ge.useState(0),2),u=l[0],h=l[1],p=[{type:"input",label:i("header.settings.procedures.translate.x"),value:a.toString(),variant:"number",onChange:function(e){return c(Number(e))},minW:"full"},{type:"input",label:i("header.settings.procedures.translate.y"),value:u.toString(),variant:"number",onChange:function(e){return h(Number(e))},minW:"full"}];return f.jsxs(w,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[f.jsx(O,{}),f.jsxs(S,{children:[f.jsx(k,{children:i("header.settings.procedures.translate.title")}),f.jsx(_,{}),f.jsxs(E,{children:[i("header.settings.procedures.translate.content"),f.jsx(Qe,{fields:p})]}),f.jsxs(N,{children:[f.jsx(A,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:i("cancel")}),f.jsx(A,{colorScheme:"red",onClick:function(){s.current.forEachNode((function(e,n){s.current.updateNodeAttribute(e,"x",(function(e){return(null!=e?e:0)+a})),s.current.updateNodeAttribute(e,"y",(function(e){return(null!=e?e:0)+u}))})),r(Ne()),r(Pe()),r(Re(s.current.export())),t()},children:i("apply")})]})]})]})},Kt=function(e){var n=e.isOpen,t=e.onClose,r=Ae(),i=He().t,s=ge.useRef(window.graph),o=d(ge.useState(1),2),a=o[0],c=o[1],l=[{type:"input",label:i("header.settings.procedures.scale.factor"),value:a.toString(),variant:"number",onChange:function(e){return c(Number(e))},minW:"full"}];return f.jsxs(w,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[f.jsx(O,{}),f.jsxs(S,{children:[f.jsx(k,{children:i("header.settings.procedures.scale.title")}),f.jsx(_,{}),f.jsxs(E,{children:[i("header.settings.procedures.scale.content"),f.jsx(Qe,{fields:l})]}),f.jsxs(N,{children:[f.jsx(A,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:i("cancel")}),f.jsx(A,{colorScheme:"red",onClick:function(){s.current.forEachNode((function(e,n){s.current.updateNodeAttribute(e,"x",(function(e){return(null!=e?e:0)*a})),s.current.updateNodeAttribute(e,"y",(function(e){return(null!=e?e:0)*a}))})),r(Ne()),r(Pe()),r(Re(s.current.export())),t()},children:i("apply")})]})]})]})},Yt=function(e){var n=e.isOpen,t=e.onClose,r=Ae(),i=He().t,s=ge.useRef(window.graph),o=Object.fromEntries(Object.entries(zn).map((function(e){var n=d(e,2),t=n[0],r=n[1];return[t,i(r.metadata.displayName).toString()]}))),a=d(ge.useState(Object.keys(zn).at(0)),2),c=a[0],l=a[1],u=d(ge.useState(Object.keys(zn).at(1)),2),h=u[0],p=u[1],m=[{type:"select",label:i("header.settings.procedures.changeType.changeFrom"),value:c,options:o,disabledOptions:[h],onChange:function(e){return l(e)},minW:"full"},{type:"select",label:i("header.settings.procedures.changeType.changeTo"),value:h,options:o,disabledOptions:[c],onChange:function(e){return p(e)},minW:"full"}];return f.jsxs(w,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[f.jsx(O,{}),f.jsxs(S,{children:[f.jsxs(k,{children:[f.jsx(z,{as:"b",fontSize:"xl",children:i("header.settings.procedures.changeType.title")}),f.jsx(C,{label:i("header.settings.pro"),children:f.jsx(b,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",children:"PRO"})})]}),f.jsx(_,{}),f.jsxs(E,{children:[f.jsx(Qe,{fields:m}),f.jsx(z,{fontSize:"sm",mt:"3",lineHeight:"100%",color:"red.500",children:i("header.settings.procedures.changeType.info")})]}),f.jsxs(N,{children:[f.jsx(A,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:i("cancel")}),f.jsx(A,{colorScheme:"red",onClick:function(){En(s.current,c,h),r(Ne()),r(Re(s.current.export()))},children:i("apply")})]})]})]})},qt=function(e){var n=e.isOpen,t=e.onClose,r=Ae(),i=Ye((function(e){return e.runtime})).theme,s=He().t,o=ge.useRef(window.graph),a=d(ge.useState(i),2),c=a[0],l=a[1],u=d(ge.useState(!1),2),h=u[0],p=u[1];return f.jsxs(w,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[f.jsx(O,{}),f.jsxs(S,{children:[f.jsx(k,{children:s("header.settings.procedures.removeLines.title")}),f.jsx(_,{}),f.jsxs(E,{children:[s("header.settings.procedures.removeLines.content"),f.jsx(on,{theme:c,onClick:function(){return p(!0)}}),f.jsx(an,{isOpen:h,defaultTheme:c,onClose:function(){return p(!1)},onUpdate:function(e){return l(e)}})]}),f.jsxs(N,{children:[f.jsx(A,{colorScheme:"blue",variant:"outline",mr:"1",onClick:t,children:s("cancel")}),f.jsx(A,{colorScheme:"red",onClick:function(){o.current.filterEdges((function(e,n,t,r,i,s,o){return n.style===_e.SingleColor&&JSON.stringify(n[_e.SingleColor].color)===JSON.stringify(c)})).forEach((function(e){return o.current.dropEdge(e)})),r(Pe()),r(Re(o.current.export())),t()},children:s("remove")})]})]})]})},$t={width:"100%",justifyContent:"space-between"},Zt={fontFamily:"-apple-system"},Qt=function(e){var n=e.isOpen,t=e.onClose,r=Ye((function(e){return e.runtime})).keepLastPath,i=Ae(),s=He().t,o=M("primary.500","primary.300"),a=d(ge.useState(!1),2),c=a[0],l=a[1],u=d(ge.useState(!1),2),h=u[0],p=u[1],m=d(ge.useState(!1),2),g=m[0],x=m[1],j=d(ge.useState(!1),2),v=j[0],y=j[1],H=Oe.isAllowAnalytics(),N=Ye((function(e){return e.app})).telemetry.app;return f.jsxs(w,{isOpen:n,onClose:t,size:"xl",scrollBehavior:"inside",children:[f.jsx(O,{}),f.jsxs(S,{children:[f.jsx(k,{children:s("header.settings.title")}),f.jsx(_,{}),f.jsx(E,{children:f.jsxs(V,{divider:f.jsx(X,{borderColor:"gray.200"}),children:[f.jsxs(F,{width:"100%",mb:"3",children:[f.jsx(z,{as:"b",fontSize:"xl",children:s("header.settings.preference.title")}),f.jsx(F,{mt:"3",children:f.jsxs(F,{display:"flex",mb:"1",children:[f.jsx(z,{flex:"1",children:s("header.settings.preference.keepLastPath")}),f.jsx(ee,{isChecked:r,onChange:function(e){var n=e.target.checked;return i(cn(n))}})]})})]}),f.jsxs(F,{width:"100%",mb:"3",children:[f.jsx(z,{as:"b",fontSize:"xl",children:s("header.settings.shortcuts.title")}),f.jsx(F,{mt:"3",children:f.jsxs(ne,{children:[f.jsx(te,{children:f.jsxs(re,{children:[f.jsx(ie,{children:s("header.settings.shortcuts.keys")}),f.jsx(ie,{children:s("header.settings.shortcuts.description")})]})}),f.jsxs(se,{children:[f.jsxs(re,{children:[f.jsx(oe,{children:f.jsx(ae,{children:"f"})}),f.jsx(oe,{children:s("header.settings.shortcuts.f")})]}),f.jsxs(re,{children:[f.jsx(oe,{children:f.jsx(ln,{})}),f.jsx(oe,{children:s("header.settings.shortcuts.arrowUpward")})]}),f.jsxs(re,{children:[f.jsx(oe,{children:f.jsx(un,{})}),f.jsx(oe,{children:s("header.settings.shortcuts.arrowBack")})]}),f.jsxs(re,{children:[f.jsx(oe,{children:f.jsx(hn,{})}),f.jsx(oe,{children:s("header.settings.shortcuts.arrowForward")})]}),f.jsxs(re,{children:[f.jsx(oe,{children:f.jsx(dn,{})}),f.jsx(oe,{children:s("header.settings.shortcuts.arrowDownward")})]}),f.jsxs(re,{children:[f.jsx(oe,{children:f.jsx(ae,{children:"i"})}),f.jsx(oe,{children:s("header.settings.shortcuts.i")})]}),f.jsxs(re,{children:[f.jsx(oe,{children:f.jsx(ae,{children:"j"})}),f.jsx(oe,{children:s("header.settings.shortcuts.j")})]}),f.jsxs(re,{children:[f.jsx(oe,{children:f.jsx(ae,{children:"k"})}),f.jsx(oe,{children:s("header.settings.shortcuts.k")})]}),f.jsxs(re,{children:[f.jsx(oe,{children:f.jsx(ae,{children:"l"})}),f.jsx(oe,{children:s("header.settings.shortcuts.l")})]}),f.jsxs(re,{children:[f.jsx(oe,{children:_n?f.jsx(ae,{sx:Zt,children:"⇧"}):f.jsx(ae,{children:"shift"})}),f.jsx(oe,{children:s("header.settings.shortcuts.shift")})]}),f.jsxs(re,{children:[f.jsx(oe,{children:_n?f.jsx(ae,{sx:Zt,children:"⌥"}):f.jsx(ae,{children:"alt"})}),f.jsx(oe,{children:s("header.settings.shortcuts.alt")})]}),f.jsxs(re,{children:[f.jsx(oe,{children:_n?f.jsx(ae,{sx:Zt,children:"⌫"}):f.jsx(ae,{children:"delete"})}),f.jsx(oe,{children:s("header.settings.shortcuts.delete")})]}),f.jsxs(re,{children:[f.jsxs(oe,{children:[_n?f.jsx(ae,{sx:Zt,children:"⌘"}):f.jsx(ae,{children:"ctrl"})," + ",f.jsx(ae,{children:"z"})]}),f.jsx(oe,{children:s("header.settings.shortcuts.undo")})]}),f.jsxs(re,{children:[f.jsx(oe,{children:_n?f.jsxs(f.Fragment,{children:[f.jsx(ae,{sx:Zt,children:"⇧"})," + ",f.jsx(ae,{sx:Zt,children:"⌘"})," + ",f.jsx(ae,{children:"z"})]}):f.jsxs(f.Fragment,{children:[f.jsx(ae,{children:"ctrl"})," + ",f.jsx(ae,{children:"y"})]})}),f.jsx(oe,{children:s("header.settings.shortcuts.redo")})]})]})]})})]}),f.jsxs(F,{width:"100%",mb:"3",children:[f.jsx(z,{as:"b",fontSize:"xl",children:s("header.settings.procedures.title")}),f.jsxs(F,{mt:"3",children:[f.jsx(A,{sx:$t,rightIcon:f.jsx(fn,{}),onClick:function(){return l(!0)},children:s("header.settings.procedures.translate.title")}),f.jsx(Jt,{isOpen:c,onClose:function(){return l(!1)}}),f.jsx(A,{sx:$t,rightIcon:f.jsx(fn,{}),onClick:function(){return p(!0)},children:s("header.settings.procedures.scale.title")}),f.jsx(Kt,{isOpen:h,onClose:function(){return p(!1)}}),f.jsx(A,{sx:$t,rightIcon:f.jsx(fn,{}),onClick:function(){return x(!0)},children:f.jsxs(F,{children:[s("header.settings.procedures.changeType.title"),f.jsx(C,{label:s("header.settings.pro"),children:f.jsx(b,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",children:"PRO"})})]})}),f.jsx(Yt,{isOpen:g,onClose:function(){return x(!1)}}),f.jsx(A,{sx:$t,rightIcon:f.jsx(fn,{}),onClick:function(){return y(!0)},children:s("header.settings.procedures.removeLines.title")}),f.jsx(qt,{isOpen:v,onClose:function(){return y(!1)}})]})]}),f.jsxs(F,{width:"100%",mb:"3",children:[f.jsx(z,{as:"b",fontSize:"xl",children:s("header.settings.telemetry.title")}),f.jsxs(F,{mt:"3",children:[f.jsxs(F,{display:"flex",mb:"1",children:[f.jsx(z,{flex:"1",children:s("header.settings.telemetry.essential")}),f.jsx(ee,{isChecked:H,isDisabled:!0})]}),f.jsx(z,{fontSize:"sm",lineHeight:"100%",color:"gray.600",children:s("header.settings.telemetry.essentialInfo")}),f.jsxs(I,{color:o,fontSize:"sm",lineHeight:"100%",href:"https://support.google.com/analytics/answer/11593727",isExternal:!0,children:[s("header.settings.telemetry.essentialLink")," ",f.jsx(L,{as:Ge})]}),f.jsxs(F,{display:"flex",mb:"1",children:[f.jsx(z,{flex:"1",children:s("header.settings.telemetry.additional")}),f.jsx(ee,{isChecked:N,onChange:function(e){var n=e.target.checked;return i(pn(n))}})]}),f.jsx(z,{fontSize:"sm",lineHeight:"100%",color:"gray.600",children:s("header.settings.telemetry.additionalInfo")})]})]})]})})]})]})};function Xt(){var e=He().t,n=Ae(),t=Ye((function(e){return e.app})).telemetry.app,r=Ye((function(e){return e.param})),s=r.past,o=r.future,c=d(ge.useState(!1),2),l=c[0],u=c[1],h=d(ge.useState(!1),2),p=h[0],m=h[1],b=$n(Oe.getEnv),w=$n(Oe.getAppVersion);ge.useEffect((function(){t&&b!==mn.DEV&&Oe.event(Xe.APP_LOAD,{isStandaloneWindow:Oe.isStandaloneWindow()})}),[b]);var O=function(){var e=a(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Oe.getI18nInstance().changeLanguage(n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return f.jsxs(gn,{children:[f.jsx(U,{as:"h4",size:"md",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:e("header.about.rmp")}),f.jsx(xn,{environment:b,version:w,popoverHeader:b===mn.PRD?void 0:f.jsxs(qn,{i18nKey:"header.popoverHeader",environment:b,children:["You're on ",{environment:b}," environment!"]}),popoverBody:b===mn.PRD?void 0:f.jsx(qn,{i18nKey:"header.popoverBody",children:"This is a testing environment where we test the latest beta RMP."})}),f.jsxs(ce,{ml:"auto",children:[f.jsx(le,{children:f.jsx(j,{size:"sm",variant:"ghost","aria-label":"Undo",icon:f.jsx(jn,{}),disabled:0===s.length,onClick:function(){return n(vn())}})}),f.jsx(le,{children:f.jsx(j,{size:"sm",variant:"ghost","aria-label":"Redo",icon:f.jsx(yn,{}),disabled:0===o.length,onClick:function(){return n(bn())}})}),f.jsx(le,{children:f.jsx(Vt,{})}),f.jsx(le,{children:f.jsx(ct,{})}),f.jsx(le,{children:f.jsx(Wt,{})}),Oe.isStandaloneWindow()&&f.jsx(le,{children:f.jsxs(g,{children:[f.jsx(x,{as:j,icon:f.jsx(wn,{}),variant:"ghost",size:"sm"}),f.jsx(v,{children:["en","zh-Hans","zh-Hant","ja","ko"].map((function(e){return f.jsx(y,{onClick:function(){return O(e)},children:Zn[e][e]},e)}))})]})}),f.jsx(le,{children:f.jsx(j,{size:"sm",variant:"ghost","aria-label":"Settings",icon:f.jsx(On,{}),onClick:function(){return u(!0)}})}),f.jsx(le,{children:f.jsx(j,{size:"sm",variant:"ghost","aria-label":"Help",icon:f.jsx(Sn,{}),onClick:function(){return m(!0)}})})]}),f.jsx(Qt,{isOpen:l,onClose:function(){return u(!1)}}),f.jsx(Ut,{isOpen:p,onClose:function(){return m(!1)}})]})}function er(){var e=Ae(),n=Ye((function(e){return e.runtime.globalAlerts}));return f.jsx(f.Fragment,{children:Object.entries(n).map((function(n){var t=d(n,2),r=t[0],i=t[1],s=i.message,o=i.url,a=i.linkedApp;return f.jsxs(ue,{status:r,variant:"solid",size:"xs",pl:3,pr:1,py:0,zIndex:"1",children:[f.jsx(he,{}),a?f.jsx(I,{onClick:function(){return function(e){Oe.isStandaloneWindow()?window.open("/".concat(e),"_blank"):Oe.openApp(e)}(a)},children:s}):o?f.jsx(I,{href:o,target:"_blank",children:s}):s,f.jsx(m,{ml:"auto",onClick:function(){return e(kn(r))}})]},r)}))})}}}}))}();
