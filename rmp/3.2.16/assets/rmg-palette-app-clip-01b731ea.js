import{j as n,K as C}from"./chakra-6dc5c7a5.js";import{r as R,R as E}from"./index-d1183c16.js";import{b as t}from"./react-2c0b8364.js";const x="rmg-palette-bridge--",h={position:"relative",h:460,maxH:"70%","& > button":{position:"absolute",right:1,top:1},"& iframe":{h:"100%",w:"100%"}};function v(i){const{isOpen:c,onClose:a,defaultTheme:s,onSelect:l}=i,[r]=t.useState(crypto.randomUUID()),[m,f]=t.useState(!1),d="/rmg-palette/#/picker?"+new URLSearchParams({parentComponent:R.getAppName(),parentId:r}),p=t.useRef();return t.useEffect(()=>{const e=new BroadcastChannel(x+r);return p.current=e,e.onmessage=u=>{const{event:o,data:g}=u.data;console.log("[rmp] Received event from Palette app clip:",o),o==="CLOSE"?a():o==="SELECT"?l(g):o==="LOADED"&&f(!0)},()=>{e.close()}},[]),t.useEffect(()=>{var e;return(e=p.current)==null?void 0:e.postMessage({event:"OPEN",data:s})},[m,s==null?void 0:s.toString()]),n.jsxs(E,{size:"md",isOpen:c,onClose:a,sx:h,children:[n.jsx(C,{onClick:a}),n.jsx("iframe",{src:d,loading:"eager"})]})}export{v as default};
