"use strict";(self.webpackChunkrmp=self.webpackChunkrmp||[]).push([[5316],{6737:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var r=n(4942),i=n(3433),a=n(9439),s=n(1413),u=n(2791),l=n(9230),o=n(4087),d=n(5946),c=n(2893),f=n(3306),p=n(5984),h=n(1165),g=n(7339),m=n(8284),v=n(3671),x=n(7237),b=n(443),y=n(3363),j=n(3948),N=n(9671),Z=n(7705),A=n(7496),E=n(3578),C=n(1122),S=n(184);function O(){var e=(0,l.$G)().t,t=(0,g.u5)(),n=u.useCallback((function(){t((0,v.n9)()),t((0,m.DR)(i.current.export()))}),[t,v.n9,m.DR]),r=(0,g.Qy)((function(e){return e.runtime})).selected.at(0),i=u.useRef(window.graph),s=u.useState(!1),o=(0,a.Z)(s,2),d=o[0],c=o[1],p=u.useRef(null),b=u.useState(void 0),y=(0,a.Z)(b,2),O=y[0],W=y[1],R=i.current.getNodeAttribute(r,"type"),w=Object.fromEntries(Object.entries(x.Z).map((function(t){var n=(0,a.Z)(t,2),r=n[0],i=n[1];return[r,e(i.metadata.displayName).toString()]}))),k=function(e){e&&O&&((0,C.Kz)(i.current,r,O),n()),W(void 0),c(!1)};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(h.Nv,{label:e("panel.details.info.stationType"),minW:"276",children:(0,S.jsx)(h.mg,{options:w,disabledOptions:[R],value:R,onChange:function(e){var t=e.target.value;W(t),c(!0)}})}),(0,S.jsx)(j.a,{isOpen:d,leastDestructiveRef:p,onClose:function(){return k(!1)},children:(0,S.jsx)(N.Z,{children:(0,S.jsxs)(j._,{children:[(0,S.jsx)(Z.x,{children:e("warning")}),(0,S.jsx)(A.f,{children:e("panel.details.changeStationTypeContent")}),(0,S.jsxs)(E.m,{children:[(0,S.jsx)(f.z,{ref:p,onClick:function(){return k(!1)},children:e("cancel")}),(0,S.jsx)(f.z,{ml:"2",colorScheme:"red",onClick:function(){return k(!0)},children:e("panel.details.changeType")})]})]})})})]})}function W(){var e=(0,l.$G)().t,t=(0,g.u5)(),n=u.useCallback((function(){t((0,v.n9)()),t((0,m.DR)(d.current.export()))}),[t,v.n9,m.DR]),r=(0,g.Qy)((function(e){return e.runtime})),i=r.selected,s=r.theme,o=i.at(0),d=u.useRef(window.graph),c=u.useState(!1),p=(0,a.Z)(c,2),x=p[0],b=p[1],O=u.useRef(null),W=Object.fromEntries(Object.entries(y.V).map((function(t){var n=(0,a.Z)(t,2),r=n[0],i=n[1];return[r,e(i.metadata.displayName).toString()]}))),R=u.useState(d.current.getEdgeAttribute(o,"type")),w=(0,a.Z)(R,2),k=w[0],z=w[1],D=u.useState(void 0),_=(0,a.Z)(D,2),T=_[0],G=_[1],Q=Object.fromEntries(Object.entries(y.b).map((function(t){var n=(0,a.Z)(t,2),r=n[0],i=n[1];return[r,e(i.metadata.displayName).toString()]}))),$=u.useState(d.current.getEdgeAttribute(o,"style")),J=(0,a.Z)($,2),L=J[0],V=J[1],X=u.useState(void 0),M=(0,a.Z)(X,2),P=M[0],B=M[1],I=function(e){e&&(T?(T&&((0,C.Vz)(d.current,o,T),z(d.current.getEdgeAttribute(o,"type")),n()),G(void 0)):P&&(P&&((0,C.Bd)(d.current,o,P,s),V(d.current.getEdgeAttribute(o,"style")),n()),B(void 0))),b(!1)};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(h.Nv,{label:e("panel.details.info.linePathType"),minW:"276",children:(0,S.jsx)(h.mg,{options:W,disabledOptions:[k],value:k,onChange:function(e){var t=e.target.value;G(t),b(!0)}})}),(0,S.jsx)(h.Nv,{label:e("panel.details.info.lineStyleType"),minW:"276",children:(0,S.jsx)(h.mg,{options:Q,disabledOptions:[L],value:L,onChange:function(e){var t=e.target.value;B(t),b(!0)}})}),(0,S.jsx)(j.a,{isOpen:x,leastDestructiveRef:O,onClose:function(){return I(!1)},children:(0,S.jsx)(N.Z,{children:(0,S.jsxs)(j._,{children:[(0,S.jsx)(Z.x,{children:e("warning")}),(0,S.jsx)(A.f,{children:e("panel.details.changeLineTypeContent")}),(0,S.jsxs)(E.m,{children:[(0,S.jsx)(f.z,{ref:O,onClick:function(){return I(!1)},children:e("cancel")}),(0,S.jsx)(f.z,{ml:"2",colorScheme:"red",onClick:function(){return I(!0)},children:e("panel.details.changeType")})]})]})})})]})}function R(){var e=(0,l.$G)().t,t=(0,g.Qy)((function(e){return e.runtime})).selected,n=t.at(0),r=u.useRef(window.graph),i=[{type:"input",label:e("panel.details.info.id"),value:t.length>0?t.join(", "):"undefined",minW:276}];return 0===t.length||t.length>1&&i.push({type:"input",label:e("panel.details.info.type"),value:"multiple selection",minW:276}),(0,S.jsxs)(o.xu,{p:1,children:[(0,S.jsx)(d.X,{as:"h5",size:"sm",children:e("panel.details.info.title")}),(0,S.jsx)(h.M5,{fields:i,minW:130}),1===t.length&&n.startsWith("stn")&&r.current.hasNode(n)&&(0,S.jsx)(O,{}),1===t.length&&n.startsWith("line")&&r.current.hasEdge(n)&&(0,S.jsx)(W,{})]})}function w(){var e=(0,l.$G)().t,t=(0,g.u5)(),n=u.useCallback((function(){t((0,v.n9)()),t((0,m.DR)(f.current.export()))}),[t,v.n9,m.DR]),r=(0,g.Qy)((function(e){return e.runtime})),i=r.selected,s=r.refresh.all,c=i.at(0),f=u.useRef(window.graph),p=u.useState({x:0,y:0}),x=(0,a.Z)(p,2),b=x[0],y=x[1];u.useEffect((function(){if(null!==c&&void 0!==c&&c.startsWith("stn")||null!==c&&void 0!==c&&c.startsWith("misc_node_")){var e=f.current.getNodeAttribute(c,"x"),t=f.current.getNodeAttribute(c,"y");y({x:e,y:t})}}),[s,i]);var j=[{type:"input",label:e("panel.details.nodePosition.pos.x"),value:b.x.toString(),validator:function(e){return!Number.isNaN(e)},onChange:function(e){f.current.mergeNodeAttributes(c,{x:Number(e)}),n()}},{type:"input",label:e("panel.details.nodePosition.pos.y"),value:b.y.toString(),validator:function(e){return!Number.isNaN(e)},onChange:function(e){f.current.mergeNodeAttributes(c,{y:Number(e)}),n()}}];return(0,S.jsxs)(o.xu,{p:1,children:[(0,S.jsx)(d.X,{as:"h5",size:"sm",children:e("panel.details.nodePosition.title")}),(0,S.jsx)(h.M5,{fields:j,minW:130})]})}function k(){var e=(0,l.$G)().t,t=(0,g.Qy)((function(e){return e.runtime})).selected,n=t.at(0),r=u.useRef(window.graph),i=u.useState("undefined"),s=(0,a.Z)(i,2),c=s[0],f=s[1],p=u.useState("undefined"),m=(0,a.Z)(p,2),v=m[0],x=m[1],b=u.useState("undefined"),y=(0,a.Z)(b,2),j=y[0],N=y[1],Z=u.useState("undefined"),A=(0,a.Z)(Z,2),E=A[0],C=A[1];u.useEffect((function(){if(null!==n&&void 0!==n&&n.startsWith("line")){var e=r.current.extremities(n),t=(0,a.Z)(e,2),i=t[0],s=t[1];if(f(i),x(s),i.startsWith("stn")){var u,l,o=r.current.getNodeAttribute(i,"type");N(null!==(u=null===(l=r.current.getNodeAttribute(i,o))||void 0===l?void 0:l.names.at(0))&&void 0!==u?u:"undefined")}if(s.startsWith("stn")){var d,c,p=r.current.getNodeAttribute(s,"type");C(null!==(d=null===(c=r.current.getNodeAttribute(s,p))||void 0===c?void 0:c.names.at(0))&&void 0!==d?d:"undefined")}}}),[t]);var O=[{type:"input",label:e("panel.details.lineExtremities.source"),value:c},{type:"input",label:e("panel.details.lineExtremities.target"),value:v},{type:"input",label:e("panel.details.lineExtremities.sourceName"),value:j},{type:"input",label:e("panel.details.lineExtremities.targetName"),value:E}];return(0,S.jsxs)(o.xu,{p:1,children:[(0,S.jsx)(d.X,{as:"h5",size:"sm",children:e("panel.details.lineExtremities.title")}),(0,S.jsx)(h.M5,{fields:O,minW:130})]})}var z=(0,s.Z)((0,s.Z)({},x.Z),b.Z),D=function(){var e=(0,l.$G)().t,t=(0,g.u5)(),n=u.useCallback((function(){t((0,v.n9)()),t((0,m.DR)(j.current.export()))}),[t,v.n9,m.DR]),s=(0,g.Qy)((function(e){return e.runtime})),x=s.selected,b=s.mode,j=u.useRef(window.graph),N=u.useState(""),Z=(0,a.Z)(N,2),A=(Z[0],Z[1]);u.useEffect((function(){var e,t=x.at(0);j.current.hasEdge(t)&&A(null!==(e=j.current.getEdgeAttribute(t,"reconcileId"))&&void 0!==e?e:"undefined")}),[x]);var E=[],C=x.at(0);if(1===x.length&&j.current.hasNode(C)){var O=j.current.getNodeAttribute(C,"type"),W=j.current.getNodeAttribute(C,O);E.push.apply(E,(0,i.Z)(z[O].fields.filter((function(e){return"custom"!==e.type})).map((function(i){var a,s;return{type:i.type,label:e(i.label),value:null===(a=i.value)||void 0===a?void 0:a.call(i,W),isChecked:null===(s=i.isChecked)||void 0===s?void 0:s.call(i,W),options:i.options,disabledOptions:i.disabledOptions&&i.disabledOptions(W),validator:i.validator,oneLine:i.oneLine,onChange:function(a){var s;try{s=i.onChange(a,W)}catch(u){return void t((0,v.bI)({status:"error",message:e("err-code.".concat(u))}))}j.current.mergeNodeAttributes(C,(0,r.Z)({},O,s)),n()}}}))).concat((0,i.Z)(z[O].fields.filter((function(e){return"custom"===e.type})))))}if(1===x.length&&j.current.hasEdge(C)){var D=j.current.getEdgeAttribute(C,"type"),_=j.current.getEdgeAttribute(C,D);E.push.apply(E,(0,i.Z)(y.V[D].fields.map((function(t){return{type:t.type,label:e(t.label),value:t.value(_),options:t.options,disabledOptions:t.disabledOptions&&t.disabledOptions(_),validator:t.validator,onChange:function(e){j.current.mergeEdgeAttributes(C,(0,r.Z)({},D,t.onChange(e,_))),n()}}}))));var T=j.current.getEdgeAttribute(C,"style");E.push.apply(E,(0,i.Z)(y.b[T].fields.filter((function(e){return"custom"===e.type}))))}return(0,S.jsxs)(h.L$,{isOpen:x.length>0&&!b.startsWith("line")&&!b.startsWith("misc-edge"),width:300,header:"Dummy header",alwaysOverlay:!0,children:[(0,S.jsx)(h.mQ,{onClose:function(){return t((0,v.x_)())},children:e("panel.details.header")}),(0,S.jsxs)(h.EI,{children:[(0,S.jsx)(R,{}),1===x.length&&j.current.hasNode(C)&&(0,S.jsx)(w,{}),1===x.length&&j.current.hasEdge(C)&&(0,S.jsx)(k,{}),1===x.length&&(0,S.jsxs)(o.xu,{p:1,children:[(0,S.jsx)(d.X,{as:"h5",size:"sm",children:e("panel.details.specificAttrsTitle")}),(0,S.jsx)(h.M5,{fields:E,minW:276})]})]}),(0,S.jsx)(h.B0,{children:(0,S.jsxs)(c.U,{children:[1===x.length&&j.current.hasNode(x.at(0))&&(0,S.jsx)(f.z,{size:"sm",variant:"outline",onClick:function(){return function(e){var t=JSON.parse(JSON.stringify(j.current.getNodeAttributes(e)));t.x+=50,t.y+=50;var r=e.startsWith("stn")?"stn_".concat((0,p.x0)(10)):"misc_node_".concat((0,p.x0)(10));j.current.addNode(r,t),n()}(x.at(0))},children:e("panel.details.footer.duplicate")}),(0,S.jsx)(f.z,{size:"sm",variant:"outline",onClick:function(){return function(e){t((0,v.x_)()),e.forEach((function(e){j.current.hasNode(e)?j.current.dropNode(e):j.current.hasEdge(e)&&j.current.dropEdge(e)})),n()}(x)},children:e("panel.details.footer.remove")})]})})]})}},1122:function(e,t,n){n.d(t,{Bd:function(){return c},Kz:function(){return l},Vz:function(){return d},x8:function(){return o}});var r=n(4942),i=n(1413),a=n(8817),s=n(7237),u=n(3363),l=function(e,t,n){var a=e.getNodeAttribute(t,"type"),u=e.getNodeAttribute(t,a).names;e.removeNodeAttribute(t,a);var l=(0,i.Z)((0,i.Z)({},s.Z[n].defaultAttrs),{},{names:u});e.mergeNodeAttributes(t,(0,r.Z)({type:n},n,l))},o=function(e,t,n){return e.filterNodes((function(e,n){return e.startsWith("stn")&&n.type===t})).forEach((function(t){l(e,t,n)}))},d=function(e,t,n){var i=e.getEdgeAttribute(t,"type");e.removeEdgeAttribute(t,i);var a=JSON.parse(JSON.stringify(u.V[n].defaultAttrs));e.mergeEdgeAttributes(t,(0,r.Z)({type:n},n,a))},c=function(e,t,n,i){var s=e.getEdgeAttribute(t,"style");e.removeEdgeAttribute(t,s);var l=JSON.parse(JSON.stringify(u.b[n].defaultAttrs));n===a.R.SingleColor&&i&&(l.color=i),e.mergeEdgeAttributes(t,(0,r.Z)({style:n},n,l))}},5946:function(e,t,n){n.d(t,{X:function(){return f}});var r=n(1413),i=n(5987),a=n(7872),s=n(581),u=n(9477),l=n(1070),o=n(6992),d=n(184),c=["className"],f=(0,a.G)((function(e,t){var n=(0,s.mq)("Heading",e),a=(0,u.Lr)(e),f=(a.className,(0,i.Z)(a,c));return(0,d.jsx)(l.m.h2,(0,r.Z)((0,r.Z)({ref:t,className:(0,o.cx)("chakra-heading",e.className)},f),{},{__css:n}))}));f.displayName="Heading"}}]);
//# sourceMappingURL=DetailsPanel.b959f94a.chunk.js.map