{"version":3,"file":"static/js/WindowHeader.b123c973.chunk.js","mappings":"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","sources":["components/page-header/gallery-modal.tsx","components/page-header/open-actions.tsx","util/fonts.ts","components/page-header/terms-and-conditions.tsx","components/page-header/download-actions.tsx","images/github-mark.svg","images/slack-mark.svg","components/page-header/about-modal.tsx","components/page-header/zoom-popover.tsx","components/page-header/procedures-modal.tsx","components/page-header/settings-modal.tsx","components/page-header/window-header.tsx","components/page-header/global-alerts.tsx","components/page-header/page-header.tsx","util/change-types.ts","util/helpers.ts","saves|lazy|/^/.//.*/.json$/|chunkName: template|groupOptions: {}|namespace object"],"sourcesContent":["import {\n    Button,\n    Modal,\n    ModalBody,\n    ModalCloseButton,\n    ModalContent,\n    ModalHeader,\n    ModalOverlay,\n    VStack,\n} from '@chakra-ui/react';\nimport { useTranslation } from 'react-i18next';\nimport { RMPSave } from '../../util/save';\n\nexport const GalleryModal = (props: {\n    isOpen: boolean;\n    handleOpenTemplates: (rmpSave: RMPSave) => void;\n    onClose: () => void;\n}) => {\n    const { isOpen, handleOpenTemplates, onClose } = props;\n    const { t } = useTranslation();\n\n    const handleSelect = async (name: string) => {\n        const module = await import(/* webpackChunkName: \"template\" */ `../../saves/${name}.json`);\n        handleOpenTemplates(module.default as RMPSave);\n        onClose();\n    };\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose}>\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>{t('header.open.gallery')}</ModalHeader>\n                <ModalCloseButton />\n\n                <ModalBody>\n                    <VStack>\n                        {['shanghai', 'guangzhou', 'beijing', 'santiago'].map(city => (\n                            <Button key={city} minWidth={200} onClick={() => handleSelect(city)}>\n                                {t(`header.open.${city}`)}\n                            </Button>\n                        ))}\n                    </VStack>\n                </ModalBody>\n            </ModalContent>\n        </Modal>\n    );\n};\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { MdInsertDriveFile, MdNoteAdd, MdUpload } from 'react-icons/md';\nimport { Badge, IconButton, Menu, MenuButton, MenuItem, MenuList } from '@chakra-ui/react';\nimport { nanoid } from 'nanoid';\nimport { useRootDispatch } from '../../redux';\nimport {\n    ParamState,\n    setSvgViewBoxZoom,\n    setSvgViewBoxMin,\n    saveGraph,\n    setFullState,\n} from '../../redux/param/param-slice';\nimport { clearSelected, setRefreshNodes, setRefreshEdges, setGlobalAlert } from '../../redux/runtime/runtime-slice';\nimport { LinePathType, LineStyleType } from '../../constants/lines';\nimport { StationAttributes, StationType } from '../../constants/stations';\nimport { InterchangeInfo } from '../panels/details/interchange-field';\nimport { linePaths } from '../svgs/lines/lines';\nimport { ShmetroBasic2020StationAttributes } from '../svgs/stations/shmetro-basic-2020';\nimport { GzmtrBasicStationAttributes } from '../svgs/stations/gzmtr-basic';\nimport { GzmtrIntStationAttributes } from '../svgs/stations/gzmtr-int';\nimport { MTRStationAttributes } from '../svgs/stations/mtr';\nimport stations from '../svgs/stations/stations';\nimport { RMPSave, upgrade } from '../../util/save';\nimport { GalleryModal } from './gallery-modal';\n\nexport default function OpenActions() {\n    const { t } = useTranslation();\n    const dispatch = useRootDispatch();\n\n    const graph = React.useRef(window.graph);\n    const fileRMGInputRef = React.useRef<HTMLInputElement | null>(null);\n    const fileInputRef = React.useRef<HTMLInputElement | null>(null);\n\n    const [isGalleryModalOpen, setIsGalleryModalOpen] = React.useState(false);\n\n    const refreshAndSave = React.useCallback(() => {\n        dispatch(setRefreshNodes());\n        dispatch(setRefreshEdges());\n        dispatch(saveGraph(graph.current.export()));\n    }, [dispatch, setRefreshNodes, setRefreshEdges, saveGraph, graph]);\n\n    const handleNew = () => {\n        dispatch(clearSelected());\n        graph.current.clear();\n        dispatch(setSvgViewBoxZoom(100));\n        dispatch(setSvgViewBoxMin({ x: 0, y: 0 }));\n        refreshAndSave();\n    };\n\n    const handleUploadRMG = async (event: React.ChangeEvent<HTMLInputElement>) => {\n        const file = event.target.files?.[0];\n        console.log('OpenActions.handleUploadRMG():: received file', file);\n\n        if (file?.type !== 'application/json') {\n            dispatch(setGlobalAlert({ status: 'error', message: t('OpenActions.invalidType') }));\n            console.error('OpenActions.handleUploadRMG():: Invalid file type! Only file in JSON format is accepted.');\n        } else {\n            try {\n                const paramStr = await readFileAsText(file);\n                const param = JSON.parse(paramStr);\n                const stnList = param.stn_list;\n                const theme = param.theme;\n\n                // generate stn id\n                const stnIdMap = Object.fromEntries(\n                    Object.keys(stnList)\n                        .filter(id => !['linestart', 'lineend'].includes(id))\n                        .map(id => [id, `stn_${nanoid(10)}`])\n                );\n                // update stnIdMap if stations exist in the graph\n                Object.entries(stnList)\n                    .filter(([id, _]) => !['linestart', 'lineend'].includes(id))\n                    .forEach(([id, stnInfo]) => {\n                        const nodes = graph.current.filterNodes(\n                            (node, attr) =>\n                                // @ts-expect-error\n                                Object.values(StationType).includes(attr.type) &&\n                                // @ts-expect-error\n                                (attr[attr.type] as StationAttributes).names[0] === stnInfo.name[0]\n                        );\n                        if (nodes.length !== 0) stnIdMap[id] = nodes[0];\n                    });\n\n                // only import stations that don't appear in the graph\n                Object.entries(stnList)\n                    .filter(([id, _]) => !['linestart', 'lineend'].includes(id))\n                    .filter(\n                        ([id, stnInfo]) =>\n                            graph.current.filterNodes(\n                                (node, attr) =>\n                                    // @ts-expect-error\n                                    Object.values(StationType).includes(attr.type) &&\n                                    // @ts-expect-error\n                                    (attr[attr.type] as StationAttributes).names[0] === stnInfo.name[0]\n                            ).length === 0\n                    )\n                    .forEach(([id, stnInfo], i) => {\n                        // determine station type\n                        let type: StationType = StationType.ShmetroBasic;\n                        if (param.style === 'shmetro') {\n                            if ((stnInfo as any).transfer.info.flat().length > 0) type = StationType.ShmetroInt;\n                            else if (param.info_panel_type === 'sh2020') type = StationType.ShmetroBasic2020;\n                            else type = StationType.ShmetroBasic;\n                        } else if (param.style === 'gzmtr') {\n                            if ((stnInfo as any).transfer.info.flat().length > 0) type = StationType.GzmtrInt;\n                            else type = StationType.GzmtrBasic;\n                        } else if (param.style === 'mtr') {\n                            type = StationType.MTR;\n                        }\n\n                        // read default attrs\n                        const attr = {\n                            // deep copy to prevent mutual reference\n                            ...JSON.parse(JSON.stringify(stations[type].defaultAttrs)),\n                            names: (stnInfo as any).name,\n                        };\n\n                        // add style specific attrs from RMG save\n                        if (type === StationType.ShmetroBasic2020)\n                            (attr as ShmetroBasic2020StationAttributes).color = theme;\n                        else if (type === StationType.GzmtrBasic) {\n                            (attr as GzmtrBasicStationAttributes).color = param.theme;\n                            (attr as GzmtrBasicStationAttributes).lineCode = param.line_num;\n                            (attr as GzmtrBasicStationAttributes).stationCode = (stnInfo as any).num;\n                        } else if (type === StationType.GzmtrInt) {\n                            const transfer = JSON.parse(\n                                JSON.stringify((stnInfo as any).transfer.info)\n                            ) as InterchangeInfo[][];\n                            // override line code and station code to default as they are not provided in RMG save\n                            transfer.forEach(lv1 =>\n                                lv1.forEach(transferInfo => {\n                                    transferInfo[4] = '1';\n                                    transferInfo[5] = '01';\n                                })\n                            );\n                            // add current line and station code to transfer[0][0]\n                            transfer[0].unshift([\n                                ...param.theme,\n                                param.line_num,\n                                (stnInfo as any).num,\n                            ] as unknown as InterchangeInfo);\n                            (attr as GzmtrIntStationAttributes).transfer = transfer;\n                        } else if (type === StationType.MTR) {\n                            let transfer = JSON.parse(\n                                JSON.stringify((stnInfo as any).transfer.info)\n                            ) as InterchangeInfo[][];\n                            // drop out of station transfer as they should be placed in another station\n                            transfer = [transfer[0]];\n                            // override line code and station code to empty as they are useless in MTR station\n                            transfer.forEach(level =>\n                                level.forEach(transferInfo => {\n                                    transferInfo[4] = '';\n                                    transferInfo[5] = '';\n                                })\n                            );\n                            if (transfer.flat().length > 0) {\n                                // add current theme to transfer[0][0] as MTR display all transfers including the current line\n                                transfer[0].unshift([...param.theme, '', ''] as unknown as InterchangeInfo);\n                            }\n                            (attr as MTRStationAttributes).transfer = transfer;\n                        }\n\n                        graph.current.addNode(stnIdMap[id], {\n                            visible: true,\n                            zIndex: 0,\n                            x: 100 + i * 50,\n                            y: 1000,\n                            type,\n                            [type]: attr,\n                        });\n                    });\n\n                // import lines\n                Object.entries(stnList)\n                    .filter(([id, _]) => !['linestart', 'lineend'].includes(id))\n                    .forEach(([id, stnInfo]) => {\n                        (stnInfo as any).children\n                            .filter((child: string) => !['linestart', 'lineend'].includes(child))\n                            .forEach((child: string) => {\n                                graph.current.addDirectedEdgeWithKey(\n                                    `line_${nanoid(10)}`,\n                                    stnIdMap[id],\n                                    stnIdMap[child],\n                                    {\n                                        visible: true,\n                                        zIndex: 0,\n                                        type: LinePathType.Diagonal,\n                                        // deep copy to prevent mutual reference\n                                        [LinePathType.Diagonal]: JSON.parse(\n                                            JSON.stringify(linePaths[LinePathType.Diagonal].defaultAttrs)\n                                        ),\n                                        style: LineStyleType.SingleColor,\n                                        [LineStyleType.SingleColor]: { color: theme },\n                                        reconcileId: '',\n                                    }\n                                );\n                            });\n                    });\n\n                refreshAndSave();\n            } catch (err) {\n                dispatch(setGlobalAlert({ status: 'error', message: t('OpenActions.unknownError') }));\n                console.error(\n                    'OpenActions.handleUploadRMG():: Unknown error occurred while parsing the uploaded file',\n                    err\n                );\n            }\n        }\n\n        // clear field for next upload\n        event.target.value = '';\n    };\n\n    const handleUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n        const file = event.target.files?.[0];\n        console.log('OpenActions.handleUpload():: received file', file);\n\n        if (file?.type !== 'application/json') {\n            dispatch(setGlobalAlert({ status: 'error', message: t('OpenActions.invalidType') }));\n            console.error('OpenActions.handleUpload():: Invalid file type! Only file in JSON format is accepted.');\n        } else {\n            try {\n                const paramStr = await readFileAsText(file);\n                const { version, ...save } = JSON.parse(await upgrade(paramStr));\n\n                // details panel will complain unknown nodes or edges if last state is not cleared\n                dispatch(clearSelected());\n                graph.current.clear();\n                graph.current.import(save.graph);\n                const state: ParamState = { ...save, present: save.graph, past: [], future: [] };\n                dispatch(setFullState(state));\n\n                refreshAndSave();\n            } catch (err) {\n                dispatch(setGlobalAlert({ status: 'error', message: t('OpenActions.unknownError') }));\n                console.error(\n                    'OpenActions.handleUpload():: Unknown error occurred while parsing the uploaded file',\n                    err\n                );\n            }\n        }\n\n        // clear field for next upload\n        event.target.value = '';\n    };\n\n    const handleOpenTemplates = async (rmpSave: RMPSave) => {\n        // templates may be obsolete and require upgrades\n        const { version, graph: g, ...save } = JSON.parse(await upgrade(JSON.stringify(rmpSave))) as RMPSave;\n\n        // details panel will complain about unknown nodes or edges if the last selected is not cleared\n        dispatch(clearSelected());\n        graph.current.clear();\n        graph.current.import(g);\n        const state: ParamState = { ...save, present: g, past: [], future: [] };\n        dispatch(setFullState(state));\n\n        refreshAndSave();\n    };\n\n    return (\n        <Menu>\n            <MenuButton as={IconButton} size=\"sm\" variant=\"ghost\" icon={<MdUpload />} />\n            <MenuList>\n                <MenuItem icon={<MdNoteAdd />} onClick={handleNew}>\n                    {t('header.open.new')}\n                </MenuItem>\n\n                <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    accept=\".json\"\n                    hidden={true}\n                    onChange={handleUpload}\n                    data-testid=\"file-upload\"\n                />\n                <MenuItem icon={<MdUpload />} onClick={() => fileInputRef?.current?.click()}>\n                    {t('header.open.config')}\n                </MenuItem>\n\n                <input\n                    ref={fileRMGInputRef}\n                    type=\"file\"\n                    accept=\".json\"\n                    hidden={true}\n                    onChange={handleUploadRMG}\n                    data-testid=\"file-upload\"\n                />\n                <MenuItem icon={<MdUpload />} onClick={() => fileRMGInputRef?.current?.click()}>\n                    {t('header.open.configRMG')}\n                </MenuItem>\n\n                <MenuItem icon={<MdInsertDriveFile />} onClick={() => setIsGalleryModalOpen(true)}>\n                    {t('header.open.gallery')}\n                    <Badge ml=\"1\" colorScheme=\"green\">\n                        New\n                    </Badge>\n                </MenuItem>\n                <GalleryModal\n                    isOpen={isGalleryModalOpen}\n                    handleOpenTemplates={handleOpenTemplates}\n                    onClose={() => setIsGalleryModalOpen(false)}\n                />\n            </MenuList>\n        </Menu>\n    );\n}\n\nconst readFileAsText = (file: File) => {\n    return new Promise((resolve: (text: string) => void) => {\n        const reader = new FileReader();\n        reader.onloadend = () => resolve(reader.result as string);\n        reader.readAsText(file);\n    });\n};\n","const waitForMs = (ms: number) => {\n    return new Promise<void>(resolve => {\n        setTimeout(resolve, ms);\n    });\n};\n\nconst isSafari = () => {\n    return navigator.userAgent.includes('Safari') && !navigator.userAgent.includes('Chrome');\n};\n\nexport const waitForFontReady = async () => {\n    let retryAttempt = 3;\n\n    while (retryAttempt--) {\n        // railmapgen/rmg#274 ready font fact set may not contain GenYoMin when first resolved\n        const fontFaceSet = await document.fonts.ready;\n        const it = fontFaceSet.values();\n        while (true) {\n            const next = it.next();\n            if (next.done) {\n                break;\n            }\n\n            if (next.value.family === 'GenYoMin TW') {\n                return;\n            }\n        }\n\n        console.log('GenYoMin is NOT ready. Retry attempts remaining: ' + retryAttempt + ' ...');\n        await waitForMs(500);\n    }\n\n    throw new Error('Failed to load GenYoMin after 3 attempts');\n};\n\nconst readBlobAsDataURL = (blob: Blob): Promise<string> => {\n    return new Promise((resolve: (value: string) => void) => {\n        const reader = new FileReader();\n        reader.onloadend = () => resolve(reader.result as string);\n        reader.readAsDataURL(blob);\n    });\n};\n\nconst matchCssRuleByFontFace = (rules: CSSFontFaceRule[], font: FontFace): CSSFontFaceRule | undefined => {\n    return rules.find(rule => {\n        const cssStyle = rule.style;\n        return (\n            cssStyle.getPropertyValue('font-family').replace(/^\"(.+)\"$/, '$1') === font.family &&\n            cssStyle.getPropertyValue('unicode-range') === font.unicodeRange\n        );\n    });\n};\n\nexport const getBase64FontFace = async (svgEl: SVGSVGElement): Promise<string[]> => {\n    const uniqueCharacters = Array.from(\n        new Set(\n            [\n                ...svgEl.querySelectorAll<SVGElement>('.rmp-name__mtr__zh'),\n                ...svgEl.querySelectorAll<SVGElement>('.rmp-name__mtr__en'),\n            ]\n                .map(el => el.innerHTML)\n                .join('')\n                .replace(/\\s/g, '')\n        )\n    ).join('');\n\n    const fontFaceList = await document.fonts.load('80px GenYoMin TW, Vegur', uniqueCharacters);\n    const cssRules = document.querySelector<HTMLLinkElement>('link#fonts_mtr')?.sheet?.cssRules;\n    if (!cssRules) return Promise.reject(new Error('cssRules can not be found in link#css_share'));\n    const cssFontFaceRules = Array.from(cssRules).filter(rule => rule instanceof CSSFontFaceRule) as CSSFontFaceRule[];\n    const distinctCssRules = fontFaceList.reduce<CSSFontFaceRule[]>((acc, cur) => {\n        const matchedRule = matchCssRuleByFontFace(cssFontFaceRules, cur);\n        if (matchedRule) {\n            const existence = acc.find(rule => {\n                const ruleStyle = rule.style;\n                const matchedStyle = matchedRule.style;\n                return (\n                    ruleStyle.getPropertyValue('font-family') === matchedStyle.getPropertyValue('font-family') &&\n                    ruleStyle.getPropertyValue('unicode-range') === matchedStyle.getPropertyValue('unicode-range')\n                );\n            });\n            return existence ? acc : acc.concat(matchedRule);\n        } else {\n            return acc;\n        }\n    }, []);\n\n    return await Promise.all(\n        distinctCssRules.map(async cssRule => {\n            try {\n                const fontResp = await fetch(getAbsoluteUrl(cssRule));\n                const fontDataUri = await readBlobAsDataURL(await fontResp.blob());\n                return cssRule.cssText.replace(/src:[ \\w('\",\\-:/.)]+;/g, `src: url('${fontDataUri}'); `);\n            } catch (err) {\n                console.error(err);\n                return '';\n            }\n        })\n    );\n};\n\nexport const getAbsoluteUrl = (cssRule: CSSFontFaceRule) => {\n    const ruleStyleSrc = (cssRule.style as any).src;\n    return isSafari()\n        ? ruleStyleSrc.replace(/^url\\(\"(\\S+)\"\\).*$/, '$1')\n        : process.env.PUBLIC_URL + '/styles/' + ruleStyleSrc.match(/^url\\(\"([\\S*]+)\"\\)/)?.[1];\n};\n","import { useTranslation } from 'react-i18next';\nimport {\n    Icon,\n    Link,\n    ListItem,\n    Modal,\n    ModalOverlay,\n    ModalContent,\n    ModalHeader,\n    ModalCloseButton,\n    ModalBody,\n    OrderedList,\n} from '@chakra-ui/react';\nimport { MdOpenInNew } from 'react-icons/md';\n\nconst TermsAndConditionsModal = (props: { isOpen: boolean; onClose: () => void }) => {\n    const { isOpen, onClose } = props;\n    const { t } = useTranslation();\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose} size=\"xl\" scrollBehavior=\"inside\">\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>{t('header.download.termsAndConditions')}</ModalHeader>\n                <ModalCloseButton />\n\n                <ModalBody>\n                    <OrderedList>\n                        <ListItem>\n                            The layout of the elements on the signage or rail map, is designed by{' '}\n                            <Link color=\"teal.500\" href=\"https://www.shmetro.com/\" isExternal={true}>\n                                Shanghai Shentong Metro Group <Icon as={MdOpenInNew} />\n                            </Link>\n                            {', '}\n                            <Link color=\"teal.500\" href=\"https://www.gzmtr.com/\" isExternal={true}>\n                                Guangzhou Metro Group <Icon as={MdOpenInNew} />\n                            </Link>\n                            {' or '}\n                            <Link color=\"teal.500\" href=\"https://www.mtr.com.hk/\" isExternal={true}>\n                                MTR Corporation <Icon as={MdOpenInNew} />\n                            </Link>\n                            , depending on your selection. You shall grant appropriate permit or license from the\n                            relevant company above before using the generated images for commercial purposes, if it is\n                            required to do so.\n                            <br />\n                            标志版或路线图的元素或布局，基于你所选择的风格，为\n                            <Link color=\"teal.500\" href=\"https://www.shmetro.com/\" isExternal={true}>\n                                上海申通地铁集团 <Icon as={MdOpenInNew} />\n                            </Link>\n                            ，\n                            <Link color=\"teal.500\" href=\"https://www.gzmtr.com/\" isExternal={true}>\n                                广州地铁集团公司 <Icon as={MdOpenInNew} />\n                            </Link>\n                            或\n                            <Link color=\"teal.500\" href=\"https://www.mtr.com.hk/\" isExternal={true}>\n                                港铁公司 <Icon as={MdOpenInNew} />\n                            </Link>\n                            所设计。在产生的图像用作商业用途前，你应向相关公司取得适当之许可证或授权。\n                        </ListItem>\n                        <ListItem>\n                            The elements including shapes and lines on the image are drawn by{' '}\n                            <Link color=\"teal.500\" href=\"https://www.github.com/thekingofcity\" isExternal={true}>\n                                thekingofcity <Icon as={MdOpenInNew} />\n                            </Link>\n                            {' and '}\n                            <Link color=\"teal.500\" href=\"https://www.github.com/wongchito\" isExternal={true}>\n                                Chito Wong <Icon as={MdOpenInNew} />\n                            </Link>\n                            , based on the design standards or rules of the companies listed above. You may use them for\n                            any purposes, but it is recommended to state the name and the link of software alongside.\n                            <br />\n                            图像的元素，包括图形及线条，均由\n                            <Link color=\"teal.500\" href=\"https://www.github.com/thekingofcity\" isExternal={true}>\n                                thekingofcity <Icon as={MdOpenInNew} />\n                            </Link>\n                            及\n                            <Link color=\"teal.500\" href=\"https://www.github.com/wongchito\" isExternal={true}>\n                                Chito Wong <Icon as={MdOpenInNew} />\n                            </Link>\n                            基于上述公司设计标准或准则绘制。你可将其用于任何目的，但我们建议你于使用同时附以我们的名字以及本网站地址。\n                        </ListItem>\n                        <ListItem>\n                            Due to copyright, licensing and other legal restrictions, Rail Map Painter uses{' '}\n                            <Link color=\"teal.500\" href=\"https://github.com/ButTaiwan/genyo-font\" isExternal={true}>\n                                GenYoMin provided by ButTaiwan <Icon as={MdOpenInNew} />\n                            </Link>\n                            , and Vegur instead of MTRSung and Myriad Pro respectively to display and generate MTR-style\n                            signage. You shall grant appropriate permit or license from the manufacturers before using\n                            those generated images for commercial purposes.\n                            <br />\n                            由于著作权及其他法律限制，铁路路线图绘制器使用由\n                            <Link color=\"teal.500\" href=\"https://github.com/ButTaiwan/genyo-font\" isExternal={true}>\n                                ButTaiwan提供的源樣明體 <Icon as={MdOpenInNew} />\n                            </Link>\n                            ，以及Vegur，以代替港铁样式标志牌所使用的地铁宋及Myriad\n                            Pro。在产生之图像用作商业用途前，你应向字型生产厂商取得适当之许可证或授权。\n                        </ListItem>\n                        <ListItem>\n                            The exported images in PNG or SVG format may be modified, published, or used for other\n                            purposes except commercial use, under the conditions above.\n                            <br />\n                            输出的PNG或SVG图像可基于上述条款，在非商业使用时，用于修改、发行或其他用途。\n                        </ListItem>\n                        <ListItem>\n                            All flag emojis shown on Windows platforms are designed by{' '}\n                            <Link color=\"teal.500\" href=\"https://openmoji.org/\" isExternal={true}>\n                                OpenMoji <Icon as={MdOpenInNew} />\n                            </Link>{' '}\n                            – the open-source emoji and icon project. License:\n                            <Link\n                                color=\"teal.500\"\n                                href=\"https://creativecommons.org/licenses/by-sa/4.0/\"\n                                isExternal={true}\n                            >\n                                CC BY-SA 4.0 <Icon as={MdOpenInNew} />\n                            </Link>\n                            <br />\n                            于Windows作业系统上显示的国旗Emoji为\n                            <Link color=\"teal.500\" href=\"https://openmoji.org/\" isExternal={true}>\n                                OpenMoji <Icon as={MdOpenInNew} />\n                            </Link>\n                            所设计。许可证：\n                            <Link\n                                color=\"teal.500\"\n                                href=\"https://creativecommons.org/licenses/by-sa/4.0/\"\n                                isExternal={true}\n                            >\n                                CC BY-SA 4.0 <Icon as={MdOpenInNew} />\n                            </Link>\n                        </ListItem>\n                        <ListItem>\n                            We reserve the rights, without prior notice, to modify, add, or remove these terms. The\n                            Chinese translation is for reference only. In case of any discrepancy between the English\n                            version and the Chinese version, the English version shall prevail.\n                            <br />\n                            我们保留修改、新增或移除上述条款之权利，而无需另行通知。中文译本仅供参考，文义如与英文有歧异，概以英文本为准。\n                        </ListItem>\n                    </OrderedList>\n                </ModalBody>\n            </ModalContent>\n        </Modal>\n    );\n};\n\nexport default TermsAndConditionsModal;\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n    Button,\n    Checkbox,\n    HStack,\n    Icon,\n    IconButton,\n    Link,\n    Menu,\n    MenuButton,\n    MenuItem,\n    MenuList,\n    Modal,\n    ModalBody,\n    ModalCloseButton,\n    ModalContent,\n    ModalFooter,\n    ModalHeader,\n    ModalOverlay,\n    Text,\n    useColorModeValue,\n} from '@chakra-ui/react';\nimport { MdDownload, MdImage, MdOpenInNew, MdSave } from 'react-icons/md';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport rmgRuntime from '@railmapgen/rmg-runtime';\nimport { Events } from '../../constants/constants';\nimport { MiscNodeType } from '../../constants/nodes';\nimport store, { useRootSelector } from '../../redux';\nimport { calculateCanvasSize } from '../../util/helpers';\nimport { stringifyParam } from '../../util/save';\nimport { getBase64FontFace } from '../../util/fonts';\nimport TermsAndConditionsModal from './terms-and-conditions';\nimport { StationType } from '../../constants/stations';\n\nexport default function DownloadActions() {\n    const { t } = useTranslation();\n    const {\n        telemetry: { project: isAllowProjectTelemetry },\n    } = useRootSelector(state => state.app);\n    const { nodeExists } = useRootSelector(state => state.runtime);\n    const graph = React.useRef(window.graph);\n    const bgColor = useColorModeValue('white', 'gray.800');\n\n    const [format, setFormat] = React.useState('png' as 'png' | 'svg');\n    const formatOptions = {\n        png: t('header.download.png'),\n        svg: t('header.download.svg'),\n    };\n    const [scale, setScale] = React.useState(100);\n    const scaleOptions = Object.fromEntries(\n        [25, 33, 50, 67, 75, 80, 90, 100, 110, 125, 150, 175, 200, 250, 300, 400, 500].map(v => [v, `${v}%`])\n    );\n    const [isTransparent, setIsTransparent] = React.useState(false);\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'select',\n            label: t('header.download.format'),\n            value: format,\n            options: formatOptions,\n            onChange: value => setFormat(value === 'png' ? 'png' : 'svg'),\n        },\n    ];\n    const pngFields: RmgFieldsField[] = [\n        {\n            type: 'select',\n            label: t('header.download.scale'),\n            value: scale,\n            options: scaleOptions,\n            onChange: value => setScale(value as number),\n        },\n        {\n            type: 'switch',\n            label: t('header.download.transparent'),\n            isChecked: isTransparent,\n            onChange: setIsTransparent,\n        },\n    ];\n    const [isDownloadModalOpen, setIsDownloadModalOpen] = React.useState(false);\n    const [isTermsAndConditionsModalOpen, setIsTermsAndConditionsModalOpen] = React.useState(false);\n    const [isAttachSelected, setIsAttachSelected] = React.useState(false);\n    const [isTermsAndConditionsSelected, setIsTermsAndConditionsSelected] = React.useState(false);\n\n    const handleDownloadJson = () => {\n        if (isAllowProjectTelemetry)\n            rmgRuntime.event(Events.DOWNLOAD_PARAM, { '#nodes': graph.current.order, '#edges': graph.current.size });\n        const param = stringifyParam(store.getState().param);\n        downloadAs(`RMP_${new Date().valueOf()}.json`, 'application/json', param);\n    };\n    // thanks to this article that includes every steps in converting svg to png\n    // https://levelup.gitconnected.com/draw-an-svg-to-canvas-and-download-it-as-image-in-javascript-f7f7713cf81f\n    const handleDownload = async () => {\n        setIsDownloadModalOpen(false);\n        if (isAllowProjectTelemetry)\n            rmgRuntime.event(Events.DOWNLOAD_IMAGES, {\n                numberOfNodes: graph.current.order,\n                numberOfEdges: graph.current.size,\n            });\n\n        // get the minimum and maximum of the graph\n        const { xMin, yMin, xMax, yMax } = calculateCanvasSize(graph.current);\n        const [width, height] = [xMax - xMin, yMax - yMin];\n\n        const elem = document.getElementById('canvas')!.cloneNode(true) as SVGSVGElement;\n        // remove virtual nodes\n        [...elem.children]\n            .filter(\n                e =>\n                    graph.current.hasNode(e.id) && graph.current.getNodeAttribute(e.id, 'type') === MiscNodeType.Virtual\n            )\n            .forEach(e => elem.removeChild(e));\n        // append rmp info if user does not want to share rmp info\n        if (!isAttachSelected) elem.appendChild(generateRmpInfo(xMax - 400, yMax - 60));\n        // reset svg viewBox to display all the nodes in the graph\n        // otherwise the later drawImage won't be able to show all of them\n        elem.setAttribute('viewBox', `${xMin} ${yMin} ${width} ${height}`);\n        // Chrome will stretch the image if the following width and height are not set\n        elem.setAttribute('width', width.toString());\n        elem.setAttribute('height', height.toString());\n        // copy attributes from css to each elem in the newly cloned svg\n        // TODO: #274 copy all possible attributes using document.querySelectorAll('link'), this is hard to maintain\n        Object.entries({\n            '.rmp-name__zh': ['font-family'],\n            '.rmp-name__en': ['font-family'],\n            '.rmp-name__mtr__zh': ['font-family'],\n            '.rmp-name__mtr__en': ['font-family'],\n            '.rmp-name-station': ['paint-order', 'stroke', 'stroke-width'],\n        }).forEach(([className, styleSet]) => {\n            const e = document.querySelector(className);\n            if (e === null) return; // no element in the canvas uses this class\n            const style = window.getComputedStyle(e);\n            elem.querySelectorAll(className).forEach(el => {\n                styleSet.forEach(styleName => {\n                    el.setAttribute(styleName, style.getPropertyValue(styleName));\n                });\n                el.classList.remove(className);\n            });\n        });\n\n        if (nodeExists[StationType.MTR]) {\n            try {\n                const uris = await getBase64FontFace(elem);\n                const s = document.createElement('style');\n                s.textContent = uris.join('\\n');\n                elem.prepend(s);\n            } catch (err) {\n                alert('Failed to fonts. Fonts in the exported PNG will be missing.');\n                console.error(err);\n            }\n        }\n\n        if (format === 'svg') {\n            downloadAs(`RMP_${new Date().valueOf()}.svg`, 'image/svg+xml', elem.outerHTML);\n            return;\n        }\n\n        // append to document to render the svg\n        document.body.appendChild(elem);\n        // convert it to blob\n        const src = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(elem.outerHTML)));\n        // release after use\n        document.body.removeChild(elem);\n\n        // create canvas to be drawn on\n        const canvas = document.createElement('canvas');\n        const [canvasWidth, canvasHeight] = [(width * scale) / 100, (height * scale) / 100];\n        canvas.width = canvasWidth;\n        canvas.height = canvasHeight;\n        const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n        // set background, respect to dark mode\n        if (!isTransparent) {\n            ctx.fillStyle = bgColor;\n            ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n        }\n\n        const img = new Image();\n        img.onload = () => {\n            ctx.drawImage(img, 0, 0, canvasWidth, canvasHeight);\n            canvas.toBlob(blob => downloadBlobAs(`RMP_${new Date().valueOf()}.png`, blob!), 'image/png');\n        };\n        img.src = src; // draw src on canvas\n    };\n\n    return (\n        <Menu>\n            <MenuButton as={IconButton} size=\"sm\" variant=\"ghost\" icon={<MdDownload />} />\n            <MenuList>\n                <MenuItem icon={<MdSave />} onClick={handleDownloadJson}>\n                    {t('header.download.config')}\n                </MenuItem>\n                <MenuItem icon={<MdImage />} onClick={() => setIsDownloadModalOpen(true)}>\n                    {t('header.download.image')}\n                </MenuItem>\n            </MenuList>\n\n            <Modal size=\"xl\" isOpen={isDownloadModalOpen} onClose={() => setIsDownloadModalOpen(false)}>\n                <ModalOverlay />\n                <ModalContent>\n                    <ModalHeader>{t('header.download.image')}</ModalHeader>\n                    <ModalCloseButton />\n\n                    <ModalBody>\n                        <RmgFields fields={fields} />\n                        {format === 'png' && <RmgFields fields={pngFields} />}\n                        <br />\n                        <Checkbox isChecked={isAttachSelected} onChange={e => setIsAttachSelected(e.target.checked)}>\n                            <Text>\n                                {t('header.download.shareInfo1')}\n                                <Link\n                                    color=\"teal.500\"\n                                    onClick={() => window.open('https://railmapgen.github.io/rmp', '_blank')}\n                                >\n                                    {t('header.about.rmp')} <Icon as={MdOpenInNew} />\n                                </Link>\n                                {t('header.download.shareInfo2')}\n                            </Text>\n                        </Checkbox>\n                        <Checkbox\n                            isChecked={isTermsAndConditionsSelected}\n                            onChange={e => setIsTermsAndConditionsSelected(e.target.checked)}\n                        >\n                            <Text>\n                                {t('header.download.termsAndConditionsInfo')}\n                                <Link color=\"teal.500\" onClick={() => setIsTermsAndConditionsModalOpen(true)}>\n                                    {t('header.download.termsAndConditions')} <Icon as={MdOpenInNew} />\n                                </Link>\n                                {t('header.download.period')}\n                            </Text>\n                        </Checkbox>\n                    </ModalBody>\n\n                    <ModalFooter>\n                        <HStack>\n                            <Button\n                                colorScheme=\"teal\"\n                                variant=\"outline\"\n                                size=\"sm\"\n                                disabled={!isTermsAndConditionsSelected}\n                                onClick={handleDownload}\n                            >\n                                {t('header.download.confirm')}\n                            </Button>\n                        </HStack>\n                    </ModalFooter>\n\n                    <TermsAndConditionsModal\n                        isOpen={isTermsAndConditionsModalOpen}\n                        onClose={() => setIsTermsAndConditionsModalOpen(false)}\n                    />\n                </ModalContent>\n            </Modal>\n        </Menu>\n    );\n}\n\nconst downloadAs = (filename: string, type: string, data: any) => {\n    const blob = new Blob([data], { type });\n    downloadBlobAs(filename, blob);\n};\n\nconst downloadBlobAs = (filename: string, blob: Blob) => {\n    const url = window.URL.createObjectURL(blob);\n\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n\n    document.body.removeChild(a);\n    window.URL.revokeObjectURL(url);\n};\n\nconst generateRmpInfo = (x: number, y: number) => {\n    const info = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n    info.setAttribute('transform', `translate(${x}, ${y})scale(2)`);\n\n    const logo = document.createElementNS('http://www.w3.org/2000/svg', 'image');\n    // FIXME: return after image is loaded\n    // logo.setAttribute('href', 'https://uat-railmapgen.github.io/rmp/logo192.png');\n    // logo.setAttribute('href', logoImg);\n    logo.setAttribute('width', '40');\n    logo.setAttribute('height', '40');\n    logo.setAttribute('x', '-50');\n    logo.setAttribute('y', '-20');\n\n    const rmp = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n    rmp.setAttribute('font-family', 'Arial, sans-serif');\n    rmp.setAttribute('font-size', '16');\n    rmp.appendChild(document.createTextNode('Rail Map Painter'));\n\n    const link = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n    link.setAttribute('font-family', 'Arial, sans-serif');\n    link.setAttribute('font-size', '10');\n    link.setAttribute('y', '10');\n    link.appendChild(document.createTextNode('https://railmapgen.github.io/rmp/'));\n\n    info.appendChild(logo);\n    info.appendChild(rmp);\n    info.appendChild(link);\n\n    return info;\n};\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgGithubMark(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 98,\n    height: 96,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z\",\n    fill: \"#24292f\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgGithubMark);\nexport default __webpack_public_path__ + \"static/media/github-mark.6fa18895f6e6c7772cab7049f7e05f59.svg\";\nexport { ForwardRef as ReactComponent };","var _style, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSlackMark(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 270 270\",\n    style: {\n      enableBackground: \"new 0 0 270 270\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _style || (_style = /*#__PURE__*/React.createElement(\"style\", {\n    type: \"text/css\"\n  }, \"\\n\\t.st0{fill:#E01E5A;}\\n\\t.st1{fill:#36C5F0;}\\n\\t.st2{fill:#2EB67D;}\\n\\t.st3{fill:#ECB22E;}\\n\")), _g || (_g = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M99.4,151.2c0,7.1-5.8,12.9-12.9,12.9c-7.1,0-12.9-5.8-12.9-12.9c0-7.1,5.8-12.9,12.9-12.9h12.9V151.2z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M105.9,151.2c0-7.1,5.8-12.9,12.9-12.9s12.9,5.8,12.9,12.9v32.3c0,7.1-5.8,12.9-12.9,12.9 s-12.9-5.8-12.9-12.9V151.2z\"\n  })), /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st1\",\n    d: \"M118.8,99.4c-7.1,0-12.9-5.8-12.9-12.9c0-7.1,5.8-12.9,12.9-12.9s12.9,5.8,12.9,12.9v12.9H118.8z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st1\",\n    d: \"M118.8,105.9c7.1,0,12.9,5.8,12.9,12.9s-5.8,12.9-12.9,12.9H86.5c-7.1,0-12.9-5.8-12.9-12.9 s5.8-12.9,12.9-12.9H118.8z\"\n  })), /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st2\",\n    d: \"M170.6,118.8c0-7.1,5.8-12.9,12.9-12.9c7.1,0,12.9,5.8,12.9,12.9s-5.8,12.9-12.9,12.9h-12.9V118.8z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st2\",\n    d: \"M164.1,118.8c0,7.1-5.8,12.9-12.9,12.9c-7.1,0-12.9-5.8-12.9-12.9V86.5c0-7.1,5.8-12.9,12.9-12.9 c7.1,0,12.9,5.8,12.9,12.9V118.8z\"\n  })), /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st3\",\n    d: \"M151.2,170.6c7.1,0,12.9,5.8,12.9,12.9c0,7.1-5.8,12.9-12.9,12.9c-7.1,0-12.9-5.8-12.9-12.9v-12.9H151.2z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st3\",\n    d: \"M151.2,164.1c-7.1,0-12.9-5.8-12.9-12.9c0-7.1,5.8-12.9,12.9-12.9h32.3c7.1,0,12.9,5.8,12.9,12.9 c0,7.1-5.8,12.9-12.9,12.9H151.2z\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSlackMark);\nexport default __webpack_public_path__ + \"static/media/slack-mark.3474c14d58fbbab9cfa2208b01a4ac3a.svg\";\nexport { ForwardRef as ReactComponent };","import rmgRuntime from '@railmapgen/rmg-runtime';\nimport { useTranslation } from 'react-i18next';\nimport {\n    Avatar,\n    Box,\n    Flex,\n    Heading,\n    Image,\n    Modal,\n    ModalBody,\n    ModalCloseButton,\n    ModalContent,\n    ModalHeader,\n    ModalOverlay,\n    Tag,\n    TagLabel,\n    Text,\n    VStack,\n} from '@chakra-ui/react';\nimport GithubIcon from '../../images/github-mark.svg';\nimport SlackIcon from '../../images/slack-mark.svg';\n\nconst AboutModal = (props: { isOpen: boolean; onClose: () => void }) => {\n    const { isOpen, onClose } = props;\n    const { t } = useTranslation();\n    const appVersion = rmgRuntime.getAppVersion();\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose} size=\"xl\" scrollBehavior=\"inside\">\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>{t('header.about.title')}</ModalHeader>\n                <ModalCloseButton />\n\n                <ModalBody paddingBottom={10}>\n                    <Flex direction=\"row\">\n                        <Image boxSize=\"128px\" src={process.env.PUBLIC_URL + '/logo192.png'} />\n                        <Flex direction=\"column\" width=\"100%\" alignItems=\"center\" justifyContent=\"center\">\n                            <Text fontSize=\"xl\" as=\"b\">\n                                {t('header.about.rmp')}\n                            </Text>\n                            <Text>{appVersion}</Text>\n                            <Text />\n                            <Text fontSize=\"sm\">{t('header.about.railmapgen')}</Text>\n                        </Flex>\n                    </Flex>\n\n                    <Box margin={5}>\n                        <Text fontSize=\"xl\">{t('header.about.desc')}</Text>\n                    </Box>\n\n                    <Heading as=\"h5\" size=\"sm\" mt={3} mb={2}>\n                        {t('header.about.contributors')}\n                    </Heading>\n\n                    <Heading as=\"h6\" size=\"xs\" my={2}>\n                        {t('header.about.coreContributors')}\n                    </Heading>\n\n                    <VStack>\n                        <Tag\n                            size=\"lg\"\n                            w=\"85%\"\n                            onClick={() => window.open('https://github.com/thekingofcity', '_blank')}\n                            cursor=\"pointer\"\n                        >\n                            <Avatar src=\"https://github.com/thekingofcity.png\" size=\"lg\" my={2} ml={-1} mr={2} />\n                            <TagLabel display=\"block\" width=\"100%\">\n                                <Text fontSize=\"lg\" fontWeight=\"bold\" mb={1}>\n                                    thekingofcity\n                                </Text>\n                                <Text fontSize=\"sm\">{t('header.about.content1')}</Text>\n                                <Text fontSize=\"sm\" align=\"right\">\n                                    {t('header.about.content2')}\n                                </Text>\n                            </TagLabel>\n                        </Tag>\n                    </VStack>\n\n                    <Heading as=\"h5\" size=\"sm\" mt={3} mb={2}>\n                        {t('header.about.contactUs')}\n                    </Heading>\n\n                    <VStack>\n                        <Tag\n                            size=\"lg\"\n                            w=\"85%\"\n                            onClick={() => window.open('https://github.com/railmapgen/rmp/issues', '_blank')}\n                            cursor=\"pointer\"\n                        >\n                            <Avatar src={GithubIcon} size=\"lg\" my={2} ml={-1} mr={2} />\n                            <TagLabel display=\"block\" width=\"100%\">\n                                <Text fontSize=\"lg\" fontWeight=\"bold\" mb={1}>\n                                    {t('header.about.github')}\n                                </Text>\n                                <Text fontSize=\"sm\">{t('header.about.githubContent')}</Text>\n                            </TagLabel>\n                        </Tag>\n                        <Tag\n                            size=\"lg\"\n                            w=\"85%\"\n                            onClick={() =>\n                                window.open(\n                                    'https://join.slack.com/t/railmapgenerator/shared_invite/zt-1odhhta3n-DdZF~fnVwo_q0S0RJmgV8A',\n                                    '_blank'\n                                )\n                            }\n                            cursor=\"pointer\"\n                        >\n                            <Avatar src={SlackIcon} size=\"lg\" my={2} ml={-1} mr={2} />\n                            <TagLabel display=\"block\" width=\"100%\">\n                                <Text fontSize=\"lg\" fontWeight=\"bold\" mb={1}>\n                                    {t('header.about.slack')}\n                                </Text>\n                                <Text fontSize=\"sm\">{t('header.about.slackContent')}</Text>\n                                <Text fontSize=\"sm\" as=\"i\">\n                                    #rmg, #rmp, #palette-and-templates, #random\n                                </Text>\n                            </TagLabel>\n                        </Tag>\n                    </VStack>\n                </ModalBody>\n            </ModalContent>\n        </Modal>\n    );\n};\n\nexport default AboutModal;\n","import React from 'react';\nimport { IconButton, Popover, PopoverBody, PopoverContent, PopoverTrigger } from '@chakra-ui/react';\nimport { MdZoomOut, MdZoomIn } from 'react-icons/md';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useRootSelector, useRootDispatch } from '../../redux/index';\nimport { setSvgViewBoxZoom } from '../../redux/param/param-slice';\n\n/**\n * A zoom control displayed in popover component.\n * This will greatly decrease the width of the header in mobile device.\n */\nexport const ZoomPopover = () => {\n    const [isOpen, setIsOpen] = React.useState(false);\n\n    const { svgViewBoxZoom } = useRootSelector(state => state.param);\n    const dispatch = useRootDispatch();\n\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'slider',\n            label: '',\n            value: 400 - svgViewBoxZoom,\n            min: 10,\n            max: 390,\n            step: 1,\n            onChange: value => dispatch(setSvgViewBoxZoom(400 - value)),\n            leftIcon: <MdZoomOut />,\n            rightIcon: <MdZoomIn />,\n            minW: 160,\n        },\n    ];\n\n    return (\n        <Popover isOpen={isOpen} onOpen={() => setIsOpen(true)} onClose={() => setIsOpen(false)}>\n            <PopoverTrigger>\n                <IconButton\n                    aria-label=\"zoom\"\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    icon={<MdZoomIn />}\n                    onClick={() => setIsOpen(!isOpen)}\n                />\n            </PopoverTrigger>\n            <PopoverContent>\n                <PopoverBody>\n                    <RmgFields fields={fields} noLabel />\n                </PopoverBody>\n            </PopoverContent>\n        </Popover>\n    );\n};\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n    Modal,\n    ModalBody,\n    ModalCloseButton,\n    ModalContent,\n    ModalHeader,\n    ModalOverlay,\n    Text,\n    Badge,\n    Tooltip,\n    ModalFooter,\n    Button,\n} from '@chakra-ui/react';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { StationType } from '../../constants/stations';\nimport { LineStyleType } from '../../constants/lines';\nimport { useRootSelector, useRootDispatch } from '../../redux';\nimport { setRefreshNodes, setRefreshEdges } from '../../redux/runtime/runtime-slice';\nimport { saveGraph } from '../../redux/param/param-slice';\nimport stations from '../svgs/stations/stations';\nimport { changeStationsTypeInBatch } from '../../util/change-types';\nimport ColourModal from '../panels/colour-modal/colour-modal';\nimport ThemeButton from '../panels/theme-button';\n\nexport const TranslateNodesModal = (props: { isOpen: boolean; onClose: () => void }) => {\n    const { isOpen, onClose } = props;\n    const dispatch = useRootDispatch();\n    const { t } = useTranslation();\n    const graph = React.useRef(window.graph);\n\n    const [x, setX] = React.useState(0);\n    const [y, setY] = React.useState(0);\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'input',\n            label: t('header.settings.procedures.translate.x'),\n            value: x.toString(),\n            variant: 'number',\n            onChange: val => setX(Number(val)),\n            minW: 'full',\n        },\n        {\n            type: 'input',\n            label: t('header.settings.procedures.translate.y'),\n            value: y.toString(),\n            variant: 'number',\n            onChange: val => setY(Number(val)),\n            minW: 'full',\n        },\n    ];\n\n    const handleChange = () => {\n        graph.current.forEachNode((node, attr) => {\n            graph.current.updateNodeAttribute(node, 'x', val => (val ?? 0) + x);\n            graph.current.updateNodeAttribute(node, 'y', val => (val ?? 0) + y);\n        });\n        dispatch(setRefreshNodes());\n        dispatch(setRefreshEdges());\n        dispatch(saveGraph(graph.current.export()));\n        onClose();\n    };\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose} size=\"xl\" scrollBehavior=\"inside\">\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>{t('header.settings.procedures.translate.title')}</ModalHeader>\n                <ModalCloseButton />\n\n                <ModalBody>\n                    {t('header.settings.procedures.translate.content')}\n                    <RmgFields fields={fields} />\n                </ModalBody>\n\n                <ModalFooter>\n                    <Button colorScheme=\"blue\" variant=\"outline\" mr=\"1\">\n                        {t('cancel')}\n                    </Button>\n                    <Button colorScheme=\"red\" onClick={handleChange}>\n                        {t('apply')}\n                    </Button>\n                </ModalFooter>\n            </ModalContent>\n        </Modal>\n    );\n};\n\nexport const ScaleNodesModal = (props: { isOpen: boolean; onClose: () => void }) => {\n    const { isOpen, onClose } = props;\n    const dispatch = useRootDispatch();\n    const { t } = useTranslation();\n    const graph = React.useRef(window.graph);\n\n    const [scale, setScale] = React.useState(1);\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'input',\n            label: t('header.settings.procedures.scale.factor'),\n            value: scale.toString(),\n            variant: 'number',\n            onChange: val => setScale(Number(val)),\n            minW: 'full',\n        },\n    ];\n\n    const handleChange = () => {\n        graph.current.forEachNode((node, attr) => {\n            graph.current.updateNodeAttribute(node, 'x', val => (val ?? 0) * scale);\n            graph.current.updateNodeAttribute(node, 'y', val => (val ?? 0) * scale);\n        });\n        dispatch(setRefreshNodes());\n        dispatch(setRefreshEdges());\n        dispatch(saveGraph(graph.current.export()));\n        onClose();\n    };\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose} size=\"xl\" scrollBehavior=\"inside\">\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>{t('header.settings.procedures.scale.title')}</ModalHeader>\n                <ModalCloseButton />\n\n                <ModalBody>\n                    {t('header.settings.procedures.scale.content')}\n                    <RmgFields fields={fields} />\n                </ModalBody>\n\n                <ModalFooter>\n                    <Button colorScheme=\"blue\" variant=\"outline\" mr=\"1\">\n                        {t('cancel')}\n                    </Button>\n                    <Button colorScheme=\"red\" onClick={handleChange}>\n                        {t('apply')}\n                    </Button>\n                </ModalFooter>\n            </ModalContent>\n        </Modal>\n    );\n};\n\nexport const ChangeTypeModal = (props: { isOpen: boolean; onClose: () => void }) => {\n    const { isOpen, onClose } = props;\n    const dispatch = useRootDispatch();\n    const { t } = useTranslation();\n    const graph = React.useRef(window.graph);\n\n    const availableStationOptions = Object.fromEntries(\n        Object.entries(stations).map(([key, val]) => [key, t(val.metadata.displayName).toString()])\n    ) as { [k in StationType]: string };\n    const [oldStnType, setOldStnType] = React.useState(Object.keys(stations).at(0)! as StationType);\n    const [newStnType, setNewStnType] = React.useState(Object.keys(stations).at(1)! as StationType);\n\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'select',\n            label: t('header.settings.procedures.changeType.changeFrom'),\n            value: oldStnType as StationType,\n            options: availableStationOptions,\n            disabledOptions: [newStnType],\n            onChange: (val: string | number) => setOldStnType(val as StationType),\n            minW: 'full',\n        },\n        {\n            type: 'select',\n            label: t('header.settings.procedures.changeType.changeTo'),\n            value: newStnType as StationType,\n            options: availableStationOptions,\n            disabledOptions: [oldStnType],\n            onChange: (val: string | number) => setNewStnType(val as StationType),\n            minW: 'full',\n        },\n    ];\n\n    const handleChange = () => {\n        changeStationsTypeInBatch(graph.current, oldStnType, newStnType);\n        dispatch(setRefreshNodes());\n        dispatch(saveGraph(graph.current.export()));\n    };\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose} size=\"xl\" scrollBehavior=\"inside\">\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>\n                    <Text as=\"b\" fontSize=\"xl\">\n                        {t('header.settings.procedures.changeType.title')}\n                    </Text>\n                    <Tooltip label={t('header.settings.pro')}>\n                        <Badge ml=\"1\" color=\"gray.50\" background=\"radial-gradient(circle, #3f5efb, #fc466b)\">\n                            PRO\n                        </Badge>\n                    </Tooltip>\n                </ModalHeader>\n                <ModalCloseButton />\n\n                <ModalBody>\n                    <RmgFields fields={fields} />\n                    <Text fontSize=\"sm\" mt=\"3\" lineHeight=\"100%\" color=\"red.500\">\n                        {t('header.settings.procedures.changeType.info')}\n                    </Text>\n                </ModalBody>\n\n                <ModalFooter>\n                    <Button colorScheme=\"blue\" variant=\"outline\" mr=\"1\">\n                        {t('cancel')}\n                    </Button>\n                    <Button colorScheme=\"red\" onClick={handleChange}>\n                        {t('apply')}\n                    </Button>\n                </ModalFooter>\n            </ModalContent>\n        </Modal>\n    );\n};\n\nexport const RemoveLinesWithSingleColorModal = (props: { isOpen: boolean; onClose: () => void }) => {\n    const { isOpen, onClose } = props;\n    const dispatch = useRootDispatch();\n    const { theme: runtimeTheme } = useRootSelector(state => state.runtime);\n    const { t } = useTranslation();\n    const graph = React.useRef(window.graph);\n\n    const [theme, setTheme] = React.useState(runtimeTheme);\n    const [isColourModalOpen, setIsColourModalOpen] = React.useState(false);\n\n    const handleChange = () => {\n        graph.current\n            .filterEdges(\n                (edge, attr, source, target, sourceAttr, targetAttr, undirected) =>\n                    attr.style === LineStyleType.SingleColor &&\n                    JSON.stringify(attr[LineStyleType.SingleColor]!.color) === JSON.stringify(theme)\n            )\n            .forEach(edge => graph.current.dropEdge(edge));\n        dispatch(setRefreshEdges());\n        dispatch(saveGraph(graph.current.export()));\n        onClose();\n    };\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose} size=\"xl\" scrollBehavior=\"inside\">\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>{t('header.settings.procedures.removeLines.title')}</ModalHeader>\n                <ModalCloseButton />\n\n                <ModalBody>\n                    {t('header.settings.procedures.removeLines.content')}\n                    <ThemeButton theme={theme} onClick={() => setIsColourModalOpen(true)} />\n                    <ColourModal\n                        isOpen={isColourModalOpen}\n                        defaultTheme={theme}\n                        onClose={() => setIsColourModalOpen(false)}\n                        onUpdate={nextTheme => setTheme(nextTheme)}\n                    />\n                </ModalBody>\n\n                <ModalFooter>\n                    <Button colorScheme=\"blue\" variant=\"outline\" mr=\"1\">\n                        {t('cancel')}\n                    </Button>\n                    <Button colorScheme=\"red\" onClick={handleChange}>\n                        {t('remove')}\n                    </Button>\n                </ModalFooter>\n            </ModalContent>\n        </Modal>\n    );\n};\n","import React from 'react';\nimport rmgRuntime from '@railmapgen/rmg-runtime';\nimport { useTranslation } from 'react-i18next';\nimport {\n    Badge,\n    Box,\n    Button,\n    Icon,\n    Kbd,\n    Link,\n    Modal,\n    ModalBody,\n    ModalCloseButton,\n    ModalContent,\n    ModalHeader,\n    ModalOverlay,\n    StackDivider,\n    Switch,\n    SystemStyleObject,\n    Table,\n    Tbody,\n    Td,\n    Text,\n    Th,\n    Thead,\n    Tooltip,\n    Tr,\n    useColorModeValue,\n    VStack,\n} from '@chakra-ui/react';\nimport { MdArrowBack, MdArrowDownward, MdArrowForward, MdArrowUpward, MdOpenInNew, MdReadMore } from 'react-icons/md';\nimport { useRootDispatch, useRootSelector } from '../../redux';\nimport { setKeepLastPath } from '../../redux/runtime/runtime-slice';\nimport { setTelemetryApp } from '../../redux/app/app-slice';\nimport {\n    ChangeTypeModal,\n    RemoveLinesWithSingleColorModal,\n    ScaleNodesModal,\n    TranslateNodesModal,\n} from './procedures-modal';\n\nconst procedureButtonStyle: SystemStyleObject = {\n    width: '100%',\n    justifyContent: 'space-between',\n};\n\nconst SettingsModal = (props: { isOpen: boolean; onClose: () => void }) => {\n    const { isOpen, onClose } = props;\n    const { keepLastPath } = useRootSelector(state => state.runtime);\n    const dispatch = useRootDispatch();\n    const { t } = useTranslation();\n    const linkColour = useColorModeValue('primary.500', 'primary.300');\n\n    const [isTranslateNodesOpen, setIsTranslateNodesOpen] = React.useState(false);\n    const [isScaleNodesOpen, setIsScaleNodesOpen] = React.useState(false);\n    const [isChangeTypeOpen, setIsChangeTypeOpen] = React.useState(false);\n    const [isRemoveLinesWithSingleColorOpen, setIsRemoveLinesWithSingleColorOpen] = React.useState(false);\n\n    const isAllowAnalytics = rmgRuntime.isAllowAnalytics();\n    const {\n        telemetry: { app: isAllowAppTelemetry },\n    } = useRootSelector(state => state.app);\n    const handleAdditionalTelemetry = (allowAppTelemetry: boolean) => dispatch(setTelemetryApp(allowAppTelemetry));\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose} size=\"xl\" scrollBehavior=\"inside\">\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>{t('header.settings.title')}</ModalHeader>\n                <ModalCloseButton />\n\n                <ModalBody>\n                    <VStack divider={<StackDivider borderColor=\"gray.200\" />}>\n                        <Box width=\"100%\" mb=\"3\">\n                            <Text as=\"b\" fontSize=\"xl\">\n                                {t('header.settings.preference.title')}\n                            </Text>\n                            <Box mt=\"3\">\n                                <Box display=\"flex\" mb=\"1\">\n                                    <Text flex=\"1\">{t('header.settings.preference.keepLastPath')}</Text>\n                                    <Switch\n                                        isChecked={keepLastPath}\n                                        onChange={({ target: { checked } }) => dispatch(setKeepLastPath(checked))}\n                                    />\n                                </Box>\n                            </Box>\n                        </Box>\n\n                        <Box width=\"100%\" mb=\"3\">\n                            <Text as=\"b\" fontSize=\"xl\">\n                                {t('header.settings.shortcuts.title')}\n                            </Text>\n                            <Box mt=\"3\">\n                                <Table>\n                                    <Thead>\n                                        <Tr>\n                                            <Th>{t('header.settings.shortcuts.keys')}</Th>\n                                            <Th>{t('header.settings.shortcuts.description')}</Th>\n                                        </Tr>\n                                    </Thead>\n                                    <Tbody>\n                                        <Tr>\n                                            <Td>\n                                                <Kbd>f</Kbd>\n                                            </Td>\n                                            <Td>{t('header.settings.shortcuts.f')}</Td>\n                                        </Tr>\n                                        <Tr>\n                                            <Td>\n                                                <MdArrowUpward />\n                                            </Td>\n                                            <Td>{t('header.settings.shortcuts.arrowUpward')}</Td>\n                                        </Tr>\n                                        <Tr>\n                                            <Td>\n                                                <MdArrowBack />\n                                            </Td>\n                                            <Td>{t('header.settings.shortcuts.arrowBack')}</Td>\n                                        </Tr>\n                                        <Tr>\n                                            <Td>\n                                                <MdArrowForward />\n                                            </Td>\n                                            <Td>{t('header.settings.shortcuts.arrowForward')}</Td>\n                                        </Tr>\n                                        <Tr>\n                                            <Td>\n                                                <MdArrowDownward />\n                                            </Td>\n                                            <Td>{t('header.settings.shortcuts.arrowDownward')}</Td>\n                                        </Tr>\n                                        <Tr>\n                                            <Td>\n                                                <Kbd>i</Kbd>\n                                            </Td>\n                                            <Td>{t('header.settings.shortcuts.i')}</Td>\n                                        </Tr>\n                                        <Tr>\n                                            <Td>\n                                                <Kbd>j</Kbd>\n                                            </Td>\n                                            <Td>{t('header.settings.shortcuts.j')}</Td>\n                                        </Tr>\n                                        <Tr>\n                                            <Td>\n                                                <Kbd>k</Kbd>\n                                            </Td>\n                                            <Td>{t('header.settings.shortcuts.k')}</Td>\n                                        </Tr>\n                                        <Tr>\n                                            <Td>\n                                                <Kbd>l</Kbd>\n                                            </Td>\n                                            <Td>{t('header.settings.shortcuts.l')}</Td>\n                                        </Tr>\n                                        <Tr>\n                                            <Td>\n                                                <Kbd>shift</Kbd>\n                                            </Td>\n                                            <Td>{t('header.settings.shortcuts.shift')}</Td>\n                                        </Tr>\n                                        <Tr>\n                                            <Td>\n                                                <Kbd>alt</Kbd>\n                                            </Td>\n                                            <Td>{t('header.settings.shortcuts.alt')}</Td>\n                                        </Tr>\n                                        <Tr>\n                                            <Td>\n                                                <Kbd>delete</Kbd>\n                                            </Td>\n                                            <Td>{t('header.settings.shortcuts.delete')}</Td>\n                                        </Tr>\n                                        <Tr>\n                                            <Td>\n                                                <Kbd>ctrl</Kbd>+<Kbd>z</Kbd>\n                                            </Td>\n                                            <Td>{t('header.settings.shortcuts.undo')}</Td>\n                                        </Tr>\n                                        <Tr>\n                                            <Td>\n                                                <Kbd>ctrl</Kbd>+<Kbd>y</Kbd>\n                                            </Td>\n                                            <Td>{t('header.settings.shortcuts.redo')}</Td>\n                                        </Tr>\n                                    </Tbody>\n                                </Table>\n                            </Box>\n                        </Box>\n\n                        <Box width=\"100%\" mb=\"3\">\n                            <Text as=\"b\" fontSize=\"xl\">\n                                {t('header.settings.procedures.title')}\n                            </Text>\n                            <Box mt=\"3\">\n                                <Button\n                                    sx={procedureButtonStyle}\n                                    rightIcon={<MdReadMore />}\n                                    onClick={() => setIsTranslateNodesOpen(true)}\n                                >\n                                    {t('header.settings.procedures.translate.title')}\n                                </Button>\n                                <TranslateNodesModal\n                                    isOpen={isTranslateNodesOpen}\n                                    onClose={() => setIsTranslateNodesOpen(false)}\n                                />\n\n                                <Button\n                                    sx={procedureButtonStyle}\n                                    rightIcon={<MdReadMore />}\n                                    onClick={() => setIsScaleNodesOpen(true)}\n                                >\n                                    {t('header.settings.procedures.scale.title')}\n                                </Button>\n                                <ScaleNodesModal isOpen={isScaleNodesOpen} onClose={() => setIsScaleNodesOpen(false)} />\n\n                                <Button\n                                    sx={procedureButtonStyle}\n                                    rightIcon={<MdReadMore />}\n                                    onClick={() => setIsChangeTypeOpen(true)}\n                                >\n                                    <Box>\n                                        {t('header.settings.procedures.changeType.title')}\n                                        <Tooltip label={t('header.settings.pro')}>\n                                            <Badge\n                                                ml=\"1\"\n                                                color=\"gray.50\"\n                                                background=\"radial-gradient(circle, #3f5efb, #fc466b)\"\n                                            >\n                                                PRO\n                                            </Badge>\n                                        </Tooltip>\n                                    </Box>\n                                </Button>\n                                <ChangeTypeModal isOpen={isChangeTypeOpen} onClose={() => setIsChangeTypeOpen(false)} />\n\n                                <Button\n                                    sx={procedureButtonStyle}\n                                    rightIcon={<MdReadMore />}\n                                    onClick={() => setIsRemoveLinesWithSingleColorOpen(true)}\n                                >\n                                    {t('header.settings.procedures.removeLines.title')}\n                                </Button>\n                                <RemoveLinesWithSingleColorModal\n                                    isOpen={isRemoveLinesWithSingleColorOpen}\n                                    onClose={() => setIsRemoveLinesWithSingleColorOpen(false)}\n                                />\n                            </Box>\n                        </Box>\n\n                        <Box width=\"100%\" mb=\"3\">\n                            <Text as=\"b\" fontSize=\"xl\">\n                                {t('header.settings.telemetry.title')}\n                            </Text>\n                            <Box mt=\"3\">\n                                <Box display=\"flex\" mb=\"1\">\n                                    <Text flex=\"1\">{t('header.settings.telemetry.essential')}</Text>\n                                    <Switch isChecked={isAllowAnalytics} isDisabled />\n                                </Box>\n                                <Text fontSize=\"sm\" lineHeight=\"100%\" color=\"gray.600\">\n                                    {t('header.settings.telemetry.essentialInfo')}\n                                </Text>\n                                <Link\n                                    color={linkColour}\n                                    fontSize=\"sm\"\n                                    lineHeight=\"100%\"\n                                    href=\"https://support.google.com/analytics/answer/11593727\"\n                                    isExternal={true}\n                                >\n                                    {t('header.settings.telemetry.essentialLink')} <Icon as={MdOpenInNew} />\n                                </Link>\n\n                                <Box display=\"flex\" mb=\"1\">\n                                    <Text flex=\"1\">{t('header.settings.telemetry.additional')}</Text>\n                                    <Switch\n                                        isChecked={isAllowAppTelemetry}\n                                        onChange={({ target: { checked } }) => handleAdditionalTelemetry(checked)}\n                                    />\n                                </Box>\n                                <Text fontSize=\"sm\" lineHeight=\"100%\" color=\"gray.600\">\n                                    {t('header.settings.telemetry.additionalInfo')}\n                                </Text>\n                            </Box>\n                        </Box>\n                    </VStack>\n                </ModalBody>\n            </ModalContent>\n        </Modal>\n    );\n};\n\nexport default SettingsModal;\n","import React from 'react';\nimport {\n    Heading,\n    IconButton,\n    Menu,\n    MenuButton,\n    MenuItem,\n    MenuList,\n    Wrap,\n    WrapItem,\n    useColorModeValue,\n} from '@chakra-ui/react';\nimport { MdHelp, MdRedo, MdSettings, MdTranslate, MdUndo } from 'react-icons/md';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { RmgEnvBadge, RmgWindowHeader, useReadyConfig } from '@railmapgen/rmg-components';\nimport { LANGUAGE_NAMES, LanguageCode, SUPPORTED_LANGUAGES } from '@railmapgen/rmg-translate';\nimport rmgRuntime, { RmgEnv } from '@railmapgen/rmg-runtime';\nimport { Events } from '../../constants/constants';\nimport { useRootDispatch, useRootSelector } from '../../redux';\nimport { undoAction, redoAction } from '../../redux/param/param-slice';\nimport OpenActions from './open-actions';\nimport DownloadActions from './download-actions';\nimport AboutModal from './about-modal';\nimport { ZoomPopover } from './zoom-popover';\nimport SettingsModal from './settings-modal';\n\nexport default function WindowHeader() {\n    const { t } = useTranslation();\n    const dispatch = useRootDispatch();\n    const {\n        telemetry: { app: isAllowAppTelemetry },\n    } = useRootSelector(state => state.app);\n    const { past, future } = useRootSelector(state => state.param);\n    const bgColor = useColorModeValue('white', 'gray.800');\n\n    const [isSettingsModalOpen, setIsSettingsModalOpen] = React.useState(false);\n    const [isAboutModalOpen, setIsAboutModalOpen] = React.useState(false);\n\n    const environment = useReadyConfig(rmgRuntime.getEnv);\n    const appVersion = useReadyConfig(rmgRuntime.getAppVersion);\n\n    React.useEffect(() => {\n        // environment !== RmgEnv.DEV -> wait after rmgRuntime.ready() in useReadyConfig\n        if (isAllowAppTelemetry && environment !== RmgEnv.DEV)\n            rmgRuntime.event(Events.APP_LOAD, { isStandaloneWindow: rmgRuntime.isStandaloneWindow() });\n    }, [environment]);\n\n    const handleChangeLanguage = async (language: LanguageCode) => {\n        rmgRuntime.setLanguage(language);\n        rmgRuntime.getI18nInstance().changeLanguage(language);\n    };\n\n    return (\n        <RmgWindowHeader style={{ background: bgColor }}>\n            <Heading as=\"h4\" size=\"md\" whiteSpace=\"nowrap\" overflow=\"hidden\" textOverflow=\"ellipsis\">\n                {t('header.about.rmp')}\n            </Heading>\n            <RmgEnvBadge\n                environment={environment}\n                version={appVersion}\n                popoverHeader={\n                    environment === RmgEnv.PRD ? undefined : (\n                        <Trans i18nKey=\"header.popoverHeader\" environment={environment}>\n                            You&apos;re on {{ environment }} environment!\n                        </Trans>\n                    )\n                }\n                popoverBody={\n                    environment === RmgEnv.PRD ? undefined : (\n                        <Trans i18nKey=\"header.popoverBody\">\n                            This is a testing environment where we test the latest beta RMP.\n                        </Trans>\n                    )\n                }\n            />\n\n            <Wrap ml=\"auto\">\n                <WrapItem>\n                    <IconButton\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        aria-label=\"Undo\"\n                        icon={<MdUndo />}\n                        disabled={past.length === 0}\n                        onClick={() => dispatch(undoAction())}\n                    />\n                </WrapItem>\n                <WrapItem>\n                    <IconButton\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        aria-label=\"Redo\"\n                        icon={<MdRedo />}\n                        disabled={future.length === 0}\n                        onClick={() => dispatch(redoAction())}\n                    />\n                </WrapItem>\n\n                <WrapItem>\n                    <ZoomPopover />\n                </WrapItem>\n\n                <WrapItem>\n                    <OpenActions />\n                </WrapItem>\n\n                <WrapItem>\n                    <DownloadActions />\n                </WrapItem>\n\n                <WrapItem>\n                    <Menu>\n                        <MenuButton as={IconButton} icon={<MdTranslate />} variant=\"ghost\" size=\"sm\" />\n                        <MenuList>\n                            {SUPPORTED_LANGUAGES.map(lang => (\n                                <MenuItem key={lang} onClick={() => handleChangeLanguage(lang)}>\n                                    {LANGUAGE_NAMES[lang][lang]}\n                                </MenuItem>\n                            ))}\n                        </MenuList>\n                    </Menu>\n                </WrapItem>\n\n                <WrapItem>\n                    <IconButton\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        aria-label=\"Settings\"\n                        icon={<MdSettings />}\n                        onClick={() => setIsSettingsModalOpen(true)}\n                    />\n                </WrapItem>\n\n                <WrapItem>\n                    <IconButton\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        aria-label=\"Help\"\n                        icon={<MdHelp />}\n                        onClick={() => setIsAboutModalOpen(true)}\n                    />\n                </WrapItem>\n            </Wrap>\n\n            <SettingsModal isOpen={isSettingsModalOpen} onClose={() => setIsSettingsModalOpen(false)} />\n            <AboutModal isOpen={isAboutModalOpen} onClose={() => setIsAboutModalOpen(false)} />\n        </RmgWindowHeader>\n    );\n}\n","import { Alert, AlertIcon, AlertStatus, CloseButton, Link } from '@chakra-ui/react';\nimport rmgRuntime from '@railmapgen/rmg-runtime';\nimport { useRootDispatch, useRootSelector } from '../../redux';\nimport { closeGlobalAlert } from '../../redux/runtime/runtime-slice';\n\nexport default function GlobalAlerts() {\n    const dispatch = useRootDispatch();\n\n    const globalAlerts = useRootSelector(state => state.runtime.globalAlerts);\n\n    const handleAppOpen = (linkedApp: string) => {\n        if (rmgRuntime.isStandaloneWindow()) {\n            window.open(`/${linkedApp}`, '_blank');\n        } else {\n            rmgRuntime.openApp(linkedApp);\n        }\n    };\n\n    return (\n        <>\n            {Object.entries(globalAlerts).map(([status, { message, url, linkedApp }]) => (\n                <Alert key={status} status={status as AlertStatus} variant=\"solid\" size=\"xs\" pl={3} pr={1} py={0}>\n                    <AlertIcon />\n                    {linkedApp ? (\n                        <Link onClick={() => handleAppOpen(linkedApp)}>{message}</Link>\n                    ) : url ? (\n                        <Link href={url} target=\"_blank\">\n                            {message}\n                        </Link>\n                    ) : (\n                        message\n                    )}\n                    <CloseButton ml=\"auto\" onClick={() => dispatch(closeGlobalAlert(status as AlertStatus))} />\n                </Alert>\n            ))}\n        </>\n    );\n}\n","import WindowHeader from './window-header';\nimport GlobalAlerts from './global-alerts';\n\n// A simple wrapper that load the following two into a single chunk.\nexport default function PageHeader() {\n    return (\n        <>\n            <WindowHeader />\n            <GlobalAlerts />\n        </>\n    );\n}\n","import { MultiDirectedGraph } from 'graphology';\nimport { EdgeAttributes, GraphAttributes, NodeAttributes, Theme } from '../constants/constants';\nimport { ExternalStationAttributes, StationType } from '../constants/stations';\nimport { LinePathType, LineStyleType } from '../constants/lines';\nimport stations from '../components/svgs/stations/stations';\nimport { linePaths, lineStyles } from '../components/svgs/lines/lines';\nimport { SingleColorAttributes } from '../components/svgs/lines/styles/single-color';\nimport { ShmetroBasic2020StationAttributes } from '../components/svgs/stations/shmetro-basic-2020';\n\nconst StationsWithoutNameOffset = [StationType.ShmetroBasic2020];\n\n/**\n * Change a station's type.\n * @param graph Graph.\n * @param selectedFirst Current station's id.\n * @param newType New station's type.\n */\nexport const changeStationType = (\n    graph: MultiDirectedGraph<NodeAttributes, EdgeAttributes, GraphAttributes>,\n    selectedFirst: string,\n    newStnType: StationType\n) => {\n    const currentStnType = graph.getNodeAttribute(selectedFirst, 'type') as StationType;\n    const names = graph.getNodeAttribute(selectedFirst, currentStnType)!.names;\n    const newAttrs = { ...stations[newStnType].defaultAttrs, names };\n    if (\n        !Object.values(StationsWithoutNameOffset).includes(currentStnType) ||\n        !Object.values(StationsWithoutNameOffset).includes(newStnType)\n    ) {\n        (\n            newAttrs as Exclude<\n                ExternalStationAttributes[keyof ExternalStationAttributes],\n                ShmetroBasic2020StationAttributes | undefined\n            >\n        ).nameOffsetX = graph.getNodeAttribute(\n            selectedFirst,\n            currentStnType as Exclude<StationType, StationType.ShmetroBasic2020>\n        )!.nameOffsetX;\n        (\n            newAttrs as Exclude<\n                ExternalStationAttributes[keyof ExternalStationAttributes],\n                ShmetroBasic2020StationAttributes | undefined\n            >\n        ).nameOffsetY = graph.getNodeAttribute(\n            selectedFirst,\n            currentStnType as Exclude<StationType, StationType.ShmetroBasic2020>\n        )!.nameOffsetY;\n    }\n    graph.removeNodeAttribute(selectedFirst, currentStnType);\n    graph.mergeNodeAttributes(selectedFirst, { type: newStnType, [newStnType]: newAttrs });\n};\n\n/**\n * Change all the stations' type of currentStnType to newStnType in batch.\n * @param graph Graph.\n * @param currentStnType Current station's type.\n * @param newStnType New station's type.\n * @returns Nothing.\n */\nexport const changeStationsTypeInBatch = (\n    graph: MultiDirectedGraph<NodeAttributes, EdgeAttributes, GraphAttributes>,\n    currentStnType: StationType,\n    newStnType: StationType\n) =>\n    graph\n        .filterNodes((node, attr) => node.startsWith('stn') && attr.type === currentStnType)\n        .forEach(stnId => {\n            changeStationType(graph, stnId, newStnType);\n        });\n\n/**\n * Change a line's path type.\n * @param graph Graph.\n * @param selectedFirst Current line's id.\n * @param newType New line's path type.\n */\nexport const changeLinePathType = (\n    graph: MultiDirectedGraph<NodeAttributes, EdgeAttributes, GraphAttributes>,\n    selectedFirst: string,\n    newLinePathType: LinePathType\n) => {\n    const currentLinePathType = graph.getEdgeAttribute(selectedFirst, 'type') as LinePathType;\n    graph.removeEdgeAttribute(selectedFirst, currentLinePathType);\n    const newAttrs = JSON.parse(JSON.stringify(linePaths[newLinePathType].defaultAttrs));\n    graph.mergeEdgeAttributes(selectedFirst, { type: newLinePathType, [newLinePathType]: newAttrs });\n};\n\n/**\n * Change a line's style type.\n * @param graph Graph.\n * @param selectedFirst Current line's id.\n * @param newType New line's style type.\n * @param theme A handy helper to override color to current theme.\n */\nexport const changeLineStyleType = (\n    graph: MultiDirectedGraph<NodeAttributes, EdgeAttributes, GraphAttributes>,\n    selectedFirst: string,\n    newLineStyleType: LineStyleType,\n    theme?: Theme\n) => {\n    const currentLineStyleType = graph.getEdgeAttribute(selectedFirst, 'style') as LineStyleType;\n    graph.removeEdgeAttribute(selectedFirst, currentLineStyleType);\n    const newAttrs = JSON.parse(JSON.stringify(lineStyles[newLineStyleType].defaultAttrs));\n    if (newLineStyleType === LineStyleType.SingleColor && theme) (newAttrs as SingleColorAttributes).color = theme;\n    graph.mergeEdgeAttributes(selectedFirst, { style: newLineStyleType, [newLineStyleType]: newAttrs });\n    if (newLineStyleType === LineStyleType.River) graph.setEdgeAttribute(selectedFirst, 'zIndex', -5);\n    else graph.setEdgeAttribute(selectedFirst, 'zIndex', 0);\n};\n","import { MultiDirectedGraph } from 'graphology';\nimport { NodeAttributes, EdgeAttributes, GraphAttributes } from '../constants/constants';\n\nexport const getMousePosition = (e: React.MouseEvent) => {\n    const bbox = e.currentTarget.getBoundingClientRect();\n    const x = e.clientX - bbox.left;\n    const y = e.clientY - bbox.top;\n    // console.log(e.clientX, bbox.left, e.clientY, bbox.top, x, y);\n    return { x, y };\n};\n\nexport const roundToNearestN = (x: number, n: number) => Math.round(x / n) * n;\n\nexport const calculateCanvasSize = (graph: MultiDirectedGraph<NodeAttributes, EdgeAttributes, GraphAttributes>) => {\n    let [xMin, yMin, xMax, yMax] = [Number.MAX_VALUE, Number.MAX_VALUE, Number.MIN_VALUE, Number.MIN_VALUE];\n\n    graph.forEachNode((node, attr) => {\n        xMin = Math.min(attr.x, xMin);\n        yMin = Math.min(attr.y, yMin);\n        xMax = Math.max(attr.x, xMax);\n        yMax = Math.max(attr.y, yMax);\n    });\n\n    xMin -= 150;\n    yMin -= 150;\n    xMax += 150;\n    yMax += 150;\n\n    return { xMin, yMin, xMax, yMax };\n};\n","var map = {\n\t\"./beijing.json\": [\n\t\t4781,\n\t\t2639\n\t],\n\t\"./guangzhou.json\": [\n\t\t7845,\n\t\t5202\n\t],\n\t\"./santiago.json\": [\n\t\t8470,\n\t\t6398\n\t],\n\t\"./shanghai.json\": [\n\t\t7414,\n\t\t8233\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3 | 16);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 9681;\nmodule.exports = webpackAsyncContext;"],"names":["GalleryModal","props","isOpen","handleOpenTemplates","onClose","t","useTranslation","handleSelect","name","module","default","map","city","minWidth","onClick","OpenActions","dispatch","useRootDispatch","graph","React","window","fileRMGInputRef","fileInputRef","isGalleryModalOpen","setIsGalleryModalOpen","refreshAndSave","setRefreshNodes","setRefreshEdges","saveGraph","current","export","handleUploadRMG","event","file","target","files","console","log","type","setGlobalAlert","status","message","error","readFileAsText","paramStr","param","JSON","parse","stnList","stn_list","theme","stnIdMap","Object","fromEntries","keys","filter","id","includes","nanoid","entries","forEach","stnInfo","nodes","filterNodes","node","attr","values","StationType","names","length","i","style","transfer","info","flat","info_panel_type","stringify","stations","defaultAttrs","color","lineCode","line_num","stationCode","num","lv1","transferInfo","unshift","level","addNode","visible","zIndex","x","y","children","child","addDirectedEdgeWithKey","LinePathType","linePaths","LineStyleType","value","handleUpload","upgrade","version","save","clearSelected","clear","import","state","present","past","future","setFullState","rmpSave","g","as","IconButton","size","variant","icon","setSvgViewBoxZoom","setSvgViewBoxMin","ref","accept","hidden","onChange","click","ml","colorScheme","Promise","resolve","reader","FileReader","onloadend","result","readAsText","readBlobAsDataURL","blob","readAsDataURL","getBase64FontFace","svgEl","uniqueCharacters","Array","from","Set","querySelectorAll","el","innerHTML","join","replace","document","fonts","load","fontFaceList","cssRules","querySelector","sheet","reject","Error","cssFontFaceRules","rule","CSSFontFaceRule","distinctCssRules","reduce","acc","cur","font","matchedRule","find","cssStyle","getPropertyValue","family","unicodeRange","ruleStyle","matchedStyle","concat","all","cssRule","fetch","getAbsoluteUrl","fontResp","fontDataUri","cssText","ruleStyleSrc","src","navigator","userAgent","process","match","scrollBehavior","href","isExternal","MdOpenInNew","DownloadActions","isAllowProjectTelemetry","useRootSelector","app","telemetry","project","nodeExists","runtime","bgColor","useColorModeValue","format","setFormat","formatOptions","png","svg","scale","setScale","scaleOptions","v","isTransparent","setIsTransparent","fields","label","options","pngFields","isChecked","isDownloadModalOpen","setIsDownloadModalOpen","isTermsAndConditionsModalOpen","setIsTermsAndConditionsModalOpen","isAttachSelected","setIsAttachSelected","isTermsAndConditionsSelected","setIsTermsAndConditionsSelected","handleDownload","rmgRuntime","Events","numberOfNodes","order","numberOfEdges","calculateCanvasSize","xMin","yMin","xMax","yMax","width","height","elem","getElementById","cloneNode","e","hasNode","getNodeAttribute","MiscNodeType","removeChild","appendChild","generateRmpInfo","setAttribute","toString","className","styleSet","getComputedStyle","styleName","classList","remove","uris","s","createElement","textContent","prepend","alert","downloadAs","Date","valueOf","outerHTML","body","btoa","unescape","encodeURIComponent","canvas","canvasWidth","canvasHeight","ctx","getContext","fillStyle","fillRect","img","Image","onload","drawImage","toBlob","downloadBlobAs","stringifyParam","store","checked","open","disabled","filename","data","Blob","url","URL","createObjectURL","a","download","revokeObjectURL","createElementNS","logo","rmp","createTextNode","link","appVersion","paddingBottom","direction","boxSize","alignItems","justifyContent","fontSize","margin","mt","mb","my","w","cursor","mr","display","fontWeight","align","GithubIcon","SlackIcon","ZoomPopover","setIsOpen","svgViewBoxZoom","min","max","step","leftIcon","rightIcon","minW","onOpen","noLabel","TranslateNodesModal","setX","setY","val","Number","forEachNode","updateNodeAttribute","ScaleNodesModal","ChangeTypeModal","availableStationOptions","key","metadata","displayName","at","oldStnType","setOldStnType","newStnType","setNewStnType","disabledOptions","background","lineHeight","changeStationsTypeInBatch","RemoveLinesWithSingleColorModal","runtimeTheme","setTheme","isColourModalOpen","setIsColourModalOpen","defaultTheme","onUpdate","nextTheme","filterEdges","edge","source","sourceAttr","targetAttr","undirected","dropEdge","procedureButtonStyle","keepLastPath","linkColour","isTranslateNodesOpen","setIsTranslateNodesOpen","isScaleNodesOpen","setIsScaleNodesOpen","isChangeTypeOpen","setIsChangeTypeOpen","isRemoveLinesWithSingleColorOpen","setIsRemoveLinesWithSingleColorOpen","isAllowAnalytics","isAllowAppTelemetry","divider","borderColor","flex","setKeepLastPath","Tr","Th","Td","sx","isDisabled","allowAppTelemetry","setTelemetryApp","WindowHeader","isSettingsModalOpen","setIsSettingsModalOpen","isAboutModalOpen","setIsAboutModalOpen","environment","useReadyConfig","RmgEnv","isStandaloneWindow","handleChangeLanguage","language","changeLanguage","whiteSpace","overflow","textOverflow","popoverHeader","undefined","i18nKey","popoverBody","undoAction","redoAction","SUPPORTED_LANGUAGES","lang","LANGUAGE_NAMES","GlobalAlerts","globalAlerts","linkedApp","pl","pr","py","handleAppOpen","closeGlobalAlert","PageHeader","StationsWithoutNameOffset","changeStationType","selectedFirst","currentStnType","newAttrs","nameOffsetX","nameOffsetY","removeNodeAttribute","mergeNodeAttributes","startsWith","stnId","changeLinePathType","newLinePathType","currentLinePathType","getEdgeAttribute","removeEdgeAttribute","mergeEdgeAttributes","changeLineStyleType","newLineStyleType","currentLineStyleType","lineStyles","setEdgeAttribute","getMousePosition","bbox","currentTarget","getBoundingClientRect","clientX","left","clientY","top","roundToNearestN","n","Math","round","MAX_VALUE","MIN_VALUE","webpackAsyncContext","req","__webpack_require__","o","then","code","ids","exports"],"sourceRoot":""}