import{j as e,a8 as Pt,Q as kt,a9 as ct,aa as dt,G as ne,ab as ht,ac as re,k as $e,$ as U,M as J,a0 as K,p as Y,s as y,q as Z,r as q,I as Ue,h as M,t as me,ad as Vt,ae as Ut,g as xe,w as v,a7 as O,v as _t,af as ut,ag as Jt,F as gt,_ as ft,B as I,ah as be,a1 as ze,ai as de,aj as he,ak as pe,c as Kt,i as Yt,e as Zt,f as qt,al as Ot,am as Qt,O as Je,an as Xt,ao as es,ap as X,aq as mt,ar as ts,as as H,at as _,au as ss,av as se,x as ns,y as rs}from"./chakra-e455e76b.js";import{g as os,r as B,b as j}from"./react-beb26faf.js";import{w as is,g as as,a as Ke,b as At,I as ls,u as cs,r as L,n as xt,S as E,L as Ye,l as ds,c as ie,R as Et,d as W,e as Q,s as ge,f as fe,h as ae,i as Tt,j as tt,M as jt,k as hs,m as ps,o as z,p as Mt,q as us,t as Ze,C as gs,v as Nt,x as bt,y as Ht,z as le,A as fs,B as ms,D as xs,E as ye,F as st,G as js,H as bs,J as ys,K as yt,N as ws,T as Cs,O as Ss,P as vs,Q as He,U as zs,V as ks,W as _s,X as Os,Y as As,Z as qe,_ as Es,$ as Ts,a0 as Ms,a1 as Ns,a2 as Hs,a3 as Rs,a4 as Is,a5 as Bs,a6 as Gs,a7 as $s}from"./index-9abe36f7.js";import{s as Ie}from"./stations-517c8308.js";import{c as Ls,f as Ds,F as wt,g as Fs,i as ve}from"./helpers-9ad3ce77.js";import{c as Ws}from"./change-types-6fc05a4f.js";var Ps={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};const Vs=os(Ps);var Us=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function Ct(t){var i={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},r=t.match(/<\/?([^\s]+?)[/\s>]/);if(r&&(i.name=r[1],(Vs[r[1]]||t.charAt(t.length-2)==="/")&&(i.voidElement=!0),i.name.startsWith("!--"))){var n=t.indexOf("-->");return{type:"comment",comment:n!==-1?t.slice(4,n):""}}for(var a=new RegExp(Us),s=null;(s=a.exec(t))!==null;)if(s[0].trim())if(s[1]){var o=s[1].trim(),c=[o,""];o.indexOf("=")>-1&&(c=o.split("=")),i.attrs[c[0]]=c[1],a.lastIndex--}else s[2]&&(i.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return i}var Js=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Ks=/^\s*$/,Ys=Object.create(null);function Rt(t,i){switch(i.type){case"text":return t+i.content;case"tag":return t+="<"+i.name+(i.attrs?function(r){var n=[];for(var a in r)n.push(a+'="'+r[a]+'"');return n.length?" "+n.join(" "):""}(i.attrs):"")+(i.voidElement?"/>":">"),i.voidElement?t:t+i.children.reduce(Rt,"")+"</"+i.name+">";case"comment":return t+"<!--"+i.comment+"-->"}}var Zs={parse:function(t,i){i||(i={}),i.components||(i.components=Ys);var r,n=[],a=[],s=-1,o=!1;if(t.indexOf("<")!==0){var c=t.indexOf("<");n.push({type:"text",content:c===-1?t:t.substring(0,c)})}return t.replace(Js,function(u,p){if(o){if(u!=="</"+r.name+">")return;o=!1}var d,m=u.charAt(1)!=="/",l=u.startsWith("<!--"),h=p+u.length,g=t.charAt(h);if(l){var f=Ct(u);return s<0?(n.push(f),n):((d=a[s]).children.push(f),n)}if(m&&(s++,(r=Ct(u)).type==="tag"&&i.components[r.name]&&(r.type="component",o=!0),r.voidElement||o||!g||g==="<"||r.children.push({type:"text",content:t.slice(h,t.indexOf("<",h))}),s===0&&n.push(r),(d=a[s-1])&&d.children.push(r),a[s]=r),(!m||r.voidElement)&&(s>-1&&(r.voidElement||r.name===u.slice(2,-1))&&(s--,r=s===-1?n:a[s]),!o&&g!=="<"&&g)){d=s===-1?n:a[s].children;var S=t.indexOf("<",h),C=t.slice(h,S===-1?void 0:S);Ks.test(C)&&(C=" "),(S>-1&&s+d.length>=0||C!==" ")&&d.push({type:"text",content:C})}}),n},stringify:function(t){return t.reduce(function(i,r){return i+Rt("",r)},"")}};function Qe(t,i){if(!t)return!1;const r=t.props?t.props.children:t.children;return i?r.length>0:!!r}function Xe(t){return t?t.props?t.props.children:t.children:[]}function qs(t){return Object.prototype.toString.call(t)!=="[object Array]"?!1:t.every(i=>B.isValidElement(i))}function ke(t){return Array.isArray(t)?t:[t]}function Qs(t,i){const r={...i};return r.props=Object.assign(t.props,i.props),r}function It(t,i){if(!t)return"";let r="";const n=ke(t),a=i.transSupportBasicHtmlNodes&&i.transKeepBasicHtmlNodesFor?i.transKeepBasicHtmlNodesFor:[];return n.forEach((s,o)=>{if(typeof s=="string")r+=`${s}`;else if(B.isValidElement(s)){const c=Object.keys(s.props).length,u=a.indexOf(s.type)>-1,p=s.props.children;if(!p&&u&&c===0)r+=`<${s.type}/>`;else if(!p&&(!u||c!==0))r+=`<${o}></${o}>`;else if(s.props.i18nIsDynamicList)r+=`<${o}></${o}>`;else if(u&&c===1&&typeof p=="string")r+=`<${s.type}>${p}</${s.type}>`;else{const d=It(p,i);r+=`<${o}>${d}</${o}>`}}else if(s===null)Ke("Trans: the passed in value is invalid - seems you passed in a null child.");else if(typeof s=="object"){const{format:c,...u}=s,p=Object.keys(u);if(p.length===1){const d=c?`${p[0]}, ${c}`:p[0];r+=`{{${d}}}`}else Ke("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",s)}else Ke("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",s)}),r}function Xs(t,i,r,n,a,s){if(i==="")return[];const o=n.transKeepBasicHtmlNodesFor||[],c=i&&new RegExp(o.join("|")).test(i);if(!t&&!c)return[i];const u={};function p(S){ke(S).forEach(x=>{typeof x!="string"&&(Qe(x)?p(Xe(x)):typeof x=="object"&&!B.isValidElement(x)&&Object.assign(u,x))})}p(t);const d=Zs.parse(`<0>${i}</0>`),m={...u,...a};function l(S,C,x){const T=Xe(S),P=g(T,C.children,x);return qs(T)&&P.length===0?T:P}function h(S,C,x,T,P){S.dummy&&(S.children=C),x.push(B.cloneElement(S,{...S.props,key:T},P?void 0:C))}function g(S,C,x){const T=ke(S);return ke(C).reduce((k,w,G)=>{const ce=w.children&&w.children[0]&&w.children[0].content&&r.services.interpolator.interpolate(w.children[0].content,m,r.language);if(w.type==="tag"){let $=T[parseInt(w.name,10)];!$&&x.length===1&&x[0][w.name]&&($=x[0][w.name]),$||($={});const b=Object.keys(w.attrs).length!==0?Qs({props:w.attrs},$):$,te=B.isValidElement(b),Ae=te&&Qe(w,!0)&&!w.voidElement,Ee=c&&typeof b=="object"&&b.dummy&&!te,we=typeof t=="object"&&t!==null&&Object.hasOwnProperty.call(t,w.name);if(typeof b=="string"){const A=r.services.interpolator.interpolate(b,m,r.language);k.push(A)}else if(Qe(b)||Ae){const A=l(b,w,x);h(b,A,k,G)}else if(Ee){const A=g(T,w.children,x);k.push(B.cloneElement(b,{...b.props,key:G},A))}else if(Number.isNaN(parseFloat(w.name)))if(we){const A=l(b,w,x);h(b,A,k,G,w.voidElement)}else if(n.transSupportBasicHtmlNodes&&o.indexOf(w.name)>-1)if(w.voidElement)k.push(B.createElement(w.name,{key:`${w.name}-${G}`}));else{const A=g(T,w.children,x);k.push(B.createElement(w.name,{key:`${w.name}-${G}`},A))}else if(w.voidElement)k.push(`<${w.name} />`);else{const A=g(T,w.children,x);k.push(`<${w.name}>${A}</${w.name}>`)}else if(typeof b=="object"&&!te){const A=w.children[0]?ce:null;A&&k.push(A)}else w.children.length===1&&ce?k.push(B.cloneElement(b,{...b.props,key:G},ce)):k.push(B.cloneElement(b,{...b.props,key:G}))}else if(w.type==="text"){const $=n.transWrapTextNodes,b=s?n.unescape(r.services.interpolator.interpolate(w.content,m,r.language)):r.services.interpolator.interpolate(w.content,m,r.language);$?k.push(B.createElement($,{key:`${w.name}-${G}`},b)):k.push(b)}return k},[])}const f=g([{dummy:!0,children:t||[]}],d,ke(t||[]));return Xe(f[0])}function en(t){let{children:i,count:r,parent:n,i18nKey:a,context:s,tOptions:o={},values:c,defaults:u,components:p,ns:d,i18n:m,t:l,shouldUnescape:h,...g}=t;const f=m||At();if(!f)return is("You will need to pass in an i18next instance by using i18nextReactModule"),i;const S=l||f.t.bind(f)||(te=>te);s&&(o.context=s);const C={...as(),...f.options&&f.options.react};let x=d||S.ns||f.options&&f.options.defaultNS;x=typeof x=="string"?[x]:x||["translation"];const T=u||It(i,C)||C.transEmptyNodeValue||a,{hashTransKey:P}=C,k=a||(P?P(T):T),w=c?o.interpolation:{interpolation:{...o.interpolation,prefix:"#$?",suffix:"?$#"}},G={...o,count:r,...c,...w,defaultValue:T,ns:x},ce=k?S(k,G):T,$=Xs(p||i,ce,f,C,G,h),b=n!==void 0?n:C.defaultTransParent;return b?B.createElement(b,g,$):$}function St(t){let{children:i,count:r,parent:n,i18nKey:a,context:s,tOptions:o={},values:c,defaults:u,components:p,ns:d,i18n:m,t:l,shouldUnescape:h,...g}=t;const{i18n:f,defaultNS:S}=B.useContext(ls)||{},C=m||f||At(),x=l||C&&C.t.bind(C);return en({children:i,count:r,parent:n,i18nKey:a,context:s,tOptions:o,values:c,defaults:u,components:p,ns:d||x&&x.ns||S||C&&C.options&&C.options.defaultNS,i18n:C,t:l,shouldUnescape:h,...g})}var vt=function(t){return cs(L.ready(),t)},tn={ar:{ar:"العربية",en:"Arabic",ko:"아랍어","zh-Hans":"阿拉伯文","zh-Hant":"阿拉伯文"},az:{az:"Azərbaycanca",en:"Azerbaijani",ko:"아제르바이잔어","zh-Hans":"阿塞拜疆文","zh-Hant":"阿塞拜疆文"},ca:{ca:"Català",en:"Catalan",ko:"카탈루냐어","zh-Hans":"加泰罗尼亚文","zh-Hant":"加泰隆尼亞文"},da:{da:"Dansk",en:"Danish",ko:"덴마크어","zh-Hans":"丹麦文","zh-Hant":"丹麥文"},de:{de:"Deutsch",en:"German",ko:"독일어","zh-Hans":"德文","zh-Hant":"德文"},el:{el:"Ελληνικά",en:"Greek",ko:"그리스어","zh-Hans":"希腊文","zh-Hant":"希臘文"},en:{en:"English",ko:"영어","zh-Hans":"英文","zh-Hant":"英文"},es:{en:"Spanish",es:"Español",ko:"스페인어","zh-Hans":"西班牙文","zh-Hant":"西班牙文"},fa:{en:"Persian",fa:"فارسی",ko:"페르시아어","zh-Hans":"波斯文","zh-Hant":"波斯文"},fr:{en:"French",fr:"Français",ko:"프랑스어","zh-Hans":"法文","zh-Hant":"法文"},ga:{en:"Irish",ga:"Gaeilge",ko:"아일랜드어","zh-Hans":"爱尔兰文","zh-Hant":"愛爾蘭文"},gd:{en:"Scottish Gaelic",gd:"Gàidhlig",ko:"스코틀랜드 게일어","zh-Hans":"苏格兰盖尔文","zh-Hant":"蘇格蘭蓋爾文"},hi:{en:"Hindi",hi:"हिन्दी",ko:"힌디어","zh-Hans":"印地文","zh-Hant":"印地文"},hu:{en:"Hungarian",hu:"Magyar",ko:"헝가리어","zh-Hans":"匈牙利文","zh-Hant":"匈牙利文"},id:{en:"Indoesian",id:"Bahasa Indonesia",ko:"인도네시아어","zh-Hans":"印尼文","zh-Hant":"印尼文"},it:{en:"Italian",it:"Italiano",ko:"이탈리아어","zh-Hans":"意大利文","zh-Hant":"意大利文"},ja:{en:"Japanese",ja:"日本語",ko:"일본어","zh-Hans":"日文","zh-Hant":"日文"},kk:{en:"Kazakh",kk:"Қазақша",ko:"카자흐어","zh-Hans":"哈萨克文","zh-Hant":"哈薩克文"},ko:{en:"Korean",ko:"한국어","zh-Hans":"韩文","zh-Hant":"韓文"},ms:{en:"Malay",ko:"말레이어",ms:"Bahasa Melayu","zh-Hans":"马来文","zh-Hant":"馬來文"},no:{en:"Norwegian",ko:"노르웨이어",no:"Norsk","zh-Hans":"挪威文","zh-Hant":"挪威文"},pl:{en:"Polish",ko:"폴란드어",pl:"Polski","zh-Hans":"波兰文","zh-Hant":"波蘭文"},pt:{en:"Portuguese",ko:"포르투갈어",pt:"Português","zh-Hans":"葡萄牙文","zh-Hant":"葡萄牙文"},ro:{en:"Romanian",ko:"루마니아어",ro:"Română","zh-Hans":"罗马尼亚文","zh-Hant":"羅馬尼亞文"},ru:{en:"Russian",ko:"러시아어",ru:"Русский","zh-Hans":"俄文","zh-Hant":"俄文"},sv:{en:"Swedish",ko:"스웨덴어",sv:"Svenska","zh-Hans":"瑞典文","zh-Hant":"瑞典文"},th:{en:"Thai",ko:"태국어",th:"ภาษาไทย","zh-Hans":"泰文","zh-Hant":"泰文"},tr:{en:"Turkish",ko:"튀르키예어",tr:"Türkçe","zh-Hans":"土耳其文","zh-Hant":"土耳其文"},uk:{en:"Ukrainian",ko:"우크라이나어",uk:"Українська","zh-Hans":"乌克兰文","zh-Hant":"烏克蘭文"},ur:{en:"Urdo",ko:"우르두어",ur:"اردو","zh-Hans":"乌尔都文","zh-Hant":"烏爾都文"},uz:{en:"Uzbek",ko:"우즈베크어",uz:"Oʻzbekcha","zh-Hans":"乌兹别克文","zh-Hant":"烏茲別克文"},vi:{en:"Vietnamese",ko:"베트남어",vi:"Tiếng Việt","zh-Hans":"越南文","zh-Hant":"越南文"},"zh-Hans":{en:"Simplified Chinese",ko:"중국어 간체자","zh-Hans":"简体中文","zh-Hant":"簡體中文"},"zh-Hant":{en:"Traditional Chinese",ko:"중국어 정체자","zh-Hans":"繁体中文","zh-Hant":"繁體中文"}},Oe=(t=>(t.left="l",t.right="r",t))(Oe||{}),ue=(t=>(t.through="through",t.nonThrough="nonthrough",t))(ue||{}),Le=(t=>(t.local="local",t.express="express",t.direct="direct",t))(Le||{}),oe=(t=>(t.MTR="mtr",t.GZMTR="gzmtr",t.SHMetro="shmetro",t))(oe||{}),pt=(t=>(t.sh="sh",t.sh2020="sh2020",t))(pt||{});const sn=(t,{info_panel_type:i,line_num:r,stn_list:n,style:a,theme:s})=>{const o=Object.fromEntries(Object.keys(n).filter(c=>!["linestart","lineend"].includes(c)).map(c=>[c,`stn_${xt(10)}`]));Object.entries(n).filter(([c,u])=>!["linestart","lineend"].includes(c)).forEach(([c,u])=>{const p=t.filterNodes((d,m)=>Object.values(E).includes(m.type)&&m[m.type].names[0]===u.name[0]);p.length!==0&&(o[c]=p[0])}),Object.entries(n).filter(([c,u])=>!["linestart","lineend"].includes(c)).filter(([c,u])=>t.filterNodes((p,d)=>Object.values(E).includes(d.type)&&d[d.type].names[0]===u.name[0]).length===0).forEach(([c,u],p)=>{let d=E.ShmetroBasic;const m=u.transfer.groups,l=m.map(g=>g.lines).flat();a===oe.SHMetro?l.length>0?d=E.ShmetroInt:i===pt.sh2020?d=E.ShmetroBasic2020:d=E.ShmetroBasic:a===oe.GZMTR?l.length>0?d=E.GzmtrInt:d=E.GzmtrBasic:a===oe.MTR&&(d=E.MTR);const h={...structuredClone(Ie[d].defaultAttrs),names:u.name};d===E.ShmetroBasic2020?h.color=s:d===E.GzmtrBasic?(h.color=s,h.lineCode=r,h.stationCode=u.num):d===E.GzmtrInt?h.transfer=m.map((g,f)=>{const S=g.lines.map(C=>{var x;return[...(x=C.theme)!=null?x:s,"1","01"]});return f===0?[[...s,r,u.num],...S]:S}):d===E.MTR&&(m[0].lines.length?h.transfer=[[[...s,"",""],...m[0].lines.map(g=>{var f;return[...(f=g.theme)!=null?f:s,"",""]})]]:h.transfer=[[]]),t.addNode(o[c],{visible:!0,zIndex:0,x:100+p*50,y:1e3,type:d,[d]:h})}),Object.entries(n).filter(([c,u])=>!["linestart","lineend"].includes(c)).forEach(([c,u])=>{u.children.filter(p=>!["linestart","lineend"].includes(p)).forEach(p=>{t.addDirectedEdgeWithKey(`line_${xt(10)}`,o[c],o[p],{visible:!0,zIndex:0,type:Ye.Diagonal,[Ye.Diagonal]:structuredClone(ds[Ye.Diagonal].defaultAttrs),style:ie.SingleColor,[ie.SingleColor]:{color:s},reconcileId:""})})})},nn="rmg-bridge--",rn={h:500,maxH:"70%","& iframe":{h:"100%",w:"100%"}};function on(t){const{isOpen:i,onClose:r,onImport:n}=t,[a]=B.useState(crypto.randomUUID()),s="/rmg/#/import?"+new URLSearchParams({parentComponent:L.getAppName(),parentId:a});return B.useEffect(()=>{const o=new BroadcastChannel(nn+a);return o.onmessage=c=>{const{event:u,data:p}=c.data;console.log("[rmp] Received event from RMG app clip:",u),u==="CLOSE"?r():u==="IMPORT"&&n(p)},()=>{o.close()}},[]),e.jsx(Et,{isOpen:i,onClose:r,sx:rn,children:e.jsx("iframe",{src:s,loading:"lazy"})})}const an="RMP_GALLERY_CHANNEL",ln="OPEN_TEMPLATE",cn=new BroadcastChannel(an),dn={h:"80%",w:"80%","& iframe":{h:"100%",w:"100%"}};function hn(t){const{isOpen:i,onClose:r}=t,n=Pt(),{t:a}=W(),s=Q(),o=j.useRef(window.graph),c=j.useCallback(()=>{s(ge()),s(fe()),s(ae(o.current.export()))},[s,ge,fe,ae,o]),u=async d=>{const{version:m,...l}=JSON.parse(await Tt(JSON.stringify(d)));s(tt()),o.current.clear(),o.current.import(l.graph),c()},p=async d=>{var l;const m=await((l=(await Promise.allSettled([fetch(`/rmp-gallery/resources/real_world/${d}.json`),fetch(`/rmp-gallery/resources/fantasy/${d}.json`)])).filter(h=>h.status==="fulfilled").find(h=>h.value.status===200))==null?void 0:l.value.json());m?(u(m),n({title:a("header.open.importFromRMPGallery",{id:d}),status:"success",duration:9e3,isClosable:!0})):n({title:a("header.open.failToImportFromRMPGallery",{id:d}),status:"error",duration:9e3,isClosable:!0})};return j.useEffect(()=>{const d=window.location.href;if(d.includes("/s/")){history.replaceState({},a("about.rmp"),d.substring(0,d.indexOf("s/")));const m=d.substring(d.lastIndexOf("s/")+2);p(m)}},[]),j.useEffect(()=>{cn.onmessage=d=>{const{event:m,data:l}=d.data;m===ln&&(p(l),r())}},[]),e.jsx(e.Fragment,{children:e.jsxs(Et,{isOpen:i,onClose:r,size:"full",sx:dn,children:[e.jsx("iframe",{src:"/rmp-gallery/",loading:"lazy"}),e.jsx(kt,{onClick:r,position:"fixed",top:"5px",right:"15px"})]})})}function pn(){const{t}=W(),i=Q(),r=j.useRef(window.graph),n=j.useRef(null),[a,s]=j.useState(!1),[o,c]=j.useState(!1),u=j.useCallback(()=>{i(ge()),i(fe()),i(ae(r.current.export()))},[i,ge,fe,ae,r]),p=()=>{i(tt()),r.current.clear(),i(Mt(100)),i(us({x:0,y:0})),u()},d=l=>{try{sn(r.current,l),u()}catch(h){i(Ze({status:"error",message:t("OpenActions.unknownError")})),console.error("OpenActions.handleUploadRMG():: Unknown error occurred while parsing the RMG project",h)}finally{s(!1)}},m=async l=>{var g;const h=(g=l.target.files)==null?void 0:g[0];if(console.log("OpenActions.handleUpload():: received file",h),(h==null?void 0:h.type)!=="application/json")i(Ze({status:"error",message:t("OpenActions.invalidType")})),console.error("OpenActions.handleUpload():: Invalid file type! Only file in JSON format is accepted.");else try{const f=await un(h),{version:S,...C}=JSON.parse(await Tt(f));i(tt()),r.current.clear(),r.current.import(C.graph),u()}catch(f){i(Ze({status:"error",message:t("OpenActions.unknownError")})),console.error("OpenActions.handleUpload():: Unknown error occurred while parsing the uploaded file",f)}l.target.value=""};return e.jsxs(ct,{children:[e.jsx(dt,{as:ne,size:"sm",variant:"ghost",icon:e.jsx(jt,{})}),e.jsxs(ht,{children:[e.jsx(re,{icon:e.jsx(hs,{}),onClick:p,children:t("header.open.new")}),e.jsx("input",{id:"upload_project",ref:n,type:"file",accept:".json",hidden:!0,onChange:m,"data-testid":"file-upload"}),e.jsx(re,{icon:e.jsx(jt,{}),onClick:()=>{var l;return(l=n==null?void 0:n.current)==null?void 0:l.click()},children:t("header.open.config")}),e.jsx(re,{icon:e.jsx(ps,{}),onClick:()=>s(!0),children:t("header.open.projectRMG")}),e.jsxs(re,{icon:e.jsx(z,{}),onClick:()=>c(!0),children:[t("header.open.gallery"),e.jsx($e,{ml:"1",colorScheme:"green",children:"New"})]})]}),e.jsx(on,{isOpen:a,onClose:()=>s(!1),onImport:d}),e.jsx(hn,{isOpen:o,onClose:()=>c(!1)})]})}const un=t=>new Promise(i=>{const r=new FileReader;r.onloadend=()=>i(r.result),r.readAsText(t)}),nt=(t,i,r)=>{const n=new Blob([r],{type:i});Bt(t,n)},Bt=(t,i)=>{const r=window.URL.createObjectURL(i),n=document.createElement("a");n.href=r,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(r)},ee=new Set,rt=new Set,ot=new Set,it=new Set,Be=new Map,V=new Map;let N=[],_e=0;const Ge=new Map,et=new Map,at=new Set,gn={name:["LEFT END","LEFT END"],secondaryName:!1,num:"00",services:[Le.local],parents:[],children:["lineend"],branch:{left:[],right:[]},transfer:{groups:[{lines:[]}],tick_direc:Oe.right,paid_area:!0},facility:"",loop_pivot:!1,one_line:!0,int_padding:355},fn={name:["RIGHT END","RIGHT END"],secondaryName:!1,num:"00",services:[Le.local],parents:[],children:[],branch:{left:[],right:[]},transfer:{groups:[{lines:[]}],tick_direc:Oe.right,paid_area:!0},facility:"",loop_pivot:!1,one_line:!0,int_padding:355},mn={},Gt={svgWidth:{destination:1500,runin:1500,railmap:1500,indoor:1500},svg_height:400,style:oe.SHMetro,y_pc:50,padding:10,branchSpacingPct:33,direction:Oe.right,platform_num:"1",theme:[gs.Shanghai,"sh1","#E3002B",Nt.white],line_name:["地鐵線","Metro Line"],current_stn_idx:"jlaMj2",stn_list:mn,namePosMTR:{isStagger:!0,isFlip:!0},customiseMTRDest:{isLegacy:!1,terminal:!1},line_num:"1",psd_num:"1",info_panel_type:pt.sh,notesGZMTR:[],direction_gz_x:40,direction_gz_y:70,coline:{},loop:!1,loop_info:{bank:!0,left_and_right_factor:0,bottom_factor:1}},xn={name:["",""],secondaryName:!1,num:"",services:[Le.local],parents:[],children:[],branch:{left:[],right:[]},transfer:{groups:[{lines:[]}],tick_direc:Oe.right,paid_area:!0},facility:"",loop_pivot:!1,one_line:!0,int_padding:355},R=t=>`${t[0]}/${t[1]}=${t[2]}${t[3]}`,$t=t=>[ie.SingleColor,ie.MTRRaceDays].includes(t),jn=t=>{if([ie.SingleColor,ie.MTRRaceDays].includes(t.style))return structuredClone(t[t.style].color)},bn=(t,i)=>{const[r,n]=t.extremities(i),a=t.getEdgeAttributes(i),s=a.style;if(r!=n&&$t(s)){const o=jn(a);it.has(R(o))||(ot.add(o),it.add(R(o)),Be.set(o,r)),V.has(r)?N.push({target:n,next:V.get(r),color:o}):N.push({target:n,next:-1,color:o}),V.set(r,_e),_e++,V.has(n)?N.push({target:r,next:V.get(n),color:o}):N.push({target:r,next:-1,color:o}),V.set(n,_e),_e++}},Lt=(t,i,r)=>{if(ee.has(t))return;ee.add(t);let n=0;const a=new Set;for(let s=V.get(t);s!=-1;s=N[s].next){const o=N[s].target,c=N[s].color;R(c)==R(r)&&(a.has(o)||(a.add(o),n++,o!=i&&Lt(o,t,r)))}Ge.set(t,n)},zt=(t,i)=>{const r=t.stn_list.lineend.parents;r.push(i),t.stn_list.lineend.parents=structuredClone(r).reverse(),t.stn_list.lineend.parents.length==2?t.stn_list.lineend.branch.left=[ue.through,r[1]]:t.stn_list.lineend.branch.left=[]},yn=(t,i)=>{let r=0;for(let n=V.get(t);n!=-1;n=N[n].next){N[n].target;const a=N[n].color;R(a)==R(i)&&r++}return r},Dt=(t,i,r)=>{if(at.has(t))return[];at.add(t);const n=[];for(let a=V.get(t);a!=-1;a=N[a].next){const s=N[a].target,o=N[a].color;s!=i&&R(o)==R(r)&&(s.startsWith("stn")?n.push(s):n.push(...Dt(s,t,r)))}return n},lt=(t,i,r,n,a,s,o)=>{if(ee.has(t)&&(!t.startsWith("misc_node_")&&o.stn_list[t]==null||t.startsWith("misc_node_")&&!rt.has(t)||o.loop))return[];if(ee.has(t)&&o.stn_list[t]!=null&&yn(t,s)-1>=2){const l=[...o.stn_list[t].parents,i];if(o.stn_list[l[1]]==null){const f=l[0];l[0]=l[1],l[1]=f}o.stn_list[t].parents=structuredClone(l).reverse(),o.stn_list[t].branch.left=[ue.through,l[1]];const h=[];for(const f of o.stn_list[t].children)f!=i&&h.push(f);o.stn_list[t].children=structuredClone(h),o.stn_list[t].branch.right=[];const g=[];for(const f of o.stn_list.lineend.parents)f!=t&&g.push(f);return o.stn_list.lineend.parents=structuredClone(g).reverse(),o.stn_list.lineend.parents.length==2?o.stn_list.lineend.branch.left=[ue.through,g[1]]:o.stn_list.lineend.branch.left=[],h.length==0&&(o.stn_list[t].children=["lineend"],zt(o,t)),[t]}ee.add(t);const c=[],u=[],p=[],d=new Set,m=new Set;for(let l=V.get(t);l!=-1;l=N[l].next){const h=N[l].target,g=N[l].color;if(h!=r){if(R(g)==R(s)){if(m.has(h))continue;if(m.add(h),t.startsWith("misc_node_")){const f=lt(h,i,t,n+1,a,s,o);f.length!=0&&c.push(...f)}else{const f=lt(h,t,t,n+1,a,s,o);f.length!=0&&c.push(...f)}}if(!d.has(R(g))&&R(g)!=R(s)){d.add(R(g));const f={theme:g,name:[g[1],g[1]]};p.push(f)}}}if(c.length==2){for(let l=0;l<2;l++)c[l]=="lineend"&&c.splice(l,1);if(o.stn_list[c[1]].parents.length>=2){const l=c[0];c[0]=c[1],c[1]=l}}if(ee.has(t)&&o.stn_list[t]!=null){const l=[];for(const h of o.stn_list.lineend.parents)h!=t&&l.push(h);o.stn_list.lineend.parents=structuredClone(l).reverse(),o.stn_list.lineend.parents.length==2?o.stn_list.lineend.branch.left=[ue.through,l[1]]:o.stn_list.lineend.branch.left=[],c.length==0&&(at.clear(),u.push(...Dt(t,i,s)))}if(t.startsWith("misc_node_"))return rt.add(t),c;{const l=a.getNodeAttributes(t).type,h=a.getNodeAttributes(t)[l];if(o.stn_list[t]=structuredClone(xn),o.stn_list[t].name=[h.names[0],h.names[1]],o.stn_list[t].num=String(n),a.getNodeAttributes(t).type==E.GzmtrBasic){const g=h;o.stn_list[t].num=g.stationCode,o.stn_list[t].secondaryName=g.secondaryNames}if(a.getNodeAttributes(t).type==E.GzmtrInt){const g=h,f=g.transfer[0];for(const S of f)if(R(S)==R(s)){o.stn_list[t].num=String(S[5]);break}o.stn_list[t].secondaryName=g.secondaryNames}return c.length!=0?(o.stn_list[t].children=structuredClone(c).reverse(),c.length==2&&(o.stn_list[t].branch.right=[ue.through,c[1]])):(o.stn_list[t].children=["lineend"],zt(o,t)),u.push(i),o.stn_list[t].parents=structuredClone(u).reverse(),u.length==2&&(o.stn_list[t].branch.left=[ue.through,u[1]]),p.length!=0&&(o.stn_list[t].transfer.groups[0].lines=structuredClone(p)),[t]}},wn=(t,i,r,n)=>{const a=structuredClone(Gt);n=="LOOP"&&(a.loop=!0);let s;switch(t.getNodeAttributes(r).type){case E.GzmtrBasic:case E.GzmtrInt:s=oe.GZMTR;break;case E.MTR:s=oe.MTR;break;default:s=oe.SHMetro;break}a.theme=structuredClone(i),a.style=s,a.stn_list.linestart=structuredClone(gn),a.stn_list.lineend=structuredClone(fn),ee.clear(),rt.clear();const o=lt(r,"linestart","linestart",1,t,i,a);if(a.current_stn_idx=o[0],a.stn_list.linestart.children=[o[0]],!(Object.keys(a.stn_list).length<=3||a.stn_list.lineend.parents.length>=3))return structuredClone(a)},Cn=t=>{ee.clear(),ot.clear(),it.clear(),Be.clear(),V.clear(),N=[],_e=0,Ge.clear(),et.clear(),t.filterEdges(n=>n.startsWith("line")).forEach(n=>{$t(t.getEdgeAttributes(n).style)&&bn(t,n)});let i=0;t.forEachNode(n=>{et.set(n,++i)}),et.set("lineend",++i);const r=[];for(const n of ot){ee.clear(),Ge.clear(),Lt(Be.get(n),"line_root",n);let a=!0,s="LINE";const o=[];for(const[u,p]of Ge)p==1&&o.push(u),p==3&&(s="BRANCH"),p>3&&(a=!1);if(!a)continue;o.length==0&&(s="LOOP",o.push(Be.get(n)));const c=[];for(const u of o){const p=wn(t,n,u,s);p!=null&&c.push([p,p.stn_list[p.current_stn_idx].name[0],p.stn_list[p.current_stn_idx].name[1]])}c.length!=0&&r.push({theme:n,param:structuredClone(c),type:s})}return r},Sn=t=>t[0]!=""&&t[1]!=""?t[0]+"_"+t[1]:t[0]!=""?t[0]:t[1]!=""?t[1]:`${new Date().valueOf()}`,vn=(t,i,r)=>{t.line_name=i,t.line_num=String(r),console.log(t),nt(`RMG_${Sn(i)}.json`,"application/json",JSON.stringify(t))},zn={LINE:"#33ccff",BRANCH:"#007B61",LOOP:"#ff6666"},kn=t=>{const{isOpen:i,onClose:r}=t,{t:n}=W(),a=j.useRef(window.graph),[s,o]=j.useState(!1),[c,u]=j.useState([[Gt,"",""]]),[p,d]=j.useState(["","",""]),[m,l]=j.useState([]);return j.useEffect(()=>{i&&l(Cn(a.current))},[i]),e.jsxs(U,{isOpen:i,onClose:r,size:"2xl",scrollBehavior:"inside",children:[e.jsx(J,{}),e.jsxs(K,{children:[e.jsx(Y,{children:e.jsx(y,{as:"b",fontSize:"xl",children:n("header.download.2rmg.title")})}),e.jsx(Z,{}),e.jsxs(q,{children:[e.jsx(y,{fontSize:"sm",mt:"3",lineHeight:"100%",children:n("header.download.2rmg.info1")}),e.jsx(y,{fontSize:"sm",mt:"3",lineHeight:"100%",children:n("header.download.2rmg.info2")}),e.jsx("br",{}),m.length===0?e.jsx(y,{fontSize:"md",children:n("header.download.2rmg.noline")}):e.jsx("table",{children:m.map(({theme:h,param:g,type:f})=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(bt,{name:h[0]=="other"&&h[1]=="other"?h[2]:h[1],bg:h[2],fg:h[3]})}),e.jsx("td",{children:e.jsx(Ue,{placeholder:n("header.download.2rmg.placeholder.chinese"),id:"nameCh_"+JSON.stringify(h),size:"sm"})}),e.jsx("td",{children:e.jsx(Ue,{placeholder:n("header.download.2rmg.placeholder.english"),id:"nameEn_"+JSON.stringify(h),size:"sm"})}),e.jsx("td",{children:e.jsx(Ue,{placeholder:n("header.download.2rmg.placeholder.lineCode"),id:"lineNum_"+JSON.stringify(h),size:"sm"})}),e.jsx("td",{children:e.jsx(bt,{name:n(`header.download.2rmg.type.${f.toLowerCase()}`),bg:zn[f],fg:Nt.white})}),e.jsx("td",{children:e.jsx(M,{colorScheme:"blue",variant:"ghost",mr:"1",onClick:()=>{const S=document.getElementById("nameCh_"+JSON.stringify(h)),C=document.getElementById("nameEn_"+JSON.stringify(h)),x=document.getElementById("lineNum_"+JSON.stringify(h));u(g),d([S.value.trim(),C.value.trim(),x.value.trim()]),o(!0)},size:"sm",children:e.jsx(Ht,{})})})]},JSON.stringify(h)))})]}),e.jsx(me,{children:e.jsx(M,{colorScheme:"blue",variant:"outline",mr:"1",onClick:r,children:n("close")})})]}),e.jsx(_n,{isOpen:s,onClose:()=>o(!1),param:c,nameList:p})]})},_n=t=>{const{isOpen:i,onClose:r,param:n,nameList:a}=t,{t:s}=W(),[o,c]=j.useState("");return j.useEffect(()=>{a[0]!=""&&a[1]!=""?c(a[0]+"/"+a[1]):a[0]!=""?c(a[0]):a[1]!=""&&c(a[1])},[...a]),e.jsxs(U,{isOpen:i,onClose:r,size:"md",scrollBehavior:"inside",children:[e.jsx(J,{}),e.jsxs(K,{children:[e.jsx(Y,{children:e.jsxs(y,{as:"b",fontSize:"xl",children:[s("header.download.2rmg.download")," ",o]})}),e.jsx(Z,{}),e.jsx(q,{children:e.jsxs(Vt,{children:[e.jsx(y,{fontSize:"sm",mb:"2",lineHeight:"100%",children:s("header.download.2rmg.downloadInfo")}),n.map(([u,p,d])=>e.jsxs(M,{onClick:()=>{vn(u,[a[0],a[1]],a[2])},children:[p,"/",d]},`${p}${d}`))]})}),e.jsx(me,{children:e.jsx(M,{colorScheme:"blue",variant:"outline",mr:"1",onClick:r,children:s("close")})})]})]})},On=t=>{const{isOpen:i,onClose:r}=t,{t:n}=W();return e.jsxs(U,{isOpen:i,onClose:r,size:"xl",scrollBehavior:"inside",children:[e.jsx(J,{}),e.jsxs(K,{children:[e.jsx(Y,{children:n("header.download.termsAndConditions")}),e.jsx(Z,{}),e.jsx(q,{children:e.jsxs(Ut,{children:[e.jsxs(xe,{children:["The layout of the elements on the signage or rail map, is designed by"," ",e.jsxs(v,{color:"teal.500",href:"https://www.shmetro.com/",isExternal:!0,children:["Shanghai Shentong Metro Group ",e.jsx(O,{as:z})]}),", ",e.jsxs(v,{color:"teal.500",href:"https://www.gzmtr.com/",isExternal:!0,children:["Guangzhou Metro Group ",e.jsx(O,{as:z})]})," or ",e.jsxs(v,{color:"teal.500",href:"https://www.mtr.com.hk/",isExternal:!0,children:["MTR Corporation ",e.jsx(O,{as:z})]}),", depending on your selection. You shall grant appropriate permit or license from the relevant company above before using the generated images for commercial purposes, if it is required to do so.",e.jsx("br",{}),"标志版或路线图的元素或布局，基于你所选择的风格，为",e.jsxs(v,{color:"teal.500",href:"https://www.shmetro.com/",isExternal:!0,children:["上海申通地铁集团 ",e.jsx(O,{as:z})]}),"，",e.jsxs(v,{color:"teal.500",href:"https://www.gzmtr.com/",isExternal:!0,children:["广州地铁集团公司 ",e.jsx(O,{as:z})]}),"或",e.jsxs(v,{color:"teal.500",href:"https://www.mtr.com.hk/",isExternal:!0,children:["港铁公司 ",e.jsx(O,{as:z})]}),"所设计。在产生的图像用作商业用途前，你应向相关公司取得适当之许可证或授权。"]}),e.jsxs(xe,{children:["The elements including shapes and lines on the image are drawn by"," ",e.jsxs(v,{color:"teal.500",href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",e.jsx(O,{as:z})]})," and ",e.jsxs(v,{color:"teal.500",href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",e.jsx(O,{as:z})]}),", based on the design standards or rules of the companies listed above. You may use them for any purposes, but it is recommended to state the name and the link of software alongside.",e.jsx("br",{}),"图像的元素，包括图形及线条，均由",e.jsxs(v,{color:"teal.500",href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",e.jsx(O,{as:z})]}),"及",e.jsxs(v,{color:"teal.500",href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",e.jsx(O,{as:z})]}),"基于上述公司设计标准或准则绘制。你可将其用于任何目的，但我们建议你于使用同时附以我们的名字以及本网站地址。"]}),e.jsxs(xe,{children:["Due to copyright, licensing and other legal restrictions, Rail Map Painter uses"," ",e.jsxs(v,{color:"teal.500",href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["GenYoMin provided by ButTaiwan ",e.jsx(O,{as:z})]}),", and Vegur instead of MTRSung and Myriad Pro respectively to display and generate MTR-style signage. You shall grant appropriate permit or license from the manufacturers before using those generated images for commercial purposes.",e.jsx("br",{}),"由于著作权及其他法律限制，铁路路线图绘制器使用由",e.jsxs(v,{color:"teal.500",href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["ButTaiwan提供的源樣明體 ",e.jsx(O,{as:z})]}),"，以及Vegur，以代替港铁样式标志牌所使用的地铁宋及Myriad Pro。在产生之图像用作商业用途前，你应向字型生产厂商取得适当之许可证或授权。"]}),e.jsxs(xe,{children:["The exported images in PNG or SVG format may be modified, published, or used for other purposes except commercial use, under the conditions above.",e.jsx("br",{}),"输出的PNG或SVG图像可基于上述条款，在非商业使用时，用于修改、发行或其他用途。"]}),e.jsxs(xe,{children:["All flag emojis shown on Windows platforms are designed by"," ",e.jsxs(v,{color:"teal.500",href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",e.jsx(O,{as:z})]})," ","– the open-source emoji and icon project. License:",e.jsxs(v,{color:"teal.500",href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",e.jsx(O,{as:z})]}),e.jsx("br",{}),"于Windows作业系统上显示的国旗Emoji为",e.jsxs(v,{color:"teal.500",href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",e.jsx(O,{as:z})]}),"所设计。许可证：",e.jsxs(v,{color:"teal.500",href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",e.jsx(O,{as:z})]})]}),e.jsxs(xe,{children:["We reserve the rights, without prior notice, to modify, add, or remove these terms. The Chinese translation is for reference only. In case of any discrepancy between the English version and the Chinese version, the English version shall prevail.",e.jsx("br",{}),"我们保留修改、新增或移除上述条款之权利，而无需另行通知。中文译本仅供参考，文义如与英文有歧异，概以英文本为准。"]})]})})]})]})},An=On;function En(){const{t}=W(),{telemetry:{project:i}}=le(b=>b.app),r=j.useRef(window.graph),n=_t("white","gray.800"),[a,s]=j.useState("png"),o={png:t("header.download.png"),svg:t("header.download.svg")},[c,u]=j.useState(100),p=Object.fromEntries([25,33,50,67,75,80,90,100,110,125,150,175,200,250,300,400,500].map(b=>[b,`${b}%`])),[d,m]=j.useState(!1),l=[{type:"select",label:t("header.download.format"),value:a,options:o,onChange:b=>s(b==="png"?"png":"svg")}],h=[{type:"select",label:t("header.download.scale"),value:c,options:p,onChange:b=>u(b)},{type:"switch",label:t("header.download.transparent"),isChecked:d,onChange:m}],[g,f]=j.useState(!1),[S,C]=j.useState(!1),[x,T]=j.useState(!1),[P,k]=j.useState(!1),[w,G]=j.useState(!1),ce=()=>{i&&L.event(st.DOWNLOAD_PARAM,{"#nodes":r.current.order,"#edges":r.current.size});const b=js(bs.getState().param);nt(`RMP_${new Date().valueOf()}.json`,"application/json",b)},$=async()=>{f(!1),i&&L.event(st.DOWNLOAD_IMAGES,{numberOfNodes:r.current.order,numberOfEdges:r.current.size});const{xMin:b,yMin:te,xMax:Ae,yMax:Ee}=Ls(r.current),[we,A]=[Ae-b,Ee-te],D=document.getElementById("canvas").cloneNode(!0);[...D.children].filter(F=>r.current.hasNode(F.id)&&r.current.getNodeAttribute(F.id,"type")===ys.Virtual).forEach(F=>D.removeChild(F)),x||D.appendChild(Tn(Ae-400,Ee-60)),D.setAttribute("viewBox",`${b} ${te} ${we} ${A}`),D.setAttribute("width",we.toString()),D.setAttribute("height",A.toString()),Object.entries({".rmp-name__zh":["font-family"],".rmp-name__en":["font-family"],".rmp-name__mtr__zh":["font-family"],".rmp-name__mtr__en":["font-family"],".rmp-name__berlin":["font-family"],".rmp-name-station":["paint-order","stroke","stroke-width"]}).forEach(([F,Ce])=>{const Me=document.querySelector(F);if(Me===null)return;const Ve=window.getComputedStyle(Me);D.querySelectorAll(F).forEach(Ne=>{Ce.forEach(Se=>{Ne.setAttribute(Se,Ve.getPropertyValue(Se))}),Ne.classList.remove(F)})});const Ft=Ds(r.current);for(const F in wt)if(Ft[F])try{const{className:Ce,cssFont:Me,cssName:Ve}=wt[F],Ne=await Fs(D,Ce,Me,Ve),Se=document.createElement("style");Se.textContent=Ne.join(`
`),D.prepend(Se)}catch(Ce){alert("Failed to load fonts. Fonts in the exported PNG will be missing."),console.error(Ce)}if(a==="svg"){nt(`RMP_${new Date().valueOf()}.svg`,"image/svg+xml",D.outerHTML);return}document.body.appendChild(D);const Wt="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(D.outerHTML)));document.body.removeChild(D);const Te=document.createElement("canvas"),[De,Fe]=[we*c/100,A*c/100];Te.width=De,Te.height=Fe;const We=Te.getContext("2d");d||(We.fillStyle=n,We.fillRect(0,0,De,Fe));const Pe=new Image;Pe.onload=()=>{We.drawImage(Pe,0,0,De,Fe),Te.toBlob(F=>Bt(`RMP_${new Date().valueOf()}.png`,F),"image/png")},Pe.src=Wt};return e.jsxs(ct,{id:"download",children:[e.jsx(dt,{as:ne,size:"sm",variant:"ghost",icon:e.jsx(Ht,{})}),e.jsxs(ht,{children:[e.jsx(re,{icon:e.jsx(fs,{}),onClick:ce,children:t("header.download.config")}),e.jsxs(re,{icon:e.jsx(ms,{}),onClick:()=>G(!0),children:[t("header.download.2rmg.title"),e.jsx($e,{ml:"1",colorScheme:"green",children:"New"})]}),e.jsx(re,{icon:e.jsx(xs,{}),onClick:()=>f(!0),children:t("header.download.image")})]}),e.jsxs(U,{size:"xl",isOpen:g,onClose:()=>f(!1),children:[e.jsx(J,{}),e.jsxs(K,{children:[e.jsx(Y,{children:t("header.download.image")}),e.jsx(Z,{}),e.jsxs(q,{children:[e.jsx(ye,{fields:l}),a==="png"&&e.jsx(ye,{fields:h}),e.jsx("br",{}),e.jsx(ut,{isChecked:x,onChange:b=>T(b.target.checked),children:e.jsxs(y,{children:[t("header.download.shareInfo1"),e.jsxs(v,{color:"teal.500",onClick:()=>window.open("https://railmapgen.github.io/rmp","_blank"),children:[t("header.about.rmp")," ",e.jsx(O,{as:z})]}),t("header.download.shareInfo2")]})}),e.jsx(ut,{isChecked:P,onChange:b=>k(b.target.checked),children:e.jsxs(y,{children:[t("header.download.termsAndConditionsInfo"),e.jsxs(v,{color:"teal.500",onClick:()=>C(!0),children:[t("header.download.termsAndConditions")," ",e.jsx(O,{as:z})]}),t("header.download.period")]})})]}),e.jsx(me,{children:e.jsx(Jt,{children:e.jsx(M,{colorScheme:"teal",variant:"outline",size:"sm",disabled:!P,onClick:$,children:t("header.download.confirm")})})}),e.jsx(An,{isOpen:S,onClose:()=>C(!1)})]})]}),e.jsx(kn,{isOpen:w,onClose:()=>G(!1)})]})}const Tn=(t,i)=>{const r=document.createElementNS("http://www.w3.org/2000/svg","g");r.setAttribute("transform",`translate(${t}, ${i})scale(2)`);const n=document.createElementNS("http://www.w3.org/2000/svg","image");n.setAttribute("width","40"),n.setAttribute("height","40"),n.setAttribute("x","-50"),n.setAttribute("y","-20");const a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("font-family","Arial, sans-serif"),a.setAttribute("font-size","16"),a.appendChild(document.createTextNode("Rail Map Painter"));const s=document.createElementNS("http://www.w3.org/2000/svg","text");return s.setAttribute("font-family","Arial, sans-serif"),s.setAttribute("font-size","10"),s.setAttribute("y","10"),s.appendChild(document.createTextNode("https://railmapgen.github.io/rmp/")),r.appendChild(n),r.appendChild(a),r.appendChild(s),r},Mn="/rmp/assets/github-mark-7a0dd11e.svg",Nn="/rmp/assets/slack-mark-19839006.svg",Hn=t=>{const{isOpen:i,onClose:r}=t,{t:n}=W(),a=L.getAppVersion(),[s,o]=j.useState(!1);return e.jsxs(U,{isOpen:i,onClose:r,size:"xl",scrollBehavior:"inside",children:[e.jsx(J,{}),e.jsxs(K,{children:[e.jsx(Y,{children:n("header.about.title")}),e.jsx(Z,{}),e.jsxs(q,{paddingBottom:10,children:[e.jsxs(gt,{direction:"row",children:[e.jsx(ft,{boxSize:"128px",src:"/rmp//logo192.png"}),e.jsxs(gt,{direction:"column",width:"100%",alignItems:"center",justifyContent:"center",children:[e.jsx(y,{fontSize:"xl",as:"b",children:n("header.about.rmp")}),e.jsx(y,{children:a}),e.jsx(y,{}),e.jsx(y,{fontSize:"sm",children:n("header.about.railmapgen")})]})]}),e.jsx(I,{margin:5,children:e.jsx(y,{fontSize:"xl",children:n("header.about.desc")})}),e.jsx(be,{as:"h5",size:"sm",mt:3,mb:2,children:n("header.about.contributors")}),e.jsx(be,{as:"h6",size:"xs",my:2,children:n("header.about.coreContributors")}),e.jsxs(ze,{children:[e.jsxs(de,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/thekingofcity","_blank"),cursor:"pointer",children:[e.jsx(he,{src:"https://github.com/thekingofcity.png",size:"lg",my:2,ml:-1,mr:2}),e.jsxs(pe,{display:"block",width:"100%",children:[e.jsx(y,{fontSize:"lg",fontWeight:"bold",mb:1,children:"thekingofcity"}),e.jsx(y,{fontSize:"sm",children:n("header.about.content1")}),e.jsx(y,{fontSize:"sm",align:"right",mb:1,children:n("header.about.content2")})]})]}),e.jsxs(de,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/langonginc","_blank"),cursor:"pointer",children:[e.jsx(he,{src:"https://github.com/langonginc.png",size:"lg",my:2,ml:-1,mr:2}),e.jsxs(pe,{display:"block",width:"100%",children:[e.jsx(y,{fontSize:"lg",fontWeight:"bold",mb:1,children:"langonginc"}),e.jsx(y,{fontSize:"sm",children:n("header.about.langonginc")}),e.jsx(y,{fontSize:"sm",align:"right",mb:1,children:"--Avicii"})]})]})]}),e.jsx(be,{as:"h6",size:"xs",my:2,children:n("header.about.styleContributors")}),e.jsxs(ze,{children:[e.jsxs(de,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/203IhzElttil","_blank"),cursor:"pointer",children:[e.jsx(he,{src:"https://github.com/203IhzElttil.png",size:"lg",my:2,ml:-1,mr:2}),e.jsxs(pe,{display:"block",width:"100%",children:[e.jsx(y,{fontSize:"lg",fontWeight:"bold",mb:1,children:"203IhzElttil"}),e.jsx(y,{fontSize:"sm",mb:1,children:n("header.about.203IhzElttil")})]})]}),e.jsxs(de,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/52PD","_blank"),cursor:"pointer",children:[e.jsx(he,{src:"https://github.com/52PD.png",size:"lg",my:2,ml:-1,mr:2}),e.jsxs(pe,{display:"block",width:"100%",children:[e.jsx(y,{fontSize:"lg",fontWeight:"bold",mb:1,children:"52PD"}),e.jsx(y,{fontSize:"sm",mb:1,children:n("header.about.52PD")})]})]})]}),e.jsx(be,{as:"h5",size:"sm",mt:3,mb:2,children:n("header.about.contactUs")}),e.jsxs(ze,{children:[e.jsxs(de,{size:"lg",w:"85%",onClick:()=>window.open("https://github.com/railmapgen/rmp/issues","_blank"),cursor:"pointer",children:[e.jsx(he,{src:Mn,size:"lg",my:2,ml:-1,mr:2}),e.jsxs(pe,{display:"block",width:"100%",children:[e.jsx(y,{fontSize:"lg",fontWeight:"bold",mb:1,children:n("header.about.github")}),e.jsx(y,{fontSize:"sm",children:n("header.about.githubContent")})]})]}),e.jsxs(de,{size:"lg",w:"85%",onClick:()=>window.open("https://join.slack.com/t/railmapgenerator/shared_invite/zt-1odhhta3n-DdZF~fnVwo_q0S0RJmgV8A","_blank"),cursor:"pointer",children:[e.jsx(he,{src:Nn,size:"lg",my:2,ml:-1,mr:2}),e.jsxs(pe,{display:"block",width:"100%",children:[e.jsx(y,{fontSize:"lg",fontWeight:"bold",mb:1,children:n("header.about.slack")}),e.jsx(y,{fontSize:"sm",children:n("header.about.slackContent")}),e.jsx(y,{fontSize:"sm",as:"i",children:"#rmp, #gallery, #rmg, #palette-and-templates"})]})]})]}),e.jsx(be,{as:"h5",size:"sm",mt:3,mb:2,children:n("header.about.linkExchange")}),e.jsxs(ze,{children:[e.jsxs(de,{size:"lg",w:"85%",onClick:()=>o(!0),cursor:"pointer",children:[e.jsx(he,{src:"/rmp//images/guidaoTransit.jpg",size:"lg",my:2,ml:-1,mr:2}),e.jsxs(pe,{display:"block",width:"100%",children:[e.jsx(y,{fontSize:"lg",fontWeight:"bold",mb:1,children:n("header.about.guidaoTransit")}),e.jsx(y,{fontSize:"sm",children:n("header.about.guidaoTransitContent")})]})]}),e.jsxs(U,{size:"6xl",isOpen:s,onClose:()=>o(!1),children:[e.jsx(J,{}),e.jsxs(K,{children:[e.jsx(Y,{children:n("header.about.guidaoTransit")}),e.jsx(Z,{}),e.jsx(q,{paddingBottom:10,children:e.jsx(ft,{width:"1080",height:"304",src:"/rmp//images/guidaoTransitQRCode.png"})})]})]})]})]})]})]})},Rn=Hn,In=()=>{const[t,i]=j.useState(!1),{svgViewBoxZoom:r}=le(s=>s.param),n=Q(),a=[{type:"slider",label:"",value:400-r,min:10,max:390,step:1,onChange:s=>n(Mt(400-s)),leftIcon:e.jsx(ws,{}),rightIcon:e.jsx(yt,{}),minW:160}];return e.jsxs(Kt,{isOpen:t,onOpen:()=>i(!0),onClose:()=>i(!1),children:[e.jsx(Yt,{children:e.jsx(ne,{"aria-label":"zoom",variant:"ghost",size:"sm",icon:e.jsx(yt,{}),onClick:()=>i(!t)})}),e.jsx(Zt,{children:e.jsx(qt,{children:e.jsx(ye,{fields:a,noLabel:!0})})})]})},Bn=t=>{const{isOpen:i,onClose:r}=t,n=Q(),{t:a}=W(),s=j.useRef(window.graph),[o,c]=j.useState(0),[u,p]=j.useState(0),d=[{type:"input",label:a("header.settings.procedures.translate.x"),value:o.toString(),variant:"number",onChange:l=>c(Number(l)),minW:"full"},{type:"input",label:a("header.settings.procedures.translate.y"),value:u.toString(),variant:"number",onChange:l=>p(Number(l)),minW:"full"}],m=()=>{s.current.forEachNode((l,h)=>{s.current.updateNodeAttribute(l,"x",g=>(g!=null?g:0)+o),s.current.updateNodeAttribute(l,"y",g=>(g!=null?g:0)+u)}),n(ge()),n(fe()),n(ae(s.current.export())),r()};return e.jsxs(U,{isOpen:i,onClose:r,size:"xl",scrollBehavior:"inside",children:[e.jsx(J,{}),e.jsxs(K,{children:[e.jsx(Y,{children:a("header.settings.procedures.translate.title")}),e.jsx(Z,{}),e.jsxs(q,{children:[a("header.settings.procedures.translate.content"),e.jsx(ye,{fields:d})]}),e.jsxs(me,{children:[e.jsx(M,{colorScheme:"blue",variant:"outline",mr:"1",onClick:r,children:a("cancel")}),e.jsx(M,{colorScheme:"red",onClick:m,children:a("apply")})]})]})]})},Gn=t=>{const{isOpen:i,onClose:r}=t,n=Q(),{t:a}=W(),s=j.useRef(window.graph),[o,c]=j.useState(1),u=[{type:"input",label:a("header.settings.procedures.scale.factor"),value:o.toString(),variant:"number",onChange:d=>c(Number(d)),minW:"full"}],p=()=>{s.current.forEachNode((d,m)=>{s.current.updateNodeAttribute(d,"x",l=>(l!=null?l:0)*o),s.current.updateNodeAttribute(d,"y",l=>(l!=null?l:0)*o)}),n(ge()),n(fe()),n(ae(s.current.export())),r()};return e.jsxs(U,{isOpen:i,onClose:r,size:"xl",scrollBehavior:"inside",children:[e.jsx(J,{}),e.jsxs(K,{children:[e.jsx(Y,{children:a("header.settings.procedures.scale.title")}),e.jsx(Z,{}),e.jsxs(q,{children:[a("header.settings.procedures.scale.content"),e.jsx(ye,{fields:u})]}),e.jsxs(me,{children:[e.jsx(M,{colorScheme:"blue",variant:"outline",mr:"1",onClick:r,children:a("cancel")}),e.jsx(M,{colorScheme:"red",onClick:p,children:a("apply")})]})]})]})},$n=t=>{const{isOpen:i,onClose:r}=t,n=Q(),{t:a}=W(),s=j.useRef(window.graph),o=Object.fromEntries(Object.entries(Ie).map(([h,g])=>[h,a(g.metadata.displayName).toString()])),[c,u]=j.useState(Object.keys(Ie).at(0)),[p,d]=j.useState(Object.keys(Ie).at(1)),m=[{type:"select",label:a("header.settings.procedures.changeType.changeFrom"),value:c,options:o,disabledOptions:[p],onChange:h=>u(h),minW:"full"},{type:"select",label:a("header.settings.procedures.changeType.changeTo"),value:p,options:o,disabledOptions:[c],onChange:h=>d(h),minW:"full"}],l=()=>{Ws(s.current,c,p),n(ge()),n(ae(s.current.export())),r()};return e.jsxs(U,{isOpen:i,onClose:r,size:"xl",scrollBehavior:"inside",children:[e.jsx(J,{}),e.jsxs(K,{children:[e.jsxs(Y,{children:[e.jsx(y,{as:"b",fontSize:"xl",children:a("header.settings.procedures.changeType.title")}),e.jsx(Ot,{label:a("header.settings.pro"),children:e.jsx($e,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",children:"PRO"})})]}),e.jsx(Z,{}),e.jsxs(q,{children:[e.jsx(ye,{fields:m}),e.jsx(y,{fontSize:"sm",mt:"3",lineHeight:"100%",color:"red.500",children:a("header.settings.procedures.changeType.info")})]}),e.jsxs(me,{children:[e.jsx(M,{colorScheme:"blue",variant:"outline",mr:"1",onClick:r,children:a("cancel")}),e.jsx(M,{colorScheme:"red",onClick:l,children:a("apply")})]})]})]})},Ln=t=>{const{isOpen:i,onClose:r}=t,n=Q(),{theme:a}=le(l=>l.runtime),{t:s}=W(),o=j.useRef(window.graph),[c,u]=j.useState(a),[p,d]=j.useState(!1),m=()=>{o.current.filterEdges((l,h,g,f,S,C,x)=>h.style===ie.SingleColor&&JSON.stringify(h[ie.SingleColor].color)===JSON.stringify(c)).forEach(l=>o.current.dropEdge(l)),n(fe()),n(ae(o.current.export())),r()};return e.jsxs(U,{isOpen:i,onClose:r,size:"xl",scrollBehavior:"inside",children:[e.jsx(J,{}),e.jsxs(K,{children:[e.jsx(Y,{children:s("header.settings.procedures.removeLines.title")}),e.jsx(Z,{}),e.jsxs(q,{children:[s("header.settings.procedures.removeLines.content"),e.jsx(Cs,{theme:c,onClick:()=>d(!0)}),e.jsx(Ss,{isOpen:p,defaultTheme:c,onClose:()=>d(!1),onUpdate:l=>u(l)})]}),e.jsxs(me,{children:[e.jsx(M,{colorScheme:"blue",variant:"outline",mr:"1",onClick:r,children:s("cancel")}),e.jsx(M,{colorScheme:"red",onClick:m,children:s("remove")})]})]})]})},Re={width:"100%",justifyContent:"space-between"},je={fontFamily:"-apple-system"},Dn=t=>{const{isOpen:i,onClose:r}=t,{keepLastPath:n}=le(x=>x.runtime),a=Q(),{t:s}=W(),o=_t("primary.500","primary.300"),[c,u]=j.useState(!1),[p,d]=j.useState(!1),[m,l]=j.useState(!1),[h,g]=j.useState(!1),f=L.isAllowAnalytics(),{telemetry:{app:S}}=le(x=>x.app),C=x=>a(As(x));return e.jsxs(U,{isOpen:i,onClose:r,size:"xl",scrollBehavior:"inside",children:[e.jsx(J,{}),e.jsxs(K,{children:[e.jsx(Y,{children:s("header.settings.title")}),e.jsx(Z,{}),e.jsx(q,{children:e.jsxs(ze,{divider:e.jsx(Qt,{borderColor:"gray.200"}),children:[e.jsxs(I,{width:"100%",mb:"3",children:[e.jsx(y,{as:"b",fontSize:"xl",children:s("header.settings.preference.title")}),e.jsx(I,{mt:"3",children:e.jsxs(I,{display:"flex",mb:"1",children:[e.jsx(y,{flex:"1",children:s("header.settings.preference.keepLastPath")}),e.jsx(Je,{isChecked:n,onChange:({target:{checked:x}})=>a(vs(x))})]})})]}),e.jsxs(I,{width:"100%",mb:"3",children:[e.jsx(y,{as:"b",fontSize:"xl",children:s("header.settings.procedures.title")}),e.jsxs(I,{mt:"3",children:[e.jsx(M,{sx:Re,rightIcon:e.jsx(He,{}),onClick:()=>u(!0),children:s("header.settings.procedures.translate.title")}),e.jsx(Bn,{isOpen:c,onClose:()=>u(!1)}),e.jsx(M,{sx:Re,rightIcon:e.jsx(He,{}),onClick:()=>d(!0),children:s("header.settings.procedures.scale.title")}),e.jsx(Gn,{isOpen:p,onClose:()=>d(!1)}),e.jsx(M,{sx:Re,rightIcon:e.jsx(He,{}),onClick:()=>l(!0),children:e.jsxs(I,{children:[s("header.settings.procedures.changeType.title"),e.jsx(Ot,{label:s("header.settings.pro"),children:e.jsx($e,{ml:"1",color:"gray.50",background:"radial-gradient(circle, #3f5efb, #fc466b)",children:"PRO"})})]})}),e.jsx($n,{isOpen:m,onClose:()=>l(!1)}),e.jsx(M,{sx:Re,rightIcon:e.jsx(He,{}),onClick:()=>g(!0),children:s("header.settings.procedures.removeLines.title")}),e.jsx(Ln,{isOpen:h,onClose:()=>g(!1)})]})]}),e.jsxs(I,{width:"100%",mb:"3",children:[e.jsx(y,{as:"b",fontSize:"xl",children:s("header.settings.shortcuts.title")}),e.jsx(I,{mt:"3",children:e.jsxs(Xt,{children:[e.jsx(es,{children:e.jsxs(X,{children:[e.jsx(mt,{children:s("header.settings.shortcuts.keys")}),e.jsx(mt,{children:s("header.settings.shortcuts.description")})]})}),e.jsxs(ts,{children:[e.jsxs(X,{children:[e.jsx(H,{children:e.jsx(_,{children:"f"})}),e.jsx(H,{children:s("header.settings.shortcuts.f")})]}),e.jsxs(X,{children:[e.jsx(H,{children:e.jsxs(I,{display:"flex",flexDirection:"row",children:[e.jsx(zs,{}),e.jsx(ks,{}),e.jsx(_s,{}),e.jsx(Os,{})]})}),e.jsx(H,{children:s("header.settings.shortcuts.arrows")})]}),e.jsxs(X,{children:[e.jsx(H,{children:e.jsxs(I,{display:"flex",flexDirection:"row",children:[e.jsx(_,{children:"i"}),e.jsx(_,{children:"j"}),e.jsx(_,{children:"k"}),e.jsx(_,{children:"l"})]})}),e.jsx(H,{children:s("header.settings.shortcuts.ijkl")})]}),e.jsxs(X,{children:[e.jsx(H,{children:ve?e.jsx(_,{sx:je,children:"⇧"}):e.jsx(_,{children:"shift"})}),e.jsx(H,{children:s("header.settings.shortcuts.shift")})]}),e.jsxs(X,{children:[e.jsx(H,{children:ve?e.jsx(_,{sx:je,children:"⌥"}):e.jsx(_,{children:"alt"})}),e.jsx(H,{children:s("header.settings.shortcuts.alt")})]}),e.jsxs(X,{children:[e.jsx(H,{children:ve?e.jsx(_,{sx:je,children:"⌫"}):e.jsx(_,{children:"delete"})}),e.jsx(H,{children:s("header.settings.shortcuts.delete")})]}),e.jsxs(X,{children:[e.jsxs(H,{children:[ve?e.jsx(_,{sx:je,children:"⌘"}):e.jsx(_,{children:"ctrl"})," + ",e.jsx(_,{children:"z"})]}),e.jsx(H,{children:s("header.settings.shortcuts.undo")})]}),e.jsxs(X,{children:[e.jsx(H,{children:ve?e.jsxs(e.Fragment,{children:[e.jsx(_,{sx:je,children:"⇧"})," + ",e.jsx(_,{sx:je,children:"⌘"})," + ",e.jsx(_,{children:"z"})]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{children:"ctrl"})," + ",e.jsx(_,{children:"y"})]})}),e.jsx(H,{children:s("header.settings.shortcuts.redo")})]})]})]})})]}),e.jsxs(I,{width:"100%",mb:"3",children:[e.jsx(y,{as:"b",fontSize:"xl",children:s("header.settings.telemetry.title")}),e.jsxs(I,{mt:"3",children:[e.jsxs(I,{display:"flex",mb:"1",children:[e.jsx(y,{flex:"1",children:s("header.settings.telemetry.essential")}),e.jsx(Je,{isChecked:f,isDisabled:!0})]}),e.jsx(y,{fontSize:"sm",lineHeight:"100%",color:"gray.600",children:s("header.settings.telemetry.essentialInfo")}),e.jsxs(v,{color:o,fontSize:"sm",lineHeight:"100%",href:"https://support.google.com/analytics/answer/11593727",isExternal:!0,children:[s("header.settings.telemetry.essentialLink")," ",e.jsx(O,{as:z})]}),e.jsxs(I,{display:"flex",mb:"1",children:[e.jsx(y,{flex:"1",children:s("header.settings.telemetry.additional")}),e.jsx(Je,{isChecked:S,onChange:({target:{checked:x}})=>C(x)})]}),e.jsx(y,{fontSize:"sm",lineHeight:"100%",color:"gray.600",children:s("header.settings.telemetry.additionalInfo")})]})]})]})})]})]})},Fn=Dn;function Wn(){const{t}=W(),i=Q(),{telemetry:{app:r}}=le(l=>l.app),{past:n,future:a}=le(l=>l.param),[s,o]=j.useState(!1),[c,u]=j.useState(!1),p=vt(L.getEnv),d=vt(L.getAppVersion);j.useEffect(()=>{r&&p!==qe.DEV&&L.event(st.APP_LOAD,{isStandaloneWindow:L.isStandaloneWindow()})},[p]);const m=async l=>{L.getI18nInstance().changeLanguage(l)};return e.jsxs(Es,{children:[e.jsx(be,{as:"h4",size:"md",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:t("header.about.rmp")}),e.jsx(Ts,{environment:p,version:d,popoverHeader:p===qe.PRD?void 0:e.jsxs(St,{i18nKey:"header.popoverHeader",environment:p,children:["You're on ",{environment:p}," environment!"]}),popoverBody:p===qe.PRD?void 0:e.jsx(St,{i18nKey:"header.popoverBody",children:"This is a testing environment where we test the latest beta RMP."})}),e.jsxs(ss,{ml:"auto",children:[e.jsx(se,{children:e.jsx(ne,{size:"sm",variant:"ghost","aria-label":"Undo",icon:e.jsx(Ms,{}),disabled:n.length===0,onClick:()=>i(Ns())})}),e.jsx(se,{children:e.jsx(ne,{size:"sm",variant:"ghost","aria-label":"Redo",icon:e.jsx(Hs,{}),disabled:a.length===0,onClick:()=>i(Rs())})}),e.jsx(se,{children:e.jsx(In,{})}),e.jsx(se,{children:e.jsx(pn,{})}),e.jsx(se,{children:e.jsx(En,{})}),L.isStandaloneWindow()&&e.jsx(se,{children:e.jsxs(ct,{children:[e.jsx(dt,{as:ne,icon:e.jsx(Is,{}),variant:"ghost",size:"sm"}),e.jsx(ht,{children:["en","zh-Hans","zh-Hant","ja","ko"].map(l=>e.jsx(re,{onClick:()=>m(l),children:tn[l][l]},l))})]})}),e.jsx(se,{children:e.jsx(ne,{size:"sm",variant:"ghost","aria-label":"Settings",icon:e.jsx(Bs,{}),onClick:()=>o(!0)})}),e.jsx(se,{children:e.jsx(ne,{size:"sm",variant:"ghost","aria-label":"Help",icon:e.jsx(Gs,{}),onClick:()=>u(!0)})})]}),e.jsx(Fn,{isOpen:s,onClose:()=>o(!1)}),e.jsx(Rn,{isOpen:c,onClose:()=>u(!1)})]})}function Pn(){const t=Q(),i=le(n=>n.runtime.globalAlerts),r=n=>{L.isStandaloneWindow()?window.open(`/${n}`,"_blank"):L.openApp(n)};return e.jsx(e.Fragment,{children:Object.entries(i).map(([n,{message:a,url:s,linkedApp:o}])=>e.jsxs(ns,{status:n,variant:"solid",size:"xs",pl:3,pr:1,py:0,zIndex:"1",children:[e.jsx(rs,{}),o?e.jsx(v,{onClick:()=>r(o),children:a}):s?e.jsx(v,{href:s,target:"_blank",children:a}):a,e.jsx(kt,{ml:"auto",onClick:()=>t($s(n))})]},n))})}function qn(){return e.jsxs(e.Fragment,{children:[e.jsx(Wn,{}),e.jsx(Pn,{})]})}export{qn as default};
