import{_ as un,l as H,r as k,m as B,o as cn,p as b,V as Ut,j as d,I as ln,H as pe,T as J,B as qe,q as fn,s as pn,t as gn,v as hn,f as z,w as ae,x as dn,y as mn,z as vn,A as De,M as yn,D as bn,E as Le,F as On,G as pt,J as Qe,K as Xe,L as Ze,N as et,O as wn,Q as tt,S as nt,U as rt,W as Y,X as xn,Y as Sn,Z as Vt,$ as Pn,a0 as se,a1 as I,a2 as M,a3 as ke,a4 as Ce,a5 as ue,e as Ve,a6 as jn,a7 as kn,a8 as Cn,a9 as Rn,aa as Nn}from"./vendor-5a68c8dd.js";import{F as En,u as at,a as Kt,s as Ln,b as fe,c as Tn,E as be,o as An,d as In,t as Wt,g as Mn,m as gt,e as Dn}from"./index-69ac06e1.js";function it(t,n){if(t==null)return{};var r=un(t,n),a,e;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(e=0;e<i.length;e++)a=i[e],!(n.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,a)||(r[a]=t[a]))}return r}var zn={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Fn=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function ht(t){var n={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},r=t.match(/<\/?([^\s]+?)[/\s>]/);if(r&&(n.name=r[1],(zn[r[1]]||t.charAt(t.length-2)==="/")&&(n.voidElement=!0),n.name.startsWith("!--"))){var a=t.indexOf("-->");return{type:"comment",comment:a!==-1?t.slice(4,a):""}}for(var e=new RegExp(Fn),i=null;(i=e.exec(t))!==null;)if(i[0].trim())if(i[1]){var o=i[1].trim(),s=[o,""];o.indexOf("=")>-1&&(s=o.split("=")),n.attrs[s[0]]=s[1],e.lastIndex--}else i[2]&&(n.attrs[i[2]]=i[3].trim().substring(1,i[3].length-1));return n}var Hn=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,_n=/^\s*$/,Bn=Object.create(null);function Gt(t,n){switch(n.type){case"text":return t+n.content;case"tag":return t+="<"+n.name+(n.attrs?function(r){var a=[];for(var e in r)a.push(e+'="'+r[e]+'"');return a.length?" "+a.join(" "):""}(n.attrs):"")+(n.voidElement?"/>":">"),n.voidElement?t:t+n.children.reduce(Gt,"")+"</"+n.name+">";case"comment":return t+"<!--"+n.comment+"-->"}}var $n={parse:function(t,n){n||(n={}),n.components||(n.components=Bn);var r,a=[],e=[],i=-1,o=!1;if(t.indexOf("<")!==0){var s=t.indexOf("<");a.push({type:"text",content:s===-1?t:t.substring(0,s)})}return t.replace(Hn,function(u,f){if(o){if(u!=="</"+r.name+">")return;o=!1}var l,c=u.charAt(1)!=="/",p=u.startsWith("<!--"),g=f+u.length,y=t.charAt(g);if(p){var x=ht(u);return i<0?(a.push(x),a):((l=e[i]).children.push(x),a)}if(c&&(i++,(r=ht(u)).type==="tag"&&n.components[r.name]&&(r.type="component",o=!0),r.voidElement||o||!y||y==="<"||r.children.push({type:"text",content:t.slice(g,t.indexOf("<",g))}),i===0&&a.push(r),(l=e[i-1])&&l.children.push(r),e[i]=r),(!c||r.voidElement)&&(i>-1&&(r.voidElement||r.name===u.slice(2,-1))&&(i--,r=i===-1?a:e[i]),!o&&y!=="<"&&y)){l=i===-1?a:e[i].children;var v=t.indexOf("<",g),m=t.slice(g,v===-1?void 0:v);_n.test(m)&&(m=" "),(v>-1&&i+l.length>=0||m!==" ")&&l.push({type:"text",content:m})}}),a},stringify:function(t){return t.reduce(function(n,r){return n+Gt("",r)},"")}};function Ee(){if(console&&console.warn){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];typeof r[0]=="string"&&(r[0]="react-i18next:: ".concat(r[0])),(t=console).warn.apply(t,r)}}var dt={};function Te(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];typeof n[0]=="string"&&dt[n[0]]||(typeof n[0]=="string"&&(dt[n[0]]=new Date),Ee.apply(void 0,n))}function mt(t,n,r){t.loadNamespaces(n,function(){if(t.isInitialized)r();else{var a=function e(){setTimeout(function(){t.off("initialized",e)},0),r()};t.on("initialized",a)}})}function Un(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n.languages[0],e=n.options?n.options.fallbackLng:!1,i=n.languages[n.languages.length-1];if(a.toLowerCase()==="cimode")return!0;var o=function(u,f){var l=n.services.backendConnector.state["".concat(u,"|").concat(f)];return l===-1||l===2};return r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!o(n.isLanguageChangingTo,t)?!1:!!(n.hasResourceBundle(a,t)||!n.services.backendConnector.backend||n.options.resources&&!n.options.partialBundledLanguages||o(a,t)&&(!e||o(i,t)))}function Vn(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!n.languages||!n.languages.length)return Te("i18n.languages were undefined or empty",n.languages),!0;var a=n.options.ignoreJSONStructure!==void 0;return a?n.hasLoadedNamespace(t,{precheck:function(i,o){if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!o(i.isLanguageChangingTo,t))return!1}}):Un(t,n,r)}var Kn=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Wn={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Gn=function(n){return Wn[n]},Jn=function(n){return n.replace(Kn,Gn)};function vt(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function yt(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?vt(Object(r),!0).forEach(function(a){H(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}var Ye={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Jn};function Yn(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ye=yt(yt({},Ye),t)}function Jt(){return Ye}var Yt;function qn(t){Yt=t}function ot(){return Yt}var Qn=["format"],Xn=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function bt(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function L(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?bt(Object(r),!0).forEach(function(a){H(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Ke(t,n){if(!t)return!1;var r=t.props?t.props.children:t.children;return n?r.length>0:!!r}function We(t){return t?t.props?t.props.children:t.children:[]}function Zn(t){return Object.prototype.toString.call(t)!=="[object Array]"?!1:t.every(function(n){return k.exports.isValidElement(n)})}function ye(t){return Array.isArray(t)?t:[t]}function er(t,n){var r=L({},n);return r.props=Object.assign(t.props,n.props),r}function qt(t,n){if(!t)return"";var r="",a=ye(t),e=n.transSupportBasicHtmlNodes&&n.transKeepBasicHtmlNodesFor?n.transKeepBasicHtmlNodesFor:[];return a.forEach(function(i,o){if(typeof i=="string")r+="".concat(i);else if(k.exports.isValidElement(i)){var s=Object.keys(i.props).length,u=e.indexOf(i.type)>-1,f=i.props.children;if(!f&&u&&s===0)r+="<".concat(i.type,"/>");else if(!f&&(!u||s!==0))r+="<".concat(o,"></").concat(o,">");else if(i.props.i18nIsDynamicList)r+="<".concat(o,"></").concat(o,">");else if(u&&s===1&&typeof f=="string")r+="<".concat(i.type,">").concat(f,"</").concat(i.type,">");else{var l=qt(f,n);r+="<".concat(o,">").concat(l,"</").concat(o,">")}}else if(i===null)Ee("Trans: the passed in value is invalid - seems you passed in a null child.");else if(B(i)==="object"){var c=i.format,p=it(i,Qn),g=Object.keys(p);if(g.length===1){var y=c?"".concat(g[0],", ").concat(c):g[0];r+="{{".concat(y,"}}")}else Ee("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",i)}else Ee("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",i)}),r}function tr(t,n,r,a,e,i){if(n==="")return[];var o=a.transKeepBasicHtmlNodesFor||[],s=n&&new RegExp(o.join("|")).test(n);if(!t&&!s)return[n];var u={};function f(v){var m=ye(v);m.forEach(function(h){typeof h!="string"&&(Ke(h)?f(We(h)):B(h)==="object"&&!k.exports.isValidElement(h)&&Object.assign(u,h))})}f(t);var l=$n.parse("<0>".concat(n,"</0>")),c=L(L({},u),e);function p(v,m,h){var O=We(v),S=y(O,m.children,h);return Zn(O)&&S.length===0?O:S}function g(v,m,h,O,S){v.dummy&&(v.children=m),h.push(k.exports.cloneElement(v,L(L({},v.props),{},{key:O}),S?void 0:m))}function y(v,m,h){var O=ye(v),S=ye(m);return S.reduce(function(P,w,C){var N=w.children&&w.children[0]&&w.children[0].content&&r.services.interpolator.interpolate(w.children[0].content,c,r.language);if(w.type==="tag"){var R=O[parseInt(w.name,10)];!R&&h.length===1&&h[0][w.name]&&(R=h[0][w.name]),R||(R={});var j=Object.keys(w.attrs).length!==0?er({props:w.attrs},R):R,F=k.exports.isValidElement(j),q=F&&Ke(w,!0)&&!w.voidElement,He=s&&B(j)==="object"&&j.dummy&&!F,Q=B(t)==="object"&&t!==null&&Object.hasOwnProperty.call(t,w.name);if(typeof j=="string"){var we=r.services.interpolator.interpolate(j,c,r.language);P.push(we)}else if(Ke(j)||q){var ie=p(j,w,h);g(j,ie,P,C)}else if(He){var re=y(O,w.children,h);P.push(k.exports.cloneElement(j,L(L({},j.props),{},{key:C}),re))}else if(Number.isNaN(parseFloat(w.name)))if(Q){var xe=p(j,w,h);g(j,xe,P,C,w.voidElement)}else if(a.transSupportBasicHtmlNodes&&o.indexOf(w.name)>-1)if(w.voidElement)P.push(k.exports.createElement(w.name,{key:"".concat(w.name,"-").concat(C)}));else{var he=y(O,w.children,h);P.push(k.exports.createElement(w.name,{key:"".concat(w.name,"-").concat(C)},he))}else if(w.voidElement)P.push("<".concat(w.name," />"));else{var _e=y(O,w.children,h);P.push("<".concat(w.name,">").concat(_e,"</").concat(w.name,">"))}else if(B(j)==="object"&&!F){var X=w.children[0]?N:null;X&&P.push(X)}else w.children.length===1&&N?P.push(k.exports.cloneElement(j,L(L({},j.props),{},{key:C}),N)):P.push(k.exports.cloneElement(j,L(L({},j.props),{},{key:C})))}else if(w.type==="text"){var Se=a.transWrapTextNodes,Pe=i?a.unescape(r.services.interpolator.interpolate(w.content,c,r.language)):r.services.interpolator.interpolate(w.content,c,r.language);Se?P.push(k.exports.createElement(Se,{key:"".concat(w.name,"-").concat(C)},Pe)):P.push(Pe)}return P},[])}var x=y([{dummy:!0,children:t||[]}],l,ye(t||[]));return We(x[0])}function nr(t){var n=t.children,r=t.count,a=t.parent,e=t.i18nKey,i=t.context,o=t.tOptions,s=o===void 0?{}:o,u=t.values,f=t.defaults,l=t.components,c=t.ns,p=t.i18n,g=t.t,y=t.shouldUnescape,x=it(t,Xn),v=p||ot();if(!v)return Te("You will need to pass in an i18next instance by using i18nextReactModule"),n;var m=g||v.t.bind(v)||function(q){return q};i&&(s.context=i);var h=L(L({},Jt()),v.options&&v.options.react),O=c||m.ns||v.options&&v.options.defaultNS;O=typeof O=="string"?[O]:O||["translation"];var S=f||qt(n,h)||h.transEmptyNodeValue||e,P=h.hashTransKey,w=e||(P?P(S):S),C=u?s.interpolation:{interpolation:L(L({},s.interpolation),{},{prefix:"#$?",suffix:"?$#"})},N=L(L(L(L({},s),{},{count:r},u),C),{},{defaultValue:S,ns:O}),R=w?m(w,N):S,j=tr(l||n,R,v,h,N,y),F=a!==void 0?a:h.defaultTransParent;return F?k.exports.createElement(F,x,j):j}function $(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Ot(t,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,cn(a.key),a)}}function U(t,n,r){return n&&Ot(t.prototype,n),r&&Ot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var rr={type:"3rdParty",init:function(n){Yn(n.options.react),qn(n)}},Qt=k.exports.createContext(),ar=function(){function t(){$(this,t),this.usedNamespaces={}}return U(t,[{key:"addUsedNamespaces",value:function(r){var a=this;r.forEach(function(e){a.usedNamespaces[e]||(a.usedNamespaces[e]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),t}(),ir=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function wt(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function or(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?wt(Object(r),!0).forEach(function(a){H(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function sr(t){var n=t.children,r=t.count,a=t.parent,e=t.i18nKey,i=t.context,o=t.tOptions,s=o===void 0?{}:o,u=t.values,f=t.defaults,l=t.components,c=t.ns,p=t.i18n,g=t.t,y=t.shouldUnescape,x=it(t,ir),v=k.exports.useContext(Qt)||{},m=v.i18n,h=v.defaultNS,O=p||m||ot(),S=g||O.t.bind(O)||function(P){return P};return nr(or({children:n,count:r,parent:a,i18nKey:e,context:i,tOptions:s,values:u,defaults:f,components:l,ns:c||S.ns||h||O.options&&O.options.defaultNS,i18n:O,t:g,shouldUnescape:y},x))}function Xt(t){if(Array.isArray(t))return t}function ur(t,n){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a,e,i,o,s=[],u=!0,f=!1;try{if(i=(r=r.call(t)).next,n===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=i.call(r)).done)&&(s.push(a.value),s.length!==n);u=!0);}catch(l){f=!0,e=l}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(f)throw e}}return s}}function xt(t,n){(n==null||n>t.length)&&(n=t.length);for(var r=0,a=new Array(n);r<n;r++)a[r]=t[r];return a}function Zt(t,n){if(!!t){if(typeof t=="string")return xt(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xt(t,n)}}function en(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cr(t,n){return Xt(t)||ur(t,n)||Zt(t,n)||en()}function St(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function Ge(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?St(Object(r),!0).forEach(function(a){H(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}var lr=function(n,r){var a=k.exports.useRef();return k.exports.useEffect(function(){a.current=r?a.current:n},[n,r]),a.current};function V(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.i18n,a=k.exports.useContext(Qt)||{},e=a.i18n,i=a.defaultNS,o=r||e||ot();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new ar),!o){Te("You will need to pass in an i18next instance by using initReactI18next");var s=function(R){return Array.isArray(R)?R[R.length-1]:R},u=[s,{},!1];return u.t=s,u.i18n={},u.ready=!1,u}o.options.react&&o.options.react.wait!==void 0&&Te("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var f=Ge(Ge(Ge({},Jt()),o.options.react),n),l=f.useSuspense,c=f.keyPrefix,p=t||i||o.options&&o.options.defaultNS;p=typeof p=="string"?[p]:p||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(p);var g=(o.isInitialized||o.initializedStoreOnce)&&p.every(function(N){return Vn(N,o,f)});function y(){return o.getFixedT(null,f.nsMode==="fallback"?p:p[0],c)}var x=k.exports.useState(y),v=cr(x,2),m=v[0],h=v[1],O=p.join(),S=lr(O),P=k.exports.useRef(!0);k.exports.useEffect(function(){var N=f.bindI18n,R=f.bindI18nStore;P.current=!0,!g&&!l&&mt(o,p,function(){P.current&&h(y)}),g&&S&&S!==O&&P.current&&h(y);function j(){P.current&&h(y)}return N&&o&&o.on(N,j),R&&o&&o.store.on(R,j),function(){P.current=!1,N&&o&&N.split(" ").forEach(function(F){return o.off(F,j)}),R&&o&&R.split(" ").forEach(function(F){return o.store.off(F,j)})}},[o,O]);var w=k.exports.useRef(!0);k.exports.useEffect(function(){P.current&&!w.current&&h(y),w.current=!1},[o,c]);var C=[m,o,g];if(C.t=m,C.i18n=o,C.ready=g,g||!g&&!l)return C;throw new Promise(function(N){mt(o,p,function(){N()})})}function fr(){const{t}=V();return b(Ut,{flex:1,justifyContent:"center",mb:10,children:[d(ln,{src:"/logo512.png",w:120,p:2,mb:3,backgroundColor:"white",borderRadius:12}),d(pe,{children:t("Welcome to RMG")}),d(J,{fontSize:"lg",textAlign:"center",children:t("Select an app to start your own rail map design!")})]})}function pr(t){var e;const{tab:n,isActive:r}=t,[a]=k.exports.useState((e=n.url)!=null?e:"/"+n.app+"/");return d(qe,{display:r?"block":"none",flex:1,children:d("iframe",{id:En+n.id,src:a,loading:"lazy",title:n.app,width:"100%",height:"100%"})})}const gr={display:"flex",flex:1,flexDirection:"column",overflow:"hidden","& .chakra-tabs__tablist":{whiteSpace:"nowrap",overflowX:"auto",overflowY:"hidden",ml:10,transition:"0.3s ease-in-out",".show-menu &":{ml:0}},"& .chakra-tabs__tab":{"& button":{ml:1}}};function hr(){const{t}=V(),n=at(),{openedTabs:r,activeTab:a}=Kt(o=>o.app),e=a?r.findIndex(o=>o.id===a):-1,i=(o,s,u)=>{o.stopPropagation(),n(Tn(s)),z.event(be.CLOSE_APP,{app:u})};return r.length===0?d(fr,{}):b(fn,{as:"section",variant:"enclosed",colorScheme:"primary",index:e,sx:gr,children:[d(pn,{children:r.map(({id:o,app:s})=>b(gn,{as:qe,onClick:()=>n(Ln(o)),cursor:"pointer",children:[t(fe[s].name),d(hn,{size:"sm",onClick:u=>i(u,o,s),title:t("Close")})]},o))}),r.map(o=>d(pr,{tab:o,isActive:a===o.id},o.id))]})}var tn={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Pt=ae.createContext&&ae.createContext(tn),ee=globalThis&&globalThis.__assign||function(){return ee=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},ee.apply(this,arguments)},dr=globalThis&&globalThis.__rest||function(t,n){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&n.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,a=Object.getOwnPropertySymbols(t);e<a.length;e++)n.indexOf(a[e])<0&&Object.prototype.propertyIsEnumerable.call(t,a[e])&&(r[a[e]]=t[a[e]]);return r};function nn(t){return t&&t.map(function(n,r){return ae.createElement(n.tag,ee({key:r},n.attr),nn(n.child))})}function ge(t){return function(n){return ae.createElement(mr,ee({attr:ee({},t.attr)},n),nn(t.child))}}function mr(t){var n=function(r){var a=t.attr,e=t.size,i=t.title,o=dr(t,["attr","size","title"]),s=e||r.size||"1em",u;return r.className&&(u=r.className),t.className&&(u=(u?u+" ":"")+t.className),ae.createElement("svg",ee({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,o,{className:u,style:ee(ee({color:t.color||r.color},r.style),t.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),i&&ae.createElement("title",null,i),t.children)};return Pt!==void 0?ae.createElement(Pt.Consumer,null,function(r){return n(r)}):n(tn)}function vr(t){return ge({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"}}]})(t)}function yr(t){return ge({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}}]})(t)}function T(t){return ge({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 19H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}}]})(t)}function br(t){return ge({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}}]})(t)}function Or(t){return ge({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}}]})(t)}function wr(t){return ge({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}}]})(t)}const xr={w:"100%",overflow:"hidden",justifyContent:"flex-start",textOverflow:"ellipsis",textAlign:"start"};function Sr(t){const{appId:n,onAboutOpen:r}=t,{t:a}=V(),e=at(),i=dn(`(min-width: ${mn.breakpoints.sm})`),o=s=>{e(s?An(n):In(n)),i[0]||e(Wt()),z.event(be.OPEN_APP,{appId:n,isOpenInNew:s})};return b(vn,{variant:"ghost",size:"md",isAttached:!0,children:[d(De,{onClick:()=>o(!1),title:a(fe[n].name),sx:xr,children:a(fe[n].name)}),b(yn,{children:[d(bn,{as:Le,icon:d(Or,{}),"aria-label":a("More"),title:a("More")}),b(On,{children:[fe[n].allowMultiInstances&&d(pt,{icon:d(T,{}),onClick:()=>o(!0),children:a("Open in new Workspace")}),d(pt,{icon:d(yr,{}),onClick:r,children:a("About")+" "+a(fe[n].name)})]})]})]})}const Pr=async t=>{const n=`/${t}/info.json`;try{return(await(await fetch(n)).json()).version}catch(r){return console.log(`Failed to get version for ${t}`),"unknown"}};function jr(t){const{appId:n,onClose:r}=t,{t:a}=V(),[e,i]=k.exports.useState("Unknown");return k.exports.useEffect(()=>{n?Pr(n).then(o=>i(o)):i("Unknown")},[n]),b(Qe,{isOpen:!!n,onClose:r,size:"xl",scrollBehavior:"inside",children:[d(Xe,{}),b(Ze,{children:[b(et,{children:[a("About")+" "+(n?a(fe[n].name):""),d(wn,{ml:1,children:e})]}),d(tt,{}),d(nt,{}),d(rt,{children:d(De,{colorScheme:"primary",onClick:()=>window.open("https://github.com/railmapgen/"+n,"_blank"),children:a("Visit GitHub")})})]})]})}const kr={flexDirection:"column","& h5":{mx:1,my:2},"& > div":{flexDirection:"column"}};function Cr(){const{t}=V(),[n,r]=k.exports.useState(),a=Mn(z.getEnv());return b(Y,{sx:kr,children:[d(pe,{as:"h5",size:"sm",children:t("Apps")}),d(Y,{children:a.map(e=>d(Sr,{appId:e,onAboutOpen:()=>r(e)},e))}),d(jr,{appId:n,onClose:()=>r(void 0)})]})}const Rr="应用程序",Nr="取消",Er="组件",Lr="确定",Tr="语言",Ar="调色板",Ir="重置",Mr="设置",Dr="提交",zr="模板",Fr="翻译",Hr={Apps:Rr,Cancel:Nr,Components:Er,Confirm:Lr,Language:Tr,Palette:Ar,"Rail Map Generator":"铁路线路图生成器","Rail Map Painter":"地铁线路图绘制器",Reset:Ir,"RMG Home":"RMG 主页","Seed Project":"种子项目",Settings:Mr,Submit:Dr,Templates:zr,Translate:Fr},_r="應用程式",Br="取消",$r="元件",Ur="確定",Vr="語言",Kr="調色盤",Wr="重設",Gr="設定",Jr="提交",Yr="範本",qr="翻譯",Qr={Apps:_r,Cancel:Br,Components:$r,Confirm:Ur,Language:Vr,Palette:Kr,"Rail Map Generator":"鐵路路綫圖產生器","Rail Map Painter":"地鐵路綫圖繪製器",Reset:Wr,"RMG Home":"RMG 主頁","Seed Project":"種子項目",Settings:Gr,Submit:Jr,Templates:Yr,Translate:qr};var E;(function(t){t.Azerbaijani="az",t.Arabic="ar",t.Catalan="ca",t.Chinese="zh",t.ChineseCN="zh-CN",t.ChineseSimp="zh-Hans",t.ChineseTrad="zh-Hant",t.ChineseHK="zh-HK",t.ChineseTW="zh-TW",t.English="en",t.French="fr",t.Gaelic="ga",t.German="de",t.Hindi="hi",t.Japanese="ja",t.Korean="ko",t.Malay="ms",t.Norwegian="no",t.Spanish="es",t.Persian="fa",t.Portuguese="pt",t.Russian="ru",t.Swedish="sv",t.Turkish="tr"})(E||(E={}));var Ae=globalThis&&globalThis.__assign||function(){return Ae=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},Ae.apply(this,arguments)},Xr=function(){function t(){this._resources={"zh-Hans":{translation:Hr},"zh-Hant":{translation:Qr}}}return t.prototype.withResource=function(n,r){return n in this._resources?this._resources[n].translation=Ae(Ae({},this._resources[n].translation),r):this._resources[n]={translation:r},this},t.prototype.build=function(){return this._resources},t}(),Zr={Builder:Xr};function te(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ze(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&xn(t,n)}function Oe(t,n){if(n&&(B(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return te(t)}function G(t){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},G(t)}function ea(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ta(t){return Xt(t)||ea(t)||Zt(t)||en()}function jt(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function kt(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?jt(Object(r),!0).forEach(function(a){H(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}var na={type:"logger",log:function(n){this.output("log",n)},warn:function(n){this.output("warn",n)},error:function(n){this.output("error",n)},output:function(n,r){console&&console[n]&&console[n].apply(console,r)}},ra=function(){function t(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$(this,t),this.init(n,r)}return U(t,[{key:"init",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=a.prefix||"i18next:",this.logger=r||na,this.options=a,this.debug=a.debug}},{key:"setDebug",value:function(r){this.debug=r}},{key:"log",value:function(){for(var r=arguments.length,a=new Array(r),e=0;e<r;e++)a[e]=arguments[e];return this.forward(a,"log","",!0)}},{key:"warn",value:function(){for(var r=arguments.length,a=new Array(r),e=0;e<r;e++)a[e]=arguments[e];return this.forward(a,"warn","",!0)}},{key:"error",value:function(){for(var r=arguments.length,a=new Array(r),e=0;e<r;e++)a[e]=arguments[e];return this.forward(a,"error","")}},{key:"deprecate",value:function(){for(var r=arguments.length,a=new Array(r),e=0;e<r;e++)a[e]=arguments[e];return this.forward(a,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(r,a,e,i){return i&&!this.debug?null:(typeof r[0]=="string"&&(r[0]="".concat(e).concat(this.prefix," ").concat(r[0])),this.logger[a](r))}},{key:"create",value:function(r){return new t(this.logger,kt(kt({},{prefix:"".concat(this.prefix,":").concat(r,":")}),this.options))}},{key:"clone",value:function(r){return r=r||this.options,r.prefix=r.prefix||this.prefix,new t(this.logger,r)}}]),t}(),W=new ra,ne=function(){function t(){$(this,t),this.observers={}}return U(t,[{key:"on",value:function(r,a){var e=this;return r.split(" ").forEach(function(i){e.observers[i]=e.observers[i]||[],e.observers[i].push(a)}),this}},{key:"off",value:function(r,a){if(!!this.observers[r]){if(!a){delete this.observers[r];return}this.observers[r]=this.observers[r].filter(function(e){return e!==a})}}},{key:"emit",value:function(r){for(var a=arguments.length,e=new Array(a>1?a-1:0),i=1;i<a;i++)e[i-1]=arguments[i];if(this.observers[r]){var o=[].concat(this.observers[r]);o.forEach(function(u){u.apply(void 0,e)})}if(this.observers["*"]){var s=[].concat(this.observers["*"]);s.forEach(function(u){u.apply(u,[r].concat(e))})}}}]),t}();function ve(){var t,n,r=new Promise(function(a,e){t=a,n=e});return r.resolve=t,r.reject=n,r}function Ct(t){return t==null?"":""+t}function aa(t,n,r){t.forEach(function(a){n[a]&&(r[a]=n[a])})}function st(t,n,r){function a(s){return s&&s.indexOf("###")>-1?s.replace(/###/g,"."):s}function e(){return!t||typeof t=="string"}for(var i=typeof n!="string"?[].concat(n):n.split(".");i.length>1;){if(e())return{};var o=a(i.shift());!t[o]&&r&&(t[o]=new r),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={}}return e()?{}:{obj:t,k:a(i.shift())}}function Rt(t,n,r){var a=st(t,n,Object),e=a.obj,i=a.k;e[i]=r}function ia(t,n,r,a){var e=st(t,n,Object),i=e.obj,o=e.k;i[o]=i[o]||[],a&&(i[o]=i[o].concat(r)),a||i[o].push(r)}function Ie(t,n){var r=st(t,n),a=r.obj,e=r.k;if(!!a)return a[e]}function Nt(t,n,r){var a=Ie(t,r);return a!==void 0?a:Ie(n,r)}function rn(t,n,r){for(var a in n)a!=="__proto__"&&a!=="constructor"&&(a in t?typeof t[a]=="string"||t[a]instanceof String||typeof n[a]=="string"||n[a]instanceof String?r&&(t[a]=n[a]):rn(t[a],n[a],r):t[a]=n[a]);return t}function ce(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var oa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function sa(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,function(n){return oa[n]}):t}var Fe=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,ua=[" ",",","?","!",";"];function ca(t,n,r){n=n||"",r=r||"";var a=ua.filter(function(s){return n.indexOf(s)<0&&r.indexOf(s)<0});if(a.length===0)return!0;var e=new RegExp("(".concat(a.map(function(s){return s==="?"?"\\?":s}).join("|"),")")),i=!e.test(t);if(!i){var o=t.indexOf(r);o>0&&!e.test(t.substring(0,o))&&(i=!0)}return i}function Et(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function Re(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Et(Object(r),!0).forEach(function(a){H(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function la(t){var n=fa();return function(){var a=G(t),e;if(n){var i=G(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return Oe(this,e)}}function fa(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function an(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!!t){if(t[n])return t[n];for(var a=n.split(r),e=t,i=0;i<a.length;++i){if(!e||typeof e[a[i]]=="string"&&i+1<a.length)return;if(e[a[i]]===void 0){for(var o=2,s=a.slice(i,i+o).join(r),u=e[s];u===void 0&&a.length>i+o;)o++,s=a.slice(i,i+o).join(r),u=e[s];if(u===void 0)return;if(u===null)return null;if(n.endsWith(s)){if(typeof u=="string")return u;if(s&&typeof u[s]=="string")return u[s]}var f=a.slice(i+o).join(r);return f?an(u,f,r):void 0}e=e[a[i]]}return e}}var pa=function(t){ze(r,t);var n=la(r);function r(a){var e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return $(this,r),e=n.call(this),Fe&&ne.call(te(e)),e.data=a||{},e.options=i,e.options.keySeparator===void 0&&(e.options.keySeparator="."),e.options.ignoreJSONStructure===void 0&&(e.options.ignoreJSONStructure=!0),e}return U(r,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var i=this.options.ns.indexOf(e);i>-1&&this.options.ns.splice(i,1)}},{key:"getResource",value:function(e,i,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,f=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure,l=[e,i];o&&typeof o!="string"&&(l=l.concat(o)),o&&typeof o=="string"&&(l=l.concat(u?o.split(u):o)),e.indexOf(".")>-1&&(l=e.split("."));var c=Ie(this.data,l);return c||!f||typeof o!="string"?c:an(this.data&&this.data[e]&&this.data[e][i],o,u)}},{key:"addResource",value:function(e,i,o,s){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},f=this.options.keySeparator;f===void 0&&(f=".");var l=[e,i];o&&(l=l.concat(f?o.split(f):o)),e.indexOf(".")>-1&&(l=e.split("."),s=i,i=l[1]),this.addNamespaces(i),Rt(this.data,l,s),u.silent||this.emit("added",e,i,o,s)}},{key:"addResources",value:function(e,i,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var u in o)(typeof o[u]=="string"||Object.prototype.toString.apply(o[u])==="[object Array]")&&this.addResource(e,i,u,o[u],{silent:!0});s.silent||this.emit("added",e,i,o)}},{key:"addResourceBundle",value:function(e,i,o,s,u){var f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},l=[e,i];e.indexOf(".")>-1&&(l=e.split("."),s=o,o=i,i=l[1]),this.addNamespaces(i);var c=Ie(this.data,l)||{};s?rn(c,o,u):c=Re(Re({},c),o),Rt(this.data,l,c),f.silent||this.emit("added",e,i,o)}},{key:"removeResourceBundle",value:function(e,i){this.hasResourceBundle(e,i)&&delete this.data[e][i],this.removeNamespaces(i),this.emit("removed",e,i)}},{key:"hasResourceBundle",value:function(e,i){return this.getResource(e,i)!==void 0}},{key:"getResourceBundle",value:function(e,i){return i||(i=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Re(Re({},{}),this.getResource(e,i)):this.getResource(e,i)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"hasLanguageSomeTranslations",value:function(e){var i=this.getDataByLanguage(e),o=i&&Object.keys(i)||[];return!!o.find(function(s){return i[s]&&Object.keys(i[s]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),r}(ne),on={processors:{},addPostProcessor:function(n){this.processors[n.name]=n},handle:function(n,r,a,e,i){var o=this;return n.forEach(function(s){o.processors[s]&&(r=o.processors[s].process(r,a,e,i))}),r}};function Lt(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function D(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Lt(Object(r),!0).forEach(function(a){H(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function ga(t){var n=ha();return function(){var a=G(t),e;if(n){var i=G(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return Oe(this,e)}}function ha(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var Tt={},At=function(t){ze(r,t);var n=ga(r);function r(a){var e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return $(this,r),e=n.call(this),Fe&&ne.call(te(e)),aa(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],a,te(e)),e.options=i,e.options.keySeparator===void 0&&(e.options.keySeparator="."),e.logger=W.create("translator"),e}return U(r,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;var o=this.resolve(e,i);return o&&o.res!==void 0}},{key:"extractFromKey",value:function(e,i){var o=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");var s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,u=i.ns||this.options.defaultNS||[],f=o&&e.indexOf(o)>-1,l=!this.options.userDefinedKeySeparator&&!i.keySeparator&&!this.options.userDefinedNsSeparator&&!i.nsSeparator&&!ca(e,o,s);if(f&&!l){var c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:u};var p=e.split(o);(o!==s||o===s&&this.options.ns.indexOf(p[0])>-1)&&(u=p.shift()),e=p.join(s)}return typeof u=="string"&&(u=[u]),{key:e,namespaces:u}}},{key:"translate",value:function(e,i,o){var s=this;if(B(i)!=="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),i||(i={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);var u=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,f=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,l=this.extractFromKey(e[e.length-1],i),c=l.key,p=l.namespaces,g=p[p.length-1],y=i.lng||this.language,x=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(y&&y.toLowerCase()==="cimode"){if(x){var v=i.nsSeparator||this.options.nsSeparator;return u?(m.res="".concat(g).concat(v).concat(c),m):"".concat(g).concat(v).concat(c)}return u?(m.res=c,m):c}var m=this.resolve(e,i),h=m&&m.res,O=m&&m.usedKey||c,S=m&&m.exactUsedKey||c,P=Object.prototype.toString.apply(h),w=["[object Number]","[object Function]","[object RegExp]"],C=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,N=!this.i18nFormat||this.i18nFormat.handleAsObject,R=typeof h!="string"&&typeof h!="boolean"&&typeof h!="number";if(N&&h&&R&&w.indexOf(P)<0&&!(typeof C=="string"&&P==="[object Array]")){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var j=this.options.returnedObjectHandler?this.options.returnedObjectHandler(O,h,D(D({},i),{},{ns:p})):"key '".concat(c," (").concat(this.language,")' returned an object instead of string.");return u?(m.res=j,m):j}if(f){var F=P==="[object Array]",q=F?[]:{},He=F?S:O;for(var Q in h)if(Object.prototype.hasOwnProperty.call(h,Q)){var we="".concat(He).concat(f).concat(Q);q[Q]=this.translate(we,D(D({},i),{joinArrays:!1,ns:p})),q[Q]===we&&(q[Q]=h[Q])}h=q}}else if(N&&typeof C=="string"&&P==="[object Array]")h=h.join(C),h&&(h=this.extendTranslation(h,e,i,o));else{var ie=!1,re=!1,xe=i.count!==void 0&&typeof i.count!="string",he=r.hasDefaultValue(i),_e=xe?this.pluralResolver.getSuffix(y,i.count,i):"",X=i["defaultValue".concat(_e)]||i.defaultValue;!this.isValidLookup(h)&&he&&(ie=!0,h=X),this.isValidLookup(h)||(re=!0,h=c);var Se=i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,Pe=Se&&re?void 0:h,de=he&&X!==h&&this.options.updateMissing;if(re||ie||de){if(this.logger.log(de?"updateKey":"missingKey",y,g,c,de?X:h),f){var ut=this.resolve(c,D(D({},i),{},{keySeparator:!1}));ut&&ut.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var me=[],je=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&je&&je[0])for(var Be=0;Be<je.length;Be++)me.push(je[Be]);else this.options.saveMissingTo==="all"?me=this.languageUtils.toResolveHierarchy(i.lng||this.language):me.push(i.lng||this.language);var ct=function(oe,Ue,lt){var ft=he&&lt!==h?lt:Pe;s.options.missingKeyHandler?s.options.missingKeyHandler(oe,g,Ue,ft,de,i):s.backendConnector&&s.backendConnector.saveMissing&&s.backendConnector.saveMissing(oe,g,Ue,ft,de,i),s.emit("missingKey",oe,g,Ue,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&xe?me.forEach(function($e){s.pluralResolver.getSuffixes($e,i).forEach(function(oe){ct([$e],c+oe,i["defaultValue".concat(oe)]||X)})}):ct(me,c,X))}h=this.extendTranslation(h,e,i,m,o),re&&h===c&&this.options.appendNamespaceToMissingKey&&(h="".concat(g,":").concat(c)),(re||ie)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(g,":").concat(c):c,ie?h:void 0):h=this.options.parseMissingKeyHandler(h))}return u?(m.res=h,m):h}},{key:"extendTranslation",value:function(e,i,o,s,u){var f=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,D(D({},this.options.interpolation.defaultVariables),o),s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(D(D({},o),{interpolation:D(D({},this.options.interpolation),o.interpolation)}));var l=typeof e=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),c;if(l){var p=e.match(this.interpolator.nestingRegexp);c=p&&p.length}var g=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(g=D(D({},this.options.interpolation.defaultVariables),g)),e=this.interpolator.interpolate(e,g,o.lng||this.language,o),l){var y=e.match(this.interpolator.nestingRegexp),x=y&&y.length;c<x&&(o.nest=!1)}o.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var h=arguments.length,O=new Array(h),S=0;S<h;S++)O[S]=arguments[S];return u&&u[0]===O[0]&&!o.context?(f.logger.warn("It seems you are nesting recursively key: ".concat(O[0]," in key: ").concat(i[0])),null):f.translate.apply(f,O.concat([i]))},o)),o.interpolation&&this.interpolator.reset()}var v=o.postProcess||this.options.postProcess,m=typeof v=="string"?[v]:v;return e!=null&&m&&m.length&&o.applyPostProcessor!==!1&&(e=on.handle(m,e,i,this.options&&this.options.postProcessPassResolved?D({i18nResolved:s},o):o,this)),e}},{key:"resolve",value:function(e){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,u,f,l,c;return typeof e=="string"&&(e=[e]),e.forEach(function(p){if(!i.isValidLookup(s)){var g=i.extractFromKey(p,o),y=g.key;u=y;var x=g.namespaces;i.options.fallbackNS&&(x=x.concat(i.options.fallbackNS));var v=o.count!==void 0&&typeof o.count!="string",m=v&&!o.ordinal&&o.count===0&&i.pluralResolver.shouldUseIntlApi(),h=o.context!==void 0&&(typeof o.context=="string"||typeof o.context=="number")&&o.context!=="",O=o.lngs?o.lngs:i.languageUtils.toResolveHierarchy(o.lng||i.language,o.fallbackLng);x.forEach(function(S){i.isValidLookup(s)||(c=S,!Tt["".concat(O[0],"-").concat(S)]&&i.utils&&i.utils.hasLoadedNamespace&&!i.utils.hasLoadedNamespace(c)&&(Tt["".concat(O[0],"-").concat(S)]=!0,i.logger.warn('key "'.concat(u,'" for languages "').concat(O.join(", "),`" won't get resolved as namespace "`).concat(c,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),O.forEach(function(P){if(!i.isValidLookup(s)){l=P;var w=[y];if(i.i18nFormat&&i.i18nFormat.addLookupKeys)i.i18nFormat.addLookupKeys(w,y,P,S,o);else{var C;v&&(C=i.pluralResolver.getSuffix(P,o.count,o));var N="".concat(i.options.pluralSeparator,"zero");if(v&&(w.push(y+C),m&&w.push(y+N)),h){var R="".concat(y).concat(i.options.contextSeparator).concat(o.context);w.push(R),v&&(w.push(R+C),m&&w.push(R+N))}}for(var j;j=w.pop();)i.isValidLookup(s)||(f=j,s=i.getResource(P,S,j,o))}}))})}}),{res:s,usedKey:u,exactUsedKey:f,usedLng:l,usedNS:c}}},{key:"isValidLookup",value:function(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}},{key:"getResource",value:function(e,i,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,i,o,s):this.resourceStore.getResource(e,i,o,s)}}],[{key:"hasDefaultValue",value:function(e){var i="defaultValue";for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&i===o.substring(0,i.length)&&e[o]!==void 0)return!0;return!1}}]),r}(ne);function Je(t){return t.charAt(0).toUpperCase()+t.slice(1)}var It=function(){function t(n){$(this,t),this.options=n,this.supportedLngs=this.options.supportedLngs||!1,this.logger=W.create("languageUtils")}return U(t,[{key:"getScriptPartFromCode",value:function(r){if(!r||r.indexOf("-")<0)return null;var a=r.split("-");return a.length===2||(a.pop(),a[a.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(a.join("-"))}},{key:"getLanguagePartFromCode",value:function(r){if(!r||r.indexOf("-")<0)return r;var a=r.split("-");return this.formatLanguageCode(a[0])}},{key:"formatLanguageCode",value:function(r){if(typeof r=="string"&&r.indexOf("-")>-1){var a=["hans","hant","latn","cyrl","cans","mong","arab"],e=r.split("-");return this.options.lowerCaseLng?e=e.map(function(i){return i.toLowerCase()}):e.length===2?(e[0]=e[0].toLowerCase(),e[1]=e[1].toUpperCase(),a.indexOf(e[1].toLowerCase())>-1&&(e[1]=Je(e[1].toLowerCase()))):e.length===3&&(e[0]=e[0].toLowerCase(),e[1].length===2&&(e[1]=e[1].toUpperCase()),e[0]!=="sgn"&&e[2].length===2&&(e[2]=e[2].toUpperCase()),a.indexOf(e[1].toLowerCase())>-1&&(e[1]=Je(e[1].toLowerCase())),a.indexOf(e[2].toLowerCase())>-1&&(e[2]=Je(e[2].toLowerCase()))),e.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?r.toLowerCase():r}},{key:"isSupportedCode",value:function(r){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(r=this.getLanguagePartFromCode(r)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(r)>-1}},{key:"getBestMatchFromCodes",value:function(r){var a=this;if(!r)return null;var e;return r.forEach(function(i){if(!e){var o=a.formatLanguageCode(i);(!a.options.supportedLngs||a.isSupportedCode(o))&&(e=o)}}),!e&&this.options.supportedLngs&&r.forEach(function(i){if(!e){var o=a.getLanguagePartFromCode(i);if(a.isSupportedCode(o))return e=o;e=a.options.supportedLngs.find(function(s){if(s.indexOf(o)===0)return s})}}),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e}},{key:"getFallbackCodes",value:function(r,a){if(!r)return[];if(typeof r=="function"&&(r=r(a)),typeof r=="string"&&(r=[r]),Object.prototype.toString.apply(r)==="[object Array]")return r;if(!a)return r.default||[];var e=r[a];return e||(e=r[this.getScriptPartFromCode(a)]),e||(e=r[this.formatLanguageCode(a)]),e||(e=r[this.getLanguagePartFromCode(a)]),e||(e=r.default),e||[]}},{key:"toResolveHierarchy",value:function(r,a){var e=this,i=this.getFallbackCodes(a||this.options.fallbackLng||[],r),o=[],s=function(f){!f||(e.isSupportedCode(f)?o.push(f):e.logger.warn("rejecting language code not found in supportedLngs: ".concat(f)))};return typeof r=="string"&&r.indexOf("-")>-1?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(r)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(r)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(r))):typeof r=="string"&&s(this.formatLanguageCode(r)),i.forEach(function(u){o.indexOf(u)<0&&s(e.formatLanguageCode(u))}),o}}]),t}(),da=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],ma={1:function(n){return Number(n>1)},2:function(n){return Number(n!=1)},3:function(n){return 0},4:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2)},5:function(n){return Number(n==0?0:n==1?1:n==2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5)},6:function(n){return Number(n==1?0:n>=2&&n<=4?1:2)},7:function(n){return Number(n==1?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2)},8:function(n){return Number(n==1?0:n==2?1:n!=8&&n!=11?2:3)},9:function(n){return Number(n>=2)},10:function(n){return Number(n==1?0:n==2?1:n<7?2:n<11?3:4)},11:function(n){return Number(n==1||n==11?0:n==2||n==12?1:n>2&&n<20?2:3)},12:function(n){return Number(n%10!=1||n%100==11)},13:function(n){return Number(n!==0)},14:function(n){return Number(n==1?0:n==2?1:n==3?2:3)},15:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2)},16:function(n){return Number(n%10==1&&n%100!=11?0:n!==0?1:2)},17:function(n){return Number(n==1||n%10==1&&n%100!=11?0:1)},18:function(n){return Number(n==0?0:n==1?1:2)},19:function(n){return Number(n==1?0:n==0||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3)},20:function(n){return Number(n==1?0:n==0||n%100>0&&n%100<20?1:2)},21:function(n){return Number(n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0)},22:function(n){return Number(n==1?0:n==2?1:(n<0||n>10)&&n%10==0?2:3)}},va=["v1","v2","v3"],Mt={zero:0,one:1,two:2,few:3,many:4,other:5};function ya(){var t={};return da.forEach(function(n){n.lngs.forEach(function(r){t[r]={numbers:n.nr,plurals:ma[n.fc]}})}),t}var ba=function(){function t(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$(this,t),this.languageUtils=n,this.options=r,this.logger=W.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=ya()}return U(t,[{key:"addRule",value:function(r,a){this.rules[r]=a}},{key:"getRule",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(r,{type:a.ordinal?"ordinal":"cardinal"})}catch(e){return}return this.rules[r]||this.rules[this.languageUtils.getLanguagePartFromCode(r)]}},{key:"needsPlural",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=this.getRule(r,a);return this.shouldUseIntlApi()?e&&e.resolvedOptions().pluralCategories.length>1:e&&e.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(r,a){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(r,e).map(function(i){return"".concat(a).concat(i)})}},{key:"getSuffixes",value:function(r){var a=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(r,e);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort(function(o,s){return Mt[o]-Mt[s]}).map(function(o){return"".concat(a.options.prepend).concat(o)}):i.numbers.map(function(o){return a.getSuffix(r,o,e)}):[]}},{key:"getSuffix",value:function(r,a){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=this.getRule(r,e);return i?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(i.select(a)):this.getSuffixRetroCompatible(i,a):(this.logger.warn("no plural rule found for: ".concat(r)),"")}},{key:"getSuffixRetroCompatible",value:function(r,a){var e=this,i=r.noAbs?r.plurals(a):r.plurals(Math.abs(a)),o=r.numbers[i];this.options.simplifyPluralSuffix&&r.numbers.length===2&&r.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));var s=function(){return e.options.prepend&&o.toString()?e.options.prepend+o.toString():o.toString()};return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?"_plural_".concat(o.toString()):s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&r.numbers.length===2&&r.numbers[0]===1?s():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}},{key:"shouldUseIntlApi",value:function(){return!va.includes(this.options.compatibilityJSON)}}]),t}();function Dt(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function _(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Dt(Object(r),!0).forEach(function(a){H(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}var Oa=function(){function t(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$(this,t),this.logger=W.create("interpolator"),this.options=n,this.format=n.interpolation&&n.interpolation.format||function(r){return r},this.init(n)}return U(t,[{key:"init",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};r.interpolation||(r.interpolation={escapeValue:!0});var a=r.interpolation;this.escape=a.escape!==void 0?a.escape:sa,this.escapeValue=a.escapeValue!==void 0?a.escapeValue:!0,this.useRawValueToEscape=a.useRawValueToEscape!==void 0?a.useRawValueToEscape:!1,this.prefix=a.prefix?ce(a.prefix):a.prefixEscaped||"{{",this.suffix=a.suffix?ce(a.suffix):a.suffixEscaped||"}}",this.formatSeparator=a.formatSeparator?a.formatSeparator:a.formatSeparator||",",this.unescapePrefix=a.unescapeSuffix?"":a.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":a.unescapeSuffix||"",this.nestingPrefix=a.nestingPrefix?ce(a.nestingPrefix):a.nestingPrefixEscaped||ce("$t("),this.nestingSuffix=a.nestingSuffix?ce(a.nestingSuffix):a.nestingSuffixEscaped||ce(")"),this.nestingOptionsSeparator=a.nestingOptionsSeparator?a.nestingOptionsSeparator:a.nestingOptionsSeparator||",",this.maxReplaces=a.maxReplaces?a.maxReplaces:1e3,this.alwaysFormat=a.alwaysFormat!==void 0?a.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var r="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(r,"g");var a="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(a,"g");var e="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(e,"g")}},{key:"interpolate",value:function(r,a,e,i){var o=this,s,u,f,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(v){return v.replace(/\$/g,"$$$$")}var p=function(m){if(m.indexOf(o.formatSeparator)<0){var h=Nt(a,l,m);return o.alwaysFormat?o.format(h,void 0,e,_(_(_({},i),a),{},{interpolationkey:m})):h}var O=m.split(o.formatSeparator),S=O.shift().trim(),P=O.join(o.formatSeparator).trim();return o.format(Nt(a,l,S),P,e,_(_(_({},i),a),{},{interpolationkey:S}))};this.resetRegExp();var g=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,y=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,x=[{regex:this.regexpUnescape,safeValue:function(m){return c(m)}},{regex:this.regexp,safeValue:function(m){return o.escapeValue?c(o.escape(m)):c(m)}}];return x.forEach(function(v){for(f=0;s=v.regex.exec(r);){var m=s[1].trim();if(u=p(m),u===void 0)if(typeof g=="function"){var h=g(r,s,i);u=typeof h=="string"?h:""}else if(i&&i.hasOwnProperty(m))u="";else if(y){u=s[0];continue}else o.logger.warn("missed to pass in variable ".concat(m," for interpolating ").concat(r)),u="";else typeof u!="string"&&!o.useRawValueToEscape&&(u=Ct(u));var O=v.safeValue(u);if(r=r.replace(s[0],O),y?(v.regex.lastIndex+=u.length,v.regex.lastIndex-=s[0].length):v.regex.lastIndex=0,f++,f>=o.maxReplaces)break}}),r}},{key:"nest",value:function(r,a){var e=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,s,u;function f(g,y){var x=this.nestingOptionsSeparator;if(g.indexOf(x)<0)return g;var v=g.split(new RegExp("".concat(x,"[ ]*{"))),m="{".concat(v[1]);g=v[0],m=this.interpolate(m,u);var h=m.match(/'/g),O=m.match(/"/g);(h&&h.length%2===0&&!O||O.length%2!==0)&&(m=m.replace(/'/g,'"'));try{u=JSON.parse(m),y&&(u=_(_({},y),u))}catch(S){return this.logger.warn("failed parsing options string in nesting for key ".concat(g),S),"".concat(g).concat(x).concat(m)}return delete u.defaultValue,g}for(;o=this.nestingRegexp.exec(r);){var l=[];u=_({},i),u.applyPostProcessor=!1,delete u.defaultValue;var c=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){var p=o[1].split(this.formatSeparator).map(function(g){return g.trim()});o[1]=p.shift(),l=p,c=!0}if(s=a(f.call(this,o[1].trim(),u),u),s&&o[0]===r&&typeof s!="string")return s;typeof s!="string"&&(s=Ct(s)),s||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(r)),s=""),c&&(s=l.reduce(function(g,y){return e.format(g,y,i.lng,_(_({},i),{},{interpolationkey:o[1].trim()}))},s.trim())),r=r.replace(o[0],s),this.regexp.lastIndex=0}return r}}]),t}();function zt(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function Z(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?zt(Object(r),!0).forEach(function(a){H(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zt(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function wa(t){var n=t.toLowerCase().trim(),r={};if(t.indexOf("(")>-1){var a=t.split("(");n=a[0].toLowerCase().trim();var e=a[1].substring(0,a[1].length-1);if(n==="currency"&&e.indexOf(":")<0)r.currency||(r.currency=e.trim());else if(n==="relativetime"&&e.indexOf(":")<0)r.range||(r.range=e.trim());else{var i=e.split(";");i.forEach(function(o){if(!!o){var s=o.split(":"),u=ta(s),f=u[0],l=u.slice(1),c=l.join(":").trim().replace(/^'+|'+$/g,"");r[f.trim()]||(r[f.trim()]=c),c==="false"&&(r[f.trim()]=!1),c==="true"&&(r[f.trim()]=!0),isNaN(c)||(r[f.trim()]=parseInt(c,10))}})}}return{formatName:n,formatOptions:r}}function le(t){var n={};return function(a,e,i){var o=e+JSON.stringify(i),s=n[o];return s||(s=t(e,i),n[o]=s),s(a)}}var xa=function(){function t(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$(this,t),this.logger=W.create("formatter"),this.options=n,this.formats={number:le(function(r,a){var e=new Intl.NumberFormat(r,a);return function(i){return e.format(i)}}),currency:le(function(r,a){var e=new Intl.NumberFormat(r,Z(Z({},a),{},{style:"currency"}));return function(i){return e.format(i)}}),datetime:le(function(r,a){var e=new Intl.DateTimeFormat(r,Z({},a));return function(i){return e.format(i)}}),relativetime:le(function(r,a){var e=new Intl.RelativeTimeFormat(r,Z({},a));return function(i){return e.format(i,a.range||"day")}}),list:le(function(r,a){var e=new Intl.ListFormat(r,Z({},a));return function(i){return e.format(i)}})},this.init(n)}return U(t,[{key:"init",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},e=a.interpolation;this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||","}},{key:"add",value:function(r,a){this.formats[r.toLowerCase().trim()]=a}},{key:"addCached",value:function(r,a){this.formats[r.toLowerCase().trim()]=le(a)}},{key:"format",value:function(r,a,e,i){var o=this,s=a.split(this.formatSeparator),u=s.reduce(function(f,l){var c=wa(l),p=c.formatName,g=c.formatOptions;if(o.formats[p]){var y=f;try{var x=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},v=x.locale||x.lng||i.locale||i.lng||e;y=o.formats[p](f,v,Z(Z(Z({},g),i),x))}catch(m){o.logger.warn(m)}return y}else o.logger.warn("there was no format function for ".concat(p));return f},r);return u}}]),t}();function Ft(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function Ht(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Ft(Object(r),!0).forEach(function(a){H(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Sa(t){var n=Pa();return function(){var a=G(t),e;if(n){var i=G(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return Oe(this,e)}}function Pa(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function ja(t,n){t.pending[n]!==void 0&&(delete t.pending[n],t.pendingCount--)}var ka=function(t){ze(r,t);var n=Sa(r);function r(a,e,i){var o,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return $(this,r),o=n.call(this),Fe&&ne.call(te(o)),o.backend=a,o.store=e,o.services=i,o.languageUtils=i.languageUtils,o.options=s,o.logger=W.create("backendConnector"),o.waitingReads=[],o.maxParallelReads=s.maxParallelReads||10,o.readingCalls=0,o.maxRetries=s.maxRetries>=0?s.maxRetries:5,o.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(i,s.backend,s),o}return U(r,[{key:"queueLoad",value:function(e,i,o,s){var u=this,f={},l={},c={},p={};return e.forEach(function(g){var y=!0;i.forEach(function(x){var v="".concat(g,"|").concat(x);!o.reload&&u.store.hasResourceBundle(g,x)?u.state[v]=2:u.state[v]<0||(u.state[v]===1?l[v]===void 0&&(l[v]=!0):(u.state[v]=1,y=!1,l[v]===void 0&&(l[v]=!0),f[v]===void 0&&(f[v]=!0),p[x]===void 0&&(p[x]=!0)))}),y||(c[g]=!0)}),(Object.keys(f).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(f),pending:Object.keys(l),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(p)}}},{key:"loaded",value:function(e,i,o){var s=e.split("|"),u=s[0],f=s[1];i&&this.emit("failedLoading",u,f,i),o&&this.store.addResourceBundle(u,f,o),this.state[e]=i?-1:2;var l={};this.queue.forEach(function(c){ia(c.loaded,[u],f),ja(c,e),i&&c.errors.push(i),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(function(p){l[p]||(l[p]={});var g=c.loaded[p];g.length&&g.forEach(function(y){l[p][y]===void 0&&(l[p][y]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(function(c){return!c.done})}},{key:"read",value:function(e,i,o){var s=this,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,l=arguments.length>5?arguments[5]:void 0;if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:i,fcName:o,tried:u,wait:f,callback:l});return}this.readingCalls++;var c=function(x,v){if(s.readingCalls--,s.waitingReads.length>0){var m=s.waitingReads.shift();s.read(m.lng,m.ns,m.fcName,m.tried,m.wait,m.callback)}if(x&&v&&u<s.maxRetries){setTimeout(function(){s.read.call(s,e,i,o,u+1,f*2,l)},f);return}l(x,v)},p=this.backend[o].bind(this.backend);if(p.length===2){try{var g=p(e,i);g&&typeof g.then=="function"?g.then(function(y){return c(null,y)}).catch(c):c(null,g)}catch(y){c(y)}return}return p(e,i,c)}},{key:"prepareLoading",value:function(e,i){var o=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),u&&u();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof i=="string"&&(i=[i]);var f=this.queueLoad(e,i,s,u);if(!f.toLoad.length)return f.pending.length||u(),null;f.toLoad.forEach(function(l){o.loadOne(l)})}},{key:"load",value:function(e,i,o){this.prepareLoading(e,i,{},o)}},{key:"reload",value:function(e,i,o){this.prepareLoading(e,i,{reload:!0},o)}},{key:"loadOne",value:function(e){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=e.split("|"),u=s[0],f=s[1];this.read(u,f,"read",void 0,void 0,function(l,c){l&&i.logger.warn("".concat(o,"loading namespace ").concat(f," for language ").concat(u," failed"),l),!l&&c&&i.logger.log("".concat(o,"loaded namespace ").concat(f," for language ").concat(u),c),i.loaded(e,l,c)})}},{key:"saveMissing",value:function(e,i,o,s,u){var f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(i)){this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(i,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if(this.backend&&this.backend.create){var c=Ht(Ht({},f),{},{isUpdate:u}),p=this.backend.create.bind(this.backend);if(p.length<6)try{var g;p.length===5?g=p(e,i,o,s,c):g=p(e,i,o,s),g&&typeof g.then=="function"?g.then(function(y){return l(null,y)}).catch(l):l(null,g)}catch(y){l(y)}else p(e,i,o,s,l,c)}!e||!e[0]||this.store.addResource(e[0],i,o,s)}}}]),r}(ne);function _t(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(n){var r={};if(B(n[1])==="object"&&(r=n[1]),typeof n[1]=="string"&&(r.defaultValue=n[1]),typeof n[2]=="string"&&(r.tDescription=n[2]),B(n[2])==="object"||B(n[3])==="object"){var a=n[3]||n[2];Object.keys(a).forEach(function(e){r[e]=a[e]})}return r},interpolation:{escapeValue:!0,format:function(n,r,a,e){return n},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Bt(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function $t(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function K(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?$t(Object(r),!0).forEach(function(a){H(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$t(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Ca(t){var n=Ra();return function(){var a=G(t),e;if(n){var i=G(this).constructor;e=Reflect.construct(a,arguments,i)}else e=a.apply(this,arguments);return Oe(this,e)}}function Ra(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Ne(){}function Na(t){var n=Object.getOwnPropertyNames(Object.getPrototypeOf(t));n.forEach(function(r){typeof t[r]=="function"&&(t[r]=t[r].bind(t))})}var Me=function(t){ze(r,t);var n=Ca(r);function r(){var a,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if($(this,r),a=n.call(this),Fe&&ne.call(te(a)),a.options=Bt(e),a.services={},a.logger=W,a.modules={external:[]},Na(te(a)),i&&!a.isInitialized&&!e.isClone){if(!a.options.initImmediate)return a.init(e,i),Oe(a,te(a));setTimeout(function(){a.init(e,i)},0)}return a}return U(r,[{key:"init",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;typeof i=="function"&&(o=i,i={}),!i.defaultNS&&i.defaultNS!==!1&&i.ns&&(typeof i.ns=="string"?i.defaultNS=i.ns:i.ns.indexOf("translation")<0&&(i.defaultNS=i.ns[0]));var s=_t();this.options=K(K(K({},s),this.options),Bt(i)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=K(K({},s.interpolation),this.options.interpolation)),i.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=i.keySeparator),i.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=i.nsSeparator);function u(m){return m?typeof m=="function"?new m:m:null}if(!this.options.isClone){this.modules.logger?W.init(u(this.modules.logger),this.options):W.init(null,this.options);var f;this.modules.formatter?f=this.modules.formatter:typeof Intl<"u"&&(f=xa);var l=new It(this.options);this.store=new pa(this.options.resources,this.options);var c=this.services;c.logger=W,c.resourceStore=this.store,c.languageUtils=l,c.pluralResolver=new ba(l,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),f&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(c.formatter=u(f),c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new Oa(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new ka(u(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",function(m){for(var h=arguments.length,O=new Array(h>1?h-1:0),S=1;S<h;S++)O[S-1]=arguments[S];e.emit.apply(e,[m].concat(O))}),this.modules.languageDetector&&(c.languageDetector=u(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=u(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new At(this.services,this.options),this.translator.on("*",function(m){for(var h=arguments.length,O=new Array(h>1?h-1:0),S=1;S<h;S++)O[S-1]=arguments[S];e.emit.apply(e,[m].concat(O))}),this.modules.external.forEach(function(m){m.init&&m.init(e)})}if(this.format=this.options.interpolation.format,o||(o=Ne),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var p=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);p.length>0&&p[0]!=="dev"&&(this.options.lng=p[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var g=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];g.forEach(function(m){e[m]=function(){var h;return(h=e.store)[m].apply(h,arguments)}});var y=["addResource","addResources","addResourceBundle","removeResourceBundle"];y.forEach(function(m){e[m]=function(){var h;return(h=e.store)[m].apply(h,arguments),e}});var x=ve(),v=function(){var h=function(S,P){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),x.resolve(P),o(S,P)};if(e.languages&&e.options.compatibilityAPI!=="v1"&&!e.isInitialized)return h(null,e.t.bind(e));e.changeLanguage(e.options.lng,h)};return this.options.resources||!this.options.initImmediate?v():setTimeout(v,0),x}},{key:"loadResources",value:function(e){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ne,s=o,u=typeof e=="string"?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if(u&&u.toLowerCase()==="cimode")return s();var f=[],l=function(g){if(!!g){var y=i.services.languageUtils.toResolveHierarchy(g);y.forEach(function(x){f.indexOf(x)<0&&f.push(x)})}};if(u)l(u);else{var c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.forEach(function(p){return l(p)})}this.options.preload&&this.options.preload.forEach(function(p){return l(p)}),this.services.backendConnector.load(f,this.options.ns,function(p){!p&&!i.resolvedLanguage&&i.language&&i.setResolvedLanguage(i.language),s(p)})}else s(null)}},{key:"reloadResources",value:function(e,i,o){var s=ve();return e||(e=this.languages),i||(i=this.options.ns),o||(o=Ne),this.services.backendConnector.reload(e,i,function(u){s.resolve(),o(u)}),s}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&on.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}},{key:"setResolvedLanguage",value:function(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(var i=0;i<this.languages.length;i++){var o=this.languages[i];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}},{key:"changeLanguage",value:function(e,i){var o=this;this.isLanguageChangingTo=e;var s=ve();this.emit("languageChanging",e);var u=function(p){o.language=p,o.languages=o.services.languageUtils.toResolveHierarchy(p),o.resolvedLanguage=void 0,o.setResolvedLanguage(p)},f=function(p,g){g?(u(g),o.translator.changeLanguage(g),o.isLanguageChangingTo=void 0,o.emit("languageChanged",g),o.logger.log("languageChanged",g)):o.isLanguageChangingTo=void 0,s.resolve(function(){return o.t.apply(o,arguments)}),i&&i(p,function(){return o.t.apply(o,arguments)})},l=function(p){!e&&!p&&o.services.languageDetector&&(p=[]);var g=typeof p=="string"?p:o.services.languageUtils.getBestMatchFromCodes(p);g&&(o.language||u(g),o.translator.language||o.translator.changeLanguage(g),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage&&o.services.languageDetector.cacheUserLanguage(g)),o.loadResources(g,function(y){f(y,g)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),s}},{key:"getFixedT",value:function(e,i,o){var s=this,u=function f(l,c){var p;if(B(c)!=="object"){for(var g=arguments.length,y=new Array(g>2?g-2:0),x=2;x<g;x++)y[x-2]=arguments[x];p=s.options.overloadTranslationOptionHandler([l,c].concat(y))}else p=K({},c);p.lng=p.lng||f.lng,p.lngs=p.lngs||f.lngs,p.ns=p.ns||f.ns,p.keyPrefix=p.keyPrefix||o||f.keyPrefix;var v=s.options.keySeparator||".",m=p.keyPrefix?"".concat(p.keyPrefix).concat(v).concat(l):l;return s.t(m,p)};return typeof e=="string"?u.lng=e:u.lngs=e,u.ns=i,u.keyPrefix=o,u}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var s=this.resolvedLanguage||this.languages[0],u=this.options?this.options.fallbackLng:!1,f=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;var l=function(g,y){var x=i.services.backendConnector.state["".concat(g,"|").concat(y)];return x===-1||x===2};if(o.precheck){var c=o.precheck(this,l);if(c!==void 0)return c}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(s,e)&&(!u||l(f,e)))}},{key:"loadNamespaces",value:function(e,i){var o=this,s=ve();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(function(u){o.options.ns.indexOf(u)<0&&o.options.ns.push(u)}),this.loadResources(function(u){s.resolve(),i&&i(u)}),s):(i&&i(),Promise.resolve())}},{key:"loadLanguages",value:function(e,i){var o=ve();typeof e=="string"&&(e=[e]);var s=this.options.preload||[],u=e.filter(function(f){return s.indexOf(f)<0});return u.length?(this.options.preload=s.concat(u),this.loadResources(function(f){o.resolve(),i&&i(f)}),o):(i&&i(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";var i=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=this.services&&this.services.languageUtils||new It(_t());return i.indexOf(o.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ne,s=K(K(K({},this.options),i),{isClone:!0}),u=new r(s);(i.debug!==void 0||i.prefix!==void 0)&&(u.logger=u.logger.clone(i));var f=["store","services","language"];return f.forEach(function(l){u[l]=e[l]}),u.services=K({},this.services),u.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u.translator=new At(u.services,u.options),u.translator.on("*",function(l){for(var c=arguments.length,p=new Array(c>1?c-1:0),g=1;g<c;g++)p[g-1]=arguments[g];u.emit.apply(u,[l].concat(p))}),u.init(s,o),u.translator.options=u.options,u.translator.backendConnector.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),r}(ne);H(Me,"createInstance",function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Me(t,n)});var A=Me.createInstance();A.createInstance=Me.createInstance;A.createInstance;A.dir;A.init;A.loadResources;A.reloadResources;A.use;A.changeLanguage;A.getFixedT;A.t;A.exists;A.setDefaultNamespace;A.hasLoadedNamespace;A.loadNamespaces;A.loadLanguages;const Ea={},La={currentMirror:"你正在浏览 <1>{{mirror}}</1> 镜像"},Ta="关于",Aa="贡献者",Ia={NavMenuFooter:La,About:Ta,"Contribution Wiki":"贡献者指南",Contributors:Aa,"Core contributors":"核心贡献者","Open in new Workspace":"在新 Workspace 中打开","Resource contributors":"资源贡献者","Resource Administrator":"资源管理员","Select an app to start your own rail map design!":"选择一个应用程序来开始你的线路图设计！","Switch to":"切换至","Terms and conditions":"条款与细则","Visit GitHub":"访问 GitHub","Welcome to RMG":"欢迎使用 RMG"},Ma={currentMirror:"你正在瀏覽 <1>{{mirror}}</1> 鏡像"},Da="關於",za="貢獻者",Fa={NavMenuFooter:Ma,About:Da,"Contribution Wiki":"貢獻者指南",Contributors:za,"Core contributors":"主要貢獻者","Open in new Workspace":"在新 Workspace 中開啟","Resource contributors":"資源貢獻者","Resource Administrator":"資源管理員","Select an app to start your own rail map design!":"選擇一個應用程式以開始你的路綫圖設計！","Switch to":"切換至","Terms and conditions":"條款及細則","Visit GitHub":"造訪 GitHub","Welcome to RMG":"歡迎使用 RMG"},Ha=new Zr.Builder().withResource("en",Ea).withResource("zh-Hans",Ia).withResource("zh-Hant",Fa).build();A.use(rr).init({lng:z.getLanguage(),fallbackLng:{[E.ChineseCN]:[E.ChineseSimp,E.English],[E.ChineseHK]:[E.ChineseTrad,E.English],[E.ChineseTW]:[E.ChineseTrad,E.English],[E.ChineseTrad]:[E.ChineseHK,E.ChineseTW,E.English],default:[E.English]},resources:Ha}).then(()=>{document.documentElement.lang=A.language});const sn=t=>{A.changeLanguage(t).then(),document.documentElement.lang=t};z.onLanguageChange(sn);const _a={flexDirection:"column","& h5":{mx:1,my:2},"& > div":{px:2}};function Ba(){const{t}=V(),n=[{type:"select",label:t("Language"),value:z.getLanguage(),options:{[E.English]:"English",[E.ChineseSimp]:"简体中文",[E.ChineseTrad]:"繁體中文"},onChange:r=>{const a=r;z.setLanguage(a),sn(a),z.event(be.CHANGE_LANGUAGE,{language:a})}}];return b(Y,{sx:_a,children:[d(pe,{as:"h5",size:"sm",children:t("Settings")}),d(qe,{children:d(Sn,{fields:n})})]})}function $a(t){const{isOpen:n,onClose:r}=t,{t:a}=V(),e=Vt("primary.500","primary.300");return b(Qe,{isOpen:n,onClose:r,size:"xl",scrollBehavior:"inside",children:[d(Xe,{}),b(Ze,{children:[d(et,{children:a("Terms and conditions")}),d(tt,{}),d(nt,{children:b(Pn,{children:[b(se,{children:["The layout of the elements on the signage or rail map, is designed by"," ",b(I,{color:e,href:"https://www.gzmtr.com/",isExternal:!0,children:["Guangzhou Metro Group ",d(M,{as:T})]}),", ",b(I,{color:e,href:"https://www.mtr.com.hk/",isExternal:!0,children:["MTR Corporation ",d(M,{as:T})]})," or ",b(I,{color:e,href:"https://www.shmetro.com/",isExternal:!0,children:["Shanghai Shentong Metro Group ",d(M,{as:T})]}),", depending on your selection. You shall grant appropriate permit or license from the relevant company above before using the generated images for commercial purposes, if it is required to do so.",d("br",{}),"標誌版或路線圖之元素之佈局，基於你所選擇之風格，為",b(I,{color:e,href:"https://www.gzmtr.com/",isExternal:!0,children:["廣州地鐵集團公司 ",d(M,{as:T})]}),"，",b(I,{color:e,href:"https://www.mtr.com.hk/",isExternal:!0,children:["港鐵公司 ",d(M,{as:T})]}),"或",b(I,{color:e,href:"https://www.shmetro.com/",isExternal:!0,children:["上海申通地鐵集團 ",d(M,{as:T})]}),"所設計。在產生之圖像用作商業用途前，你應向相關公司取得適當之許可證或授權。"]}),b(se,{children:["The elements including shapes and lines on the image are drawn by"," ",b(I,{color:e,href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",d(M,{as:T})]})," and ",b(I,{color:e,href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",d(M,{as:T})]}),", based on the design standards or rules of the companies listed above. You may use them for any purposes, but it is recommended to state the name and the link of software alongside.",d("br",{}),"圖像之元素，包括圖形及線條，均由",b(I,{color:e,href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",d(M,{as:T})]}),"及",b(I,{color:e,href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",d(M,{as:T})]}),"基於上述公司之設計標準或準則繪製。你可將其用於任何目的，但我們建議你於使用同時附以我們之名字以及該軟件之連結。"]}),b(se,{children:["Due to copyright, licensing and other legal restrictions, Rail Map Generator uses"," ",b(I,{color:e,href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["GenYoMin provided by ButTaiwan ",d(M,{as:T})]}),", and Vegur instead of MTRSung and Myriad Pro respectively to display and generate MTR-style signage. You shall grant appropriate permit or license from the manufacturers before using those generated images for commercial purposes.",d("br",{}),"由於著作權及其他法律限制，鐵路路線圖產生器使用",b(I,{color:e,href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["由ButTaiwan提供之源樣明體 ",d(M,{as:T})]}),"，以及Vegur，以代替港鐵樣式標誌牌所使用之地鐵宋及Myriad Pro。在產生之圖像用作商業用途前，你應向字型生產廠商取得適當之許可證或授權。"]}),b(se,{children:["The exported images in PNG or SVG format may be modified, published, or used for other purposes, under the conditions above.",d("br",{}),"輸出之PNG或SVG種類之圖像可基於上述條款，用於修改、發行或其他用途。"]}),b(se,{children:["All flag emojis shown on Windows platforms are designed by"," ",b(I,{color:e,href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",d(M,{as:T})]})," ","– the open-source emoji and icon project. License:",b(I,{color:e,href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",d(M,{as:T})]}),d("br",{}),"於Windows作業系統上顯示之旗幟Emoji為",b(I,{color:e,href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",d(M,{as:T})]}),"所設計。許可證：",b(I,{color:e,href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",d(M,{as:T})]})]}),b(se,{children:["We reserve the rights, without prior notice, to modify, add, or remove these terms. The Chinese translation is for reference only. In case of any discrepancy between the English version and the Chinese version, the English version shall prevail.",d("br",{}),"我們保留修改、新增或移除上述條款之權利，而無需另行通知。中文譯本僅供參考，文義如與英文有歧異，概以英文本為準。"]})]})}),d(rt,{children:d(De,{colorScheme:"teal",onClick:()=>window.open("https://github.com/railmapgen/rmg","_blank"),children:a("Visit GitHub")})})]})]})}const Ua=["52PD","linchen1965"],Va=["jealousyge","Jay20081229","clearng-kly","Dingdong2334","C1P918R","AnDanJuneUnderline","GrassRabbit1410","xiany114514","Andy1782010","Thomastzc","Tianxiu11111"];function Ka(t){const{isOpen:n,onClose:r}=t,{t:a}=V();return b(Qe,{isOpen:n,onClose:r,size:"xl",scrollBehavior:"inside",children:[d(Xe,{}),b(Ze,{children:[d(et,{children:a("Contributors")}),d(tt,{}),b(nt,{children:[d(pe,{as:"h6",size:"xs",my:1,children:a("Core contributors")}),b(Ut,{children:[b(ke,{size:"lg",minW:"80%",onClick:()=>window.open("https://github.com/wongchito","_blank"),cursor:"pointer",children:[d(Ce,{src:"https://github.com/wongchito.png",size:"lg",my:2,ml:-1,mr:2}),b(ue,{display:"block",children:[d(J,{fontSize:"lg",fontWeight:"bold",mb:1,children:"Chito Wong"}),d(J,{fontSize:"sm",children:"Project initiator"}),d(J,{fontSize:"sm",children:"Author of MTR and Guangzhou Metro styles"})]})]}),b(ke,{size:"lg",minW:"80%",onClick:()=>window.open("https://github.com/thekingofcity","_blank"),cursor:"pointer",children:[d(Ce,{src:"https://github.com/thekingofcity.png",size:"lg",my:2,ml:-1,mr:2}),b(ue,{display:"block",children:[d(J,{fontSize:"lg",fontWeight:"bold",mb:1,children:"thekingofcity"}),d(J,{fontSize:"sm",children:"Author of Shanghai Metro style"}),d(J,{fontSize:"sm",children:"Desktop version (Electron) maintainer"})]})]})]}),d(pe,{as:"h6",size:"xs",my:1,children:a("Resource contributors")}),b(Y,{wrap:"wrap",children:[Ua.map(e=>b(ke,{size:"lg",mb:1,mr:1,flex:"100%",onClick:()=>window.open(`https://github.com/railmapgen/rmg/issues?q=is:issue+author:${e}`,"_blank"),cursor:"pointer",children:[d(Ce,{src:`https://github.com/${e}.png`,size:"xs",ml:-1,mr:2}),d(ue,{children:e}),d(ue,{flexGrow:1}),d(ue,{children:d(J,{fontSize:"sm",children:a("Resource Administrator")})})]},e)),Va.map(e=>b(ke,{size:"lg",mb:1,mr:1,onClick:()=>window.open(`https://github.com/railmapgen/rmg/issues?q=is:issue+author:${e}`,"_blank"),cursor:"pointer",children:[d(Ce,{src:`https://github.com/${e}.png`,size:"xs",ml:-1,mr:2}),d(ue,{children:e})]},e))]})]}),d(rt,{children:d(De,{colorScheme:"primary",onClick:()=>window.open("https://github.com/railmapgen/rmg/wiki/How-to-add-color-palette-and-line-templates","_blank"),children:a("Contribution Wiki")})})]})]})}function Wa(){const{t}=V(),n=Vt("primary.500","primary.300"),[r,a]=k.exports.useState(!1),[e,i]=k.exports.useState(!1),o=z.getInstance(),s=o===Ve.GITHUB?Ve.GITLAB:Ve.GITHUB,u=gt[o],f=()=>{const l=Dn(s,z.getEnv());window.open(l,"_blank"),z.event(be.SWITCH_MIRROR,{mirrorUrl:l})};return b(Y,{direction:"column",children:[b(J,{fontSize:"sm",textAlign:"center",width:"100%",children:[b(sr,{i18nKey:"NavMenuFooter.currentMirror",mirror:u,children:["You're on ",{mirror:u}," mirror"]}),d("br",{}),t("Switch to")+" ",b(I,{color:n,onClick:f,children:[gt[s]," ",d(M,{as:T})]})]}),d(jn,{}),b(kn,{justifyContent:"center",children:[d(Le,{variant:"ghost",size:"sm","aria-label":t("Contributor"),title:t("Contributor"),icon:d(wr,{}),onClick:()=>a(!0)}),d(Le,{variant:"ghost",size:"sm","aria-label":t("Terms and conditions"),title:t("Terms and conditions"),icon:d(vr,{}),onClick:()=>i(!0)})]}),d(Ka,{isOpen:r,onClose:()=>a(!1)}),d($a,{isOpen:e,onClose:()=>i(!1)})]})}const Ga={flexShrink:0,flexDirection:"column",overflow:"hidden",alignItems:"flex-end",transition:"0.3s ease-in-out",maxW:0,visibility:"hidden",boxShadow:"lg",zIndex:100,".show-menu &":{maxW:{base:"100%",sm:320},w:{base:"100%",sm:"unset"},visibility:"initial"},"& > div":{flexDirection:"column",h:"100%",w:{base:"100vw",sm:320},"& > div:nth-of-type(1)":{flex:0,flexDirection:"row",alignItems:"center",minHeight:10,pl:12},"& > div:nth-of-type(2)":{flexDirection:"column",flex:1,overflowY:"auto"}}};function Ja(){const{t}=V();return d(Y,{as:"section",sx:Ga,children:b(Y,{children:[b(Y,{children:[d(pe,{as:"h4",size:"md",children:t("RMG Home")}),d(Cn,{environment:z.getEnv(),version:z.getAppVersion()})]}),b(Y,{children:[d(Cr,{}),d(Ba,{})]}),d(Wa,{})]})})}function Qa(){const{t}=V(),n=at(),r=Kt(e=>e.app.isShowMenu),a=()=>{n(Wt()),z.event(be.TOGGLE_NAV_MENU,{})};return b(Rn,{className:r?"show-menu":"",children:[d(Le,{variant:"ghost",size:"md","aria-label":t("Toggle menu"),title:t("Toggle menu"),icon:d(br,{}),position:"absolute",zIndex:110,onClick:a}),b(Nn,{sx:{flexDirection:"row"},children:[d(Ja,{}),d(hr,{})]})]})}export{Qa as default};
